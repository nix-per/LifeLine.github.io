(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function t(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=t(l);fetch(l.href,u)}})();function Gw(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var lg={exports:{}},Zu={};var Db;function sN(){if(Db)return Zu;Db=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var y in l)y!=="key"&&(u[y]=l[y])}else u=l;return l=u.ref,{$$typeof:i,type:r,key:d,ref:l!==void 0?l:null,props:u}}return Zu.Fragment=e,Zu.jsx=t,Zu.jsxs=t,Zu}var jb;function rN(){return jb||(jb=1,lg.exports=sN()),lg.exports}var f=rN(),cg={exports:{}},$e={};var Pb;function aN(){if(Pb)return $e;Pb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),R=Symbol.iterator;function M(B){return B===null||typeof B!="object"?null:(B=R&&B[R]||B["@@iterator"],typeof B=="function"?B:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,Y={};function ce(B,le,ve){this.props=B,this.context=le,this.refs=Y,this.updater=ve||G}ce.prototype.isReactComponent={},ce.prototype.setState=function(B,le){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,le,"setState")},ce.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function ae(){}ae.prototype=ce.prototype;function se(B,le,ve){this.props=B,this.context=le,this.refs=Y,this.updater=ve||G}var ke=se.prototype=new ae;ke.constructor=se,K(ke,ce.prototype),ke.isPureReactComponent=!0;var be=Array.isArray;function Ne(){}var P={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function O(B,le,ve){var ye=ve.ref;return{$$typeof:i,type:B,key:le,ref:ye!==void 0?ye:null,props:ve}}function q(B,le){return O(B.type,le,B.props)}function U(B){return typeof B=="object"&&B!==null&&B.$$typeof===i}function Z(B){var le={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ve){return le[ve]})}var z=/\/+/g;function We(B,le){return typeof B=="object"&&B!==null&&B.key!=null?Z(""+B.key):le.toString(36)}function At(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(Ne,Ne):(B.status="pending",B.then(function(le){B.status==="pending"&&(B.status="fulfilled",B.value=le)},function(le){B.status==="pending"&&(B.status="rejected",B.reason=le)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function re(B,le,ve,ye,Se){var Ae=typeof B;(Ae==="undefined"||Ae==="boolean")&&(B=null);var ie=!1;if(B===null)ie=!0;else switch(Ae){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(B.$$typeof){case i:case e:ie=!0;break;case S:return ie=B._init,re(ie(B._payload),le,ve,ye,Se)}}if(ie)return Se=Se(B),ie=ye===""?"."+We(B,0):ye,be(Se)?(ve="",ie!=null&&(ve=ie.replace(z,"$&/")+"/"),re(Se,le,ve,"",function(xe){return xe})):Se!=null&&(U(Se)&&(Se=q(Se,ve+(Se.key==null||B&&B.key===Se.key?"":(""+Se.key).replace(z,"$&/")+"/")+ie)),le.push(Se)),1;ie=0;var Ue=ye===""?".":ye+":";if(be(B))for(var qe=0;qe<B.length;qe++)ye=B[qe],Ae=Ue+We(ye,qe),ie+=re(ye,le,ve,Ae,Se);else if(qe=M(B),typeof qe=="function")for(B=qe.call(B),qe=0;!(ye=B.next()).done;)ye=ye.value,Ae=Ue+We(ye,qe++),ie+=re(ye,le,ve,Ae,Se);else if(Ae==="object"){if(typeof B.then=="function")return re(At(B),le,ve,ye,Se);throw le=String(B),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return ie}function ue(B,le,ve){if(B==null)return B;var ye=[],Se=0;return re(B,ye,"","",function(Ae){return le.call(ve,Ae,Se++)}),ye}function _e(B){if(B._status===-1){var le=B._result;le=le(),le.then(function(ve){(B._status===0||B._status===-1)&&(B._status=1,B._result=ve)},function(ve){(B._status===0||B._status===-1)&&(B._status=2,B._result=ve)}),B._status===-1&&(B._status=0,B._result=le)}if(B._status===1)return B._result.default;throw B._result}var Ye=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Ee={map:ue,forEach:function(B,le,ve){ue(B,function(){le.apply(this,arguments)},ve)},count:function(B){var le=0;return ue(B,function(){le++}),le},toArray:function(B){return ue(B,function(le){return le})||[]},only:function(B){if(!U(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return $e.Activity=A,$e.Children=Ee,$e.Component=ce,$e.Fragment=t,$e.Profiler=l,$e.PureComponent=se,$e.StrictMode=r,$e.Suspense=v,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,$e.__COMPILER_RUNTIME={__proto__:null,c:function(B){return P.H.useMemoCache(B)}},$e.cache=function(B){return function(){return B.apply(null,arguments)}},$e.cacheSignal=function(){return null},$e.cloneElement=function(B,le,ve){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ye=K({},B.props),Se=B.key;if(le!=null)for(Ae in le.key!==void 0&&(Se=""+le.key),le)!j.call(le,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&le.ref===void 0||(ye[Ae]=le[Ae]);var Ae=arguments.length-2;if(Ae===1)ye.children=ve;else if(1<Ae){for(var ie=Array(Ae),Ue=0;Ue<Ae;Ue++)ie[Ue]=arguments[Ue+2];ye.children=ie}return O(B.type,Se,ye)},$e.createContext=function(B){return B={$$typeof:d,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:u,_context:B},B},$e.createElement=function(B,le,ve){var ye,Se={},Ae=null;if(le!=null)for(ye in le.key!==void 0&&(Ae=""+le.key),le)j.call(le,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(Se[ye]=le[ye]);var ie=arguments.length-2;if(ie===1)Se.children=ve;else if(1<ie){for(var Ue=Array(ie),qe=0;qe<ie;qe++)Ue[qe]=arguments[qe+2];Se.children=Ue}if(B&&B.defaultProps)for(ye in ie=B.defaultProps,ie)Se[ye]===void 0&&(Se[ye]=ie[ye]);return O(B,Ae,Se)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(B){return{$$typeof:y,render:B}},$e.isValidElement=U,$e.lazy=function(B){return{$$typeof:S,_payload:{_status:-1,_result:B},_init:_e}},$e.memo=function(B,le){return{$$typeof:b,type:B,compare:le===void 0?null:le}},$e.startTransition=function(B){var le=P.T,ve={};P.T=ve;try{var ye=B(),Se=P.S;Se!==null&&Se(ve,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(Ne,Ye)}catch(Ae){Ye(Ae)}finally{le!==null&&ve.types!==null&&(le.types=ve.types),P.T=le}},$e.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},$e.use=function(B){return P.H.use(B)},$e.useActionState=function(B,le,ve){return P.H.useActionState(B,le,ve)},$e.useCallback=function(B,le){return P.H.useCallback(B,le)},$e.useContext=function(B){return P.H.useContext(B)},$e.useDebugValue=function(){},$e.useDeferredValue=function(B,le){return P.H.useDeferredValue(B,le)},$e.useEffect=function(B,le){return P.H.useEffect(B,le)},$e.useEffectEvent=function(B){return P.H.useEffectEvent(B)},$e.useId=function(){return P.H.useId()},$e.useImperativeHandle=function(B,le,ve){return P.H.useImperativeHandle(B,le,ve)},$e.useInsertionEffect=function(B,le){return P.H.useInsertionEffect(B,le)},$e.useLayoutEffect=function(B,le){return P.H.useLayoutEffect(B,le)},$e.useMemo=function(B,le){return P.H.useMemo(B,le)},$e.useOptimistic=function(B,le){return P.H.useOptimistic(B,le)},$e.useReducer=function(B,le,ve){return P.H.useReducer(B,le,ve)},$e.useRef=function(B){return P.H.useRef(B)},$e.useState=function(B){return P.H.useState(B)},$e.useSyncExternalStore=function(B,le,ve){return P.H.useSyncExternalStore(B,le,ve)},$e.useTransition=function(){return P.H.useTransition()},$e.version="19.2.4",$e}var Lb;function v_(){return Lb||(Lb=1,cg.exports=aN()),cg.exports}var k=v_();const yf=Gw(k);var ug={exports:{}},Ku={},hg={exports:{}},dg={};var Ob;function oN(){return Ob||(Ob=1,(function(i){function e(re,ue){var _e=re.length;re.push(ue);e:for(;0<_e;){var Ye=_e-1>>>1,Ee=re[Ye];if(0<l(Ee,ue))re[Ye]=ue,re[_e]=Ee,_e=Ye;else break e}}function t(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var ue=re[0],_e=re.pop();if(_e!==ue){re[0]=_e;e:for(var Ye=0,Ee=re.length,B=Ee>>>1;Ye<B;){var le=2*(Ye+1)-1,ve=re[le],ye=le+1,Se=re[ye];if(0>l(ve,_e))ye<Ee&&0>l(Se,ve)?(re[Ye]=Se,re[ye]=_e,Ye=ye):(re[Ye]=ve,re[le]=_e,Ye=le);else if(ye<Ee&&0>l(Se,_e))re[Ye]=Se,re[ye]=_e,Ye=ye;else break e}}return ue}function l(re,ue){var _e=re.sortIndex-ue.sortIndex;return _e!==0?_e:re.id-ue.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,y=d.now();i.unstable_now=function(){return d.now()-y}}var v=[],b=[],S=1,A=null,R=3,M=!1,G=!1,K=!1,Y=!1,ce=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function ke(re){for(var ue=t(b);ue!==null;){if(ue.callback===null)r(b);else if(ue.startTime<=re)r(b),ue.sortIndex=ue.expirationTime,e(v,ue);else break;ue=t(b)}}function be(re){if(K=!1,ke(re),!G)if(t(v)!==null)G=!0,Ne||(Ne=!0,Z());else{var ue=t(b);ue!==null&&At(be,ue.startTime-re)}}var Ne=!1,P=-1,j=5,O=-1;function q(){return Y?!0:!(i.unstable_now()-O<j)}function U(){if(Y=!1,Ne){var re=i.unstable_now();O=re;var ue=!0;try{e:{G=!1,K&&(K=!1,ae(P),P=-1),M=!0;var _e=R;try{t:{for(ke(re),A=t(v);A!==null&&!(A.expirationTime>re&&q());){var Ye=A.callback;if(typeof Ye=="function"){A.callback=null,R=A.priorityLevel;var Ee=Ye(A.expirationTime<=re);if(re=i.unstable_now(),typeof Ee=="function"){A.callback=Ee,ke(re),ue=!0;break t}A===t(v)&&r(v),ke(re)}else r(v);A=t(v)}if(A!==null)ue=!0;else{var B=t(b);B!==null&&At(be,B.startTime-re),ue=!1}}break e}finally{A=null,R=_e,M=!1}ue=void 0}}finally{ue?Z():Ne=!1}}}var Z;if(typeof se=="function")Z=function(){se(U)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,We=z.port2;z.port1.onmessage=U,Z=function(){We.postMessage(null)}}else Z=function(){ce(U,0)};function At(re,ue){P=ce(function(){re(i.unstable_now())},ue)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(re){re.callback=null},i.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<re?Math.floor(1e3/re):5},i.unstable_getCurrentPriorityLevel=function(){return R},i.unstable_next=function(re){switch(R){case 1:case 2:case 3:var ue=3;break;default:ue=R}var _e=R;R=ue;try{return re()}finally{R=_e}},i.unstable_requestPaint=function(){Y=!0},i.unstable_runWithPriority=function(re,ue){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var _e=R;R=re;try{return ue()}finally{R=_e}},i.unstable_scheduleCallback=function(re,ue,_e){var Ye=i.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Ye+_e:Ye):_e=Ye,re){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=_e+Ee,re={id:S++,callback:ue,priorityLevel:re,startTime:_e,expirationTime:Ee,sortIndex:-1},_e>Ye?(re.sortIndex=_e,e(b,re),t(v)===null&&re===t(b)&&(K?(ae(P),P=-1):K=!0,At(be,_e-Ye))):(re.sortIndex=Ee,e(v,re),G||M||(G=!0,Ne||(Ne=!0,Z()))),re},i.unstable_shouldYield=q,i.unstable_wrapCallback=function(re){var ue=R;return function(){var _e=R;R=ue;try{return re.apply(this,arguments)}finally{R=_e}}}})(dg)),dg}var Mb;function lN(){return Mb||(Mb=1,hg.exports=oN()),hg.exports}var fg={exports:{}},Xn={};var Vb;function cN(){if(Vb)return Xn;Vb=1;var i=v_();function e(v){var b="https://react.dev/errors/"+v;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)b+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+v+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(v,b,S){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:A==null?null:""+A,children:v,containerInfo:b,implementation:S}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(v,b){if(v==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return Xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Xn.createPortal=function(v,b){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(e(299));return u(v,b,null,S)},Xn.flushSync=function(v){var b=d.T,S=r.p;try{if(d.T=null,r.p=2,v)return v()}finally{d.T=b,r.p=S,r.d.f()}},Xn.preconnect=function(v,b){typeof v=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,r.d.C(v,b))},Xn.prefetchDNS=function(v){typeof v=="string"&&r.d.D(v)},Xn.preinit=function(v,b){if(typeof v=="string"&&b&&typeof b.as=="string"){var S=b.as,A=y(S,b.crossOrigin),R=typeof b.integrity=="string"?b.integrity:void 0,M=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;S==="style"?r.d.S(v,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:A,integrity:R,fetchPriority:M}):S==="script"&&r.d.X(v,{crossOrigin:A,integrity:R,fetchPriority:M,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},Xn.preinitModule=function(v,b){if(typeof v=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var S=y(b.as,b.crossOrigin);r.d.M(v,{crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&r.d.M(v)},Xn.preload=function(v,b){if(typeof v=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var S=b.as,A=y(S,b.crossOrigin);r.d.L(v,S,{crossOrigin:A,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},Xn.preloadModule=function(v,b){if(typeof v=="string")if(b){var S=y(b.as,b.crossOrigin);r.d.m(v,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else r.d.m(v)},Xn.requestFormReset=function(v){r.d.r(v)},Xn.unstable_batchedUpdates=function(v,b){return v(b)},Xn.useFormState=function(v,b,S){return d.H.useFormState(v,b,S)},Xn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Xn.version="19.2.4",Xn}var zb;function Zw(){if(zb)return fg.exports;zb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),fg.exports=cN(),fg.exports}var Ub;function uN(){if(Ub)return Ku;Ub=1;var i=lN(),e=v_(),t=Zw();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function d(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function y(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function v(n){if(u(n)!==n)throw Error(r(188))}function b(n){var s=n.alternate;if(!s){if(s=u(n),s===null)throw Error(r(188));return s!==n?null:n}for(var o=n,h=s;;){var g=o.return;if(g===null)break;var _=g.alternate;if(_===null){if(h=g.return,h!==null){o=h;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===o)return v(g),n;if(_===h)return v(g),s;_=_.sibling}throw Error(r(188))}if(o.return!==h.return)o=g,h=_;else{for(var T=!1,I=g.child;I;){if(I===o){T=!0,o=g,h=_;break}if(I===h){T=!0,h=g,o=_;break}I=I.sibling}if(!T){for(I=_.child;I;){if(I===o){T=!0,o=_,h=g;break}if(I===h){T=!0,h=_,o=g;break}I=I.sibling}if(!T)throw Error(r(189))}}if(o.alternate!==h)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:s}function S(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=S(n),s!==null)return s;n=n.sibling}return null}var A=Object.assign,R=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),ce=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),se=Symbol.for("react.context"),ke=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function Z(n){return n===null||typeof n!="object"?null:(n=U&&n[U]||n["@@iterator"],typeof n=="function"?n:null)}var z=Symbol.for("react.client.reference");function We(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===z?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case K:return"Fragment";case ce:return"Profiler";case Y:return"StrictMode";case be:return"Suspense";case Ne:return"SuspenseList";case O:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case G:return"Portal";case se:return n.displayName||"Context";case ae:return(n._context.displayName||"Context")+".Consumer";case ke:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case P:return s=n.displayName||null,s!==null?s:We(n.type)||"Memo";case j:s=n._payload,n=n._init;try{return We(n(s))}catch{}}return null}var At=Array.isArray,re=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Ye=[],Ee=-1;function B(n){return{current:n}}function le(n){0>Ee||(n.current=Ye[Ee],Ye[Ee]=null,Ee--)}function ve(n,s){Ee++,Ye[Ee]=n.current,n.current=s}var ye=B(null),Se=B(null),Ae=B(null),ie=B(null);function Ue(n,s){switch(ve(Ae,s),ve(Se,n),ve(ye,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?tb(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=tb(s),n=nb(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}le(ye),ve(ye,n)}function qe(){le(ye),le(Se),le(Ae)}function xe(n){n.memoizedState!==null&&ve(ie,n);var s=ye.current,o=nb(s,n.type);s!==o&&(ve(Se,n),ve(ye,o))}function De(n){Se.current===n&&(le(ye),le(Se)),ie.current===n&&(le(ie),Hu._currentValue=_e)}var rt,Ln;function ii(n){if(rt===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);rt=s&&s[1]||"",Ln=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rt+n+Ln}var Is=!1;function Li(n,s){if(!n||Is)return"";Is=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(s){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(oe){var te=oe}Reflect.construct(n,[],me)}else{try{me.call()}catch(oe){te=oe}n.call(me.prototype)}}else{try{throw Error()}catch(oe){te=oe}(me=n())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(oe){if(oe&&te&&typeof oe.stack=="string")return[oe.stack,te.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=h.DetermineComponentFrameRoot(),T=_[0],I=_[1];if(T&&I){var H=T.split(`
`),J=I.split(`
`);for(g=h=0;h<H.length&&!H[h].includes("DetermineComponentFrameRoot");)h++;for(;g<J.length&&!J[g].includes("DetermineComponentFrameRoot");)g++;if(h===H.length||g===J.length)for(h=H.length-1,g=J.length-1;1<=h&&0<=g&&H[h]!==J[g];)g--;for(;1<=h&&0<=g;h--,g--)if(H[h]!==J[g]){if(h!==1||g!==1)do if(h--,g--,0>g||H[h]!==J[g]){var he=`
`+H[h].replace(" at new "," at ");return n.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",n.displayName)),he}while(1<=h&&0<=g);break}}}finally{Is=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?ii(o):""}function ns(n,s){switch(n.tag){case 26:case 27:case 5:return ii(n.type);case 16:return ii("Lazy");case 13:return n.child!==s&&s!==null?ii("Suspense Fallback"):ii("Suspense");case 19:return ii("SuspenseList");case 0:case 15:return Li(n.type,!1);case 11:return Li(n.type.render,!1);case 1:return Li(n.type,!0);case 31:return ii("Activity");default:return""}}function ks(n){try{var s="",o=null;do s+=ns(n,o),o=n,n=n.return;while(n);return s}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Kt=Object.prototype.hasOwnProperty,en=i.unstable_scheduleCallback,is=i.unstable_cancelCallback,Hl=i.unstable_shouldYield,Oo=i.unstable_requestPaint,On=i.unstable_now,Pr=i.unstable_getCurrentPriorityLevel,Lr=i.unstable_ImmediatePriority,Na=i.unstable_UserBlockingPriority,Ds=i.unstable_NormalPriority,ou=i.unstable_LowPriority,Mo=i.unstable_IdlePriority,Vo=i.log,ql=i.unstable_setDisableYieldValue,fi=null,ln=null;function si(n){if(typeof Vo=="function"&&ql(n),ln&&typeof ln.setStrictMode=="function")try{ln.setStrictMode(fi,n)}catch{}}var Yt=Math.clz32?Math.clz32:Fl,er=Math.log,Ca=Math.LN2;function Fl(n){return n>>>=0,n===0?32:31-(er(n)/Ca|0)|0}var Oi=256,tr=262144,$t=4194304;function ss(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function rs(n,s,o){var h=n.pendingLanes;if(h===0)return 0;var g=0,_=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var I=h&134217727;return I!==0?(h=I&~_,h!==0?g=ss(h):(T&=I,T!==0?g=ss(T):o||(o=I&~n,o!==0&&(g=ss(o))))):(I=h&~_,I!==0?g=ss(I):T!==0?g=ss(T):o||(o=h&~n,o!==0&&(g=ss(o)))),g===0?0:s!==0&&s!==g&&(s&_)===0&&(_=g&-g,o=s&-s,_>=o||_===32&&(o&4194048)!==0)?s:g}function Mi(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function lu(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gl(){var n=$t;return $t<<=1,($t&62914560)===0&&($t=4194304),n}function as(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function js(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function cu(n,s,o,h,g,_){var T=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var I=n.entanglements,H=n.expirationTimes,J=n.hiddenUpdates;for(o=T&~o;0<o;){var he=31-Yt(o),me=1<<he;I[he]=0,H[he]=-1;var te=J[he];if(te!==null)for(J[he]=null,he=0;he<te.length;he++){var oe=te[he];oe!==null&&(oe.lane&=-536870913)}o&=~me}h!==0&&Or(n,h,0),_!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=_&~(T&~s))}function Or(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var h=31-Yt(s);n.entangledLanes|=s,n.entanglements[h]=n.entanglements[h]|1073741824|o&261930}function zo(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var h=31-Yt(o),g=1<<h;g&s|n[h]&s&&(n[h]|=s),o&=~g}}function Uo(n,s){var o=s&-s;return o=(o&42)!==0?1:An(o),(o&(n.suspendedLanes|s))!==0?0:o}function An(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function je(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Bo(){var n=ue.p;return n!==0?n:(n=window.event,n===void 0?32:Sb(n.type))}function mi(n,s){var o=ue.p;try{return ue.p=n,s()}finally{ue.p=o}}var pi=Math.random().toString(36).slice(2),Qt="__reactFiber$"+pi,tn="__reactProps$"+pi,Vi="__reactContainer$"+pi,zi="__reactEvents$"+pi,Zl="__reactListeners$"+pi,Kl="__reactHandles$"+pi,Yl="__reactResources$"+pi,os="__reactMarker$"+pi;function Ra(n){delete n[Qt],delete n[tn],delete n[zi],delete n[Zl],delete n[Kl]}function Ui(n){var s=n[Qt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Vi]||o[Qt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=cb(n);n!==null;){if(o=n[Qt])return o;n=cb(n)}return s}n=o,o=n.parentNode}return null}function gi(n){if(n=n[Qt]||n[Vi]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Nn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function ls(n){var s=n[Yl];return s||(s=n[Yl]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function nn(n){n[os]=!0}var Ho=new Set,qo={};function cs(n,s){_i(n,s),_i(n+"Capture",s)}function _i(n,s){for(qo[n]=s,n=0;n<s.length;n++)Ho.add(s[n])}var Ps=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ia={},ka={};function nr(n){return Kt.call(ka,n)?!0:Kt.call(Ia,n)?!1:Ps.test(n)?ka[n]=!0:(Ia[n]=!0,!1)}function st(n,s,o){if(nr(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var h=s.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function at(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function zt(n,s,o,h){if(h===null)n.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+h)}}function Ut(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ri(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Mr(n,s,o){var h=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var g=h.get,_=h.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(T){o=""+T,_.call(this,T)}}),Object.defineProperty(n,s,{enumerable:h.enumerable}),{getValue:function(){return o},setValue:function(T){o=""+T},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Re(n){if(!n._valueTracker){var s=ri(n)?"checked":"value";n._valueTracker=Mr(n,s,""+n[s])}}function Nt(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),h="";return n&&(h=ri(n)?n.checked?"true":"false":n.value),n=h,n!==o?(s.setValue(n),!0):!1}function yi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var us=/[\n"\\]/g;function Pt(n){return n.replace(us,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Da(n,s,o,h,g,_,T,I){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),s!=null?T==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Ut(s)):n.value!==""+Ut(s)&&(n.value=""+Ut(s)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),s!=null?Bi(n,T,Ut(s)):o!=null?Bi(n,T,Ut(o)):h!=null&&n.removeAttribute("value"),g==null&&_!=null&&(n.defaultChecked=!!_),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?n.name=""+Ut(I):n.removeAttribute("name")}function Vr(n,s,o,h,g,_,T,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.type=_),s!=null||o!=null){if(!(_!=="submit"&&_!=="reset"||s!=null)){Re(n);return}o=o!=null?""+Ut(o):"",s=s!=null?""+Ut(s):o,I||s===n.value||(n.value=s),n.defaultValue=s}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,n.checked=I?n.checked:!!h,n.defaultChecked=!!h,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T),Re(n)}function Bi(n,s,o){s==="number"&&yi(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ct(n,s,o,h){if(n=n.options,s){s={};for(var g=0;g<o.length;g++)s["$"+o[g]]=!0;for(o=0;o<n.length;o++)g=s.hasOwnProperty("$"+n[o].value),n[o].selected!==g&&(n[o].selected=g),g&&h&&(n[o].defaultSelected=!0)}else{for(o=""+Ut(o),s=null,g=0;g<n.length;g++){if(n[g].value===o){n[g].selected=!0,h&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function hs(n,s,o){if(s!=null&&(s=""+Ut(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Ut(o):""}function vi(n,s,o,h){if(s==null){if(h!=null){if(o!=null)throw Error(r(92));if(At(h)){if(1<h.length)throw Error(r(93));h=h[0]}o=h}o==null&&(o=""),s=o}o=Ut(s),n.defaultValue=o,h=n.textContent,h===o&&h!==""&&h!==null&&(n.value=h),Re(n)}function mn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var ja=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ls(n,s,o){var h=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?h?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":h?n.setProperty(s,o):typeof o!="number"||o===0||ja.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function zr(n,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,o!=null){for(var h in o)!o.hasOwnProperty(h)||s!=null&&s.hasOwnProperty(h)||(h.indexOf("--")===0?n.setProperty(h,""):h==="float"?n.cssFloat="":n[h]="");for(var g in s)h=s[g],s.hasOwnProperty(g)&&o[g]!==h&&Ls(n,g,h)}else for(var _ in s)s.hasOwnProperty(_)&&Ls(n,_,s[_])}function ir(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ur=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ds=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sr(n){return ds.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Zn(){}var Pa=null;function Kn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var rr=null,Be=null;function Cn(n){var s=gi(n);if(s&&(n=s.stateNode)){var o=n[tn]||null;e:switch(n=s.stateNode,s.type){case"input":if(Da(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Pt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var h=o[s];if(h!==n&&h.form===n.form){var g=h[tn]||null;if(!g)throw Error(r(90));Da(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<o.length;s++)h=o[s],h.form===n.form&&Nt(h)}break e;case"textarea":hs(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Ct(n,!!o.multiple,s,!1)}}}var vt=!1;function Os(n,s,o){if(vt)return n(s,o);vt=!0;try{var h=n(s);return h}finally{if(vt=!1,(rr!==null||Be!==null)&&(Sd(),rr&&(s=rr,n=Be,Be=rr=null,Cn(s),n)))for(s=0;s<n.length;s++)Cn(n[s])}}function ai(n,s){var o=n.stateNode;if(o===null)return null;var h=o[tn]||null;if(h===null)return null;o=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ms=!1;if(Yn)try{var ut={};Object.defineProperty(ut,"passive",{get:function(){Ms=!0}}),window.addEventListener("test",ut,ut),window.removeEventListener("test",ut,ut)}catch{Ms=!1}var bi=null,Vs=null,Bt=null;function Hi(){if(Bt)return Bt;var n,s=Vs,o=s.length,h,g="value"in bi?bi.value:bi.textContent,_=g.length;for(n=0;n<o&&s[n]===g[n];n++);var T=o-n;for(h=1;h<=T&&s[o-h]===g[_-h];h++);return Bt=g.slice(n,1<h?1-h:void 0)}function ar(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function fs(){return!0}function qi(){return!1}function pn(n){function s(o,h,g,_,T){this._reactName=o,this._targetInst=g,this.type=h,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var I in n)n.hasOwnProperty(I)&&(o=n[I],this[I]=o?o(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?fs:qi,this.isPropagationStopped=qi,this}return A(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=fs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=fs)},persist:function(){},isPersistent:fs}),s}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ms=pn(Fi),zs=A({},Fi,{view:0,detail:0}),it=pn(zs),or,Rn,$n,Br=A({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==$n&&($n&&n.type==="mousemove"?(or=n.screenX-$n.screenX,Rn=n.screenY-$n.screenY):Rn=or=0,$n=n),or)},movementY:function(n){return"movementY"in n?n.movementY:Rn}}),Fo=pn(Br),Us=A({},Br,{dataTransfer:0}),$l=pn(Us),Go=A({},zs,{relatedTarget:0}),Hr=pn(Go),Zo=A({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),La=pn(Zo),Oa=A({},Fi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),oi=pn(Oa),Ql=A({},Fi,{data:0}),Gi=pn(Ql),Zi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ko={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ma(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Yo[n])?!!s[n]:!1}function lr(){return Ma}var In=A({},zs,{key:function(n){if(n.key){var s=Zi[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ar(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ko[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lr,charCode:function(n){return n.type==="keypress"?ar(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ar(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),$o=pn(In),Wl=A({},Br,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bs=pn(Wl),m=A({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lr}),w=pn(m),N=A({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=pn(N),W=A({},Br,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=pn(W),we=A({},Fi,{newState:0,oldState:0}),Ze=pn(we),gt=[9,13,27,32],_t=Yn&&"CompositionEvent"in window,Lt=null;Yn&&"documentMode"in document&&(Lt=document.documentMode);var xi=Yn&&"TextEvent"in window&&!Lt,wi=Yn&&(!_t||Lt&&8<Lt&&11>=Lt),li=" ",Ki=!1;function qr(n,s){switch(n){case"keyup":return gt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fr(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Va=!1;function Yi(n,s){switch(n){case"compositionend":return Fr(s);case"keypress":return s.which!==32?null:(Ki=!0,li);case"textInput":return n=s.data,n===li&&Ki?null:n;default:return null}}function za(n,s){if(Va)return n==="compositionend"||!_t&&qr(n,s)?(n=Hi(),Bt=Vs=bi=null,Va=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return wi&&s.locale!=="ko"?null:s.data;default:return null}}var Am={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ps(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Am[n.type]:s==="textarea"}function Hh(n,s,o,h){rr?Be?Be.push(h):Be=[h]:rr=h,s=Dd(s,"onChange"),0<s.length&&(o=new ms("onChange","change",null,o,h),n.push({event:o,listeners:s}))}var gs=null,Qo=null;function Wo(n){$0(n,0)}function Xo(n){var s=Nn(n);if(Nt(s))return n}function Jo(n,s){if(n==="change")return s}var qh=!1;if(Yn){var _s;if(Yn){var Ua="oninput"in document;if(!Ua){var Fh=document.createElement("div");Fh.setAttribute("oninput","return;"),Ua=typeof Fh.oninput=="function"}_s=Ua}else _s=!1;qh=_s&&(!document.documentMode||9<document.documentMode)}function Xl(){gs&&(gs.detachEvent("onpropertychange",Gh),Qo=gs=null)}function Gh(n){if(n.propertyName==="value"&&Xo(Qo)){var s=[];Hh(s,Qo,n,Kn(n)),Os(Wo,s)}}function Hs(n,s,o){n==="focusin"?(Xl(),gs=s,Qo=o,gs.attachEvent("onpropertychange",Gh)):n==="focusout"&&Xl()}function Nm(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Xo(Qo)}function Ba(n,s){if(n==="click")return Xo(s)}function Cm(n,s){if(n==="input"||n==="change")return Xo(s)}function qs(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var kn=typeof Object.is=="function"?Object.is:qs;function Ha(n,s){if(kn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),h=Object.keys(s);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var g=o[h];if(!Kt.call(s,g)||!kn(n[g],s[g]))return!1}return!0}function Jl(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function el(n,s){var o=Jl(n);n=0;for(var h;o;){if(o.nodeType===3){if(h=n+o.textContent.length,n<=s&&h>=s)return{node:o,offset:s-n};n=h}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Jl(o)}}function ec(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?ec(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function tl(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=yi(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=yi(n.document)}return s}function cr(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var tc=Yn&&"documentMode"in document&&11>=document.documentMode,ur=null,nc=null,nl=null,qa=!1;function Zh(n,s,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;qa||ur==null||ur!==yi(h)||(h=ur,"selectionStart"in h&&cr(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),nl&&Ha(nl,h)||(nl=h,h=Dd(nc,"onSelect"),0<h.length&&(s=new ms("onSelect","select",null,s,o),n.push({event:s,listeners:h}),s.target=ur)))}function hr(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var Fa={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionrun:hr("Transition","TransitionRun"),transitionstart:hr("Transition","TransitionStart"),transitioncancel:hr("Transition","TransitionCancel"),transitionend:hr("Transition","TransitionEnd")},ic={},Kh={};Yn&&(Kh=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function Dn(n){if(ic[n])return ic[n];if(!Fa[n])return n;var s=Fa[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in Kh)return ic[n]=s[o];return n}var il=Dn("animationend"),Yh=Dn("animationiteration"),sl=Dn("animationstart"),Rm=Dn("transitionrun"),$h=Dn("transitionstart"),Im=Dn("transitioncancel"),Ga=Dn("transitionend"),Qh=new Map,dr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dr.push("scrollEnd");function Ei(n,s){Qh.set(n,s),cs(s,[n])}var rl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Ti=[],Qn=0,sc=0;function al(){for(var n=Qn,s=sc=Qn=0;s<n;){var o=Ti[s];Ti[s++]=null;var h=Ti[s];Ti[s++]=null;var g=Ti[s];Ti[s++]=null;var _=Ti[s];if(Ti[s++]=null,h!==null&&g!==null){var T=h.pending;T===null?g.next=g:(g.next=T.next,T.next=g),h.pending=g}_!==0&&Za(o,g,_)}}function fr(n,s,o,h){Ti[Qn++]=n,Ti[Qn++]=s,Ti[Qn++]=o,Ti[Qn++]=h,sc|=h,n.lanes|=h,n=n.alternate,n!==null&&(n.lanes|=h)}function uu(n,s,o,h){return fr(n,s,o,h),ol(n)}function ys(n,s){return fr(n,null,null,s),ol(n)}function Za(n,s,o){n.lanes|=o;var h=n.alternate;h!==null&&(h.lanes|=o);for(var g=!1,_=n.return;_!==null;)_.childLanes|=o,h=_.alternate,h!==null&&(h.childLanes|=o),_.tag===22&&(n=_.stateNode,n===null||n._visibility&1||(g=!0)),n=_,_=_.return;return n.tag===3?(_=n.stateNode,g&&s!==null&&(g=31-Yt(o),n=_.hiddenUpdates,h=n[g],h===null?n[g]=[s]:h.push(s),s.lane=o|536870912),_):null}function ol(n){if(50<Lu)throw Lu=0,Dp=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Gr={};function km(n,s,o,h){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(n,s,o,h){return new km(n,s,o,h)}function rc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function vs(n,s){var o=n.alternate;return o===null?(o=Wn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function hu(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function ll(n,s,o,h,g,_){var T=0;if(h=n,typeof n=="function")rc(n)&&(T=1);else if(typeof n=="string")T=ZA(n,o,ye.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case O:return n=Wn(31,o,s,g),n.elementType=O,n.lanes=_,n;case K:return Zr(o.children,g,_,s);case Y:T=8,g|=24;break;case ce:return n=Wn(12,o,s,g|2),n.elementType=ce,n.lanes=_,n;case be:return n=Wn(13,o,s,g),n.elementType=be,n.lanes=_,n;case Ne:return n=Wn(19,o,s,g),n.elementType=Ne,n.lanes=_,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case se:T=10;break e;case ae:T=9;break e;case ke:T=11;break e;case P:T=14;break e;case j:T=16,h=null;break e}T=29,o=Error(r(130,n===null?"null":typeof n,"")),h=null}return s=Wn(T,o,s,g),s.elementType=n,s.type=h,s.lanes=_,s}function Zr(n,s,o,h){return n=Wn(7,n,h,s),n.lanes=o,n}function ac(n,s,o){return n=Wn(6,n,null,s),n.lanes=o,n}function du(n){var s=Wn(18,null,null,0);return s.stateNode=n,s}function fu(n,s,o){return s=Wn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var a=new WeakMap;function c(n,s){if(typeof n=="object"&&n!==null){var o=a.get(n);return o!==void 0?o:(s={value:n,source:s,stack:ks(s)},a.set(n,s),s)}return{value:n,source:s,stack:ks(s)}}var p=[],x=0,E=null,C=0,V=[],Q=0,ee=null,fe=1,Te="";function Oe(n,s){p[x++]=C,p[x++]=E,E=n,C=s}function Je(n,s,o){V[Q++]=fe,V[Q++]=Te,V[Q++]=ee,ee=n;var h=fe;n=Te;var g=32-Yt(h)-1;h&=~(1<<g),o+=1;var _=32-Yt(s)+g;if(30<_){var T=g-g%5;_=(h&(1<<T)-1).toString(32),h>>=T,g-=T,fe=1<<32-Yt(s)+g|o<<g|h,Te=_+n}else fe=1<<_|o<<g|h,Te=n}function En(n){n.return!==null&&(Oe(n,1),Je(n,1,0))}function sn(n){for(;n===E;)E=p[--x],p[x]=null,C=p[--x],p[x]=null;for(;n===ee;)ee=V[--Q],V[Q]=null,Te=V[--Q],V[Q]=null,fe=V[--Q],V[Q]=null}function ci(n,s){V[Q++]=fe,V[Q++]=Te,V[Q++]=ee,fe=s.id,Te=s.overflow,ee=n}var bt=null,xt=null,ot=!1,mr=null,Si=!1,oc=Error(r(519));function pr(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cl(c(s,n)),oc}function mu(n){var s=n.stateNode,o=n.type,h=n.memoizedProps;switch(s[Qt]=n,s[tn]=h,o){case"dialog":ct("cancel",s),ct("close",s);break;case"iframe":case"object":case"embed":ct("load",s);break;case"video":case"audio":for(o=0;o<Mu.length;o++)ct(Mu[o],s);break;case"source":ct("error",s);break;case"img":case"image":case"link":ct("error",s),ct("load",s);break;case"details":ct("toggle",s);break;case"input":ct("invalid",s),Vr(s,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":ct("invalid",s);break;case"textarea":ct("invalid",s),vi(s,h.value,h.defaultValue,h.children)}o=h.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||h.suppressHydrationWarning===!0||J0(s.textContent,o)?(h.popover!=null&&(ct("beforetoggle",s),ct("toggle",s)),h.onScroll!=null&&ct("scroll",s),h.onScrollEnd!=null&&ct("scrollend",s),h.onClick!=null&&(s.onclick=Zn),s=!0):s=!1,s||pr(n,!0)}function Wt(n){for(bt=n.return;bt;)switch(bt.tag){case 5:case 31:case 13:Si=!1;return;case 27:case 3:Si=!0;return;default:bt=bt.return}}function Fs(n){if(n!==bt)return!1;if(!ot)return Wt(n),ot=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Kp(n.type,n.memoizedProps)),o=!o),o&&xt&&pr(n),Wt(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));xt=lb(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));xt=lb(n)}else s===27?(s=xt,ao(n.type)?(n=Xp,Xp=null,xt=n):xt=s):xt=bt?xs(n.stateNode.nextSibling):null;return!0}function Kr(){xt=bt=null,ot=!1}function pu(){var n=mr;return n!==null&&(Ri===null?Ri=n:Ri.push.apply(Ri,n),mr=null),n}function cl(n){mr===null?mr=[n]:mr.push(n)}var ul=B(null),gr=null,Gs=null;function Ka(n,s,o){ve(ul,s._currentValue),s._currentValue=o}function Yr(n){n._currentValue=ul.current,le(ul)}function Dm(n,s,o){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===o)break;n=n.return}}function jm(n,s,o,h){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var _=g.dependencies;if(_!==null){var T=g.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=g;for(var H=0;H<s.length;H++)if(I.context===s[H]){_.lanes|=o,I=_.alternate,I!==null&&(I.lanes|=o),Dm(_.return,o,n),h||(T=null);break e}_=I.next}}else if(g.tag===18){if(T=g.return,T===null)throw Error(r(341));T.lanes|=o,_=T.alternate,_!==null&&(_.lanes|=o),Dm(T,o,n),T=null}else T=g.child;if(T!==null)T.return=g;else for(T=g;T!==null;){if(T===n){T=null;break}if(g=T.sibling,g!==null){g.return=T.return,T=g;break}T=T.return}g=T}}function lc(n,s,o,h){n=null;for(var g=s,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var T=g.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var I=g.type;kn(g.pendingProps.value,T.value)||(n!==null?n.push(I):n=[I])}}else if(g===ie.current){if(T=g.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(Hu):n=[Hu])}g=g.return}n!==null&&jm(s,n,o,h),s.flags|=262144}function Wh(n){for(n=n.firstContext;n!==null;){if(!kn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function hl(n){gr=n,Gs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Mn(n){return Vy(gr,n)}function Xh(n,s){return gr===null&&hl(n),Vy(n,s)}function Vy(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Gs===null){if(n===null)throw Error(r(308));Gs=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Gs=Gs.next=s;return o}var HS=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,h){n.push(h)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},qS=i.unstable_scheduleCallback,FS=i.unstable_NormalPriority,gn={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pm(){return{controller:new HS,data:new Map,refCount:0}}function gu(n){n.refCount--,n.refCount===0&&qS(FS,function(){n.controller.abort()})}var _u=null,Lm=0,cc=0,uc=null;function GS(n,s){if(_u===null){var o=_u=[];Lm=0,cc=Vp(),uc={status:"pending",value:void 0,then:function(h){o.push(h)}}}return Lm++,s.then(zy,zy),s}function zy(){if(--Lm===0&&_u!==null){uc!==null&&(uc.status="fulfilled");var n=_u;_u=null,cc=0,uc=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function ZS(n,s){var o=[],h={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return n.then(function(){h.status="fulfilled",h.value=s;for(var g=0;g<o.length;g++)(0,o[g])(s)},function(g){for(h.status="rejected",h.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),h}var Uy=re.S;re.S=function(n,s){E0=On(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&GS(n,s),Uy!==null&&Uy(n,s)};var dl=B(null);function Om(){var n=dl.current;return n!==null?n:Ot.pooledCache}function Jh(n,s){s===null?ve(dl,dl.current):ve(dl,s.pool)}function By(){var n=Om();return n===null?null:{parent:gn._currentValue,pool:n}}var hc=Error(r(460)),Mm=Error(r(474)),ed=Error(r(542)),td={then:function(){}};function Hy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function qy(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(Zn,Zn),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Gy(n),n;default:if(typeof s.status=="string")s.then(Zn,Zn);else{if(n=Ot,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(h){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=h}},function(h){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=h}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Gy(n),n}throw ml=s,hc}}function fl(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ml=o,hc):o}}var ml=null;function Fy(){if(ml===null)throw Error(r(459));var n=ml;return ml=null,n}function Gy(n){if(n===hc||n===ed)throw Error(r(483))}var dc=null,yu=0;function nd(n){var s=yu;return yu+=1,dc===null&&(dc=[]),qy(dc,n,s)}function vu(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function id(n,s){throw s.$$typeof===R?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Zy(n){function s($,F){if(n){var X=$.deletions;X===null?($.deletions=[F],$.flags|=16):X.push(F)}}function o($,F){if(!n)return null;for(;F!==null;)s($,F),F=F.sibling;return null}function h($){for(var F=new Map;$!==null;)$.key!==null?F.set($.key,$):F.set($.index,$),$=$.sibling;return F}function g($,F){return $=vs($,F),$.index=0,$.sibling=null,$}function _($,F,X){return $.index=X,n?(X=$.alternate,X!==null?(X=X.index,X<F?($.flags|=67108866,F):X):($.flags|=67108866,F)):($.flags|=1048576,F)}function T($){return n&&$.alternate===null&&($.flags|=67108866),$}function I($,F,X,de){return F===null||F.tag!==6?(F=ac(X,$.mode,de),F.return=$,F):(F=g(F,X),F.return=$,F)}function H($,F,X,de){var Me=X.type;return Me===K?he($,F,X.props.children,de,X.key):F!==null&&(F.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===j&&fl(Me)===F.type)?(F=g(F,X.props),vu(F,X),F.return=$,F):(F=ll(X.type,X.key,X.props,null,$.mode,de),vu(F,X),F.return=$,F)}function J($,F,X,de){return F===null||F.tag!==4||F.stateNode.containerInfo!==X.containerInfo||F.stateNode.implementation!==X.implementation?(F=fu(X,$.mode,de),F.return=$,F):(F=g(F,X.children||[]),F.return=$,F)}function he($,F,X,de,Me){return F===null||F.tag!==7?(F=Zr(X,$.mode,de,Me),F.return=$,F):(F=g(F,X),F.return=$,F)}function me($,F,X){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=ac(""+F,$.mode,X),F.return=$,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case M:return X=ll(F.type,F.key,F.props,null,$.mode,X),vu(X,F),X.return=$,X;case G:return F=fu(F,$.mode,X),F.return=$,F;case j:return F=fl(F),me($,F,X)}if(At(F)||Z(F))return F=Zr(F,$.mode,X,null),F.return=$,F;if(typeof F.then=="function")return me($,nd(F),X);if(F.$$typeof===se)return me($,Xh($,F),X);id($,F)}return null}function te($,F,X,de){var Me=F!==null?F.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Me!==null?null:I($,F,""+X,de);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case M:return X.key===Me?H($,F,X,de):null;case G:return X.key===Me?J($,F,X,de):null;case j:return X=fl(X),te($,F,X,de)}if(At(X)||Z(X))return Me!==null?null:he($,F,X,de,null);if(typeof X.then=="function")return te($,F,nd(X),de);if(X.$$typeof===se)return te($,F,Xh($,X),de);id($,X)}return null}function oe($,F,X,de,Me){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return $=$.get(X)||null,I(F,$,""+de,Me);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case M:return $=$.get(de.key===null?X:de.key)||null,H(F,$,de,Me);case G:return $=$.get(de.key===null?X:de.key)||null,J(F,$,de,Me);case j:return de=fl(de),oe($,F,X,de,Me)}if(At(de)||Z(de))return $=$.get(X)||null,he(F,$,de,Me,null);if(typeof de.then=="function")return oe($,F,X,nd(de),Me);if(de.$$typeof===se)return oe($,F,X,Xh(F,de),Me);id(F,de)}return null}function Pe($,F,X,de){for(var Me=null,wt=null,Le=F,et=F=0,dt=null;Le!==null&&et<X.length;et++){Le.index>et?(dt=Le,Le=null):dt=Le.sibling;var Et=te($,Le,X[et],de);if(Et===null){Le===null&&(Le=dt);break}n&&Le&&Et.alternate===null&&s($,Le),F=_(Et,F,et),wt===null?Me=Et:wt.sibling=Et,wt=Et,Le=dt}if(et===X.length)return o($,Le),ot&&Oe($,et),Me;if(Le===null){for(;et<X.length;et++)Le=me($,X[et],de),Le!==null&&(F=_(Le,F,et),wt===null?Me=Le:wt.sibling=Le,wt=Le);return ot&&Oe($,et),Me}for(Le=h(Le);et<X.length;et++)dt=oe(Le,$,et,X[et],de),dt!==null&&(n&&dt.alternate!==null&&Le.delete(dt.key===null?et:dt.key),F=_(dt,F,et),wt===null?Me=dt:wt.sibling=dt,wt=dt);return n&&Le.forEach(function(ho){return s($,ho)}),ot&&Oe($,et),Me}function He($,F,X,de){if(X==null)throw Error(r(151));for(var Me=null,wt=null,Le=F,et=F=0,dt=null,Et=X.next();Le!==null&&!Et.done;et++,Et=X.next()){Le.index>et?(dt=Le,Le=null):dt=Le.sibling;var ho=te($,Le,Et.value,de);if(ho===null){Le===null&&(Le=dt);break}n&&Le&&ho.alternate===null&&s($,Le),F=_(ho,F,et),wt===null?Me=ho:wt.sibling=ho,wt=ho,Le=dt}if(Et.done)return o($,Le),ot&&Oe($,et),Me;if(Le===null){for(;!Et.done;et++,Et=X.next())Et=me($,Et.value,de),Et!==null&&(F=_(Et,F,et),wt===null?Me=Et:wt.sibling=Et,wt=Et);return ot&&Oe($,et),Me}for(Le=h(Le);!Et.done;et++,Et=X.next())Et=oe(Le,$,et,Et.value,de),Et!==null&&(n&&Et.alternate!==null&&Le.delete(Et.key===null?et:Et.key),F=_(Et,F,et),wt===null?Me=Et:wt.sibling=Et,wt=Et);return n&&Le.forEach(function(iN){return s($,iN)}),ot&&Oe($,et),Me}function jt($,F,X,de){if(typeof X=="object"&&X!==null&&X.type===K&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case M:e:{for(var Me=X.key;F!==null;){if(F.key===Me){if(Me=X.type,Me===K){if(F.tag===7){o($,F.sibling),de=g(F,X.props.children),de.return=$,$=de;break e}}else if(F.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===j&&fl(Me)===F.type){o($,F.sibling),de=g(F,X.props),vu(de,X),de.return=$,$=de;break e}o($,F);break}else s($,F);F=F.sibling}X.type===K?(de=Zr(X.props.children,$.mode,de,X.key),de.return=$,$=de):(de=ll(X.type,X.key,X.props,null,$.mode,de),vu(de,X),de.return=$,$=de)}return T($);case G:e:{for(Me=X.key;F!==null;){if(F.key===Me)if(F.tag===4&&F.stateNode.containerInfo===X.containerInfo&&F.stateNode.implementation===X.implementation){o($,F.sibling),de=g(F,X.children||[]),de.return=$,$=de;break e}else{o($,F);break}else s($,F);F=F.sibling}de=fu(X,$.mode,de),de.return=$,$=de}return T($);case j:return X=fl(X),jt($,F,X,de)}if(At(X))return Pe($,F,X,de);if(Z(X)){if(Me=Z(X),typeof Me!="function")throw Error(r(150));return X=Me.call(X),He($,F,X,de)}if(typeof X.then=="function")return jt($,F,nd(X),de);if(X.$$typeof===se)return jt($,F,Xh($,X),de);id($,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,F!==null&&F.tag===6?(o($,F.sibling),de=g(F,X),de.return=$,$=de):(o($,F),de=ac(X,$.mode,de),de.return=$,$=de),T($)):o($,F)}return function($,F,X,de){try{yu=0;var Me=jt($,F,X,de);return dc=null,Me}catch(Le){if(Le===hc||Le===ed)throw Le;var wt=Wn(29,Le,null,$.mode);return wt.lanes=de,wt.return=$,wt}}}var pl=Zy(!0),Ky=Zy(!1),Ya=!1;function Vm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function $a(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Qa(n,s,o){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(Tt&2)!==0){var g=h.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),h.pending=s,s=ol(n),Za(n,null,o),s}return fr(n,h,s,o),ol(n)}function bu(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var h=s.lanes;h&=n.pendingLanes,o|=h,s.lanes=o,zo(n,o)}}function Um(n,s){var o=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var g=null,_=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};_===null?g=_=T:_=_.next=T,o=o.next}while(o!==null);_===null?g=_=s:_=_.next=s}else g=_=s;o={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:h.shared,callbacks:h.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Bm=!1;function xu(){if(Bm){var n=uc;if(n!==null)throw n}}function wu(n,s,o,h){Bm=!1;var g=n.updateQueue;Ya=!1;var _=g.firstBaseUpdate,T=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var H=I,J=H.next;H.next=null,T===null?_=J:T.next=J,T=H;var he=n.alternate;he!==null&&(he=he.updateQueue,I=he.lastBaseUpdate,I!==T&&(I===null?he.firstBaseUpdate=J:I.next=J,he.lastBaseUpdate=H))}if(_!==null){var me=g.baseState;T=0,he=J=H=null,I=_;do{var te=I.lane&-536870913,oe=te!==I.lane;if(oe?(ht&te)===te:(h&te)===te){te!==0&&te===cc&&(Bm=!0),he!==null&&(he=he.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Pe=n,He=I;te=s;var jt=o;switch(He.tag){case 1:if(Pe=He.payload,typeof Pe=="function"){me=Pe.call(jt,me,te);break e}me=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=He.payload,te=typeof Pe=="function"?Pe.call(jt,me,te):Pe,te==null)break e;me=A({},me,te);break e;case 2:Ya=!0}}te=I.callback,te!==null&&(n.flags|=64,oe&&(n.flags|=8192),oe=g.callbacks,oe===null?g.callbacks=[te]:oe.push(te))}else oe={lane:te,tag:I.tag,payload:I.payload,callback:I.callback,next:null},he===null?(J=he=oe,H=me):he=he.next=oe,T|=te;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;oe=I,I=oe.next,oe.next=null,g.lastBaseUpdate=oe,g.shared.pending=null}}while(!0);he===null&&(H=me),g.baseState=H,g.firstBaseUpdate=J,g.lastBaseUpdate=he,_===null&&(g.shared.lanes=0),to|=T,n.lanes=T,n.memoizedState=me}}function Yy(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function $y(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Yy(o[n],s)}var fc=B(null),sd=B(0);function Qy(n,s){n=ia,ve(sd,n),ve(fc,s),ia=n|s.baseLanes}function Hm(){ve(sd,ia),ve(fc,fc.current)}function qm(){ia=sd.current,le(fc),le(sd)}var $i=B(null),bs=null;function Wa(n){var s=n.alternate;ve(cn,cn.current&1),ve($i,n),bs===null&&(s===null||fc.current!==null||s.memoizedState!==null)&&(bs=n)}function Fm(n){ve(cn,cn.current),ve($i,n),bs===null&&(bs=n)}function Wy(n){n.tag===22?(ve(cn,cn.current),ve($i,n),bs===null&&(bs=n)):Xa()}function Xa(){ve(cn,cn.current),ve($i,$i.current)}function Qi(n){le($i),bs===n&&(bs=null),le(cn)}var cn=B(0);function rd(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Qp(o)||Wp(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var $r=0,Xe=null,kt=null,_n=null,ad=!1,mc=!1,gl=!1,od=0,Eu=0,pc=null,KS=0;function rn(){throw Error(r(321))}function Gm(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!kn(n[o],s[o]))return!1;return!0}function Zm(n,s,o,h,g,_){return $r=_,Xe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,re.H=n===null||n.memoizedState===null?Pv:op,gl=!1,_=o(h,g),gl=!1,mc&&(_=Jy(s,o,h,g)),Xy(n),_}function Xy(n){re.H=Au;var s=kt!==null&&kt.next!==null;if($r=0,_n=kt=Xe=null,ad=!1,Eu=0,pc=null,s)throw Error(r(300));n===null||yn||(n=n.dependencies,n!==null&&Wh(n)&&(yn=!0))}function Jy(n,s,o,h){Xe=n;var g=0;do{if(mc&&(pc=null),Eu=0,mc=!1,25<=g)throw Error(r(301));if(g+=1,_n=kt=null,n.updateQueue!=null){var _=n.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}re.H=Lv,_=s(o,h)}while(mc);return _}function YS(){var n=re.H,s=n.useState()[0];return s=typeof s.then=="function"?Tu(s):s,n=n.useState()[0],(kt!==null?kt.memoizedState:null)!==n&&(Xe.flags|=1024),s}function Km(){var n=od!==0;return od=0,n}function Ym(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function $m(n){if(ad){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ad=!1}$r=0,_n=kt=Xe=null,mc=!1,Eu=od=0,pc=null}function ui(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?Xe.memoizedState=_n=n:_n=_n.next=n,_n}function un(){if(kt===null){var n=Xe.alternate;n=n!==null?n.memoizedState:null}else n=kt.next;var s=_n===null?Xe.memoizedState:_n.next;if(s!==null)_n=s,kt=n;else{if(n===null)throw Xe.alternate===null?Error(r(467)):Error(r(310));kt=n,n={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},_n===null?Xe.memoizedState=_n=n:_n=_n.next=n}return _n}function ld(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tu(n){var s=Eu;return Eu+=1,pc===null&&(pc=[]),n=qy(pc,n,s),s=Xe,(_n===null?s.memoizedState:_n.next)===null&&(s=s.alternate,re.H=s===null||s.memoizedState===null?Pv:op),n}function cd(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Tu(n);if(n.$$typeof===se)return Mn(n)}throw Error(r(438,String(n)))}function Qm(n){var s=null,o=Xe.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var h=Xe.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(s={data:h.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=ld(),Xe.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),h=0;h<n;h++)o[h]=q;return s.index++,o}function Qr(n,s){return typeof s=="function"?s(n):s}function ud(n){var s=un();return Wm(s,kt,n)}function Wm(n,s,o){var h=n.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=n.baseQueue,_=h.pending;if(_!==null){if(g!==null){var T=g.next;g.next=_.next,_.next=T}s.baseQueue=g=_,h.pending=null}if(_=n.baseState,g===null)n.memoizedState=_;else{s=g.next;var I=T=null,H=null,J=s,he=!1;do{var me=J.lane&-536870913;if(me!==J.lane?(ht&me)===me:($r&me)===me){var te=J.revertLane;if(te===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),me===cc&&(he=!0);else if(($r&te)===te){J=J.next,te===cc&&(he=!0);continue}else me={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},H===null?(I=H=me,T=_):H=H.next=me,Xe.lanes|=te,to|=te;me=J.action,gl&&o(_,me),_=J.hasEagerState?J.eagerState:o(_,me)}else te={lane:me,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},H===null?(I=H=te,T=_):H=H.next=te,Xe.lanes|=me,to|=me;J=J.next}while(J!==null&&J!==s);if(H===null?T=_:H.next=I,!kn(_,n.memoizedState)&&(yn=!0,he&&(o=uc,o!==null)))throw o;n.memoizedState=_,n.baseState=T,n.baseQueue=H,h.lastRenderedState=_}return g===null&&(h.lanes=0),[n.memoizedState,h.dispatch]}function Xm(n){var s=un(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var h=o.dispatch,g=o.pending,_=s.memoizedState;if(g!==null){o.pending=null;var T=g=g.next;do _=n(_,T.action),T=T.next;while(T!==g);kn(_,s.memoizedState)||(yn=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),o.lastRenderedState=_}return[_,h]}function ev(n,s,o){var h=Xe,g=un(),_=ot;if(_){if(o===void 0)throw Error(r(407));o=o()}else o=s();var T=!kn((kt||g).memoizedState,o);if(T&&(g.memoizedState=o,yn=!0),g=g.queue,tp(iv.bind(null,h,g,n),[n]),g.getSnapshot!==s||T||_n!==null&&_n.memoizedState.tag&1){if(h.flags|=2048,gc(9,{destroy:void 0},nv.bind(null,h,g,o,s),null),Ot===null)throw Error(r(349));_||($r&127)!==0||tv(h,s,o)}return o}function tv(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Xe.updateQueue,s===null?(s=ld(),Xe.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function nv(n,s,o,h){s.value=o,s.getSnapshot=h,sv(s)&&rv(n)}function iv(n,s,o){return o(function(){sv(s)&&rv(n)})}function sv(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!kn(n,o)}catch{return!0}}function rv(n){var s=ys(n,2);s!==null&&Ii(s,n,2)}function Jm(n){var s=ui();if(typeof n=="function"){var o=n;if(n=o(),gl){si(!0);try{o()}finally{si(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:n},s}function av(n,s,o,h){return n.baseState=o,Wm(n,kt,typeof h=="function"?h:Qr)}function $S(n,s,o,h,g){if(fd(n))throw Error(r(485));if(n=s.action,n!==null){var _={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){_.listeners.push(T)}};re.T!==null?o(!0):_.isTransition=!1,h(_),o=s.pending,o===null?(_.next=s.pending=_,ov(s,_)):(_.next=o.next,s.pending=o.next=_)}}function ov(n,s){var o=s.action,h=s.payload,g=n.state;if(s.isTransition){var _=re.T,T={};re.T=T;try{var I=o(g,h),H=re.S;H!==null&&H(T,I),lv(n,s,I)}catch(J){ep(n,s,J)}finally{_!==null&&T.types!==null&&(_.types=T.types),re.T=_}}else try{_=o(g,h),lv(n,s,_)}catch(J){ep(n,s,J)}}function lv(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(h){cv(n,s,h)},function(h){return ep(n,s,h)}):cv(n,s,o)}function cv(n,s,o){s.status="fulfilled",s.value=o,uv(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,ov(n,o)))}function ep(n,s,o){var h=n.pending;if(n.pending=null,h!==null){h=h.next;do s.status="rejected",s.reason=o,uv(s),s=s.next;while(s!==h)}n.action=null}function uv(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function hv(n,s){return s}function dv(n,s){if(ot){var o=Ot.formState;if(o!==null){e:{var h=Xe;if(ot){if(xt){t:{for(var g=xt,_=Si;g.nodeType!==8;){if(!_){g=null;break t}if(g=xs(g.nextSibling),g===null){g=null;break t}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){xt=xs(g.nextSibling),h=g.data==="F!";break e}}pr(h)}h=!1}h&&(s=o[0])}}return o=ui(),o.memoizedState=o.baseState=s,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hv,lastRenderedState:s},o.queue=h,o=kv.bind(null,Xe,h),h.dispatch=o,h=Jm(!1),_=ap.bind(null,Xe,!1,h.queue),h=ui(),g={state:s,dispatch:null,action:n,pending:null},h.queue=g,o=$S.bind(null,Xe,g,_,o),g.dispatch=o,h.memoizedState=n,[s,o,!1]}function fv(n){var s=un();return mv(s,kt,n)}function mv(n,s,o){if(s=Wm(n,s,hv)[0],n=ud(Qr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var h=Tu(s)}catch(T){throw T===hc?ed:T}else h=s;s=un();var g=s.queue,_=g.dispatch;return o!==s.memoizedState&&(Xe.flags|=2048,gc(9,{destroy:void 0},QS.bind(null,g,o),null)),[h,_,n]}function QS(n,s){n.action=s}function pv(n){var s=un(),o=kt;if(o!==null)return mv(s,o,n);un(),s=s.memoizedState,o=un();var h=o.queue.dispatch;return o.memoizedState=n,[s,h,!1]}function gc(n,s,o,h){return n={tag:n,create:o,deps:h,inst:s,next:null},s=Xe.updateQueue,s===null&&(s=ld(),Xe.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(h=o.next,o.next=n,n.next=h,s.lastEffect=n),n}function gv(){return un().memoizedState}function hd(n,s,o,h){var g=ui();Xe.flags|=n,g.memoizedState=gc(1|s,{destroy:void 0},o,h===void 0?null:h)}function dd(n,s,o,h){var g=un();h=h===void 0?null:h;var _=g.memoizedState.inst;kt!==null&&h!==null&&Gm(h,kt.memoizedState.deps)?g.memoizedState=gc(s,_,o,h):(Xe.flags|=n,g.memoizedState=gc(1|s,_,o,h))}function _v(n,s){hd(8390656,8,n,s)}function tp(n,s){dd(2048,8,n,s)}function WS(n){Xe.flags|=4;var s=Xe.updateQueue;if(s===null)s=ld(),Xe.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function yv(n){var s=un().memoizedState;return WS({ref:s,nextImpl:n}),function(){if((Tt&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function vv(n,s){return dd(4,2,n,s)}function bv(n,s){return dd(4,4,n,s)}function xv(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function wv(n,s,o){o=o!=null?o.concat([n]):null,dd(4,4,xv.bind(null,s,n),o)}function np(){}function Ev(n,s){var o=un();s=s===void 0?null:s;var h=o.memoizedState;return s!==null&&Gm(s,h[1])?h[0]:(o.memoizedState=[n,s],n)}function Tv(n,s){var o=un();s=s===void 0?null:s;var h=o.memoizedState;if(s!==null&&Gm(s,h[1]))return h[0];if(h=n(),gl){si(!0);try{n()}finally{si(!1)}}return o.memoizedState=[h,s],h}function ip(n,s,o){return o===void 0||($r&1073741824)!==0&&(ht&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=S0(),Xe.lanes|=n,to|=n,o)}function Sv(n,s,o,h){return kn(o,s)?o:fc.current!==null?(n=ip(n,o,h),kn(n,s)||(yn=!0),n):($r&42)===0||($r&1073741824)!==0&&(ht&261930)===0?(yn=!0,n.memoizedState=o):(n=S0(),Xe.lanes|=n,to|=n,s)}function Av(n,s,o,h,g){var _=ue.p;ue.p=_!==0&&8>_?_:8;var T=re.T,I={};re.T=I,ap(n,!1,s,o);try{var H=g(),J=re.S;if(J!==null&&J(I,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var he=ZS(H,h);Su(n,s,he,Ji(n))}else Su(n,s,h,Ji(n))}catch(me){Su(n,s,{then:function(){},status:"rejected",reason:me},Ji())}finally{ue.p=_,T!==null&&I.types!==null&&(T.types=I.types),re.T=T}}function XS(){}function sp(n,s,o,h){if(n.tag!==5)throw Error(r(476));var g=Nv(n).queue;Av(n,g,s,_e,o===null?XS:function(){return Cv(n),o(h)})}function Nv(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:_e},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Cv(n){var s=Nv(n);s.next===null&&(s=n.alternate.memoizedState),Su(n,s.next.queue,{},Ji())}function rp(){return Mn(Hu)}function Rv(){return un().memoizedState}function Iv(){return un().memoizedState}function JS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Ji();n=$a(o);var h=Qa(s,n,o);h!==null&&(Ii(h,s,o),bu(h,s,o)),s={cache:Pm()},n.payload=s;return}s=s.return}}function eA(n,s,o){var h=Ji();o={lane:h,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},fd(n)?Dv(s,o):(o=uu(n,s,o,h),o!==null&&(Ii(o,n,h),jv(o,s,h)))}function kv(n,s,o){var h=Ji();Su(n,s,o,h)}function Su(n,s,o,h){var g={lane:h,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(fd(n))Dv(s,g);else{var _=n.alternate;if(n.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var T=s.lastRenderedState,I=_(T,o);if(g.hasEagerState=!0,g.eagerState=I,kn(I,T))return fr(n,s,g,0),Ot===null&&al(),!1}catch{}if(o=uu(n,s,g,h),o!==null)return Ii(o,n,h),jv(o,s,h),!0}return!1}function ap(n,s,o,h){if(h={lane:2,revertLane:Vp(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},fd(n)){if(s)throw Error(r(479))}else s=uu(n,o,h,2),s!==null&&Ii(s,n,2)}function fd(n){var s=n.alternate;return n===Xe||s!==null&&s===Xe}function Dv(n,s){mc=ad=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function jv(n,s,o){if((o&4194048)!==0){var h=s.lanes;h&=n.pendingLanes,o|=h,s.lanes=o,zo(n,o)}}var Au={readContext:Mn,use:cd,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};Au.useEffectEvent=rn;var Pv={readContext:Mn,use:cd,useCallback:function(n,s){return ui().memoizedState=[n,s===void 0?null:s],n},useContext:Mn,useEffect:_v,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,hd(4194308,4,xv.bind(null,s,n),o)},useLayoutEffect:function(n,s){return hd(4194308,4,n,s)},useInsertionEffect:function(n,s){hd(4,2,n,s)},useMemo:function(n,s){var o=ui();s=s===void 0?null:s;var h=n();if(gl){si(!0);try{n()}finally{si(!1)}}return o.memoizedState=[h,s],h},useReducer:function(n,s,o){var h=ui();if(o!==void 0){var g=o(s);if(gl){si(!0);try{o(s)}finally{si(!1)}}}else g=s;return h.memoizedState=h.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},h.queue=n,n=n.dispatch=eA.bind(null,Xe,n),[h.memoizedState,n]},useRef:function(n){var s=ui();return n={current:n},s.memoizedState=n},useState:function(n){n=Jm(n);var s=n.queue,o=kv.bind(null,Xe,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:np,useDeferredValue:function(n,s){var o=ui();return ip(o,n,s)},useTransition:function(){var n=Jm(!1);return n=Av.bind(null,Xe,n.queue,!0,!1),ui().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var h=Xe,g=ui();if(ot){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),Ot===null)throw Error(r(349));(ht&127)!==0||tv(h,s,o)}g.memoizedState=o;var _={value:o,getSnapshot:s};return g.queue=_,_v(iv.bind(null,h,_,n),[n]),h.flags|=2048,gc(9,{destroy:void 0},nv.bind(null,h,_,o,s),null),o},useId:function(){var n=ui(),s=Ot.identifierPrefix;if(ot){var o=Te,h=fe;o=(h&~(1<<32-Yt(h)-1)).toString(32)+o,s="_"+s+"R_"+o,o=od++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=KS++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:rp,useFormState:dv,useActionState:dv,useOptimistic:function(n){var s=ui();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=ap.bind(null,Xe,!0,o),o.dispatch=s,[n,s]},useMemoCache:Qm,useCacheRefresh:function(){return ui().memoizedState=JS.bind(null,Xe)},useEffectEvent:function(n){var s=ui(),o={impl:n};return s.memoizedState=o,function(){if((Tt&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},op={readContext:Mn,use:cd,useCallback:Ev,useContext:Mn,useEffect:tp,useImperativeHandle:wv,useInsertionEffect:vv,useLayoutEffect:bv,useMemo:Tv,useReducer:ud,useRef:gv,useState:function(){return ud(Qr)},useDebugValue:np,useDeferredValue:function(n,s){var o=un();return Sv(o,kt.memoizedState,n,s)},useTransition:function(){var n=ud(Qr)[0],s=un().memoizedState;return[typeof n=="boolean"?n:Tu(n),s]},useSyncExternalStore:ev,useId:Rv,useHostTransitionStatus:rp,useFormState:fv,useActionState:fv,useOptimistic:function(n,s){var o=un();return av(o,kt,n,s)},useMemoCache:Qm,useCacheRefresh:Iv};op.useEffectEvent=yv;var Lv={readContext:Mn,use:cd,useCallback:Ev,useContext:Mn,useEffect:tp,useImperativeHandle:wv,useInsertionEffect:vv,useLayoutEffect:bv,useMemo:Tv,useReducer:Xm,useRef:gv,useState:function(){return Xm(Qr)},useDebugValue:np,useDeferredValue:function(n,s){var o=un();return kt===null?ip(o,n,s):Sv(o,kt.memoizedState,n,s)},useTransition:function(){var n=Xm(Qr)[0],s=un().memoizedState;return[typeof n=="boolean"?n:Tu(n),s]},useSyncExternalStore:ev,useId:Rv,useHostTransitionStatus:rp,useFormState:pv,useActionState:pv,useOptimistic:function(n,s){var o=un();return kt!==null?av(o,kt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Qm,useCacheRefresh:Iv};Lv.useEffectEvent=yv;function lp(n,s,o,h){s=n.memoizedState,o=o(h,s),o=o==null?s:A({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var cp={enqueueSetState:function(n,s,o){n=n._reactInternals;var h=Ji(),g=$a(h);g.payload=s,o!=null&&(g.callback=o),s=Qa(n,g,h),s!==null&&(Ii(s,n,h),bu(s,n,h))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var h=Ji(),g=$a(h);g.tag=1,g.payload=s,o!=null&&(g.callback=o),s=Qa(n,g,h),s!==null&&(Ii(s,n,h),bu(s,n,h))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Ji(),h=$a(o);h.tag=2,s!=null&&(h.callback=s),s=Qa(n,h,o),s!==null&&(Ii(s,n,o),bu(s,n,o))}};function Ov(n,s,o,h,g,_,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,_,T):s.prototype&&s.prototype.isPureReactComponent?!Ha(o,h)||!Ha(g,_):!0}function Mv(n,s,o,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,h),s.state!==n&&cp.enqueueReplaceState(s,s.state,null)}function _l(n,s){var o=s;if("ref"in s){o={};for(var h in s)h!=="ref"&&(o[h]=s[h])}if(n=n.defaultProps){o===s&&(o=A({},o));for(var g in n)o[g]===void 0&&(o[g]=n[g])}return o}function Vv(n){rl(n)}function zv(n){console.error(n)}function Uv(n){rl(n)}function md(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(h){setTimeout(function(){throw h})}}function Bv(n,s,o){try{var h=n.onCaughtError;h(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function up(n,s,o){return o=$a(o),o.tag=3,o.payload={element:null},o.callback=function(){md(n,s)},o}function Hv(n){return n=$a(n),n.tag=3,n}function qv(n,s,o,h){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var _=h.value;n.payload=function(){return g(_)},n.callback=function(){Bv(s,o,h)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){Bv(s,o,h),typeof g!="function"&&(no===null?no=new Set([this]):no.add(this));var I=h.stack;this.componentDidCatch(h.value,{componentStack:I!==null?I:""})})}function tA(n,s,o,h,g){if(o.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(s=o.alternate,s!==null&&lc(s,o,g,!0),o=$i.current,o!==null){switch(o.tag){case 31:case 13:return bs===null?Ad():o.alternate===null&&an===0&&(an=3),o.flags&=-257,o.flags|=65536,o.lanes=g,h===td?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([h]):s.add(h),Lp(n,h,g)),!1;case 22:return o.flags|=65536,h===td?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([h])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([h]):o.add(h)),Lp(n,h,g)),!1}throw Error(r(435,o.tag))}return Lp(n,h,g),Ad(),!1}if(ot)return s=$i.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,h!==oc&&(n=Error(r(422),{cause:h}),cl(c(n,o)))):(h!==oc&&(s=Error(r(423),{cause:h}),cl(c(s,o))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,h=c(h,o),g=up(n.stateNode,h,g),Um(n,g),an!==4&&(an=2)),!1;var _=Error(r(520),{cause:h});if(_=c(_,o),Pu===null?Pu=[_]:Pu.push(_),an!==4&&(an=2),s===null)return!0;h=c(h,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=g&-g,o.lanes|=n,n=up(o.stateNode,h,n),Um(o,n),!1;case 1:if(s=o.type,_=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(no===null||!no.has(_))))return o.flags|=65536,g&=-g,o.lanes|=g,g=Hv(g),qv(g,n,o,h),Um(o,g),!1}o=o.return}while(o!==null);return!1}var hp=Error(r(461)),yn=!1;function Vn(n,s,o,h){s.child=n===null?Ky(s,null,o,h):pl(s,n.child,o,h)}function Fv(n,s,o,h,g){o=o.render;var _=s.ref;if("ref"in h){var T={};for(var I in h)I!=="ref"&&(T[I]=h[I])}else T=h;return hl(s),h=Zm(n,s,o,T,_,g),I=Km(),n!==null&&!yn?(Ym(n,s,g),Wr(n,s,g)):(ot&&I&&En(s),s.flags|=1,Vn(n,s,h,g),s.child)}function Gv(n,s,o,h,g){if(n===null){var _=o.type;return typeof _=="function"&&!rc(_)&&_.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=_,Zv(n,s,_,h,g)):(n=ll(o.type,null,h,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(_=n.child,!vp(n,g)){var T=_.memoizedProps;if(o=o.compare,o=o!==null?o:Ha,o(T,h)&&n.ref===s.ref)return Wr(n,s,g)}return s.flags|=1,n=vs(_,h),n.ref=s.ref,n.return=s,s.child=n}function Zv(n,s,o,h,g){if(n!==null){var _=n.memoizedProps;if(Ha(_,h)&&n.ref===s.ref)if(yn=!1,s.pendingProps=h=_,vp(n,g))(n.flags&131072)!==0&&(yn=!0);else return s.lanes=n.lanes,Wr(n,s,g)}return dp(n,s,o,h,g)}function Kv(n,s,o,h){var g=h.children,_=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((s.flags&128)!==0){if(_=_!==null?_.baseLanes|o:o,n!==null){for(h=s.child=n.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;h=g&~_}else h=0,s.child=null;return Yv(n,s,_,o,h)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Jh(s,_!==null?_.cachePool:null),_!==null?Qy(s,_):Hm(),Wy(s);else return h=s.lanes=536870912,Yv(n,s,_!==null?_.baseLanes|o:o,o,h)}else _!==null?(Jh(s,_.cachePool),Qy(s,_),Xa(),s.memoizedState=null):(n!==null&&Jh(s,null),Hm(),Xa());return Vn(n,s,g,o),s.child}function Nu(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Yv(n,s,o,h,g){var _=Om();return _=_===null?null:{parent:gn._currentValue,pool:_},s.memoizedState={baseLanes:o,cachePool:_},n!==null&&Jh(s,null),Hm(),Wy(s),n!==null&&lc(n,s,h,!0),s.childLanes=g,null}function pd(n,s){return s=_d({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function $v(n,s,o){return pl(s,n.child,null,o),n=pd(s,s.pendingProps),n.flags|=2,Qi(s),s.memoizedState=null,n}function nA(n,s,o){var h=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(ot){if(h.mode==="hidden")return n=pd(s,h),s.lanes=536870912,Nu(null,n);if(Fm(s),(n=xt)?(n=ob(n,Si),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ee!==null?{id:fe,overflow:Te}:null,retryLane:536870912,hydrationErrors:null},o=du(n),o.return=s,s.child=o,bt=s,xt=null)):n=null,n===null)throw pr(s);return s.lanes=536870912,null}return pd(s,h)}var _=n.memoizedState;if(_!==null){var T=_.dehydrated;if(Fm(s),g)if(s.flags&256)s.flags&=-257,s=$v(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(yn||lc(n,s,o,!1),g=(o&n.childLanes)!==0,yn||g){if(h=Ot,h!==null&&(T=Uo(h,o),T!==0&&T!==_.retryLane))throw _.retryLane=T,ys(n,T),Ii(h,n,T),hp;Ad(),s=$v(n,s,o)}else n=_.treeContext,xt=xs(T.nextSibling),bt=s,ot=!0,mr=null,Si=!1,n!==null&&ci(s,n),s=pd(s,h),s.flags|=4096;return s}return n=vs(n.child,{mode:h.mode,children:h.children}),n.ref=s.ref,s.child=n,n.return=s,n}function gd(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function dp(n,s,o,h,g){return hl(s),o=Zm(n,s,o,h,void 0,g),h=Km(),n!==null&&!yn?(Ym(n,s,g),Wr(n,s,g)):(ot&&h&&En(s),s.flags|=1,Vn(n,s,o,g),s.child)}function Qv(n,s,o,h,g,_){return hl(s),s.updateQueue=null,o=Jy(s,h,o,g),Xy(n),h=Km(),n!==null&&!yn?(Ym(n,s,_),Wr(n,s,_)):(ot&&h&&En(s),s.flags|=1,Vn(n,s,o,_),s.child)}function Wv(n,s,o,h,g){if(hl(s),s.stateNode===null){var _=Gr,T=o.contextType;typeof T=="object"&&T!==null&&(_=Mn(T)),_=new o(h,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=cp,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=h,_.state=s.memoizedState,_.refs={},Vm(s),T=o.contextType,_.context=typeof T=="object"&&T!==null?Mn(T):Gr,_.state=s.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(lp(s,o,T,h),_.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(T=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),T!==_.state&&cp.enqueueReplaceState(_,_.state,null),wu(s,h,_,g),xu(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),h=!0}else if(n===null){_=s.stateNode;var I=s.memoizedProps,H=_l(o,I);_.props=H;var J=_.context,he=o.contextType;T=Gr,typeof he=="object"&&he!==null&&(T=Mn(he));var me=o.getDerivedStateFromProps;he=typeof me=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,he||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||J!==T)&&Mv(s,_,h,T),Ya=!1;var te=s.memoizedState;_.state=te,wu(s,h,_,g),xu(),J=s.memoizedState,I||te!==J||Ya?(typeof me=="function"&&(lp(s,o,me,h),J=s.memoizedState),(H=Ya||Ov(s,o,H,h,te,J,T))?(he||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=J),_.props=h,_.state=J,_.context=T,h=H):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{_=s.stateNode,zm(n,s),T=s.memoizedProps,he=_l(o,T),_.props=he,me=s.pendingProps,te=_.context,J=o.contextType,H=Gr,typeof J=="object"&&J!==null&&(H=Mn(J)),I=o.getDerivedStateFromProps,(J=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==me||te!==H)&&Mv(s,_,h,H),Ya=!1,te=s.memoizedState,_.state=te,wu(s,h,_,g),xu();var oe=s.memoizedState;T!==me||te!==oe||Ya||n!==null&&n.dependencies!==null&&Wh(n.dependencies)?(typeof I=="function"&&(lp(s,o,I,h),oe=s.memoizedState),(he=Ya||Ov(s,o,he,h,te,oe,H)||n!==null&&n.dependencies!==null&&Wh(n.dependencies))?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,oe,H),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,oe,H)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=oe),_.props=h,_.state=oe,_.context=H,h=he):(typeof _.componentDidUpdate!="function"||T===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),h=!1)}return _=h,gd(n,s),h=(s.flags&128)!==0,_||h?(_=s.stateNode,o=h&&typeof o.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,n!==null&&h?(s.child=pl(s,n.child,null,g),s.child=pl(s,null,o,g)):Vn(n,s,o,g),s.memoizedState=_.state,n=s.child):n=Wr(n,s,g),n}function Xv(n,s,o,h){return Kr(),s.flags|=256,Vn(n,s,o,h),s.child}var fp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mp(n){return{baseLanes:n,cachePool:By()}}function pp(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Xi),n}function Jv(n,s,o){var h=s.pendingProps,g=!1,_=(s.flags&128)!==0,T;if((T=_)||(T=n!==null&&n.memoizedState===null?!1:(cn.current&2)!==0),T&&(g=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,n===null){if(ot){if(g?Wa(s):Xa(),(n=xt)?(n=ob(n,Si),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ee!==null?{id:fe,overflow:Te}:null,retryLane:536870912,hydrationErrors:null},o=du(n),o.return=s,s.child=o,bt=s,xt=null)):n=null,n===null)throw pr(s);return Wp(n)?s.lanes=32:s.lanes=536870912,null}var I=h.children;return h=h.fallback,g?(Xa(),g=s.mode,I=_d({mode:"hidden",children:I},g),h=Zr(h,g,o,null),I.return=s,h.return=s,I.sibling=h,s.child=I,h=s.child,h.memoizedState=mp(o),h.childLanes=pp(n,T,o),s.memoizedState=fp,Nu(null,h)):(Wa(s),gp(s,I))}var H=n.memoizedState;if(H!==null&&(I=H.dehydrated,I!==null)){if(_)s.flags&256?(Wa(s),s.flags&=-257,s=_p(n,s,o)):s.memoizedState!==null?(Xa(),s.child=n.child,s.flags|=128,s=null):(Xa(),I=h.fallback,g=s.mode,h=_d({mode:"visible",children:h.children},g),I=Zr(I,g,o,null),I.flags|=2,h.return=s,I.return=s,h.sibling=I,s.child=h,pl(s,n.child,null,o),h=s.child,h.memoizedState=mp(o),h.childLanes=pp(n,T,o),s.memoizedState=fp,s=Nu(null,h));else if(Wa(s),Wp(I)){if(T=I.nextSibling&&I.nextSibling.dataset,T)var J=T.dgst;T=J,h=Error(r(419)),h.stack="",h.digest=T,cl({value:h,source:null,stack:null}),s=_p(n,s,o)}else if(yn||lc(n,s,o,!1),T=(o&n.childLanes)!==0,yn||T){if(T=Ot,T!==null&&(h=Uo(T,o),h!==0&&h!==H.retryLane))throw H.retryLane=h,ys(n,h),Ii(T,n,h),hp;Qp(I)||Ad(),s=_p(n,s,o)}else Qp(I)?(s.flags|=192,s.child=n.child,s=null):(n=H.treeContext,xt=xs(I.nextSibling),bt=s,ot=!0,mr=null,Si=!1,n!==null&&ci(s,n),s=gp(s,h.children),s.flags|=4096);return s}return g?(Xa(),I=h.fallback,g=s.mode,H=n.child,J=H.sibling,h=vs(H,{mode:"hidden",children:h.children}),h.subtreeFlags=H.subtreeFlags&65011712,J!==null?I=vs(J,I):(I=Zr(I,g,o,null),I.flags|=2),I.return=s,h.return=s,h.sibling=I,s.child=h,Nu(null,h),h=s.child,I=n.child.memoizedState,I===null?I=mp(o):(g=I.cachePool,g!==null?(H=gn._currentValue,g=g.parent!==H?{parent:H,pool:H}:g):g=By(),I={baseLanes:I.baseLanes|o,cachePool:g}),h.memoizedState=I,h.childLanes=pp(n,T,o),s.memoizedState=fp,Nu(n.child,h)):(Wa(s),o=n.child,n=o.sibling,o=vs(o,{mode:"visible",children:h.children}),o.return=s,o.sibling=null,n!==null&&(T=s.deletions,T===null?(s.deletions=[n],s.flags|=16):T.push(n)),s.child=o,s.memoizedState=null,o)}function gp(n,s){return s=_d({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function _d(n,s){return n=Wn(22,n,null,s),n.lanes=0,n}function _p(n,s,o){return pl(s,n.child,null,o),n=gp(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function e0(n,s,o){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),Dm(n.return,s,o)}function yp(n,s,o,h,g,_){var T=n.memoizedState;T===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:g,treeForkCount:_}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=h,T.tail=o,T.tailMode=g,T.treeForkCount=_)}function t0(n,s,o){var h=s.pendingProps,g=h.revealOrder,_=h.tail;h=h.children;var T=cn.current,I=(T&2)!==0;if(I?(T=T&1|2,s.flags|=128):T&=1,ve(cn,T),Vn(n,s,h,o),h=ot?C:0,!I&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&e0(n,o,s);else if(n.tag===19)e0(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(o=s.child,g=null;o!==null;)n=o.alternate,n!==null&&rd(n)===null&&(g=o),o=o.sibling;o=g,o===null?(g=s.child,s.child=null):(g=o.sibling,o.sibling=null),yp(s,!1,g,o,_,h);break;case"backwards":case"unstable_legacy-backwards":for(o=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&rd(n)===null){s.child=g;break}n=g.sibling,g.sibling=o,o=g,g=n}yp(s,!0,o,null,_,h);break;case"together":yp(s,!1,null,null,void 0,h);break;default:s.memoizedState=null}return s.child}function Wr(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),to|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(lc(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,o=vs(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=vs(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function vp(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Wh(n)))}function iA(n,s,o){switch(s.tag){case 3:Ue(s,s.stateNode.containerInfo),Ka(s,gn,n.memoizedState.cache),Kr();break;case 27:case 5:xe(s);break;case 4:Ue(s,s.stateNode.containerInfo);break;case 10:Ka(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Fm(s),null;break;case 13:var h=s.memoizedState;if(h!==null)return h.dehydrated!==null?(Wa(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Jv(n,s,o):(Wa(s),n=Wr(n,s,o),n!==null?n.sibling:null);Wa(s);break;case 19:var g=(n.flags&128)!==0;if(h=(o&s.childLanes)!==0,h||(lc(n,s,o,!1),h=(o&s.childLanes)!==0),g){if(h)return t0(n,s,o);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ve(cn,cn.current),h)break;return null;case 22:return s.lanes=0,Kv(n,s,o,s.pendingProps);case 24:Ka(s,gn,n.memoizedState.cache)}return Wr(n,s,o)}function n0(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)yn=!0;else{if(!vp(n,o)&&(s.flags&128)===0)return yn=!1,iA(n,s,o);yn=(n.flags&131072)!==0}else yn=!1,ot&&(s.flags&1048576)!==0&&Je(s,C,s.index);switch(s.lanes=0,s.tag){case 16:e:{var h=s.pendingProps;if(n=fl(s.elementType),s.type=n,typeof n=="function")rc(n)?(h=_l(n,h),s.tag=1,s=Wv(null,s,n,h,o)):(s.tag=0,s=dp(null,s,n,h,o));else{if(n!=null){var g=n.$$typeof;if(g===ke){s.tag=11,s=Fv(null,s,n,h,o);break e}else if(g===P){s.tag=14,s=Gv(null,s,n,h,o);break e}}throw s=We(n)||n,Error(r(306,s,""))}}return s;case 0:return dp(n,s,s.type,s.pendingProps,o);case 1:return h=s.type,g=_l(h,s.pendingProps),Wv(n,s,h,g,o);case 3:e:{if(Ue(s,s.stateNode.containerInfo),n===null)throw Error(r(387));h=s.pendingProps;var _=s.memoizedState;g=_.element,zm(n,s),wu(s,h,null,o);var T=s.memoizedState;if(h=T.cache,Ka(s,gn,h),h!==_.cache&&jm(s,[gn],o,!0),xu(),h=T.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=Xv(n,s,h,o);break e}else if(h!==g){g=c(Error(r(424)),s),cl(g),s=Xv(n,s,h,o);break e}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,xt=xs(n.firstChild),bt=s,ot=!0,mr=null,Si=!0,o=Ky(s,null,h,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Kr(),h===g){s=Wr(n,s,o);break e}Vn(n,s,h,o)}s=s.child}return s;case 26:return gd(n,s),n===null?(o=fb(s.type,null,s.pendingProps,null))?s.memoizedState=o:ot||(o=s.type,n=s.pendingProps,h=jd(Ae.current).createElement(o),h[Qt]=s,h[tn]=n,zn(h,o,n),nn(h),s.stateNode=h):s.memoizedState=fb(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return xe(s),n===null&&ot&&(h=s.stateNode=ub(s.type,s.pendingProps,Ae.current),bt=s,Si=!0,g=xt,ao(s.type)?(Xp=g,xt=xs(h.firstChild)):xt=g),Vn(n,s,s.pendingProps.children,o),gd(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&ot&&((g=h=xt)&&(h=jA(h,s.type,s.pendingProps,Si),h!==null?(s.stateNode=h,bt=s,xt=xs(h.firstChild),Si=!1,g=!0):g=!1),g||pr(s)),xe(s),g=s.type,_=s.pendingProps,T=n!==null?n.memoizedProps:null,h=_.children,Kp(g,_)?h=null:T!==null&&Kp(g,T)&&(s.flags|=32),s.memoizedState!==null&&(g=Zm(n,s,YS,null,null,o),Hu._currentValue=g),gd(n,s),Vn(n,s,h,o),s.child;case 6:return n===null&&ot&&((n=o=xt)&&(o=PA(o,s.pendingProps,Si),o!==null?(s.stateNode=o,bt=s,xt=null,n=!0):n=!1),n||pr(s)),null;case 13:return Jv(n,s,o);case 4:return Ue(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=pl(s,null,h,o):Vn(n,s,h,o),s.child;case 11:return Fv(n,s,s.type,s.pendingProps,o);case 7:return Vn(n,s,s.pendingProps,o),s.child;case 8:return Vn(n,s,s.pendingProps.children,o),s.child;case 12:return Vn(n,s,s.pendingProps.children,o),s.child;case 10:return h=s.pendingProps,Ka(s,s.type,h.value),Vn(n,s,h.children,o),s.child;case 9:return g=s.type._context,h=s.pendingProps.children,hl(s),g=Mn(g),h=h(g),s.flags|=1,Vn(n,s,h,o),s.child;case 14:return Gv(n,s,s.type,s.pendingProps,o);case 15:return Zv(n,s,s.type,s.pendingProps,o);case 19:return t0(n,s,o);case 31:return nA(n,s,o);case 22:return Kv(n,s,o,s.pendingProps);case 24:return hl(s),h=Mn(gn),n===null?(g=Om(),g===null&&(g=Ot,_=Pm(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=o),g=_),s.memoizedState={parent:h,cache:g},Vm(s),Ka(s,gn,g)):((n.lanes&o)!==0&&(zm(n,s),wu(s,null,null,o),xu()),g=n.memoizedState,_=s.memoizedState,g.parent!==h?(g={parent:h,cache:h},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),Ka(s,gn,h)):(h=_.cache,Ka(s,gn,h),h!==g.cache&&jm(s,[gn],o,!0))),Vn(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Xr(n){n.flags|=4}function bp(n,s,o,h,g){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(R0())n.flags|=8192;else throw ml=td,Mm}else n.flags&=-16777217}function i0(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!yb(s))if(R0())n.flags|=8192;else throw ml=td,Mm}function yd(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Gl():536870912,n.lanes|=s,bc|=s)}function Cu(n,s){if(!ot)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Ht(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,h=0;if(s)for(var g=n.child;g!==null;)o|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)o|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=h,n.childLanes=o,s}function sA(n,s,o){var h=s.pendingProps;switch(sn(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(s),null;case 1:return Ht(s),null;case 3:return o=s.stateNode,h=null,n!==null&&(h=n.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),Yr(gn),qe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Fs(s)?Xr(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,pu())),Ht(s),null;case 26:var g=s.type,_=s.memoizedState;return n===null?(Xr(s),_!==null?(Ht(s),i0(s,_)):(Ht(s),bp(s,g,null,h,o))):_?_!==n.memoizedState?(Xr(s),Ht(s),i0(s,_)):(Ht(s),s.flags&=-16777217):(n=n.memoizedProps,n!==h&&Xr(s),Ht(s),bp(s,g,n,h,o)),null;case 27:if(De(s),o=Ae.current,g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==h&&Xr(s);else{if(!h){if(s.stateNode===null)throw Error(r(166));return Ht(s),null}n=ye.current,Fs(s)?mu(s):(n=ub(g,h,o),s.stateNode=n,Xr(s))}return Ht(s),null;case 5:if(De(s),g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==h&&Xr(s);else{if(!h){if(s.stateNode===null)throw Error(r(166));return Ht(s),null}if(_=ye.current,Fs(s))mu(s);else{var T=jd(Ae.current);switch(_){case 1:_=T.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:_=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":_=T.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":_=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":_=T.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof h.is=="string"?T.createElement("select",{is:h.is}):T.createElement("select"),h.multiple?_.multiple=!0:h.size&&(_.size=h.size);break;default:_=typeof h.is=="string"?T.createElement(g,{is:h.is}):T.createElement(g)}}_[Qt]=s,_[tn]=h;e:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)_.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break e;for(;T.sibling===null;){if(T.return===null||T.return===s)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=_;e:switch(zn(_,g,h),g){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Xr(s)}}return Ht(s),bp(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==h&&Xr(s);else{if(typeof h!="string"&&s.stateNode===null)throw Error(r(166));if(n=Ae.current,Fs(s)){if(n=s.stateNode,o=s.memoizedProps,h=null,g=bt,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}n[Qt]=s,n=!!(n.nodeValue===o||h!==null&&h.suppressHydrationWarning===!0||J0(n.nodeValue,o)),n||pr(s,!0)}else n=jd(n).createTextNode(h),n[Qt]=s,s.stateNode=n}return Ht(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(h=Fs(s),o!==null){if(n===null){if(!h)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Qt]=s}else Kr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ht(s),n=!1}else o=pu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(Qi(s),s):(Qi(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Ht(s),null;case 13:if(h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=Fs(s),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(r(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Qt]=s}else Kr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ht(s),g=!1}else g=pu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Qi(s),s):(Qi(s),null)}return Qi(s),(s.flags&128)!==0?(s.lanes=o,s):(o=h!==null,n=n!==null&&n.memoizedState!==null,o&&(h=s.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool),_=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),_!==g&&(h.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),yd(s,s.updateQueue),Ht(s),null);case 4:return qe(),n===null&&Hp(s.stateNode.containerInfo),Ht(s),null;case 10:return Yr(s.type),Ht(s),null;case 19:if(le(cn),h=s.memoizedState,h===null)return Ht(s),null;if(g=(s.flags&128)!==0,_=h.rendering,_===null)if(g)Cu(h,!1);else{if(an!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(_=rd(n),_!==null){for(s.flags|=128,Cu(h,!1),n=_.updateQueue,s.updateQueue=n,yd(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)hu(o,n),o=o.sibling;return ve(cn,cn.current&1|2),ot&&Oe(s,h.treeForkCount),s.child}n=n.sibling}h.tail!==null&&On()>Ed&&(s.flags|=128,g=!0,Cu(h,!1),s.lanes=4194304)}else{if(!g)if(n=rd(_),n!==null){if(s.flags|=128,g=!0,n=n.updateQueue,s.updateQueue=n,yd(s,n),Cu(h,!0),h.tail===null&&h.tailMode==="hidden"&&!_.alternate&&!ot)return Ht(s),null}else 2*On()-h.renderingStartTime>Ed&&o!==536870912&&(s.flags|=128,g=!0,Cu(h,!1),s.lanes=4194304);h.isBackwards?(_.sibling=s.child,s.child=_):(n=h.last,n!==null?n.sibling=_:s.child=_,h.last=_)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=On(),n.sibling=null,o=cn.current,ve(cn,g?o&1|2:o&1),ot&&Oe(s,h.treeForkCount),n):(Ht(s),null);case 22:case 23:return Qi(s),qm(),h=s.memoizedState!==null,n!==null?n.memoizedState!==null!==h&&(s.flags|=8192):h&&(s.flags|=8192),h?(o&536870912)!==0&&(s.flags&128)===0&&(Ht(s),s.subtreeFlags&6&&(s.flags|=8192)):Ht(s),o=s.updateQueue,o!==null&&yd(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==o&&(s.flags|=2048),n!==null&&le(dl),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Yr(gn),Ht(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function rA(n,s){switch(sn(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Yr(gn),qe(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return De(s),null;case 31:if(s.memoizedState!==null){if(Qi(s),s.alternate===null)throw Error(r(340));Kr()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Qi(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Kr()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return le(cn),null;case 4:return qe(),null;case 10:return Yr(s.type),null;case 22:case 23:return Qi(s),qm(),n!==null&&le(dl),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Yr(gn),null;case 25:return null;default:return null}}function s0(n,s){switch(sn(s),s.tag){case 3:Yr(gn),qe();break;case 26:case 27:case 5:De(s);break;case 4:qe();break;case 31:s.memoizedState!==null&&Qi(s);break;case 13:Qi(s);break;case 19:le(cn);break;case 10:Yr(s.type);break;case 22:case 23:Qi(s),qm(),n!==null&&le(dl);break;case 24:Yr(gn)}}function Ru(n,s){try{var o=s.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var g=h.next;o=g;do{if((o.tag&n)===n){h=void 0;var _=o.create,T=o.inst;h=_(),T.destroy=h}o=o.next}while(o!==g)}}catch(I){It(s,s.return,I)}}function Ja(n,s,o){try{var h=s.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var _=g.next;h=_;do{if((h.tag&n)===n){var T=h.inst,I=T.destroy;if(I!==void 0){T.destroy=void 0,g=s;var H=o,J=I;try{J()}catch(he){It(g,H,he)}}}h=h.next}while(h!==_)}}catch(he){It(s,s.return,he)}}function r0(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{$y(s,o)}catch(h){It(n,n.return,h)}}}function a0(n,s,o){o.props=_l(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(h){It(n,s,h)}}function Iu(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var h=n.stateNode;break;case 30:h=n.stateNode;break;default:h=n.stateNode}typeof o=="function"?n.refCleanup=o(h):o.current=h}}catch(g){It(n,s,g)}}function _r(n,s){var o=n.ref,h=n.refCleanup;if(o!==null)if(typeof h=="function")try{h()}catch(g){It(n,s,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){It(n,s,g)}else o.current=null}function o0(n){var s=n.type,o=n.memoizedProps,h=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&h.focus();break e;case"img":o.src?h.src=o.src:o.srcSet&&(h.srcset=o.srcSet)}}catch(g){It(n,n.return,g)}}function xp(n,s,o){try{var h=n.stateNode;NA(h,n.type,o,s),h[tn]=s}catch(g){It(n,n.return,g)}}function l0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ao(n.type)||n.tag===4}function wp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||l0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ao(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ep(n,s,o){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Zn));else if(h!==4&&(h===27&&ao(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Ep(n,s,o),n=n.sibling;n!==null;)Ep(n,s,o),n=n.sibling}function vd(n,s,o){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(h!==4&&(h===27&&ao(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(vd(n,s,o),n=n.sibling;n!==null;)vd(n,s,o),n=n.sibling}function c0(n){var s=n.stateNode,o=n.memoizedProps;try{for(var h=n.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);zn(s,h,o),s[Qt]=n,s[tn]=o}catch(_){It(n,n.return,_)}}var Jr=!1,vn=!1,Tp=!1,u0=typeof WeakSet=="function"?WeakSet:Set,jn=null;function aA(n,s){if(n=n.containerInfo,Gp=Ud,n=tl(n),cr(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var g=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{o.nodeType,_.nodeType}catch{o=null;break e}var T=0,I=-1,H=-1,J=0,he=0,me=n,te=null;t:for(;;){for(var oe;me!==o||g!==0&&me.nodeType!==3||(I=T+g),me!==_||h!==0&&me.nodeType!==3||(H=T+h),me.nodeType===3&&(T+=me.nodeValue.length),(oe=me.firstChild)!==null;)te=me,me=oe;for(;;){if(me===n)break t;if(te===o&&++J===g&&(I=T),te===_&&++he===h&&(H=T),(oe=me.nextSibling)!==null)break;me=te,te=me.parentNode}me=oe}o=I===-1||H===-1?null:{start:I,end:H}}else o=null}o=o||{start:0,end:0}}else o=null;for(Zp={focusedElem:n,selectionRange:o},Ud=!1,jn=s;jn!==null;)if(s=jn,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,jn=n;else for(;jn!==null;){switch(s=jn,_=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)g=n[o],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&_!==null){n=void 0,o=s,g=_.memoizedProps,_=_.memoizedState,h=o.stateNode;try{var Pe=_l(o.type,g);n=h.getSnapshotBeforeUpdate(Pe,_),h.__reactInternalSnapshotBeforeUpdate=n}catch(He){It(o,o.return,He)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)$p(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":$p(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,jn=n;break}jn=s.return}}function h0(n,s,o){var h=o.flags;switch(o.tag){case 0:case 11:case 15:ta(n,o),h&4&&Ru(5,o);break;case 1:if(ta(n,o),h&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(T){It(o,o.return,T)}else{var g=_l(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(g,s,n.__reactInternalSnapshotBeforeUpdate)}catch(T){It(o,o.return,T)}}h&64&&r0(o),h&512&&Iu(o,o.return);break;case 3:if(ta(n,o),h&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{$y(n,s)}catch(T){It(o,o.return,T)}}break;case 27:s===null&&h&4&&c0(o);case 26:case 5:ta(n,o),s===null&&h&4&&o0(o),h&512&&Iu(o,o.return);break;case 12:ta(n,o);break;case 31:ta(n,o),h&4&&m0(n,o);break;case 13:ta(n,o),h&4&&p0(n,o),h&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=pA.bind(null,o),LA(n,o))));break;case 22:if(h=o.memoizedState!==null||Jr,!h){s=s!==null&&s.memoizedState!==null||vn,g=Jr;var _=vn;Jr=h,(vn=s)&&!_?na(n,o,(o.subtreeFlags&8772)!==0):ta(n,o),Jr=g,vn=_}break;case 30:break;default:ta(n,o)}}function d0(n){var s=n.alternate;s!==null&&(n.alternate=null,d0(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Ra(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Gt=null,Ai=!1;function ea(n,s,o){for(o=o.child;o!==null;)f0(n,s,o),o=o.sibling}function f0(n,s,o){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(fi,o)}catch{}switch(o.tag){case 26:vn||_r(o,s),ea(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:vn||_r(o,s);var h=Gt,g=Ai;ao(o.type)&&(Gt=o.stateNode,Ai=!1),ea(n,s,o),zu(o.stateNode),Gt=h,Ai=g;break;case 5:vn||_r(o,s);case 6:if(h=Gt,g=Ai,Gt=null,ea(n,s,o),Gt=h,Ai=g,Gt!==null)if(Ai)try{(Gt.nodeType===9?Gt.body:Gt.nodeName==="HTML"?Gt.ownerDocument.body:Gt).removeChild(o.stateNode)}catch(_){It(o,s,_)}else try{Gt.removeChild(o.stateNode)}catch(_){It(o,s,_)}break;case 18:Gt!==null&&(Ai?(n=Gt,rb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Cc(n)):rb(Gt,o.stateNode));break;case 4:h=Gt,g=Ai,Gt=o.stateNode.containerInfo,Ai=!0,ea(n,s,o),Gt=h,Ai=g;break;case 0:case 11:case 14:case 15:Ja(2,o,s),vn||Ja(4,o,s),ea(n,s,o);break;case 1:vn||(_r(o,s),h=o.stateNode,typeof h.componentWillUnmount=="function"&&a0(o,s,h)),ea(n,s,o);break;case 21:ea(n,s,o);break;case 22:vn=(h=vn)||o.memoizedState!==null,ea(n,s,o),vn=h;break;default:ea(n,s,o)}}function m0(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Cc(n)}catch(o){It(s,s.return,o)}}}function p0(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Cc(n)}catch(o){It(s,s.return,o)}}function oA(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new u0),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new u0),s;default:throw Error(r(435,n.tag))}}function bd(n,s){var o=oA(n);s.forEach(function(h){if(!o.has(h)){o.add(h);var g=gA.bind(null,n,h);h.then(g,g)}})}function Ni(n,s){var o=s.deletions;if(o!==null)for(var h=0;h<o.length;h++){var g=o[h],_=n,T=s,I=T;e:for(;I!==null;){switch(I.tag){case 27:if(ao(I.type)){Gt=I.stateNode,Ai=!1;break e}break;case 5:Gt=I.stateNode,Ai=!1;break e;case 3:case 4:Gt=I.stateNode.containerInfo,Ai=!0;break e}I=I.return}if(Gt===null)throw Error(r(160));f0(_,T,g),Gt=null,Ai=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)g0(s,n),s=s.sibling}var Zs=null;function g0(n,s){var o=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ni(s,n),Ci(n),h&4&&(Ja(3,n,n.return),Ru(3,n),Ja(5,n,n.return));break;case 1:Ni(s,n),Ci(n),h&512&&(vn||o===null||_r(o,o.return)),h&64&&Jr&&(n=n.updateQueue,n!==null&&(h=n.callbacks,h!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?h:o.concat(h))));break;case 26:var g=Zs;if(Ni(s,n),Ci(n),h&512&&(vn||o===null||_r(o,o.return)),h&4){var _=o!==null?o.memoizedState:null;if(h=n.memoizedState,o===null)if(h===null)if(n.stateNode===null){e:{h=n.type,o=n.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":_=g.getElementsByTagName("title")[0],(!_||_[os]||_[Qt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(h),g.head.insertBefore(_,g.querySelector("head > title"))),zn(_,h,o),_[Qt]=n,nn(_),h=_;break e;case"link":var T=gb("link","href",g).get(h+(o.href||""));if(T){for(var I=0;I<T.length;I++)if(_=T[I],_.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&_.getAttribute("rel")===(o.rel==null?null:o.rel)&&_.getAttribute("title")===(o.title==null?null:o.title)&&_.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(I,1);break t}}_=g.createElement(h),zn(_,h,o),g.head.appendChild(_);break;case"meta":if(T=gb("meta","content",g).get(h+(o.content||""))){for(I=0;I<T.length;I++)if(_=T[I],_.getAttribute("content")===(o.content==null?null:""+o.content)&&_.getAttribute("name")===(o.name==null?null:o.name)&&_.getAttribute("property")===(o.property==null?null:o.property)&&_.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&_.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(I,1);break t}}_=g.createElement(h),zn(_,h,o),g.head.appendChild(_);break;default:throw Error(r(468,h))}_[Qt]=n,nn(_),h=_}n.stateNode=h}else _b(g,n.type,n.stateNode);else n.stateNode=pb(g,h,n.memoizedProps);else _!==h?(_===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):_.count--,h===null?_b(g,n.type,n.stateNode):pb(g,h,n.memoizedProps)):h===null&&n.stateNode!==null&&xp(n,n.memoizedProps,o.memoizedProps)}break;case 27:Ni(s,n),Ci(n),h&512&&(vn||o===null||_r(o,o.return)),o!==null&&h&4&&xp(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Ni(s,n),Ci(n),h&512&&(vn||o===null||_r(o,o.return)),n.flags&32){g=n.stateNode;try{mn(g,"")}catch(Pe){It(n,n.return,Pe)}}h&4&&n.stateNode!=null&&(g=n.memoizedProps,xp(n,g,o!==null?o.memoizedProps:g)),h&1024&&(Tp=!0);break;case 6:if(Ni(s,n),Ci(n),h&4){if(n.stateNode===null)throw Error(r(162));h=n.memoizedProps,o=n.stateNode;try{o.nodeValue=h}catch(Pe){It(n,n.return,Pe)}}break;case 3:if(Od=null,g=Zs,Zs=Pd(s.containerInfo),Ni(s,n),Zs=g,Ci(n),h&4&&o!==null&&o.memoizedState.isDehydrated)try{Cc(s.containerInfo)}catch(Pe){It(n,n.return,Pe)}Tp&&(Tp=!1,_0(n));break;case 4:h=Zs,Zs=Pd(n.stateNode.containerInfo),Ni(s,n),Ci(n),Zs=h;break;case 12:Ni(s,n),Ci(n);break;case 31:Ni(s,n),Ci(n),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,bd(n,h)));break;case 13:Ni(s,n),Ci(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(wd=On()),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,bd(n,h)));break;case 22:g=n.memoizedState!==null;var H=o!==null&&o.memoizedState!==null,J=Jr,he=vn;if(Jr=J||g,vn=he||H,Ni(s,n),vn=he,Jr=J,Ci(n),h&8192)e:for(s=n.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(o===null||H||Jr||vn||yl(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){H=o=s;try{if(_=H.stateNode,g)T=_.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{I=H.stateNode;var me=H.memoizedProps.style,te=me!=null&&me.hasOwnProperty("display")?me.display:null;I.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Pe){It(H,H.return,Pe)}}}else if(s.tag===6){if(o===null){H=s;try{H.stateNode.nodeValue=g?"":H.memoizedProps}catch(Pe){It(H,H.return,Pe)}}}else if(s.tag===18){if(o===null){H=s;try{var oe=H.stateNode;g?ab(oe,!0):ab(H.stateNode,!1)}catch(Pe){It(H,H.return,Pe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}h&4&&(h=n.updateQueue,h!==null&&(o=h.retryQueue,o!==null&&(h.retryQueue=null,bd(n,o))));break;case 19:Ni(s,n),Ci(n),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,bd(n,h)));break;case 30:break;case 21:break;default:Ni(s,n),Ci(n)}}function Ci(n){var s=n.flags;if(s&2){try{for(var o,h=n.return;h!==null;){if(l0(h)){o=h;break}h=h.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var g=o.stateNode,_=wp(n);vd(n,_,g);break;case 5:var T=o.stateNode;o.flags&32&&(mn(T,""),o.flags&=-33);var I=wp(n);vd(n,I,T);break;case 3:case 4:var H=o.stateNode.containerInfo,J=wp(n);Ep(n,J,H);break;default:throw Error(r(161))}}catch(he){It(n,n.return,he)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function _0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;_0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ta(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)h0(n,s.alternate,s),s=s.sibling}function yl(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Ja(4,s,s.return),yl(s);break;case 1:_r(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&a0(s,s.return,o),yl(s);break;case 27:zu(s.stateNode);case 26:case 5:_r(s,s.return),yl(s);break;case 22:s.memoizedState===null&&yl(s);break;case 30:yl(s);break;default:yl(s)}n=n.sibling}}function na(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var h=s.alternate,g=n,_=s,T=_.flags;switch(_.tag){case 0:case 11:case 15:na(g,_,o),Ru(4,_);break;case 1:if(na(g,_,o),h=_,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(J){It(h,h.return,J)}if(h=_,g=h.updateQueue,g!==null){var I=h.stateNode;try{var H=g.shared.hiddenCallbacks;if(H!==null)for(g.shared.hiddenCallbacks=null,g=0;g<H.length;g++)Yy(H[g],I)}catch(J){It(h,h.return,J)}}o&&T&64&&r0(_),Iu(_,_.return);break;case 27:c0(_);case 26:case 5:na(g,_,o),o&&h===null&&T&4&&o0(_),Iu(_,_.return);break;case 12:na(g,_,o);break;case 31:na(g,_,o),o&&T&4&&m0(g,_);break;case 13:na(g,_,o),o&&T&4&&p0(g,_);break;case 22:_.memoizedState===null&&na(g,_,o),Iu(_,_.return);break;case 30:break;default:na(g,_,o)}s=s.sibling}}function Sp(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&gu(o))}function Ap(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&gu(n))}function Ks(n,s,o,h){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)y0(n,s,o,h),s=s.sibling}function y0(n,s,o,h){var g=s.flags;switch(s.tag){case 0:case 11:case 15:Ks(n,s,o,h),g&2048&&Ru(9,s);break;case 1:Ks(n,s,o,h);break;case 3:Ks(n,s,o,h),g&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&gu(n)));break;case 12:if(g&2048){Ks(n,s,o,h),n=s.stateNode;try{var _=s.memoizedProps,T=_.id,I=_.onPostCommit;typeof I=="function"&&I(T,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(H){It(s,s.return,H)}}else Ks(n,s,o,h);break;case 31:Ks(n,s,o,h);break;case 13:Ks(n,s,o,h);break;case 23:break;case 22:_=s.stateNode,T=s.alternate,s.memoizedState!==null?_._visibility&2?Ks(n,s,o,h):ku(n,s):_._visibility&2?Ks(n,s,o,h):(_._visibility|=2,_c(n,s,o,h,(s.subtreeFlags&10256)!==0||!1)),g&2048&&Sp(T,s);break;case 24:Ks(n,s,o,h),g&2048&&Ap(s.alternate,s);break;default:Ks(n,s,o,h)}}function _c(n,s,o,h,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var _=n,T=s,I=o,H=h,J=T.flags;switch(T.tag){case 0:case 11:case 15:_c(_,T,I,H,g),Ru(8,T);break;case 23:break;case 22:var he=T.stateNode;T.memoizedState!==null?he._visibility&2?_c(_,T,I,H,g):ku(_,T):(he._visibility|=2,_c(_,T,I,H,g)),g&&J&2048&&Sp(T.alternate,T);break;case 24:_c(_,T,I,H,g),g&&J&2048&&Ap(T.alternate,T);break;default:_c(_,T,I,H,g)}s=s.sibling}}function ku(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,h=s,g=h.flags;switch(h.tag){case 22:ku(o,h),g&2048&&Sp(h.alternate,h);break;case 24:ku(o,h),g&2048&&Ap(h.alternate,h);break;default:ku(o,h)}s=s.sibling}}var Du=8192;function yc(n,s,o){if(n.subtreeFlags&Du)for(n=n.child;n!==null;)v0(n,s,o),n=n.sibling}function v0(n,s,o){switch(n.tag){case 26:yc(n,s,o),n.flags&Du&&n.memoizedState!==null&&KA(o,Zs,n.memoizedState,n.memoizedProps);break;case 5:yc(n,s,o);break;case 3:case 4:var h=Zs;Zs=Pd(n.stateNode.containerInfo),yc(n,s,o),Zs=h;break;case 22:n.memoizedState===null&&(h=n.alternate,h!==null&&h.memoizedState!==null?(h=Du,Du=16777216,yc(n,s,o),Du=h):yc(n,s,o));break;default:yc(n,s,o)}}function b0(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function ju(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var h=s[o];jn=h,w0(h,n)}b0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)x0(n),n=n.sibling}function x0(n){switch(n.tag){case 0:case 11:case 15:ju(n),n.flags&2048&&Ja(9,n,n.return);break;case 3:ju(n);break;case 12:ju(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,xd(n)):ju(n);break;default:ju(n)}}function xd(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var h=s[o];jn=h,w0(h,n)}b0(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Ja(8,s,s.return),xd(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,xd(s));break;default:xd(s)}n=n.sibling}}function w0(n,s){for(;jn!==null;){var o=jn;switch(o.tag){case 0:case 11:case 15:Ja(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var h=o.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:gu(o.memoizedState.cache)}if(h=o.child,h!==null)h.return=o,jn=h;else e:for(o=n;jn!==null;){h=jn;var g=h.sibling,_=h.return;if(d0(h),h===o){jn=null;break e}if(g!==null){g.return=_,jn=g;break e}jn=_}}}var lA={getCacheForType:function(n){var s=Mn(gn),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return Mn(gn).controller.signal}},cA=typeof WeakMap=="function"?WeakMap:Map,Tt=0,Ot=null,lt=null,ht=0,Rt=0,Wi=null,eo=!1,vc=!1,Np=!1,ia=0,an=0,to=0,vl=0,Cp=0,Xi=0,bc=0,Pu=null,Ri=null,Rp=!1,wd=0,E0=0,Ed=1/0,Td=null,no=null,Tn=0,io=null,xc=null,sa=0,Ip=0,kp=null,T0=null,Lu=0,Dp=null;function Ji(){return(Tt&2)!==0&&ht!==0?ht&-ht:re.T!==null?Vp():Bo()}function S0(){if(Xi===0)if((ht&536870912)===0||ot){var n=tr;tr<<=1,(tr&3932160)===0&&(tr=262144),Xi=n}else Xi=536870912;return n=$i.current,n!==null&&(n.flags|=32),Xi}function Ii(n,s,o){(n===Ot&&(Rt===2||Rt===9)||n.cancelPendingCommit!==null)&&(wc(n,0),so(n,ht,Xi,!1)),js(n,o),((Tt&2)===0||n!==Ot)&&(n===Ot&&((Tt&2)===0&&(vl|=o),an===4&&so(n,ht,Xi,!1)),yr(n))}function A0(n,s,o){if((Tt&6)!==0)throw Error(r(327));var h=!o&&(s&127)===0&&(s&n.expiredLanes)===0||Mi(n,s),g=h?dA(n,s):Pp(n,s,!0),_=h;do{if(g===0){vc&&!h&&so(n,s,0,!1);break}else{if(o=n.current.alternate,_&&!uA(o)){g=Pp(n,s,!1),_=!1;continue}if(g===2){if(_=s,n.errorRecoveryDisabledLanes&_)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var I=n;g=Pu;var H=I.current.memoizedState.isDehydrated;if(H&&(wc(I,T).flags|=256),T=Pp(I,T,!1),T!==2){if(Np&&!H){I.errorRecoveryDisabledLanes|=_,vl|=_,g=4;break e}_=Ri,Ri=g,_!==null&&(Ri===null?Ri=_:Ri.push.apply(Ri,_))}g=T}if(_=!1,g!==2)continue}}if(g===1){wc(n,0),so(n,s,0,!0);break}e:{switch(h=n,_=g,_){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:so(h,s,Xi,!eo);break e;case 2:Ri=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(g=wd+300-On(),10<g)){if(so(h,s,Xi,!eo),rs(h,0,!0)!==0)break e;sa=s,h.timeoutHandle=ib(N0.bind(null,h,o,Ri,Td,Rp,s,Xi,vl,bc,eo,_,"Throttled",-0,0),g);break e}N0(h,o,Ri,Td,Rp,s,Xi,vl,bc,eo,_,null,-0,0)}}break}while(!0);yr(n)}function N0(n,s,o,h,g,_,T,I,H,J,he,me,te,oe){if(n.timeoutHandle=-1,me=s.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zn},v0(s,_,me);var Pe=(_&62914560)===_?wd-On():(_&4194048)===_?E0-On():0;if(Pe=YA(me,Pe),Pe!==null){sa=_,n.cancelPendingCommit=Pe(L0.bind(null,n,s,_,o,h,g,T,I,H,he,me,null,te,oe)),so(n,_,T,!J);return}}L0(n,s,_,o,h,g,T,I,H)}function uA(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var h=0;h<o.length;h++){var g=o[h],_=g.getSnapshot;g=g.value;try{if(!kn(_(),g))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function so(n,s,o,h){s&=~Cp,s&=~vl,n.suspendedLanes|=s,n.pingedLanes&=~s,h&&(n.warmLanes|=s),h=n.expirationTimes;for(var g=s;0<g;){var _=31-Yt(g),T=1<<_;h[_]=-1,g&=~T}o!==0&&Or(n,o,s)}function Sd(){return(Tt&6)===0?(Ou(0),!1):!0}function jp(){if(lt!==null){if(Rt===0)var n=lt.return;else n=lt,Gs=gr=null,$m(n),dc=null,yu=0,n=lt;for(;n!==null;)s0(n.alternate,n),n=n.return;lt=null}}function wc(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,IA(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),sa=0,jp(),Ot=n,lt=o=vs(n.current,null),ht=s,Rt=0,Wi=null,eo=!1,vc=Mi(n,s),Np=!1,bc=Xi=Cp=vl=to=an=0,Ri=Pu=null,Rp=!1,(s&8)!==0&&(s|=s&32);var h=n.entangledLanes;if(h!==0)for(n=n.entanglements,h&=s;0<h;){var g=31-Yt(h),_=1<<g;s|=n[g],h&=~_}return ia=s,al(),o}function C0(n,s){Xe=null,re.H=Au,s===hc||s===ed?(s=Fy(),Rt=3):s===Mm?(s=Fy(),Rt=4):Rt=s===hp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Wi=s,lt===null&&(an=1,md(n,c(s,n.current)))}function R0(){var n=$i.current;return n===null?!0:(ht&4194048)===ht?bs===null:(ht&62914560)===ht||(ht&536870912)!==0?n===bs:!1}function I0(){var n=re.H;return re.H=Au,n===null?Au:n}function k0(){var n=re.A;return re.A=lA,n}function Ad(){an=4,eo||(ht&4194048)!==ht&&$i.current!==null||(vc=!0),(to&134217727)===0&&(vl&134217727)===0||Ot===null||so(Ot,ht,Xi,!1)}function Pp(n,s,o){var h=Tt;Tt|=2;var g=I0(),_=k0();(Ot!==n||ht!==s)&&(Td=null,wc(n,s)),s=!1;var T=an;e:do try{if(Rt!==0&&lt!==null){var I=lt,H=Wi;switch(Rt){case 8:jp(),T=6;break e;case 3:case 2:case 9:case 6:$i.current===null&&(s=!0);var J=Rt;if(Rt=0,Wi=null,Ec(n,I,H,J),o&&vc){T=0;break e}break;default:J=Rt,Rt=0,Wi=null,Ec(n,I,H,J)}}hA(),T=an;break}catch(he){C0(n,he)}while(!0);return s&&n.shellSuspendCounter++,Gs=gr=null,Tt=h,re.H=g,re.A=_,lt===null&&(Ot=null,ht=0,al()),T}function hA(){for(;lt!==null;)D0(lt)}function dA(n,s){var o=Tt;Tt|=2;var h=I0(),g=k0();Ot!==n||ht!==s?(Td=null,Ed=On()+500,wc(n,s)):vc=Mi(n,s);e:do try{if(Rt!==0&&lt!==null){s=lt;var _=Wi;t:switch(Rt){case 1:Rt=0,Wi=null,Ec(n,s,_,1);break;case 2:case 9:if(Hy(_)){Rt=0,Wi=null,j0(s);break}s=function(){Rt!==2&&Rt!==9||Ot!==n||(Rt=7),yr(n)},_.then(s,s);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:Hy(_)?(Rt=0,Wi=null,j0(s)):(Rt=0,Wi=null,Ec(n,s,_,7));break;case 5:var T=null;switch(lt.tag){case 26:T=lt.memoizedState;case 5:case 27:var I=lt;if(T?yb(T):I.stateNode.complete){Rt=0,Wi=null;var H=I.sibling;if(H!==null)lt=H;else{var J=I.return;J!==null?(lt=J,Nd(J)):lt=null}break t}}Rt=0,Wi=null,Ec(n,s,_,5);break;case 6:Rt=0,Wi=null,Ec(n,s,_,6);break;case 8:jp(),an=6;break e;default:throw Error(r(462))}}fA();break}catch(he){C0(n,he)}while(!0);return Gs=gr=null,re.H=h,re.A=g,Tt=o,lt!==null?0:(Ot=null,ht=0,al(),an)}function fA(){for(;lt!==null&&!Hl();)D0(lt)}function D0(n){var s=n0(n.alternate,n,ia);n.memoizedProps=n.pendingProps,s===null?Nd(n):lt=s}function j0(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=Qv(o,s,s.pendingProps,s.type,void 0,ht);break;case 11:s=Qv(o,s,s.pendingProps,s.type.render,s.ref,ht);break;case 5:$m(s);default:s0(o,s),s=lt=hu(s,ia),s=n0(o,s,ia)}n.memoizedProps=n.pendingProps,s===null?Nd(n):lt=s}function Ec(n,s,o,h){Gs=gr=null,$m(s),dc=null,yu=0;var g=s.return;try{if(tA(n,g,s,o,ht)){an=1,md(n,c(o,n.current)),lt=null;return}}catch(_){if(g!==null)throw lt=g,_;an=1,md(n,c(o,n.current)),lt=null;return}s.flags&32768?(ot||h===1?n=!0:vc||(ht&536870912)!==0?n=!1:(eo=n=!0,(h===2||h===9||h===3||h===6)&&(h=$i.current,h!==null&&h.tag===13&&(h.flags|=16384))),P0(s,n)):Nd(s)}function Nd(n){var s=n;do{if((s.flags&32768)!==0){P0(s,eo);return}n=s.return;var o=sA(s.alternate,s,ia);if(o!==null){lt=o;return}if(s=s.sibling,s!==null){lt=s;return}lt=s=n}while(s!==null);an===0&&(an=5)}function P0(n,s){do{var o=rA(n.alternate,n);if(o!==null){o.flags&=32767,lt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){lt=n;return}lt=n=o}while(n!==null);an=6,lt=null}function L0(n,s,o,h,g,_,T,I,H){n.cancelPendingCommit=null;do Cd();while(Tn!==0);if((Tt&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(_=s.lanes|s.childLanes,_|=sc,cu(n,o,_,T,I,H),n===Ot&&(lt=Ot=null,ht=0),xc=s,io=n,sa=o,Ip=_,kp=g,T0=h,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,_A(Ds,function(){return U0(),null})):(n.callbackNode=null,n.callbackPriority=0),h=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||h){h=re.T,re.T=null,g=ue.p,ue.p=2,T=Tt,Tt|=4;try{aA(n,s,o)}finally{Tt=T,ue.p=g,re.T=h}}Tn=1,O0(),M0(),V0()}}function O0(){if(Tn===1){Tn=0;var n=io,s=xc,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=re.T,re.T=null;var h=ue.p;ue.p=2;var g=Tt;Tt|=4;try{g0(s,n);var _=Zp,T=tl(n.containerInfo),I=_.focusedElem,H=_.selectionRange;if(T!==I&&I&&I.ownerDocument&&ec(I.ownerDocument.documentElement,I)){if(H!==null&&cr(I)){var J=H.start,he=H.end;if(he===void 0&&(he=J),"selectionStart"in I)I.selectionStart=J,I.selectionEnd=Math.min(he,I.value.length);else{var me=I.ownerDocument||document,te=me&&me.defaultView||window;if(te.getSelection){var oe=te.getSelection(),Pe=I.textContent.length,He=Math.min(H.start,Pe),jt=H.end===void 0?He:Math.min(H.end,Pe);!oe.extend&&He>jt&&(T=jt,jt=He,He=T);var $=el(I,He),F=el(I,jt);if($&&F&&(oe.rangeCount!==1||oe.anchorNode!==$.node||oe.anchorOffset!==$.offset||oe.focusNode!==F.node||oe.focusOffset!==F.offset)){var X=me.createRange();X.setStart($.node,$.offset),oe.removeAllRanges(),He>jt?(oe.addRange(X),oe.extend(F.node,F.offset)):(X.setEnd(F.node,F.offset),oe.addRange(X))}}}}for(me=[],oe=I;oe=oe.parentNode;)oe.nodeType===1&&me.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<me.length;I++){var de=me[I];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Ud=!!Gp,Zp=Gp=null}finally{Tt=g,ue.p=h,re.T=o}}n.current=s,Tn=2}}function M0(){if(Tn===2){Tn=0;var n=io,s=xc,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=re.T,re.T=null;var h=ue.p;ue.p=2;var g=Tt;Tt|=4;try{h0(n,s.alternate,s)}finally{Tt=g,ue.p=h,re.T=o}}Tn=3}}function V0(){if(Tn===4||Tn===3){Tn=0,Oo();var n=io,s=xc,o=sa,h=T0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Tn=5:(Tn=0,xc=io=null,z0(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(no=null),je(o),s=s.stateNode,ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(fi,s,void 0,(s.current.flags&128)===128)}catch{}if(h!==null){s=re.T,g=ue.p,ue.p=2,re.T=null;try{for(var _=n.onRecoverableError,T=0;T<h.length;T++){var I=h[T];_(I.value,{componentStack:I.stack})}}finally{re.T=s,ue.p=g}}(sa&3)!==0&&Cd(),yr(n),g=n.pendingLanes,(o&261930)!==0&&(g&42)!==0?n===Dp?Lu++:(Lu=0,Dp=n):Lu=0,Ou(0)}}function z0(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,gu(s)))}function Cd(){return O0(),M0(),V0(),U0()}function U0(){if(Tn!==5)return!1;var n=io,s=Ip;Ip=0;var o=je(sa),h=re.T,g=ue.p;try{ue.p=32>o?32:o,re.T=null,o=kp,kp=null;var _=io,T=sa;if(Tn=0,xc=io=null,sa=0,(Tt&6)!==0)throw Error(r(331));var I=Tt;if(Tt|=4,x0(_.current),y0(_,_.current,T,o),Tt=I,Ou(0,!1),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(fi,_)}catch{}return!0}finally{ue.p=g,re.T=h,z0(n,s)}}function B0(n,s,o){s=c(o,s),s=up(n.stateNode,s,2),n=Qa(n,s,2),n!==null&&(js(n,2),yr(n))}function It(n,s,o){if(n.tag===3)B0(n,n,o);else for(;s!==null;){if(s.tag===3){B0(s,n,o);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(no===null||!no.has(h))){n=c(o,n),o=Hv(2),h=Qa(s,o,2),h!==null&&(qv(o,h,s,n),js(h,2),yr(h));break}}s=s.return}}function Lp(n,s,o){var h=n.pingCache;if(h===null){h=n.pingCache=new cA;var g=new Set;h.set(s,g)}else g=h.get(s),g===void 0&&(g=new Set,h.set(s,g));g.has(o)||(Np=!0,g.add(o),n=mA.bind(null,n,s,o),s.then(n,n))}function mA(n,s,o){var h=n.pingCache;h!==null&&h.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Ot===n&&(ht&o)===o&&(an===4||an===3&&(ht&62914560)===ht&&300>On()-wd?(Tt&2)===0&&wc(n,0):Cp|=o,bc===ht&&(bc=0)),yr(n)}function H0(n,s){s===0&&(s=Gl()),n=ys(n,s),n!==null&&(js(n,s),yr(n))}function pA(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),H0(n,o)}function gA(n,s){var o=0;switch(n.tag){case 31:case 13:var h=n.stateNode,g=n.memoizedState;g!==null&&(o=g.retryLane);break;case 19:h=n.stateNode;break;case 22:h=n.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(s),H0(n,o)}function _A(n,s){return en(n,s)}var Rd=null,Tc=null,Op=!1,Id=!1,Mp=!1,ro=0;function yr(n){n!==Tc&&n.next===null&&(Tc===null?Rd=Tc=n:Tc=Tc.next=n),Id=!0,Op||(Op=!0,vA())}function Ou(n,s){if(!Mp&&Id){Mp=!0;do for(var o=!1,h=Rd;h!==null;){if(n!==0){var g=h.pendingLanes;if(g===0)var _=0;else{var T=h.suspendedLanes,I=h.pingedLanes;_=(1<<31-Yt(42|n)+1)-1,_&=g&~(T&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(o=!0,Z0(h,_))}else _=ht,_=rs(h,h===Ot?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(_&3)===0||Mi(h,_)||(o=!0,Z0(h,_));h=h.next}while(o);Mp=!1}}function yA(){q0()}function q0(){Id=Op=!1;var n=0;ro!==0&&RA()&&(n=ro);for(var s=On(),o=null,h=Rd;h!==null;){var g=h.next,_=F0(h,s);_===0?(h.next=null,o===null?Rd=g:o.next=g,g===null&&(Tc=o)):(o=h,(n!==0||(_&3)!==0)&&(Id=!0)),h=g}Tn!==0&&Tn!==5||Ou(n),ro!==0&&(ro=0)}function F0(n,s){for(var o=n.suspendedLanes,h=n.pingedLanes,g=n.expirationTimes,_=n.pendingLanes&-62914561;0<_;){var T=31-Yt(_),I=1<<T,H=g[T];H===-1?((I&o)===0||(I&h)!==0)&&(g[T]=lu(I,s)):H<=s&&(n.expiredLanes|=I),_&=~I}if(s=Ot,o=ht,o=rs(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),h=n.callbackNode,o===0||n===s&&(Rt===2||Rt===9)||n.cancelPendingCommit!==null)return h!==null&&h!==null&&is(h),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Mi(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(h!==null&&is(h),je(o)){case 2:case 8:o=Na;break;case 32:o=Ds;break;case 268435456:o=Mo;break;default:o=Ds}return h=G0.bind(null,n),o=en(o,h),n.callbackPriority=s,n.callbackNode=o,s}return h!==null&&h!==null&&is(h),n.callbackPriority=2,n.callbackNode=null,2}function G0(n,s){if(Tn!==0&&Tn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Cd()&&n.callbackNode!==o)return null;var h=ht;return h=rs(n,n===Ot?h:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),h===0?null:(A0(n,h,s),F0(n,On()),n.callbackNode!=null&&n.callbackNode===o?G0.bind(null,n):null)}function Z0(n,s){if(Cd())return null;A0(n,s,!0)}function vA(){kA(function(){(Tt&6)!==0?en(Lr,yA):q0()})}function Vp(){if(ro===0){var n=cc;n===0&&(n=Oi,Oi<<=1,(Oi&261888)===0&&(Oi=256)),ro=n}return ro}function K0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:sr(""+n)}function Y0(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function bA(n,s,o,h,g){if(s==="submit"&&o&&o.stateNode===g){var _=K0((g[tn]||null).action),T=h.submitter;T&&(s=(s=T[tn]||null)?K0(s.formAction):T.getAttribute("formAction"),s!==null&&(_=s,T=null));var I=new ms("action","action",null,h,g);n.push({event:I,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(ro!==0){var H=T?Y0(g,T):new FormData(g);sp(o,{pending:!0,data:H,method:g.method,action:_},null,H)}}else typeof _=="function"&&(I.preventDefault(),H=T?Y0(g,T):new FormData(g),sp(o,{pending:!0,data:H,method:g.method,action:_},_,H))},currentTarget:g}]})}}for(var zp=0;zp<dr.length;zp++){var Up=dr[zp],xA=Up.toLowerCase(),wA=Up[0].toUpperCase()+Up.slice(1);Ei(xA,"on"+wA)}Ei(il,"onAnimationEnd"),Ei(Yh,"onAnimationIteration"),Ei(sl,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(Rm,"onTransitionRun"),Ei($h,"onTransitionStart"),Ei(Im,"onTransitionCancel"),Ei(Ga,"onTransitionEnd"),_i("onMouseEnter",["mouseout","mouseover"]),_i("onMouseLeave",["mouseout","mouseover"]),_i("onPointerEnter",["pointerout","pointerover"]),_i("onPointerLeave",["pointerout","pointerover"]),cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mu));function $0(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var h=n[o],g=h.event;h=h.listeners;e:{var _=void 0;if(s)for(var T=h.length-1;0<=T;T--){var I=h[T],H=I.instance,J=I.currentTarget;if(I=I.listener,H!==_&&g.isPropagationStopped())break e;_=I,g.currentTarget=J;try{_(g)}catch(he){rl(he)}g.currentTarget=null,_=H}else for(T=0;T<h.length;T++){if(I=h[T],H=I.instance,J=I.currentTarget,I=I.listener,H!==_&&g.isPropagationStopped())break e;_=I,g.currentTarget=J;try{_(g)}catch(he){rl(he)}g.currentTarget=null,_=H}}}}function ct(n,s){var o=s[zi];o===void 0&&(o=s[zi]=new Set);var h=n+"__bubble";o.has(h)||(Q0(s,n,2,!1),o.add(h))}function Bp(n,s,o){var h=0;s&&(h|=4),Q0(o,n,h,s)}var kd="_reactListening"+Math.random().toString(36).slice(2);function Hp(n){if(!n[kd]){n[kd]=!0,Ho.forEach(function(o){o!=="selectionchange"&&(EA.has(o)||Bp(o,!1,n),Bp(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[kd]||(s[kd]=!0,Bp("selectionchange",!1,s))}}function Q0(n,s,o,h){switch(Sb(s)){case 2:var g=WA;break;case 8:g=XA;break;default:g=ig}o=g.bind(null,s,o,n),g=void 0,!Ms||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),h?g!==void 0?n.addEventListener(s,o,{capture:!0,passive:g}):n.addEventListener(s,o,!0):g!==void 0?n.addEventListener(s,o,{passive:g}):n.addEventListener(s,o,!1)}function qp(n,s,o,h,g){var _=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var I=h.stateNode.containerInfo;if(I===g)break;if(T===4)for(T=h.return;T!==null;){var H=T.tag;if((H===3||H===4)&&T.stateNode.containerInfo===g)return;T=T.return}for(;I!==null;){if(T=Ui(I),T===null)return;if(H=T.tag,H===5||H===6||H===26||H===27){h=_=T;continue e}I=I.parentNode}}h=h.return}Os(function(){var J=_,he=Kn(o),me=[];e:{var te=Qh.get(n);if(te!==void 0){var oe=ms,Pe=n;switch(n){case"keypress":if(ar(o)===0)break e;case"keydown":case"keyup":oe=$o;break;case"focusin":Pe="focus",oe=Hr;break;case"focusout":Pe="blur",oe=Hr;break;case"beforeblur":case"afterblur":oe=Hr;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Fo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=$l;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=w;break;case il:case Yh:case sl:oe=La;break;case Ga:oe=D;break;case"scroll":case"scrollend":oe=it;break;case"wheel":oe=ne;break;case"copy":case"cut":case"paste":oe=oi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=Bs;break;case"toggle":case"beforetoggle":oe=Ze}var He=(s&4)!==0,jt=!He&&(n==="scroll"||n==="scrollend"),$=He?te!==null?te+"Capture":null:te;He=[];for(var F=J,X;F!==null;){var de=F;if(X=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||X===null||$===null||(de=ai(F,$),de!=null&&He.push(Vu(F,de,X))),jt)break;F=F.return}0<He.length&&(te=new oe(te,Pe,null,o,he),me.push({event:te,listeners:He}))}}if((s&7)===0){e:{if(te=n==="mouseover"||n==="pointerover",oe=n==="mouseout"||n==="pointerout",te&&o!==Pa&&(Pe=o.relatedTarget||o.fromElement)&&(Ui(Pe)||Pe[Vi]))break e;if((oe||te)&&(te=he.window===he?he:(te=he.ownerDocument)?te.defaultView||te.parentWindow:window,oe?(Pe=o.relatedTarget||o.toElement,oe=J,Pe=Pe?Ui(Pe):null,Pe!==null&&(jt=u(Pe),He=Pe.tag,Pe!==jt||He!==5&&He!==27&&He!==6)&&(Pe=null)):(oe=null,Pe=J),oe!==Pe)){if(He=Fo,de="onMouseLeave",$="onMouseEnter",F="mouse",(n==="pointerout"||n==="pointerover")&&(He=Bs,de="onPointerLeave",$="onPointerEnter",F="pointer"),jt=oe==null?te:Nn(oe),X=Pe==null?te:Nn(Pe),te=new He(de,F+"leave",oe,o,he),te.target=jt,te.relatedTarget=X,de=null,Ui(he)===J&&(He=new He($,F+"enter",Pe,o,he),He.target=X,He.relatedTarget=jt,de=He),jt=de,oe&&Pe)t:{for(He=TA,$=oe,F=Pe,X=0,de=$;de;de=He(de))X++;de=0;for(var Me=F;Me;Me=He(Me))de++;for(;0<X-de;)$=He($),X--;for(;0<de-X;)F=He(F),de--;for(;X--;){if($===F||F!==null&&$===F.alternate){He=$;break t}$=He($),F=He(F)}He=null}else He=null;oe!==null&&W0(me,te,oe,He,!1),Pe!==null&&jt!==null&&W0(me,jt,Pe,He,!0)}}e:{if(te=J?Nn(J):window,oe=te.nodeName&&te.nodeName.toLowerCase(),oe==="select"||oe==="input"&&te.type==="file")var wt=Jo;else if(ps(te))if(qh)wt=Cm;else{wt=Nm;var Le=Hs}else oe=te.nodeName,!oe||oe.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?J&&ir(J.elementType)&&(wt=Jo):wt=Ba;if(wt&&(wt=wt(n,J))){Hh(me,wt,o,he);break e}Le&&Le(n,te,J),n==="focusout"&&J&&te.type==="number"&&J.memoizedProps.value!=null&&Bi(te,"number",te.value)}switch(Le=J?Nn(J):window,n){case"focusin":(ps(Le)||Le.contentEditable==="true")&&(ur=Le,nc=J,nl=null);break;case"focusout":nl=nc=ur=null;break;case"mousedown":qa=!0;break;case"contextmenu":case"mouseup":case"dragend":qa=!1,Zh(me,o,he);break;case"selectionchange":if(tc)break;case"keydown":case"keyup":Zh(me,o,he)}var et;if(_t)e:{switch(n){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Va?qr(n,o)&&(dt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(dt="onCompositionStart");dt&&(wi&&o.locale!=="ko"&&(Va||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Va&&(et=Hi()):(bi=he,Vs="value"in bi?bi.value:bi.textContent,Va=!0)),Le=Dd(J,dt),0<Le.length&&(dt=new Gi(dt,n,null,o,he),me.push({event:dt,listeners:Le}),et?dt.data=et:(et=Fr(o),et!==null&&(dt.data=et)))),(et=xi?Yi(n,o):za(n,o))&&(dt=Dd(J,"onBeforeInput"),0<dt.length&&(Le=new Gi("onBeforeInput","beforeinput",null,o,he),me.push({event:Le,listeners:dt}),Le.data=et)),bA(me,n,J,o,he)}$0(me,s)})}function Vu(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Dd(n,s){for(var o=s+"Capture",h=[];n!==null;){var g=n,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=ai(n,o),g!=null&&h.unshift(Vu(n,g,_)),g=ai(n,s),g!=null&&h.push(Vu(n,g,_))),n.tag===3)return h;n=n.return}return[]}function TA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function W0(n,s,o,h,g){for(var _=s._reactName,T=[];o!==null&&o!==h;){var I=o,H=I.alternate,J=I.stateNode;if(I=I.tag,H!==null&&H===h)break;I!==5&&I!==26&&I!==27||J===null||(H=J,g?(J=ai(o,_),J!=null&&T.unshift(Vu(o,J,H))):g||(J=ai(o,_),J!=null&&T.push(Vu(o,J,H)))),o=o.return}T.length!==0&&n.push({event:s,listeners:T})}var SA=/\r\n?/g,AA=/\u0000|\uFFFD/g;function X0(n){return(typeof n=="string"?n:""+n).replace(SA,`
`).replace(AA,"")}function J0(n,s){return s=X0(s),X0(n)===s}function Dt(n,s,o,h,g,_){switch(o){case"children":typeof h=="string"?s==="body"||s==="textarea"&&h===""||mn(n,h):(typeof h=="number"||typeof h=="bigint")&&s!=="body"&&mn(n,""+h);break;case"className":at(n,"class",h);break;case"tabIndex":at(n,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":at(n,o,h);break;case"style":zr(n,h,_);break;case"data":if(s!=="object"){at(n,"data",h);break}case"src":case"href":if(h===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){n.removeAttribute(o);break}h=sr(""+h),n.setAttribute(o,h);break;case"action":case"formAction":if(typeof h=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(o==="formAction"?(s!=="input"&&Dt(n,s,"name",g.name,g,null),Dt(n,s,"formEncType",g.formEncType,g,null),Dt(n,s,"formMethod",g.formMethod,g,null),Dt(n,s,"formTarget",g.formTarget,g,null)):(Dt(n,s,"encType",g.encType,g,null),Dt(n,s,"method",g.method,g,null),Dt(n,s,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){n.removeAttribute(o);break}h=sr(""+h),n.setAttribute(o,h);break;case"onClick":h!=null&&(n.onclick=Zn);break;case"onScroll":h!=null&&ct("scroll",n);break;case"onScrollEnd":h!=null&&ct("scrollend",n);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(o=h.__html,o!=null){if(g.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":n.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){n.removeAttribute("xlink:href");break}o=sr(""+h),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(o,""+h):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":h===!0?n.setAttribute(o,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(o,h):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?n.setAttribute(o,h):n.removeAttribute(o);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?n.removeAttribute(o):n.setAttribute(o,h);break;case"popover":ct("beforetoggle",n),ct("toggle",n),st(n,"popover",h);break;case"xlinkActuate":zt(n,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":zt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":zt(n,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":zt(n,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":zt(n,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":zt(n,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":zt(n,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":zt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":zt(n,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":st(n,"is",h);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Ur.get(o)||o,st(n,o,h))}}function Fp(n,s,o,h,g,_){switch(o){case"style":zr(n,h,_);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(o=h.__html,o!=null){if(g.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof h=="string"?mn(n,h):(typeof h=="number"||typeof h=="bigint")&&mn(n,""+h);break;case"onScroll":h!=null&&ct("scroll",n);break;case"onScrollEnd":h!=null&&ct("scrollend",n);break;case"onClick":h!=null&&(n.onclick=Zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qo.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),s=o.slice(2,g?o.length-7:void 0),_=n[tn]||null,_=_!=null?_[o]:null,typeof _=="function"&&n.removeEventListener(s,_,g),typeof h=="function")){typeof _!="function"&&_!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,h,g);break e}o in n?n[o]=h:h===!0?n.setAttribute(o,""):st(n,o,h)}}}function zn(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",n),ct("load",n);var h=!1,g=!1,_;for(_ in o)if(o.hasOwnProperty(_)){var T=o[_];if(T!=null)switch(_){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Dt(n,s,_,T,o,null)}}g&&Dt(n,s,"srcSet",o.srcSet,o,null),h&&Dt(n,s,"src",o.src,o,null);return;case"input":ct("invalid",n);var I=_=T=g=null,H=null,J=null;for(h in o)if(o.hasOwnProperty(h)){var he=o[h];if(he!=null)switch(h){case"name":g=he;break;case"type":T=he;break;case"checked":H=he;break;case"defaultChecked":J=he;break;case"value":_=he;break;case"defaultValue":I=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,s));break;default:Dt(n,s,h,he,o,null)}}Vr(n,_,I,H,J,T,g,!1);return;case"select":ct("invalid",n),h=T=_=null;for(g in o)if(o.hasOwnProperty(g)&&(I=o[g],I!=null))switch(g){case"value":_=I;break;case"defaultValue":T=I;break;case"multiple":h=I;default:Dt(n,s,g,I,o,null)}s=_,o=T,n.multiple=!!h,s!=null?Ct(n,!!h,s,!1):o!=null&&Ct(n,!!h,o,!0);return;case"textarea":ct("invalid",n),_=g=h=null;for(T in o)if(o.hasOwnProperty(T)&&(I=o[T],I!=null))switch(T){case"value":h=I;break;case"defaultValue":g=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:Dt(n,s,T,I,o,null)}vi(n,h,g,_);return;case"option":for(H in o)o.hasOwnProperty(H)&&(h=o[H],h!=null)&&(H==="selected"?n.selected=h&&typeof h!="function"&&typeof h!="symbol":Dt(n,s,H,h,o,null));return;case"dialog":ct("beforetoggle",n),ct("toggle",n),ct("cancel",n),ct("close",n);break;case"iframe":case"object":ct("load",n);break;case"video":case"audio":for(h=0;h<Mu.length;h++)ct(Mu[h],n);break;case"image":ct("error",n),ct("load",n);break;case"details":ct("toggle",n);break;case"embed":case"source":case"link":ct("error",n),ct("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in o)if(o.hasOwnProperty(J)&&(h=o[J],h!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Dt(n,s,J,h,o,null)}return;default:if(ir(s)){for(he in o)o.hasOwnProperty(he)&&(h=o[he],h!==void 0&&Fp(n,s,he,h,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(h=o[I],h!=null&&Dt(n,s,I,h,o,null))}function NA(n,s,o,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,T=null,I=null,H=null,J=null,he=null;for(oe in o){var me=o[oe];if(o.hasOwnProperty(oe)&&me!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":H=me;default:h.hasOwnProperty(oe)||Dt(n,s,oe,null,h,me)}}for(var te in h){var oe=h[te];if(me=o[te],h.hasOwnProperty(te)&&(oe!=null||me!=null))switch(te){case"type":_=oe;break;case"name":g=oe;break;case"checked":J=oe;break;case"defaultChecked":he=oe;break;case"value":T=oe;break;case"defaultValue":I=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,s));break;default:oe!==me&&Dt(n,s,te,oe,h,me)}}Da(n,T,I,H,J,he,_,g);return;case"select":oe=T=I=te=null;for(_ in o)if(H=o[_],o.hasOwnProperty(_)&&H!=null)switch(_){case"value":break;case"multiple":oe=H;default:h.hasOwnProperty(_)||Dt(n,s,_,null,h,H)}for(g in h)if(_=h[g],H=o[g],h.hasOwnProperty(g)&&(_!=null||H!=null))switch(g){case"value":te=_;break;case"defaultValue":I=_;break;case"multiple":T=_;default:_!==H&&Dt(n,s,g,_,h,H)}s=I,o=T,h=oe,te!=null?Ct(n,!!o,te,!1):!!h!=!!o&&(s!=null?Ct(n,!!o,s,!0):Ct(n,!!o,o?[]:"",!1));return;case"textarea":oe=te=null;for(I in o)if(g=o[I],o.hasOwnProperty(I)&&g!=null&&!h.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Dt(n,s,I,null,h,g)}for(T in h)if(g=h[T],_=o[T],h.hasOwnProperty(T)&&(g!=null||_!=null))switch(T){case"value":te=g;break;case"defaultValue":oe=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==_&&Dt(n,s,T,g,h,_)}hs(n,te,oe);return;case"option":for(var Pe in o)te=o[Pe],o.hasOwnProperty(Pe)&&te!=null&&!h.hasOwnProperty(Pe)&&(Pe==="selected"?n.selected=!1:Dt(n,s,Pe,null,h,te));for(H in h)te=h[H],oe=o[H],h.hasOwnProperty(H)&&te!==oe&&(te!=null||oe!=null)&&(H==="selected"?n.selected=te&&typeof te!="function"&&typeof te!="symbol":Dt(n,s,H,te,h,oe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in o)te=o[He],o.hasOwnProperty(He)&&te!=null&&!h.hasOwnProperty(He)&&Dt(n,s,He,null,h,te);for(J in h)if(te=h[J],oe=o[J],h.hasOwnProperty(J)&&te!==oe&&(te!=null||oe!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,s));break;default:Dt(n,s,J,te,h,oe)}return;default:if(ir(s)){for(var jt in o)te=o[jt],o.hasOwnProperty(jt)&&te!==void 0&&!h.hasOwnProperty(jt)&&Fp(n,s,jt,void 0,h,te);for(he in h)te=h[he],oe=o[he],!h.hasOwnProperty(he)||te===oe||te===void 0&&oe===void 0||Fp(n,s,he,te,h,oe);return}}for(var $ in o)te=o[$],o.hasOwnProperty($)&&te!=null&&!h.hasOwnProperty($)&&Dt(n,s,$,null,h,te);for(me in h)te=h[me],oe=o[me],!h.hasOwnProperty(me)||te===oe||te==null&&oe==null||Dt(n,s,me,te,h,oe)}function eb(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function CA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),h=0;h<o.length;h++){var g=o[h],_=g.transferSize,T=g.initiatorType,I=g.duration;if(_&&I&&eb(T)){for(T=0,I=g.responseEnd,h+=1;h<o.length;h++){var H=o[h],J=H.startTime;if(J>I)break;var he=H.transferSize,me=H.initiatorType;he&&eb(me)&&(H=H.responseEnd,T+=he*(H<I?1:(I-J)/(H-J)))}if(--h,s+=8*(_+T)/(g.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Gp=null,Zp=null;function jd(n){return n.nodeType===9?n:n.ownerDocument}function tb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nb(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Kp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Yp=null;function RA(){var n=window.event;return n&&n.type==="popstate"?n===Yp?!1:(Yp=n,!0):(Yp=null,!1)}var ib=typeof setTimeout=="function"?setTimeout:void 0,IA=typeof clearTimeout=="function"?clearTimeout:void 0,sb=typeof Promise=="function"?Promise:void 0,kA=typeof queueMicrotask=="function"?queueMicrotask:typeof sb<"u"?function(n){return sb.resolve(null).then(n).catch(DA)}:ib;function DA(n){setTimeout(function(){throw n})}function ao(n){return n==="head"}function rb(n,s){var o=s,h=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"||o==="/&"){if(h===0){n.removeChild(g),Cc(s);return}h--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")h++;else if(o==="html")zu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,zu(o);for(var _=o.firstChild;_;){var T=_.nextSibling,I=_.nodeName;_[os]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||o.removeChild(_),_=T}}else o==="body"&&zu(n.ownerDocument.body);o=g}while(o);Cc(s)}function ab(n,s){var o=n;n=0;do{var h=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=h}while(o)}function $p(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":$p(o),Ra(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function jA(n,s,o,h){for(;n.nodeType===1;){var g=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!h&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(h){if(!n[os])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(_=n.getAttribute("rel"),_==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(_!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(_=n.getAttribute("src"),(_!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===_)return n}else return n;if(n=xs(n.nextSibling),n===null)break}return null}function PA(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=xs(n.nextSibling),n===null))return null;return n}function ob(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=xs(n.nextSibling),n===null))return null;return n}function Qp(n){return n.data==="$?"||n.data==="$~"}function Wp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function LA(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var h=function(){s(),o.removeEventListener("DOMContentLoaded",h)};o.addEventListener("DOMContentLoaded",h),n._reactRetry=h}}function xs(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Xp=null;function lb(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return xs(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function cb(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function ub(n,s,o){switch(s=jd(o),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function zu(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Ra(n)}var ws=new Map,hb=new Set;function Pd(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ra=ue.d;ue.d={f:OA,r:MA,D:VA,C:zA,L:UA,m:BA,X:qA,S:HA,M:FA};function OA(){var n=ra.f(),s=Sd();return n||s}function MA(n){var s=gi(n);s!==null&&s.tag===5&&s.type==="form"?Cv(s):ra.r(n)}var Sc=typeof document>"u"?null:document;function db(n,s,o){var h=Sc;if(h&&typeof s=="string"&&s){var g=Pt(s);g='link[rel="'+n+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),hb.has(g)||(hb.add(g),n={rel:n,crossOrigin:o,href:s},h.querySelector(g)===null&&(s=h.createElement("link"),zn(s,"link",n),nn(s),h.head.appendChild(s)))}}function VA(n){ra.D(n),db("dns-prefetch",n,null)}function zA(n,s){ra.C(n,s),db("preconnect",n,s)}function UA(n,s,o){ra.L(n,s,o);var h=Sc;if(h&&n&&s){var g='link[rel="preload"][as="'+Pt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+Pt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+Pt(o.imageSizes)+'"]')):g+='[href="'+Pt(n)+'"]';var _=g;switch(s){case"style":_=Ac(n);break;case"script":_=Nc(n)}ws.has(_)||(n=A({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),ws.set(_,n),h.querySelector(g)!==null||s==="style"&&h.querySelector(Uu(_))||s==="script"&&h.querySelector(Bu(_))||(s=h.createElement("link"),zn(s,"link",n),nn(s),h.head.appendChild(s)))}}function BA(n,s){ra.m(n,s);var o=Sc;if(o&&n){var h=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Pt(h)+'"][href="'+Pt(n)+'"]',_=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Nc(n)}if(!ws.has(_)&&(n=A({rel:"modulepreload",href:n},s),ws.set(_,n),o.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Bu(_)))return}h=o.createElement("link"),zn(h,"link",n),nn(h),o.head.appendChild(h)}}}function HA(n,s,o){ra.S(n,s,o);var h=Sc;if(h&&n){var g=ls(h).hoistableStyles,_=Ac(n);s=s||"default";var T=g.get(_);if(!T){var I={loading:0,preload:null};if(T=h.querySelector(Uu(_)))I.loading=5;else{n=A({rel:"stylesheet",href:n,"data-precedence":s},o),(o=ws.get(_))&&Jp(n,o);var H=T=h.createElement("link");nn(H),zn(H,"link",n),H._p=new Promise(function(J,he){H.onload=J,H.onerror=he}),H.addEventListener("load",function(){I.loading|=1}),H.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Ld(T,s,h)}T={type:"stylesheet",instance:T,count:1,state:I},g.set(_,T)}}}function qA(n,s){ra.X(n,s);var o=Sc;if(o&&n){var h=ls(o).hoistableScripts,g=Nc(n),_=h.get(g);_||(_=o.querySelector(Bu(g)),_||(n=A({src:n,async:!0},s),(s=ws.get(g))&&eg(n,s),_=o.createElement("script"),nn(_),zn(_,"link",n),o.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(g,_))}}function FA(n,s){ra.M(n,s);var o=Sc;if(o&&n){var h=ls(o).hoistableScripts,g=Nc(n),_=h.get(g);_||(_=o.querySelector(Bu(g)),_||(n=A({src:n,async:!0,type:"module"},s),(s=ws.get(g))&&eg(n,s),_=o.createElement("script"),nn(_),zn(_,"link",n),o.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(g,_))}}function fb(n,s,o,h){var g=(g=Ae.current)?Pd(g):null;if(!g)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Ac(o.href),o=ls(g).hoistableStyles,h=o.get(s),h||(h={type:"style",instance:null,count:0,state:null},o.set(s,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Ac(o.href);var _=ls(g).hoistableStyles,T=_.get(n);if(T||(g=g.ownerDocument||g,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(n,T),(_=g.querySelector(Uu(n)))&&!_._p&&(T.instance=_,T.state.loading=5),ws.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ws.set(n,o),_||GA(g,n,o,T.state))),s&&h===null)throw Error(r(528,""));return T}if(s&&h!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Nc(o),o=ls(g).hoistableScripts,h=o.get(s),h||(h={type:"script",instance:null,count:0,state:null},o.set(s,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Ac(n){return'href="'+Pt(n)+'"'}function Uu(n){return'link[rel="stylesheet"]['+n+"]"}function mb(n){return A({},n,{"data-precedence":n.precedence,precedence:null})}function GA(n,s,o,h){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?h.loading=1:(s=n.createElement("link"),h.preload=s,s.addEventListener("load",function(){return h.loading|=1}),s.addEventListener("error",function(){return h.loading|=2}),zn(s,"link",o),nn(s),n.head.appendChild(s))}function Nc(n){return'[src="'+Pt(n)+'"]'}function Bu(n){return"script[async]"+n}function pb(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var h=n.querySelector('style[data-href~="'+Pt(o.href)+'"]');if(h)return s.instance=h,nn(h),h;var g=A({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return h=(n.ownerDocument||n).createElement("style"),nn(h),zn(h,"style",g),Ld(h,o.precedence,n),s.instance=h;case"stylesheet":g=Ac(o.href);var _=n.querySelector(Uu(g));if(_)return s.state.loading|=4,s.instance=_,nn(_),_;h=mb(o),(g=ws.get(g))&&Jp(h,g),_=(n.ownerDocument||n).createElement("link"),nn(_);var T=_;return T._p=new Promise(function(I,H){T.onload=I,T.onerror=H}),zn(_,"link",h),s.state.loading|=4,Ld(_,o.precedence,n),s.instance=_;case"script":return _=Nc(o.src),(g=n.querySelector(Bu(_)))?(s.instance=g,nn(g),g):(h=o,(g=ws.get(_))&&(h=A({},o),eg(h,g)),n=n.ownerDocument||n,g=n.createElement("script"),nn(g),zn(g,"link",h),n.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(h=s.instance,s.state.loading|=4,Ld(h,o.precedence,n));return s.instance}function Ld(n,s,o){for(var h=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,_=g,T=0;T<h.length;T++){var I=h[T];if(I.dataset.precedence===s)_=I;else if(_!==g)break}_?_.parentNode.insertBefore(n,_.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function Jp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function eg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Od=null;function gb(n,s,o){if(Od===null){var h=new Map,g=Od=new Map;g.set(o,h)}else g=Od,h=g.get(o),h||(h=new Map,g.set(o,h));if(h.has(n))return h;for(h.set(n,null),o=o.getElementsByTagName(n),g=0;g<o.length;g++){var _=o[g];if(!(_[os]||_[Qt]||n==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var T=_.getAttribute(s)||"";T=n+T;var I=h.get(T);I?I.push(_):h.set(T,[_])}}return h}function _b(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function ZA(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function yb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function KA(n,s,o,h){if(o.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=Ac(h.href),_=s.querySelector(Uu(g));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Md.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=_,nn(_);return}_=s.ownerDocument||s,h=mb(h),(g=ws.get(g))&&Jp(h,g),_=_.createElement("link"),nn(_);var T=_;T._p=new Promise(function(I,H){T.onload=I,T.onerror=H}),zn(_,"link",h),o.instance=_}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Md.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var tg=0;function YA(n,s){return n.stylesheets&&n.count===0&&zd(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var h=setTimeout(function(){if(n.stylesheets&&zd(n,n.stylesheets),n.unsuspend){var _=n.unsuspend;n.unsuspend=null,_()}},6e4+s);0<n.imgBytes&&tg===0&&(tg=62500*CA());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&zd(n,n.stylesheets),n.unsuspend)){var _=n.unsuspend;n.unsuspend=null,_()}},(n.imgBytes>tg?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(h),clearTimeout(g)}}:null}function Md(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zd(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Vd=null;function zd(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Vd=new Map,s.forEach($A,n),Vd=null,Md.call(n))}function $A(n,s){if(!(s.state.loading&4)){var o=Vd.get(n);if(o)var h=o.get(null);else{o=new Map,Vd.set(n,o);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var T=g[_];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),h=T)}h&&o.set(null,h)}g=s.instance,T=g.getAttribute("data-precedence"),_=o.get(T)||h,_===h&&o.set(null,g),o.set(T,g),this.count++,h=Md.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),_?_.parentNode.insertBefore(g,_.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),s.state.loading|=4}}var Hu={$$typeof:se,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function QA(n,s,o,h,g,_,T,I,H){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=as(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=as(0),this.hiddenUpdates=as(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function vb(n,s,o,h,g,_,T,I,H,J,he,me){return n=new QA(n,s,o,T,H,J,he,me,I),s=1,_===!0&&(s|=24),_=Wn(3,null,null,s),n.current=_,_.stateNode=n,s=Pm(),s.refCount++,n.pooledCache=s,s.refCount++,_.memoizedState={element:h,isDehydrated:o,cache:s},Vm(_),n}function bb(n){return n?(n=Gr,n):Gr}function xb(n,s,o,h,g,_){g=bb(g),h.context===null?h.context=g:h.pendingContext=g,h=$a(s),h.payload={element:o},_=_===void 0?null:_,_!==null&&(h.callback=_),o=Qa(n,h,s),o!==null&&(Ii(o,n,s),bu(o,n,s))}function wb(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function ng(n,s){wb(n,s),(n=n.alternate)&&wb(n,s)}function Eb(n){if(n.tag===13||n.tag===31){var s=ys(n,67108864);s!==null&&Ii(s,n,67108864),ng(n,67108864)}}function Tb(n){if(n.tag===13||n.tag===31){var s=Ji();s=An(s);var o=ys(n,s);o!==null&&Ii(o,n,s),ng(n,s)}}var Ud=!0;function WA(n,s,o,h){var g=re.T;re.T=null;var _=ue.p;try{ue.p=2,ig(n,s,o,h)}finally{ue.p=_,re.T=g}}function XA(n,s,o,h){var g=re.T;re.T=null;var _=ue.p;try{ue.p=8,ig(n,s,o,h)}finally{ue.p=_,re.T=g}}function ig(n,s,o,h){if(Ud){var g=sg(h);if(g===null)qp(n,s,h,Bd,o),Ab(n,h);else if(eN(g,n,s,o,h))h.stopPropagation();else if(Ab(n,h),s&4&&-1<JA.indexOf(n)){for(;g!==null;){var _=gi(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var T=ss(_.pendingLanes);if(T!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;T;){var H=1<<31-Yt(T);I.entanglements[1]|=H,T&=~H}yr(_),(Tt&6)===0&&(Ed=On()+500,Ou(0))}}break;case 31:case 13:I=ys(_,2),I!==null&&Ii(I,_,2),Sd(),ng(_,2)}if(_=sg(h),_===null&&qp(n,s,h,Bd,o),_===g)break;g=_}g!==null&&h.stopPropagation()}else qp(n,s,h,null,o)}}function sg(n){return n=Kn(n),rg(n)}var Bd=null;function rg(n){if(Bd=null,n=Ui(n),n!==null){var s=u(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=d(s),n!==null)return n;n=null}else if(o===31){if(n=y(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Bd=n,null}function Sb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pr()){case Lr:return 2;case Na:return 8;case Ds:case ou:return 32;case Mo:return 268435456;default:return 32}default:return 32}}var ag=!1,oo=null,lo=null,co=null,qu=new Map,Fu=new Map,uo=[],JA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ab(n,s){switch(n){case"focusin":case"focusout":oo=null;break;case"dragenter":case"dragleave":lo=null;break;case"mouseover":case"mouseout":co=null;break;case"pointerover":case"pointerout":qu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fu.delete(s.pointerId)}}function Gu(n,s,o,h,g,_){return n===null||n.nativeEvent!==_?(n={blockedOn:s,domEventName:o,eventSystemFlags:h,nativeEvent:_,targetContainers:[g]},s!==null&&(s=gi(s),s!==null&&Eb(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function eN(n,s,o,h,g){switch(s){case"focusin":return oo=Gu(oo,n,s,o,h,g),!0;case"dragenter":return lo=Gu(lo,n,s,o,h,g),!0;case"mouseover":return co=Gu(co,n,s,o,h,g),!0;case"pointerover":var _=g.pointerId;return qu.set(_,Gu(qu.get(_)||null,n,s,o,h,g)),!0;case"gotpointercapture":return _=g.pointerId,Fu.set(_,Gu(Fu.get(_)||null,n,s,o,h,g)),!0}return!1}function Nb(n){var s=Ui(n.target);if(s!==null){var o=u(s);if(o!==null){if(s=o.tag,s===13){if(s=d(o),s!==null){n.blockedOn=s,mi(n.priority,function(){Tb(o)});return}}else if(s===31){if(s=y(o),s!==null){n.blockedOn=s,mi(n.priority,function(){Tb(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Hd(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=sg(n.nativeEvent);if(o===null){o=n.nativeEvent;var h=new o.constructor(o.type,o);Pa=h,o.target.dispatchEvent(h),Pa=null}else return s=gi(o),s!==null&&Eb(s),n.blockedOn=o,!1;s.shift()}return!0}function Cb(n,s,o){Hd(n)&&o.delete(s)}function tN(){ag=!1,oo!==null&&Hd(oo)&&(oo=null),lo!==null&&Hd(lo)&&(lo=null),co!==null&&Hd(co)&&(co=null),qu.forEach(Cb),Fu.forEach(Cb)}function qd(n,s){n.blockedOn===s&&(n.blockedOn=null,ag||(ag=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,tN)))}var Fd=null;function Rb(n){Fd!==n&&(Fd=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Fd===n&&(Fd=null);for(var s=0;s<n.length;s+=3){var o=n[s],h=n[s+1],g=n[s+2];if(typeof h!="function"){if(rg(h||o)===null)continue;break}var _=gi(o);_!==null&&(n.splice(s,3),s-=3,sp(_,{pending:!0,data:g,method:o.method,action:h},h,g))}}))}function Cc(n){function s(H){return qd(H,n)}oo!==null&&qd(oo,n),lo!==null&&qd(lo,n),co!==null&&qd(co,n),qu.forEach(s),Fu.forEach(s);for(var o=0;o<uo.length;o++){var h=uo[o];h.blockedOn===n&&(h.blockedOn=null)}for(;0<uo.length&&(o=uo[0],o.blockedOn===null);)Nb(o),o.blockedOn===null&&uo.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(h=0;h<o.length;h+=3){var g=o[h],_=o[h+1],T=g[tn]||null;if(typeof _=="function")T||Rb(o);else if(T){var I=null;if(_&&_.hasAttribute("formAction")){if(g=_,T=_[tn]||null)I=T.formAction;else if(rg(g)!==null)continue}else I=T.action;typeof I=="function"?o[h+1]=I:(o.splice(h,3),h-=3),Rb(o)}}}function Ib(){function n(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(T){return g=T})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),h||setTimeout(o,20)}function o(){if(!h&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){h=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function og(n){this._internalRoot=n}Gd.prototype.render=og.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,h=Ji();xb(o,h,n,s,null,null)},Gd.prototype.unmount=og.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;xb(n.current,2,null,n,null,null),Sd(),s[Vi]=null}};function Gd(n){this._internalRoot=n}Gd.prototype.unstable_scheduleHydration=function(n){if(n){var s=Bo();n={blockedOn:null,target:n,priority:s};for(var o=0;o<uo.length&&s!==0&&s<uo[o].priority;o++);uo.splice(o,0,n),o===0&&Nb(n)}};var kb=e.version;if(kb!=="19.2.4")throw Error(r(527,kb,"19.2.4"));ue.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=b(s),n=n!==null?S(n):null,n=n===null?null:n.stateNode,n};var nN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:re,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zd.isDisabled&&Zd.supportsFiber)try{fi=Zd.inject(nN),ln=Zd}catch{}}return Ku.createRoot=function(n,s){if(!l(n))throw Error(r(299));var o=!1,h="",g=Vv,_=zv,T=Uv;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=vb(n,1,!1,null,null,o,h,null,g,_,T,Ib),n[Vi]=s.current,Hp(n),new og(s)},Ku.hydrateRoot=function(n,s,o){if(!l(n))throw Error(r(299));var h=!1,g="",_=Vv,T=zv,I=Uv,H=null;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(_=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.formState!==void 0&&(H=o.formState)),s=vb(n,1,!0,s,o??null,h,g,H,_,T,I,Ib),s.context=bb(null),o=s.current,h=Ji(),h=An(h),g=$a(h),g.callback=null,Qa(o,g,h),o=h,s.current.lanes=o,js(s,o),yr(s),n[Vi]=s.current,Hp(n),new Gd(s)},Ku.version="19.2.4",Ku}var Bb;function hN(){if(Bb)return ug.exports;Bb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ug.exports=uN(),ug.exports}var dN=hN();var Hb="popstate";function fN(i={}){function e(l,u){let{pathname:d="/",search:y="",hash:v=""}=Ll(l.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),zg("",{pathname:d,search:y,hash:v},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function t(l,u){let d=l.document.querySelector("base"),y="";if(d&&d.getAttribute("href")){let v=l.location.href,b=v.indexOf("#");y=b===-1?v:v.slice(0,b)}return y+"#"+(typeof u=="string"?u:hh(u))}function r(l,u){Qs(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return pN(e,t,r,i)}function Xt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Qs(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mN(){return Math.random().toString(36).substring(2,10)}function qb(i,e){return{usr:i.state,key:i.key,idx:e}}function zg(i,e,t=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Ll(e):e,state:t,key:e&&e.key||r||mN()}}function hh({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Ll(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function pN(i,e,t,r={}){let{window:l=document.defaultView,v5Compat:u=!1}=r,d=l.history,y="POP",v=null,b=S();b==null&&(b=0,d.replaceState({...d.state,idx:b},""));function S(){return(d.state||{idx:null}).idx}function A(){y="POP";let Y=S(),ce=Y==null?null:Y-b;b=Y,v&&v({action:y,location:K.location,delta:ce})}function R(Y,ce){y="PUSH";let ae=zg(K.location,Y,ce);t&&t(ae,Y),b=S()+1;let se=qb(ae,b),ke=K.createHref(ae);try{d.pushState(se,"",ke)}catch(be){if(be instanceof DOMException&&be.name==="DataCloneError")throw be;l.location.assign(ke)}u&&v&&v({action:y,location:K.location,delta:1})}function M(Y,ce){y="REPLACE";let ae=zg(K.location,Y,ce);t&&t(ae,Y),b=S();let se=qb(ae,b),ke=K.createHref(ae);d.replaceState(se,"",ke),u&&v&&v({action:y,location:K.location,delta:0})}function G(Y){return gN(Y)}let K={get action(){return y},get location(){return i(l,d)},listen(Y){if(v)throw new Error("A history only accepts one active listener");return l.addEventListener(Hb,A),v=Y,()=>{l.removeEventListener(Hb,A),v=null}},createHref(Y){return e(l,Y)},createURL:G,encodeLocation(Y){let ce=G(Y);return{pathname:ce.pathname,search:ce.search,hash:ce.hash}},push:R,replace:M,go(Y){return d.go(Y)}};return K}function gN(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Xt(t,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:hh(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Kw(i,e,t="/"){return _N(i,e,t,!1)}function _N(i,e,t,r){let l=typeof e=="string"?Ll(e):e,u=_a(l.pathname||"/",t);if(u==null)return null;let d=Yw(i);yN(d);let y=null;for(let v=0;y==null&&v<d.length;++v){let b=RN(u);y=NN(d[v],b,r)}return y}function Yw(i,e=[],t=[],r="",l=!1){let u=(d,y,v=l,b)=>{let S={relativePath:b===void 0?d.path||"":b,caseSensitive:d.caseSensitive===!0,childrenIndex:y,route:d};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(r)&&v)return;Xt(S.relativePath.startsWith(r),`Absolute route path "${S.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(r.length)}let A=ua([r,S.relativePath]),R=t.concat(S);d.children&&d.children.length>0&&(Xt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${A}".`),Yw(d.children,e,R,A,v)),!(d.path==null&&!d.index)&&e.push({path:A,score:SN(A,d.index),routesMeta:R})};return i.forEach((d,y)=>{if(d.path===""||!d.path?.includes("?"))u(d,y);else for(let v of $w(d.path))u(d,y,!0,v)}),e}function $w(i){let e=i.split("/");if(e.length===0)return[];let[t,...r]=e,l=t.endsWith("?"),u=t.replace(/\?$/,"");if(r.length===0)return l?[u,""]:[u];let d=$w(r.join("/")),y=[];return y.push(...d.map(v=>v===""?u:[u,v].join("/"))),l&&y.push(...d),y.map(v=>i.startsWith("/")&&v===""?"/":v)}function yN(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:AN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var vN=/^:[\w-]+$/,bN=3,xN=2,wN=1,EN=10,TN=-2,Fb=i=>i==="*";function SN(i,e){let t=i.split("/"),r=t.length;return t.some(Fb)&&(r+=TN),e&&(r+=xN),t.filter(l=>!Fb(l)).reduce((l,u)=>l+(vN.test(u)?bN:u===""?wN:EN),r)}function AN(i,e){return i.length===e.length&&i.slice(0,-1).every((r,l)=>r===e[l])?i[i.length-1]-e[e.length-1]:0}function NN(i,e,t=!1){let{routesMeta:r}=i,l={},u="/",d=[];for(let y=0;y<r.length;++y){let v=r[y],b=y===r.length-1,S=u==="/"?e:e.slice(u.length)||"/",A=vf({path:v.relativePath,caseSensitive:v.caseSensitive,end:b},S),R=v.route;if(!A&&b&&t&&!r[r.length-1].route.index&&(A=vf({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},S)),!A)return null;Object.assign(l,A.params),d.push({params:l,pathname:ua([u,A.pathname]),pathnameBase:jN(ua([u,A.pathnameBase])),route:R}),A.pathnameBase!=="/"&&(u=ua([u,A.pathnameBase]))}return d}function vf(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,r]=CN(i.path,i.caseSensitive,i.end),l=e.match(t);if(!l)return null;let u=l[0],d=u.replace(/(.)\/+$/,"$1"),y=l.slice(1);return{params:r.reduce((b,{paramName:S,isOptional:A},R)=>{if(S==="*"){let G=y[R]||"";d=u.slice(0,u.length-G.length).replace(/(.)\/+$/,"$1")}const M=y[R];return A&&!M?b[S]=void 0:b[S]=(M||"").replace(/%2F/g,"/"),b},{}),pathname:u,pathnameBase:d,pattern:i}}function CN(i,e=!1,t=!0){Qs(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],l="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,y,v)=>(r.push({paramName:y,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(r.push({paramName:"*"}),l+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?l+="\\/*$":i!==""&&i!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),r]}function RN(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qs(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function _a(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=i.charAt(t);return r&&r!=="/"?null:i.slice(t)||"/"}var IN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function kN(i,e="/"){let{pathname:t,search:r="",hash:l=""}=typeof i=="string"?Ll(i):i,u;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?u=Gb(t.substring(1),"/"):u=Gb(t,e)):u=e,{pathname:u,search:PN(r),hash:LN(l)}}function Gb(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(l=>{l===".."?t.length>1&&t.pop():l!=="."&&t.push(l)}),t.length>1?t.join("/"):"/"}function mg(i,e,t,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function DN(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Qw(i){let e=DN(i);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Ww(i,e,t,r=!1){let l;typeof i=="string"?l=Ll(i):(l={...i},Xt(!l.pathname||!l.pathname.includes("?"),mg("?","pathname","search",l)),Xt(!l.pathname||!l.pathname.includes("#"),mg("#","pathname","hash",l)),Xt(!l.search||!l.search.includes("#"),mg("#","search","hash",l)));let u=i===""||l.pathname==="",d=u?"/":l.pathname,y;if(d==null)y=t;else{let A=e.length-1;if(!r&&d.startsWith("..")){let R=d.split("/");for(;R[0]==="..";)R.shift(),A-=1;l.pathname=R.join("/")}y=A>=0?e[A]:"/"}let v=kN(l,y),b=d&&d!=="/"&&d.endsWith("/"),S=(u||d===".")&&t.endsWith("/");return!v.pathname.endsWith("/")&&(b||S)&&(v.pathname+="/"),v}var ua=i=>i.join("/").replace(/\/\/+/g,"/"),jN=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),PN=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,LN=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,ON=class{constructor(i,e,t,r=!1){this.status=i,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function MN(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function VN(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Xw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Jw(i,e){let t=i;if(typeof t!="string"||!IN.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,l=!1;if(Xw)try{let u=new URL(window.location.href),d=t.startsWith("//")?new URL(u.protocol+t):new URL(t),y=_a(d.pathname,e);d.origin===u.origin&&y!=null?t=y+d.search+d.hash:l=!0}catch{Qs(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:l,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var eE=["POST","PUT","PATCH","DELETE"];new Set(eE);var zN=["GET",...eE];new Set(zN);var Qc=k.createContext(null);Qc.displayName="DataRouter";var Kf=k.createContext(null);Kf.displayName="DataRouterState";var UN=k.createContext(!1),tE=k.createContext({isTransitioning:!1});tE.displayName="ViewTransition";var BN=k.createContext(new Map);BN.displayName="Fetchers";var HN=k.createContext(null);HN.displayName="Await";var Rs=k.createContext(null);Rs.displayName="Navigation";var wh=k.createContext(null);wh.displayName="Location";var Sa=k.createContext({outlet:null,matches:[],isDataRoute:!1});Sa.displayName="Route";var b_=k.createContext(null);b_.displayName="RouteError";var nE="REACT_ROUTER_ERROR",qN="REDIRECT",FN="ROUTE_ERROR_RESPONSE";function GN(i){if(i.startsWith(`${nE}:${qN}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function ZN(i){if(i.startsWith(`${nE}:${FN}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new ON(e.status,e.statusText,e.data)}catch{}}function KN(i,{relative:e}={}){Xt(Eh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=k.useContext(Rs),{hash:l,pathname:u,search:d}=Th(i,{relative:e}),y=u;return t!=="/"&&(y=u==="/"?t:ua([t,u])),r.createHref({pathname:y,search:d,hash:l})}function Eh(){return k.useContext(wh)!=null}function Ol(){return Xt(Eh(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(wh).location}var iE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sE(i){k.useContext(Rs).static||k.useLayoutEffect(i)}function kr(){let{isDataRoute:i}=k.useContext(Sa);return i?a2():YN()}function YN(){Xt(Eh(),"useNavigate() may be used only in the context of a <Router> component.");let i=k.useContext(Qc),{basename:e,navigator:t}=k.useContext(Rs),{matches:r}=k.useContext(Sa),{pathname:l}=Ol(),u=JSON.stringify(Qw(r)),d=k.useRef(!1);return sE(()=>{d.current=!0}),k.useCallback((v,b={})=>{if(Qs(d.current,iE),!d.current)return;if(typeof v=="number"){t.go(v);return}let S=Ww(v,JSON.parse(u),l,b.relative==="path");i==null&&e!=="/"&&(S.pathname=S.pathname==="/"?e:ua([e,S.pathname])),(b.replace?t.replace:t.push)(S,b.state,b)},[e,t,u,l,i])}k.createContext(null);function Th(i,{relative:e}={}){let{matches:t}=k.useContext(Sa),{pathname:r}=Ol(),l=JSON.stringify(Qw(t));return k.useMemo(()=>Ww(i,JSON.parse(l),r,e==="path"),[i,l,r,e])}function $N(i,e){return rE(i,e)}function rE(i,e,t,r,l){Xt(Eh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=k.useContext(Rs),{matches:d}=k.useContext(Sa),y=d[d.length-1],v=y?y.params:{},b=y?y.pathname:"/",S=y?y.pathnameBase:"/",A=y&&y.route;{let ae=A&&A.path||"";oE(b,!A||ae.endsWith("*")||ae.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${ae}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ae}"> to <Route path="${ae==="/"?"*":`${ae}/*`}">.`)}let R=Ol(),M;if(e){let ae=typeof e=="string"?Ll(e):e;Xt(S==="/"||ae.pathname?.startsWith(S),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${ae.pathname}" was given in the \`location\` prop.`),M=ae}else M=R;let G=M.pathname||"/",K=G;if(S!=="/"){let ae=S.replace(/^\//,"").split("/");K="/"+G.replace(/^\//,"").split("/").slice(ae.length).join("/")}let Y=Kw(i,{pathname:K});Qs(A||Y!=null,`No routes matched location "${M.pathname}${M.search}${M.hash}" `),Qs(Y==null||Y[Y.length-1].route.element!==void 0||Y[Y.length-1].route.Component!==void 0||Y[Y.length-1].route.lazy!==void 0,`Matched leaf route at location "${M.pathname}${M.search}${M.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ce=e2(Y&&Y.map(ae=>Object.assign({},ae,{params:Object.assign({},v,ae.params),pathname:ua([S,u.encodeLocation?u.encodeLocation(ae.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ae.pathname]),pathnameBase:ae.pathnameBase==="/"?S:ua([S,u.encodeLocation?u.encodeLocation(ae.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ae.pathnameBase])})),d,t,r,l);return e&&ce?k.createElement(wh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...M},navigationType:"POP"}},ce):ce}function QN(){let i=r2(),e=MN(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:r},u={padding:"2px 4px",backgroundColor:r},d=null;return console.error("Error handled by React Router default ErrorBoundary:",i),d=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:u},"ErrorBoundary")," or"," ",k.createElement("code",{style:u},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:l},t):null,d)}var WN=k.createElement(QN,null),aE=class extends k.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const t=ZN(i.digest);t&&(i=t)}let e=i!==void 0?k.createElement(Sa.Provider,{value:this.props.routeContext},k.createElement(b_.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?k.createElement(XN,{error:i},e):e}};aE.contextType=UN;var pg=new WeakMap;function XN({children:i,error:e}){let{basename:t}=k.useContext(Rs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=GN(e.digest);if(r){let l=pg.get(e);if(l)throw l;let u=Jw(r.location,t);if(Xw&&!pg.get(e))if(u.isExternal||r.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:r.replace}));throw pg.set(e,d),d}return k.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return i}function JN({routeContext:i,match:e,children:t}){let r=k.useContext(Qc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Sa.Provider,{value:i},t)}function e2(i,e=[],t=null,r=null,l=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let u=i,d=t?.errors;if(d!=null){let S=u.findIndex(A=>A.route.id&&d?.[A.route.id]!==void 0);Xt(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,S+1))}let y=!1,v=-1;if(t)for(let S=0;S<u.length;S++){let A=u[S];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(v=S),A.route.id){let{loaderData:R,errors:M}=t,G=A.route.loader&&!R.hasOwnProperty(A.route.id)&&(!M||M[A.route.id]===void 0);if(A.route.lazy||G){y=!0,v>=0?u=u.slice(0,v+1):u=[u[0]];break}}}let b=t&&r?(S,A)=>{r(S,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:VN(t.matches),errorInfo:A})}:void 0;return u.reduceRight((S,A,R)=>{let M,G=!1,K=null,Y=null;t&&(M=d&&A.route.id?d[A.route.id]:void 0,K=A.route.errorElement||WN,y&&(v<0&&R===0?(oE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),G=!0,Y=null):v===R&&(G=!0,Y=A.route.hydrateFallbackElement||null)));let ce=e.concat(u.slice(0,R+1)),ae=()=>{let se;return M?se=K:G?se=Y:A.route.Component?se=k.createElement(A.route.Component,null):A.route.element?se=A.route.element:se=S,k.createElement(JN,{match:A,routeContext:{outlet:S,matches:ce,isDataRoute:t!=null},children:se})};return t&&(A.route.ErrorBoundary||A.route.errorElement||R===0)?k.createElement(aE,{location:t.location,revalidation:t.revalidation,component:K,error:M,children:ae(),routeContext:{outlet:null,matches:ce,isDataRoute:!0},onError:b}):ae()},null)}function x_(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function t2(i){let e=k.useContext(Qc);return Xt(e,x_(i)),e}function n2(i){let e=k.useContext(Kf);return Xt(e,x_(i)),e}function i2(i){let e=k.useContext(Sa);return Xt(e,x_(i)),e}function w_(i){let e=i2(i),t=e.matches[e.matches.length-1];return Xt(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function s2(){return w_("useRouteId")}function r2(){let i=k.useContext(b_),e=n2("useRouteError"),t=w_("useRouteError");return i!==void 0?i:e.errors?.[t]}function a2(){let{router:i}=t2("useNavigate"),e=w_("useNavigate"),t=k.useRef(!1);return sE(()=>{t.current=!0}),k.useCallback(async(l,u={})=>{Qs(t.current,iE),t.current&&(typeof l=="number"?await i.navigate(l):await i.navigate(l,{fromRouteId:e,...u}))},[i,e])}var Zb={};function oE(i,e,t){!e&&!Zb[i]&&(Zb[i]=!0,Qs(!1,t))}k.memo(o2);function o2({routes:i,future:e,state:t,onError:r}){return rE(i,void 0,t,r,e)}function Es(i){Xt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function l2({basename:i="/",children:e=null,location:t,navigationType:r="POP",navigator:l,static:u=!1,unstable_useTransitions:d}){Xt(!Eh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=i.replace(/^\/*/,"/"),v=k.useMemo(()=>({basename:y,navigator:l,static:u,unstable_useTransitions:d,future:{}}),[y,l,u,d]);typeof t=="string"&&(t=Ll(t));let{pathname:b="/",search:S="",hash:A="",state:R=null,key:M="default"}=t,G=k.useMemo(()=>{let K=_a(b,y);return K==null?null:{location:{pathname:K,search:S,hash:A,state:R,key:M},navigationType:r}},[y,b,S,A,R,M,r]);return Qs(G!=null,`<Router basename="${y}"> is not able to match the URL "${b}${S}${A}" because it does not start with the basename, so the <Router> won't render anything.`),G==null?null:k.createElement(Rs.Provider,{value:v},k.createElement(wh.Provider,{children:e,value:G}))}function c2({children:i,location:e}){return $N(Ug(i),e)}function Ug(i,e=[]){let t=[];return k.Children.forEach(i,(r,l)=>{if(!k.isValidElement(r))return;let u=[...e,l];if(r.type===k.Fragment){t.push.apply(t,Ug(r.props.children,u));return}Xt(r.type===Es,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let d={id:r.props.id||u.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(d.children=Ug(r.props.children,u)),t.push(d)}),t}var sf="get",rf="application/x-www-form-urlencoded";function Yf(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function u2(i){return Yf(i)&&i.tagName.toLowerCase()==="button"}function h2(i){return Yf(i)&&i.tagName.toLowerCase()==="form"}function d2(i){return Yf(i)&&i.tagName.toLowerCase()==="input"}function f2(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function m2(i,e){return i.button===0&&(!e||e==="_self")&&!f2(i)}var Kd=null;function p2(){if(Kd===null)try{new FormData(document.createElement("form"),0),Kd=!1}catch{Kd=!0}return Kd}var g2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gg(i){return i!=null&&!g2.has(i)?(Qs(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rf}"`),null):i}function _2(i,e){let t,r,l,u,d;if(h2(i)){let y=i.getAttribute("action");r=y?_a(y,e):null,t=i.getAttribute("method")||sf,l=gg(i.getAttribute("enctype"))||rf,u=new FormData(i)}else if(u2(i)||d2(i)&&(i.type==="submit"||i.type==="image")){let y=i.form;if(y==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=i.getAttribute("formaction")||y.getAttribute("action");if(r=v?_a(v,e):null,t=i.getAttribute("formmethod")||y.getAttribute("method")||sf,l=gg(i.getAttribute("formenctype"))||gg(y.getAttribute("enctype"))||rf,u=new FormData(y,i),!p2()){let{name:b,type:S,value:A}=i;if(S==="image"){let R=b?`${b}.`:"";u.append(`${R}x`,"0"),u.append(`${R}y`,"0")}else b&&u.append(b,A)}}else{if(Yf(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=sf,r=null,l=rf,d=i}return u&&l==="text/plain"&&(d=u,u=void 0),{action:r,method:t.toLowerCase(),encType:l,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function E_(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function y2(i,e,t,r){let l=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${r}`:l.pathname=`${l.pathname}.${r}`:l.pathname==="/"?l.pathname=`_root.${r}`:e&&_a(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${r}`,l}async function v2(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function b2(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function x2(i,e,t){let r=await Promise.all(i.map(async l=>{let u=e.routes[l.route.id];if(u){let d=await v2(u,t);return d.links?d.links():[]}return[]}));return S2(r.flat(1).filter(b2).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Kb(i,e,t,r,l,u){let d=(v,b)=>t[b]?v.route.id!==t[b].route.id:!0,y=(v,b)=>t[b].pathname!==v.pathname||t[b].route.path?.endsWith("*")&&t[b].params["*"]!==v.params["*"];return u==="assets"?e.filter((v,b)=>d(v,b)||y(v,b)):u==="data"?e.filter((v,b)=>{let S=r.routes[v.route.id];if(!S||!S.hasLoader)return!1;if(d(v,b)||y(v,b))return!0;if(v.route.shouldRevalidate){let A=v.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function w2(i,e,{includeHydrateFallback:t}={}){return E2(i.map(r=>{let l=e.routes[r.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),t&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function E2(i){return[...new Set(i)]}function T2(i){let e={},t=Object.keys(i).sort();for(let r of t)e[r]=i[r];return e}function S2(i,e){let t=new Set;return new Set(e),i.reduce((r,l)=>{let u=JSON.stringify(T2(l));return t.has(u)||(t.add(u),r.push({key:u,link:l})),r},[])}function lE(){let i=k.useContext(Qc);return E_(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function A2(){let i=k.useContext(Kf);return E_(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var T_=k.createContext(void 0);T_.displayName="FrameworkContext";function cE(){let i=k.useContext(T_);return E_(i,"You must render this element inside a <HydratedRouter> element"),i}function N2(i,e){let t=k.useContext(T_),[r,l]=k.useState(!1),[u,d]=k.useState(!1),{onFocus:y,onBlur:v,onMouseEnter:b,onMouseLeave:S,onTouchStart:A}=e,R=k.useRef(null);k.useEffect(()=>{if(i==="render"&&d(!0),i==="viewport"){let K=ce=>{ce.forEach(ae=>{d(ae.isIntersecting)})},Y=new IntersectionObserver(K,{threshold:.5});return R.current&&Y.observe(R.current),()=>{Y.disconnect()}}},[i]),k.useEffect(()=>{if(r){let K=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(K)}}},[r]);let M=()=>{l(!0)},G=()=>{l(!1),d(!1)};return t?i!=="intent"?[u,R,{}]:[u,R,{onFocus:Yu(y,M),onBlur:Yu(v,G),onMouseEnter:Yu(b,M),onMouseLeave:Yu(S,G),onTouchStart:Yu(A,M)}]:[!1,R,{}]}function Yu(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function C2({page:i,...e}){let{router:t}=lE(),r=k.useMemo(()=>Kw(t.routes,i,t.basename),[t.routes,i,t.basename]);return r?k.createElement(I2,{page:i,matches:r,...e}):null}function R2(i){let{manifest:e,routeModules:t}=cE(),[r,l]=k.useState([]);return k.useEffect(()=>{let u=!1;return x2(i,e,t).then(d=>{u||l(d)}),()=>{u=!0}},[i,e,t]),r}function I2({page:i,matches:e,...t}){let r=Ol(),{future:l,manifest:u,routeModules:d}=cE(),{basename:y}=lE(),{loaderData:v,matches:b}=A2(),S=k.useMemo(()=>Kb(i,e,b,u,r,"data"),[i,e,b,u,r]),A=k.useMemo(()=>Kb(i,e,b,u,r,"assets"),[i,e,b,u,r]),R=k.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let K=new Set,Y=!1;if(e.forEach(ae=>{let se=u.routes[ae.route.id];!se||!se.hasLoader||(!S.some(ke=>ke.route.id===ae.route.id)&&ae.route.id in v&&d[ae.route.id]?.shouldRevalidate||se.hasClientLoader?Y=!0:K.add(ae.route.id))}),K.size===0)return[];let ce=y2(i,y,l.unstable_trailingSlashAwareDataRequests,"data");return Y&&K.size>0&&ce.searchParams.set("_routes",e.filter(ae=>K.has(ae.route.id)).map(ae=>ae.route.id).join(",")),[ce.pathname+ce.search]},[y,l.unstable_trailingSlashAwareDataRequests,v,r,u,S,e,i,d]),M=k.useMemo(()=>w2(A,u),[A,u]),G=R2(A);return k.createElement(k.Fragment,null,R.map(K=>k.createElement("link",{key:K,rel:"prefetch",as:"fetch",href:K,...t})),M.map(K=>k.createElement("link",{key:K,rel:"modulepreload",href:K,...t})),G.map(({key:K,link:Y})=>k.createElement("link",{key:K,nonce:t.nonce,...Y,crossOrigin:Y.crossOrigin??t.crossOrigin})))}function k2(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var D2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{D2&&(window.__reactRouterVersion="7.13.0")}catch{}function j2({basename:i,children:e,unstable_useTransitions:t,window:r}){let l=k.useRef();l.current==null&&(l.current=fN({window:r,v5Compat:!0}));let u=l.current,[d,y]=k.useState({action:u.action,location:u.location}),v=k.useCallback(b=>{t===!1?y(b):k.startTransition(()=>y(b))},[t]);return k.useLayoutEffect(()=>u.listen(v),[u,v]),k.createElement(l2,{basename:i,children:e,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:t})}var uE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mt=k.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:l,reloadDocument:u,replace:d,state:y,target:v,to:b,preventScrollReset:S,viewTransition:A,unstable_defaultShouldRevalidate:R,...M},G){let{basename:K,unstable_useTransitions:Y}=k.useContext(Rs),ce=typeof b=="string"&&uE.test(b),ae=Jw(b,K);b=ae.to;let se=KN(b,{relative:l}),[ke,be,Ne]=N2(r,M),P=M2(b,{replace:d,state:y,target:v,preventScrollReset:S,relative:l,viewTransition:A,unstable_defaultShouldRevalidate:R,unstable_useTransitions:Y});function j(q){e&&e(q),q.defaultPrevented||P(q)}let O=k.createElement("a",{...M,...Ne,href:ae.absoluteURL||se,onClick:ae.isExternal||u?e:j,ref:k2(G,be),target:v,"data-discover":!ce&&t==="render"?"true":void 0});return ke&&!ce?k.createElement(k.Fragment,null,O,k.createElement(C2,{page:se})):O});Mt.displayName="Link";var P2=k.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:l=!1,style:u,to:d,viewTransition:y,children:v,...b},S){let A=Th(d,{relative:b.relative}),R=Ol(),M=k.useContext(Kf),{navigator:G,basename:K}=k.useContext(Rs),Y=M!=null&&H2(A)&&y===!0,ce=G.encodeLocation?G.encodeLocation(A).pathname:A.pathname,ae=R.pathname,se=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;t||(ae=ae.toLowerCase(),se=se?se.toLowerCase():null,ce=ce.toLowerCase()),se&&K&&(se=_a(se,K)||se);const ke=ce!=="/"&&ce.endsWith("/")?ce.length-1:ce.length;let be=ae===ce||!l&&ae.startsWith(ce)&&ae.charAt(ke)==="/",Ne=se!=null&&(se===ce||!l&&se.startsWith(ce)&&se.charAt(ce.length)==="/"),P={isActive:be,isPending:Ne,isTransitioning:Y},j=be?e:void 0,O;typeof r=="function"?O=r(P):O=[r,be?"active":null,Ne?"pending":null,Y?"transitioning":null].filter(Boolean).join(" ");let q=typeof u=="function"?u(P):u;return k.createElement(Mt,{...b,"aria-current":j,className:O,ref:S,style:q,to:d,viewTransition:y},typeof v=="function"?v(P):v)});P2.displayName="NavLink";var L2=k.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:l,state:u,method:d=sf,action:y,onSubmit:v,relative:b,preventScrollReset:S,viewTransition:A,unstable_defaultShouldRevalidate:R,...M},G)=>{let{unstable_useTransitions:K}=k.useContext(Rs),Y=U2(),ce=B2(y,{relative:b}),ae=d.toLowerCase()==="get"?"get":"post",se=typeof y=="string"&&uE.test(y),ke=be=>{if(v&&v(be),be.defaultPrevented)return;be.preventDefault();let Ne=be.nativeEvent.submitter,P=Ne?.getAttribute("formmethod")||d,j=()=>Y(Ne||be.currentTarget,{fetcherKey:e,method:P,navigate:t,replace:l,state:u,relative:b,preventScrollReset:S,viewTransition:A,unstable_defaultShouldRevalidate:R});K&&t!==!1?k.startTransition(()=>j()):j()};return k.createElement("form",{ref:G,method:ae,action:ce,onSubmit:r?v:ke,...M,"data-discover":!se&&i==="render"?"true":void 0})});L2.displayName="Form";function O2(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hE(i){let e=k.useContext(Qc);return Xt(e,O2(i)),e}function M2(i,{target:e,replace:t,state:r,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:y,unstable_useTransitions:v}={}){let b=kr(),S=Ol(),A=Th(i,{relative:u});return k.useCallback(R=>{if(m2(R,e)){R.preventDefault();let M=t!==void 0?t:hh(S)===hh(A),G=()=>b(i,{replace:M,state:r,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:y});v?k.startTransition(()=>G()):G()}},[S,b,A,t,r,e,i,l,u,d,y,v])}var V2=0,z2=()=>`__${String(++V2)}__`;function U2(){let{router:i}=hE("useSubmit"),{basename:e}=k.useContext(Rs),t=s2(),r=i.fetch,l=i.navigate;return k.useCallback(async(u,d={})=>{let{action:y,method:v,encType:b,formData:S,body:A}=_2(u,e);if(d.navigate===!1){let R=d.fetcherKey||z2();await r(R,t,d.action||y,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:S,body:A,formMethod:d.method||v,formEncType:d.encType||b,flushSync:d.flushSync})}else await l(d.action||y,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:S,body:A,formMethod:d.method||v,formEncType:d.encType||b,replace:d.replace,state:d.state,fromRouteId:t,flushSync:d.flushSync,viewTransition:d.viewTransition})},[r,l,e,t])}function B2(i,{relative:e}={}){let{basename:t}=k.useContext(Rs),r=k.useContext(Sa);Xt(r,"useFormAction must be used inside a RouteContext");let[l]=r.matches.slice(-1),u={...Th(i||".",{relative:e})},d=Ol();if(i==null){u.search=d.search;let y=new URLSearchParams(u.search),v=y.getAll("index");if(v.some(S=>S==="")){y.delete("index"),v.filter(A=>A).forEach(A=>y.append("index",A));let S=y.toString();u.search=S?`?${S}`:""}}return(!i||i===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:ua([t,u.pathname])),hh(u)}function H2(i,{relative:e}={}){let t=k.useContext(tE);Xt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=hE("useViewTransitionState"),l=Th(i,{relative:e});if(!t.isTransitioning)return!1;let u=_a(t.currentLocation.pathname,r)||t.currentLocation.pathname,d=_a(t.nextLocation.pathname,r)||t.nextLocation.pathname;return vf(l.pathname,d)!=null||vf(l.pathname,u)!=null}var q2=Zw();const dE=(...i)=>i.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();const F2=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const G2=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());const Yb=i=>{const e=G2(i);return e.charAt(0).toUpperCase()+e.slice(1)};var Z2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const K2=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const Y2=k.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:l="",children:u,iconNode:d,...y},v)=>k.createElement("svg",{ref:v,...Z2,width:e,height:e,stroke:i,strokeWidth:r?Number(t)*24/Number(e):t,className:dE("lucide",l),...!u&&!K2(y)&&{"aria-hidden":"true"},...y},[...d.map(([b,S])=>k.createElement(b,S)),...Array.isArray(u)?u:[u]]));const nt=(i,e)=>{const t=k.forwardRef(({className:r,...l},u)=>k.createElement(Y2,{ref:u,iconNode:e,className:dE(`lucide-${F2(Yb(i))}`,`lucide-${i}`,r),...l}));return t.displayName=Yb(i),t};const $2=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],fE=nt("activity",$2);const Q2=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],W2=nt("archive",Q2);const X2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],J2=nt("arrow-right",X2);const eC=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],mE=nt("award",eC);const tC=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],nC=nt("badge-check",tC);const iC=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],$b=nt("bell",iC);const sC=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],bf=nt("building-2",sC);const rC=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Eo=nt("building",rC);const aC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ts=nt("calendar",aC);const oC=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],lC=nt("chevron-left",oC);const cC=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],uC=nt("chevron-right",cC);const hC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Sh=nt("circle-alert",hC);const dC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ha=nt("circle-check-big",dC);const fC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],dh=nt("circle-x",fC);const mC=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],da=nt("clock",mC);const pC=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],gC=nt("copy",pC);const _C=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],yC=nt("download",_C);const vC=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],ya=nt("droplet",vC);const bC=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Nl=nt("heart",bC);const xC=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Qb=nt("history",xC);const wC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Wb=nt("info",wC);const EC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Xb=nt("loader-circle",EC);const TC=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],zc=nt("lock",TC);const SC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Jb=nt("log-out",SC);const AC=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],$f=nt("mail",AC);const NC=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ji=nt("map-pin",NC);const CC=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],RC=nt("menu",CC);const IC=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Bg=nt("message-circle",IC);const kC=[["path",{d:"M5 12h14",key:"1ays0h"}]],DC=nt("minus",kC);const jC=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],sh=nt("navigation",jC);const PC=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],xr=nt("phone",PC);const LC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],S_=nt("plus",LC);const OC=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],pE=nt("refresh-cw",OC);const MC=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],A_=nt("save",MC);const VC=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ex=nt("search",VC);const zC=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],UC=nt("send",zC);const BC=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],HC=nt("share-2",BC);const qC=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],FC=nt("shield-check",qC);const GC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Pi=nt("user",GC);const ZC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],KC=nt("users",ZC);const YC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ah=nt("x",YC),$C=()=>{};var tx={};const gE=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let l=i.charCodeAt(r);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},QC=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const l=i[t++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const u=i[t++];e[r++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=i[t++],d=i[t++],y=i[t++],v=((l&7)<<18|(u&63)<<12|(d&63)<<6|y&63)-65536;e[r++]=String.fromCharCode(55296+(v>>10)),e[r++]=String.fromCharCode(56320+(v&1023))}else{const u=i[t++],d=i[t++];e[r++]=String.fromCharCode((l&15)<<12|(u&63)<<6|d&63)}}return e.join("")},_E={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<i.length;l+=3){const u=i[l],d=l+1<i.length,y=d?i[l+1]:0,v=l+2<i.length,b=v?i[l+2]:0,S=u>>2,A=(u&3)<<4|y>>4;let R=(y&15)<<2|b>>6,M=b&63;v||(M=64,d||(R=64)),r.push(t[S],t[A],t[R],t[M])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(gE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):QC(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<i.length;){const u=t[i.charAt(l++)],y=l<i.length?t[i.charAt(l)]:0;++l;const b=l<i.length?t[i.charAt(l)]:64;++l;const A=l<i.length?t[i.charAt(l)]:64;if(++l,u==null||y==null||b==null||A==null)throw new WC;const R=u<<2|y>>4;if(r.push(R),b!==64){const M=y<<4&240|b>>2;if(r.push(M),A!==64){const G=b<<6&192|A;r.push(G)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class WC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XC=function(i){const e=gE(i);return _E.encodeByteArray(e,!0)},xf=function(i){return XC(i).replace(/\./g,"")},yE=function(i){try{return _E.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function JC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const eR=()=>JC().__FIREBASE_DEFAULTS__,tR=()=>{if(typeof process>"u"||typeof tx>"u")return;const i=tx.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},nR=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&yE(i[1]);return e&&JSON.parse(e)},Qf=()=>{try{return $C()||eR()||tR()||nR()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},vE=i=>Qf()?.emulatorHosts?.[i],iR=i=>{const e=vE(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},bE=()=>Qf()?.config,xE=i=>Qf()?.[`_${i}`];class sR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Wc(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wE(i){return(await fetch(i,{credentials:"include"})).ok}function rR(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",l=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[xf(JSON.stringify(t)),xf(JSON.stringify(d)),""].join(".")}const rh={};function aR(){const i={prod:[],emulator:[]};for(const e of Object.keys(rh))rh[e]?i.emulator.push(e):i.prod.push(e);return i}function oR(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let nx=!1;function EE(i,e){if(typeof window>"u"||typeof document>"u"||!Wc(window.location.host)||rh[i]===e||rh[i]||nx)return;rh[i]=e;function t(R){return`__firebase__banner__${R}`}const r="__firebase__banner",u=aR().prod.length>0;function d(){const R=document.getElementById(r);R&&R.remove()}function y(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function v(R,M){R.setAttribute("width","24"),R.setAttribute("id",M),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function b(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{nx=!0,d()},R}function S(R,M){R.setAttribute("id",M),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function A(){const R=oR(r),M=t("text"),G=document.getElementById(M)||document.createElement("span"),K=t("learnmore"),Y=document.getElementById(K)||document.createElement("a"),ce=t("preprendIcon"),ae=document.getElementById(ce)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const se=R.element;y(se),S(Y,K);const ke=b();v(ae,ce),se.append(ae,G,Y,ke),document.body.appendChild(se)}u?(G.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}function ni(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ni())}function cR(){const i=Qf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hR(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function dR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fR(){const i=ni();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function mR(){return!cR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TE(){try{return typeof indexedDB=="object"}catch{return!1}}function SE(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(t){e(t)}})}function pR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const gR="FirebaseError";class Dr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=gR,Object.setPrototypeOf(this,Dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ml.prototype.create)}}class Ml{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},l=`${this.service}/${e}`,u=this.errors[e],d=u?_R(u,r):"Error",y=`${this.serviceName}: ${d} (${l}).`;return new Dr(l,y,r)}}function _R(i,e){return i.replace(yR,(t,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const yR=/\{\$([^}]+)}/g;function vR(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function To(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const l of t){if(!r.includes(l))return!1;const u=i[l],d=e[l];if(ix(u)&&ix(d)){if(!To(u,d))return!1}else if(u!==d)return!1}for(const l of r)if(!t.includes(l))return!1;return!0}function ix(i){return i!==null&&typeof i=="object"}function Nh(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wu(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,u]=r.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Xu(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function bR(i,e){const t=new xR(i,e);return t.subscribe.bind(t)}class xR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let l;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");wR(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:r},l.next===void 0&&(l.next=_g),l.error===void 0&&(l.error=_g),l.complete===void 0&&(l.complete=_g);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wR(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function _g(){}function dn(i){return i&&i._delegate?i._delegate:i}class Ws{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const bl="[DEFAULT]";class ER{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new sR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SR(e))try{this.getOrInitializeService({instanceIdentifier:bl})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:l});r.resolve(u)}catch{}}}}clearInstance(e=bl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bl){return this.instances.has(e)}getOptions(e=bl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[u,d]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(u);r===y&&d.resolve(l)}return l}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const u=this.instances.get(r);return u&&e(u,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const l of r)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bl){return this.component?this.component.multipleInstances?e:bl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TR(i){return i===bl?void 0:i}function SR(i){return i.instantiationMode==="EAGER"}class AR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ER(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ft;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ft||(ft={}));const NR={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},CR=ft.INFO,RR={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},IR=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),l=RR[e];if(l)console[l](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class N_{constructor(e){this.name=e,this._logLevel=CR,this._logHandler=IR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...e),this._logHandler(this,ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...e),this._logHandler(this,ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...e),this._logHandler(this,ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...e),this._logHandler(this,ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...e),this._logHandler(this,ft.ERROR,...e)}}const kR=(i,e)=>e.some(t=>i instanceof t);let sx,rx;function DR(){return sx||(sx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jR(){return rx||(rx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AE=new WeakMap,Hg=new WeakMap,NE=new WeakMap,yg=new WeakMap,C_=new WeakMap;function PR(i){const e=new Promise((t,r)=>{const l=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{t(fa(i.result)),l()},d=()=>{r(i.error),l()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&AE.set(t,i)}).catch(()=>{}),C_.set(e,i),e}function LR(i){if(Hg.has(i))return;const e=new Promise((t,r)=>{const l=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{t(),l()},d=()=>{r(i.error||new DOMException("AbortError","AbortError")),l()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});Hg.set(i,e)}let qg={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Hg.get(i);if(e==="objectStoreNames")return i.objectStoreNames||NE.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fa(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function OR(i){qg=i(qg)}function MR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(vg(this),e,...t);return NE.set(r,e.sort?e.sort():[e]),fa(r)}:jR().includes(i)?function(...e){return i.apply(vg(this),e),fa(AE.get(this))}:function(...e){return fa(i.apply(vg(this),e))}}function VR(i){return typeof i=="function"?MR(i):(i instanceof IDBTransaction&&LR(i),kR(i,DR())?new Proxy(i,qg):i)}function fa(i){if(i instanceof IDBRequest)return PR(i);if(yg.has(i))return yg.get(i);const e=VR(i);return e!==i&&(yg.set(i,e),C_.set(e,i)),e}const vg=i=>C_.get(i);function Wf(i,e,{blocked:t,upgrade:r,blocking:l,terminated:u}={}){const d=indexedDB.open(i,e),y=fa(d);return r&&d.addEventListener("upgradeneeded",v=>{r(fa(d.result),v.oldVersion,v.newVersion,fa(d.transaction),v)}),t&&d.addEventListener("blocked",v=>t(v.oldVersion,v.newVersion,v)),y.then(v=>{u&&v.addEventListener("close",()=>u()),l&&v.addEventListener("versionchange",b=>l(b.oldVersion,b.newVersion,b))}).catch(()=>{}),y}function bg(i,{blocked:e}={}){const t=indexedDB.deleteDatabase(i);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),fa(t).then(()=>{})}const zR=["get","getKey","getAll","getAllKeys","count"],UR=["put","add","delete","clear"],xg=new Map;function ax(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(xg.get(e))return xg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,l=UR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(l||zR.includes(t)))return;const u=async function(d,...y){const v=this.transaction(d,l?"readwrite":"readonly");let b=v.store;return r&&(b=b.index(y.shift())),(await Promise.all([b[t](...y),l&&v.done]))[0]};return xg.set(e,u),u}OR(i=>({...i,get:(e,t,r)=>ax(e,t)||i.get(e,t,r),has:(e,t)=>!!ax(e,t)||i.has(e,t)}));class BR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(HR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function HR(i){return i.getComponent()?.type==="VERSION"}const Fg="@firebase/app",ox="0.14.7";const va=new N_("@firebase/app"),qR="@firebase/app-compat",FR="@firebase/analytics-compat",GR="@firebase/analytics",ZR="@firebase/app-check-compat",KR="@firebase/app-check",YR="@firebase/auth",$R="@firebase/auth-compat",QR="@firebase/database",WR="@firebase/data-connect",XR="@firebase/database-compat",JR="@firebase/functions",eI="@firebase/functions-compat",tI="@firebase/installations",nI="@firebase/installations-compat",iI="@firebase/messaging",sI="@firebase/messaging-compat",rI="@firebase/performance",aI="@firebase/performance-compat",oI="@firebase/remote-config",lI="@firebase/remote-config-compat",cI="@firebase/storage",uI="@firebase/storage-compat",hI="@firebase/firestore",dI="@firebase/ai",fI="@firebase/firestore-compat",mI="firebase",pI="12.8.0";const Gg="[DEFAULT]",gI={[Fg]:"fire-core",[qR]:"fire-core-compat",[GR]:"fire-analytics",[FR]:"fire-analytics-compat",[KR]:"fire-app-check",[ZR]:"fire-app-check-compat",[YR]:"fire-auth",[$R]:"fire-auth-compat",[QR]:"fire-rtdb",[WR]:"fire-data-connect",[XR]:"fire-rtdb-compat",[JR]:"fire-fn",[eI]:"fire-fn-compat",[tI]:"fire-iid",[nI]:"fire-iid-compat",[iI]:"fire-fcm",[sI]:"fire-fcm-compat",[rI]:"fire-perf",[aI]:"fire-perf-compat",[oI]:"fire-rc",[lI]:"fire-rc-compat",[cI]:"fire-gcs",[uI]:"fire-gcs-compat",[hI]:"fire-fst",[fI]:"fire-fst-compat",[dI]:"fire-vertex","fire-js":"fire-js",[mI]:"fire-js-all"};const wf=new Map,_I=new Map,Zg=new Map;function lx(i,e){try{i.container.addComponent(e)}catch(t){va.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Rr(i){const e=i.name;if(Zg.has(e))return va.debug(`There were multiple attempts to register component ${e}.`),!1;Zg.set(e,i);for(const t of wf.values())lx(t,i);for(const t of _I.values())lx(t,i);return!0}function Xc(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Ts(i){return i==null?!1:i.settings!==void 0}const yI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bo=new Ml("app","Firebase",yI);class vI{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bo.create("app-deleted",{appName:this._name})}}const Jc=pI;function CE(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r={name:Gg,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw bo.create("bad-app-name",{appName:String(l)});if(t||(t=bE()),!t)throw bo.create("no-options");const u=wf.get(l);if(u){if(To(t,u.options)&&To(r,u.config))return u;throw bo.create("duplicate-app",{appName:l})}const d=new AR(l);for(const v of Zg.values())d.addComponent(v);const y=new vI(t,r,d);return wf.set(l,y),y}function R_(i=Gg){const e=wf.get(i);if(!e&&i===Gg&&bE())return CE();if(!e)throw bo.create("no-app",{appName:i});return e}function As(i,e,t){let r=gI[i]??i;t&&(r+=`-${t}`);const l=r.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${r}" with version "${e}":`];l&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),va.warn(d.join(" "));return}Rr(new Ws(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const bI="firebase-heartbeat-database",xI=1,fh="firebase-heartbeat-store";let wg=null;function RE(){return wg||(wg=Wf(bI,xI,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(fh)}catch(t){console.warn(t)}}}}).catch(i=>{throw bo.create("idb-open",{originalErrorMessage:i.message})})),wg}async function wI(i){try{const t=(await RE()).transaction(fh),r=await t.objectStore(fh).get(IE(i));return await t.done,r}catch(e){if(e instanceof Dr)va.warn(e.message);else{const t=bo.create("idb-get",{originalErrorMessage:e?.message});va.warn(t.message)}}}async function cx(i,e){try{const r=(await RE()).transaction(fh,"readwrite");await r.objectStore(fh).put(e,IE(i)),await r.done}catch(t){if(t instanceof Dr)va.warn(t.message);else{const r=bo.create("idb-set",{originalErrorMessage:t?.message});va.warn(r.message)}}}function IE(i){return`${i.name}!${i.options.appId}`}const EI=1024,TI=30;class SI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new NI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ux();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>TI){const l=CI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){va.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ux(),{heartbeatsToSend:t,unsentEntries:r}=AI(this._heartbeatsCache.heartbeats),l=xf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return va.warn(e),""}}}function ux(){return new Date().toISOString().substring(0,10)}function AI(i,e=EI){const t=[];let r=i.slice();for(const l of i){const u=t.find(d=>d.agent===l.agent);if(u){if(u.dates.push(l.date),hx(t)>e){u.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),hx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class NI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TE()?SE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await wI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return cx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return cx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function hx(i){return xf(JSON.stringify({version:2,heartbeats:i})).length}function CI(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}function RI(i){Rr(new Ws("platform-logger",e=>new BR(e),"PRIVATE")),Rr(new Ws("heartbeat",e=>new SI(e),"PRIVATE")),As(Fg,ox,i),As(Fg,ox,"esm2020"),As("fire-js","")}RI("");function kE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const II=kE,DE=new Ml("auth","Firebase",kE());const Ef=new N_("@firebase/auth");function kI(i,...e){Ef.logLevel<=ft.WARN&&Ef.warn(`Auth (${Jc}): ${i}`,...e)}function af(i,...e){Ef.logLevel<=ft.ERROR&&Ef.error(`Auth (${Jc}): ${i}`,...e)}function Xs(i,...e){throw I_(i,...e)}function Er(i,...e){return I_(i,...e)}function jE(i,e,t){const r={...II(),[e]:t};return new Ml("auth","Firebase",r).create(e,{appName:i.name})}function ma(i){return jE(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function I_(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return DE.create(i,...e)}function Fe(i,e,...t){if(!i)throw I_(e,...t)}function la(i){const e="INTERNAL ASSERTION FAILED: "+i;throw af(e),new Error(e)}function ba(i,e){i||la(e)}function Kg(){return typeof self<"u"&&self.location?.href||""}function DI(){return dx()==="http:"||dx()==="https:"}function dx(){return typeof self<"u"&&self.location?.protocol||null}function jI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DI()||hR()||"connection"in navigator)?navigator.onLine:!0}function PI(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Ch{constructor(e,t){this.shortDelay=e,this.longDelay=t,ba(t>e,"Short delay should be less than long delay!"),this.isMobile=lR()||dR()}get(){return jI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function k_(i,e){ba(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class PE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;la("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;la("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;la("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const LI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const OI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],MI=new Ch(3e4,6e4);function ko(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Aa(i,e,t,r,l={}){return LE(i,l,async()=>{let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});const y=Nh({key:i.config.apiKey,...d}).slice(1),v=await i._getAdditionalHeaders();v["Content-Type"]="application/json",i.languageCode&&(v["X-Firebase-Locale"]=i.languageCode);const b={method:e,headers:v,...u};return uR()||(b.referrerPolicy="no-referrer"),i.emulatorConfig&&Wc(i.emulatorConfig.host)&&(b.credentials="include"),PE.fetch()(await OE(i,i.config.apiHost,t,y),b)})}async function LE(i,e,t){i._canInitEmulator=!1;const r={...LI,...e};try{const l=new zI(i),u=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Yd(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const y=u.ok?d.errorMessage:d.error.message,[v,b]=y.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yd(i,"credential-already-in-use",d);if(v==="EMAIL_EXISTS")throw Yd(i,"email-already-in-use",d);if(v==="USER_DISABLED")throw Yd(i,"user-disabled",d);const S=r[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw jE(i,S,b);Xs(i,S)}}catch(l){if(l instanceof Dr)throw l;Xs(i,"network-request-failed",{message:String(l)})}}async function Rh(i,e,t,r,l={}){const u=await Aa(i,e,t,r,l);return"mfaPendingCredential"in u&&Xs(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function OE(i,e,t,r){const l=`${e}${t}?${r}`,u=i,d=u.config.emulator?k_(i.config,l):`${i.config.apiScheme}://${l}`;return OI.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function VI(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Er(this.auth,"network-request-failed")),MI.get())})}}function Yd(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const l=Er(i,e,r);return l.customData._tokenResponse=t,l}function fx(i){return i!==void 0&&i.enterprise!==void 0}class UI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return VI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function BI(i,e){return Aa(i,"GET","/v2/recaptchaConfig",ko(i,e))}async function HI(i,e){return Aa(i,"POST","/v1/accounts:delete",e)}async function Tf(i,e){return Aa(i,"POST","/v1/accounts:lookup",e)}function ah(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qI(i,e=!1){const t=dn(i),r=await t.getIdToken(e),l=D_(r);Fe(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,d=u?.sign_in_provider;return{claims:l,token:r,authTime:ah(Eg(l.auth_time)),issuedAtTime:ah(Eg(l.iat)),expirationTime:ah(Eg(l.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Eg(i){return Number(i)*1e3}function D_(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return af("JWT malformed, contained fewer than 3 sections"),null;try{const l=yE(t);return l?JSON.parse(l):(af("Failed to decode base64 JWT payload"),null)}catch(l){return af("Caught error parsing JWT payload as JSON",l?.toString()),null}}function mx(i){const e=D_(i);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Uc(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Dr&&FI(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function FI({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class GI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Yg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ah(this.lastLoginAt),this.creationTime=ah(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Sf(i){const e=i.auth,t=await i.getIdToken(),r=await Uc(i,Tf(e,{idToken:t}));Fe(r?.users.length,e,"internal-error");const l=r.users[0];i._notifyReloadListener(l);const u=l.providerUserInfo?.length?ME(l.providerUserInfo):[],d=KI(i.providerData,u),y=i.isAnonymous,v=!(i.email&&l.passwordHash)&&!d?.length,b=y?v:!1,S={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Yg(l.createdAt,l.lastLoginAt),isAnonymous:b};Object.assign(i,S)}async function ZI(i){const e=dn(i);await Sf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KI(i,e){return[...i.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function ME(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function YI(i,e){const t=await LE(i,{},async()=>{const r=Nh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=i.config,d=await OE(i,l,"/v1/token",`key=${u}`),y=await i._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:y,body:r};return i.emulatorConfig&&Wc(i.emulatorConfig.host)&&(v.credentials="include"),PE.fetch()(d,v)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $I(i,e){return Aa(i,"POST","/v2/accounts:revokeToken",ko(i,e))}class Pc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const t=mx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:l,expiresIn:u}=await YI(e,t);this.updateTokensAndExpiration(r,l,Number(u))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:l,expirationTime:u}=t,d=new Pc;return r&&(Fe(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),l&&(Fe(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),u&&(Fe(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pc,this.toJSON())}_performRefresh(){return la("not implemented")}}function fo(i,e){Fe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Ys{constructor({uid:e,auth:t,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new GI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Yg(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Uc(this,this.stsTokenManager.getToken(this.auth,e));return Fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return qI(this,e)}reload(){return ZI(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ys({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Sf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ts(this.auth.app))return Promise.reject(ma(this.auth));const e=await this.getIdToken();return await Uc(this,HI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,l=t.email??void 0,u=t.phoneNumber??void 0,d=t.photoURL??void 0,y=t.tenantId??void 0,v=t._redirectEventId??void 0,b=t.createdAt??void 0,S=t.lastLoginAt??void 0,{uid:A,emailVerified:R,isAnonymous:M,providerData:G,stsTokenManager:K}=t;Fe(A&&K,e,"internal-error");const Y=Pc.fromJSON(this.name,K);Fe(typeof A=="string",e,"internal-error"),fo(r,e.name),fo(l,e.name),Fe(typeof R=="boolean",e,"internal-error"),Fe(typeof M=="boolean",e,"internal-error"),fo(u,e.name),fo(d,e.name),fo(y,e.name),fo(v,e.name),fo(b,e.name),fo(S,e.name);const ce=new Ys({uid:A,auth:e,email:l,emailVerified:R,displayName:r,isAnonymous:M,photoURL:d,phoneNumber:u,tenantId:y,stsTokenManager:Y,createdAt:b,lastLoginAt:S});return G&&Array.isArray(G)&&(ce.providerData=G.map(ae=>({...ae}))),v&&(ce._redirectEventId=v),ce}static async _fromIdTokenResponse(e,t,r=!1){const l=new Pc;l.updateFromServerResponse(t);const u=new Ys({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await Sf(u),u}static async _fromGetAccountInfoResponse(e,t,r){const l=t.users[0];Fe(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?ME(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!u?.length,y=new Pc;y.updateFromIdToken(r);const v=new Ys({uid:l.localId,auth:e,stsTokenManager:y,isAnonymous:d}),b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Yg(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(v,b),v}}const px=new Map;function ca(i){ba(i instanceof Function,"Expected a class definition");let e=px.get(i);return e?(ba(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,px.set(i,e),e)}class VE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}VE.type="NONE";const gx=VE;function of(i,e,t){return`firebase:${i}:${e}:${t}`}class Lc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:l,name:u}=this.auth;this.fullUserKey=of(this.userKey,l.apiKey,u),this.fullPersistenceKey=of("persistence",l.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Tf(this.auth,{idToken:e}).catch(()=>{});return t?Ys._fromGetAccountInfoResponse(this.auth,t,e):null}return Ys._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Lc(ca(gx),e,r);const l=(await Promise.all(t.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let u=l[0]||ca(gx);const d=of(r,e.config.apiKey,e.name);let y=null;for(const b of t)try{const S=await b._get(d);if(S){let A;if(typeof S=="string"){const R=await Tf(e,{idToken:S}).catch(()=>{});if(!R)break;A=await Ys._fromGetAccountInfoResponse(e,R,S)}else A=Ys._fromJSON(e,S);b!==u&&(y=A),u=b;break}}catch{}const v=l.filter(b=>b._shouldAllowMigration);return!u._shouldAllowMigration||!v.length?new Lc(u,e,r):(u=v[0],y&&await u._set(d,y.toJSON()),await Promise.all(t.map(async b=>{if(b!==u)try{await b._remove(d)}catch{}})),new Lc(u,e,r))}}function _x(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FE(e))return"Blackberry";if(GE(e))return"Webos";if(UE(e))return"Safari";if((e.includes("chrome/")||BE(e))&&!e.includes("edge/"))return"Chrome";if(qE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if(r?.length===2)return r[1]}return"Other"}function zE(i=ni()){return/firefox\//i.test(i)}function UE(i=ni()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BE(i=ni()){return/crios\//i.test(i)}function HE(i=ni()){return/iemobile/i.test(i)}function qE(i=ni()){return/android/i.test(i)}function FE(i=ni()){return/blackberry/i.test(i)}function GE(i=ni()){return/webos/i.test(i)}function j_(i=ni()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function QI(i=ni()){return j_(i)&&!!window.navigator?.standalone}function WI(){return fR()&&document.documentMode===10}function ZE(i=ni()){return j_(i)||qE(i)||GE(i)||FE(i)||/windows phone/i.test(i)||HE(i)}function KE(i,e=[]){let t;switch(i){case"Browser":t=_x(ni());break;case"Worker":t=`${_x(ni())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Jc}/${r}`}class XI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=u=>new Promise((d,y)=>{try{const v=e(u);d(v)}catch(v){y(v)}});r.onAbort=t,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function JI(i,e={}){return Aa(i,"GET","/v2/passwordPolicy",ko(i,e))}const ek=6;class tk{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ek,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class nk{constructor(e,t,r,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yx(this),this.idTokenSubscription=new yx(this),this.beforeStateQueue=new XI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ca(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Lc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Tf(this,{idToken:e}),r=await Ys._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ts(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=r?._redirectEventId,y=await this.tryRedirectSignIn(e);(!u||u===d)&&y?.user&&(r=y.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ts(this.app))return Promise.reject(ma(this));const t=e?dn(e):null;return t&&Fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ts(this.app)?Promise.reject(ma(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ts(this.app)?Promise.reject(ma(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ca(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JI(this),t=new tk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ml("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await $I(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ca(e)||this._popupRedirectResolver;Fe(t,this,"argument-error"),this.redirectPersistenceManager=await Lc.create(this,[ca(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,l){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let d=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(y,this,"internal-error"),y.then(()=>{d||u(this.currentUser)}),typeof t=="function"){const v=e.addObserver(t,r,l);return()=>{d=!0,v()}}else{const v=e.addObserver(t);return()=>{d=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Ts(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&kI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Vl(i){return dn(i)}class yx{constructor(e){this.auth=e,this.observer=null,this.addObserver=bR(t=>this.observer=t)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Xf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ik(i){Xf=i}function YE(i){return Xf.loadJS(i)}function sk(){return Xf.recaptchaEnterpriseScript}function rk(){return Xf.gapiScript}function ak(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class ok{constructor(){this.enterprise=new lk}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class lk{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const ck="recaptcha-enterprise",$E="NO_RECAPTCHA";class uk{constructor(e){this.type=ck,this.auth=Vl(e)}async verify(e="verify",t=!1){async function r(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,y)=>{BI(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)y(new Error("recaptcha Enterprise site key undefined"));else{const b=new UI(v);return u.tenantId==null?u._agentRecaptchaConfig=b:u._tenantRecaptchaConfigs[u.tenantId]=b,d(b.siteKey)}}).catch(v=>{y(v)})})}function l(u,d,y){const v=window.grecaptcha;fx(v)?v.enterprise.ready(()=>{v.enterprise.execute(u,{action:e}).then(b=>{d(b)}).catch(()=>{d($E)})}):y(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ok().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{r(this.auth).then(y=>{if(!t&&fx(window.grecaptcha))l(y,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let v=sk();v.length!==0&&(v+=y),YE(v).then(()=>{l(y,u,d)}).catch(b=>{d(b)})}}).catch(y=>{d(y)})})}}async function vx(i,e,t,r=!1,l=!1){const u=new uk(i);let d;if(l)d=$E;else try{d=await u.verify(t)}catch{d=await u.verify(t,!0)}const y={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in y){const v=y.phoneEnrollmentInfo.phoneNumber,b=y.phoneEnrollmentInfo.recaptchaToken;Object.assign(y,{phoneEnrollmentInfo:{phoneNumber:v,recaptchaToken:b,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in y){const v=y.phoneSignInInfo.recaptchaToken;Object.assign(y,{phoneSignInInfo:{recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return y}return r?Object.assign(y,{captchaResp:d}):Object.assign(y,{captchaResponse:d}),Object.assign(y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),y}async function $g(i,e,t,r,l){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await vx(i,e,t,t==="getOobCode");return r(i,u)}else return r(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await vx(i,e,t,t==="getOobCode");return r(i,d)}else return Promise.reject(u)})}function hk(i,e){const t=Xc(i,"auth");if(t.isInitialized()){const l=t.getImmediate(),u=t.getOptions();if(To(u,e??{}))return l;Xs(l,"already-initialized")}return t.initialize({options:e})}function dk(i,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ca);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function fk(i,e,t){const r=Vl(i);Fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,u=QE(e),{host:d,port:y}=mk(e),v=y===null?"":`:${y}`,b={url:`${u}//${d}${v}/`},S=Object.freeze({host:d,port:y,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){Fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Fe(To(b,r.config.emulator)&&To(S,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=b,r.emulatorConfig=S,r.settings.appVerificationDisabledForTesting=!0,Wc(d)?(wE(`${u}//${d}${v}`),EE("Auth",!0)):pk()}function QE(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function mk(i){const e=QE(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const u=l[1];return{host:u,port:bx(r.substr(u.length+1))}}else{const[u,d]=r.split(":");return{host:u,port:bx(d)}}}function bx(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function pk(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class P_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return la("not implemented")}_getIdTokenResponse(e){return la("not implemented")}_linkToIdToken(e,t){return la("not implemented")}_getReauthenticationResolver(e){return la("not implemented")}}async function gk(i,e){return Aa(i,"POST","/v1/accounts:signUp",e)}async function _k(i,e){return Rh(i,"POST","/v1/accounts:signInWithPassword",ko(i,e))}async function yk(i,e){return Rh(i,"POST","/v1/accounts:signInWithEmailLink",ko(i,e))}async function vk(i,e){return Rh(i,"POST","/v1/accounts:signInWithEmailLink",ko(i,e))}class mh extends P_{constructor(e,t,r,l=null){super("password",r),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new mh(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new mh(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $g(e,t,"signInWithPassword",_k);case"emailLink":return yk(e,{email:this._email,oobCode:this._password});default:Xs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $g(e,r,"signUpPassword",gk);case"emailLink":return vk(e,{idToken:t,email:this._email,oobCode:this._password});default:Xs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Oc(i,e){return Rh(i,"POST","/v1/accounts:signInWithIdp",ko(i,e))}const bk="http://localhost";class Cl extends P_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Cl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...u}=t;if(!r||!l)return null;const d=new Cl(r,l);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Oc(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Oc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oc(e,t)}buildRequest(){const e={requestUri:bk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nh(t)}return e}}function xk(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wk(i){const e=Wu(Xu(i)).link,t=e?Wu(Xu(e)).deep_link_id:null,r=Wu(Xu(i)).deep_link_id;return(r?Wu(Xu(r)).link:null)||r||t||e||i}class L_{constructor(e){const t=Wu(Xu(e)),r=t.apiKey??null,l=t.oobCode??null,u=xk(t.mode??null);Fe(r&&l&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=l,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=wk(e);try{return new L_(t)}catch{return null}}}class eu{constructor(){this.providerId=eu.PROVIDER_ID}static credential(e,t){return mh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=L_.parseLink(t);return Fe(r,"argument-error"),mh._fromEmailAndCode(e,r.code,r.tenantId)}}eu.PROVIDER_ID="password";eu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";eu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class WE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ih extends WE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class mo extends Ih{constructor(){super("facebook.com")}static credential(e){return Cl._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mo.credential(e.oauthAccessToken)}catch{return null}}}mo.FACEBOOK_SIGN_IN_METHOD="facebook.com";mo.PROVIDER_ID="facebook.com";class po extends Ih{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Cl._fromParams({providerId:po.PROVIDER_ID,signInMethod:po.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return po.credentialFromTaggedObject(e)}static credentialFromError(e){return po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return po.credential(t,r)}catch{return null}}}po.GOOGLE_SIGN_IN_METHOD="google.com";po.PROVIDER_ID="google.com";class go extends Ih{constructor(){super("github.com")}static credential(e){return Cl._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return go.credentialFromTaggedObject(e)}static credentialFromError(e){return go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return go.credential(e.oauthAccessToken)}catch{return null}}}go.GITHUB_SIGN_IN_METHOD="github.com";go.PROVIDER_ID="github.com";class _o extends Ih{constructor(){super("twitter.com")}static credential(e,t){return Cl._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return _o.credential(t,r)}catch{return null}}}_o.TWITTER_SIGN_IN_METHOD="twitter.com";_o.PROVIDER_ID="twitter.com";async function Ek(i,e){return Rh(i,"POST","/v1/accounts:signUp",ko(i,e))}class Rl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,l=!1){const u=await Ys._fromIdTokenResponse(e,r,l),d=xx(r);return new Rl({user:u,providerId:d,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const l=xx(r);return new Rl({user:e,providerId:l,_tokenResponse:r,operationType:t})}}function xx(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class Af extends Dr{constructor(e,t,r,l){super(t.code,t.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,Af.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,l){return new Af(e,t,r,l)}}function XE(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Af._fromErrorAndOperation(i,u,e,r):u})}async function Tk(i,e,t=!1){const r=await Uc(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Rl._forOperation(i,"link",r)}async function Sk(i,e,t=!1){const{auth:r}=i;if(Ts(r.app))return Promise.reject(ma(r));const l="reauthenticate";try{const u=await Uc(i,XE(r,l,e,i),t);Fe(u.idToken,r,"internal-error");const d=D_(u.idToken);Fe(d,r,"internal-error");const{sub:y}=d;return Fe(i.uid===y,r,"user-mismatch"),Rl._forOperation(i,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&Xs(r,"user-mismatch"),u}}async function JE(i,e,t=!1){if(Ts(i.app))return Promise.reject(ma(i));const r="signIn",l=await XE(i,r,e),u=await Rl._fromIdTokenResponse(i,r,l);return t||await i._updateCurrentUser(u.user),u}async function Ak(i,e){return JE(Vl(i),e)}async function eT(i){const e=Vl(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Nk(i,e,t){if(Ts(i.app))return Promise.reject(ma(i));const r=Vl(i),d=await $g(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ek).catch(v=>{throw v.code==="auth/password-does-not-meet-requirements"&&eT(i),v}),y=await Rl._fromIdTokenResponse(r,"signIn",d);return await r._updateCurrentUser(y.user),y}function Ck(i,e,t){return Ts(i.app)?Promise.reject(ma(i)):Ak(dn(i),eu.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&eT(i),r})}async function Rk(i,e){return Aa(i,"POST","/v1/accounts:update",e)}async function tT(i,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=dn(i),u={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=await Uc(r,Rk(r.auth,u));r.displayName=d.displayName||null,r.photoURL=d.photoUrl||null;const y=r.providerData.find(({providerId:v})=>v==="password");y&&(y.displayName=r.displayName,y.photoURL=r.photoURL),await r._updateTokensIfNecessary(d)}function Ik(i,e,t,r){return dn(i).onIdTokenChanged(e,t,r)}function kk(i,e,t){return dn(i).beforeAuthStateChanged(e,t)}function Dk(i,e,t,r){return dn(i).onAuthStateChanged(e,t,r)}function jk(i){return dn(i).signOut()}const Nf="__sak";class nT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Nf,"1"),this.storage.removeItem(Nf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Pk=1e3,Lk=10;class iT extends nT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ZE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),l=this.localCache[t];r!==l&&e(t,l,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,y,v)=>{this.notifyListeners(d,v)});return}const r=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(r);!t&&this.localCache[r]===d||this.notifyListeners(r,d)},u=this.storage.getItem(r);WI()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,Lk):l()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Pk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}iT.type="LOCAL";const Ok=iT;class sT extends nT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}sT.type="SESSION";const rT=sT;function Mk(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Jf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const r=new Jf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:l,data:u}=t.data,d=this.handlersMap[l];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const y=Array.from(d).map(async b=>b(t.origin,u)),v=await Mk(y);t.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:v})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jf.receivers=[];function O_(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}class Vk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,d;return new Promise((y,v)=>{const b=O_("",20);l.port1.start();const S=setTimeout(()=>{v(new Error("unsupported_event"))},r);d={messageChannel:l,onMessage(A){const R=A;if(R.data.eventId===b)switch(R.data.status){case"ack":clearTimeout(S),u=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),y(R.data.response);break;default:clearTimeout(S),clearTimeout(u),v(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:b,data:t},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Tr(){return window}function zk(i){Tr().location.href=i}function aT(){return typeof Tr().WorkerGlobalScope<"u"&&typeof Tr().importScripts=="function"}async function Uk(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Bk(){return navigator?.serviceWorker?.controller||null}function Hk(){return aT()?self:null}const oT="firebaseLocalStorageDb",qk=1,Cf="firebaseLocalStorage",lT="fbase_key";class kh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function em(i,e){return i.transaction([Cf],e?"readwrite":"readonly").objectStore(Cf)}function Fk(){const i=indexedDB.deleteDatabase(oT);return new kh(i).toPromise()}function Qg(){const i=indexedDB.open(oT,qk);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Cf,{keyPath:lT})}catch(l){t(l)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Cf)?e(r):(r.close(),await Fk(),e(await Qg()))})})}async function wx(i,e,t){const r=em(i,!0).put({[lT]:e,value:t});return new kh(r).toPromise()}async function Gk(i,e){const t=em(i,!1).get(e),r=await new kh(t).toPromise();return r===void 0?null:r.value}function Ex(i,e){const t=em(i,!0).delete(e);return new kh(t).toPromise()}const Zk=800,Kk=3;class cT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Kk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jf._getInstance(Hk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Uk(),!this.activeServiceWorker)return;this.sender=new Vk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Bk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qg();return await wx(e,Nf,"1"),await Ex(e,Nf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>wx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Gk(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ex(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=em(l,!1).getAll();return new kh(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Zk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cT.type="LOCAL";const Yk=cT;new Ch(3e4,6e4);function $k(i,e){return e?ca(e):(Fe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class M_ extends P_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Qk(i){return JE(i.auth,new M_(i),i.bypassAuthState)}function Wk(i){const{auth:e,user:t}=i;return Fe(t,e,"internal-error"),Sk(t,new M_(i),i.bypassAuthState)}async function Xk(i){const{auth:e,user:t}=i;return Fe(t,e,"internal-error"),Tk(t,new M_(i),i.bypassAuthState)}class uT{constructor(e,t,r,l,u=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:l,tenantId:u,error:d,type:y}=e;if(d){this.reject(d);return}const v={auth:this.auth,requestUri:t,sessionId:r,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(v))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qk;case"linkViaPopup":case"linkViaRedirect":return Xk;case"reauthViaPopup":case"reauthViaRedirect":return Wk;default:Xs(this.auth,"internal-error")}}resolve(e){ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Jk=new Ch(2e3,1e4);class jc extends uT{constructor(e,t,r,l,u){super(e,t,l,u),this.provider=r,this.authWindow=null,this.pollId=null,jc.currentPopupAction&&jc.currentPopupAction.cancel(),jc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){ba(this.filter.length===1,"Popup operations only handle one event");const e=O_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Jk.get())};e()}}jc.currentPopupAction=null;const eD="pendingRedirect",lf=new Map;class tD extends uT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=lf.get(this.auth._key());if(!e){try{const r=await nD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}lf.set(this.auth._key(),e)}return this.bypassAuthState||lf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nD(i,e){const t=rD(e),r=sD(i);if(!await r._isAvailable())return!1;const l=await r._get(t)==="true";return await r._remove(t),l}function iD(i,e){lf.set(i._key(),e)}function sD(i){return ca(i._redirectPersistence)}function rD(i){return of(eD,i.config.apiKey,i.name)}async function aD(i,e,t=!1){if(Ts(i.app))return Promise.reject(ma(i));const r=Vl(i),l=$k(r,e),d=await new tD(r,l,t).execute();return d&&!t&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}const oD=600*1e3;class lD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!hT(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Er(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tx(e))}saveEventToCache(e){this.cachedEventUids.add(Tx(e)),this.lastProcessedEventTime=Date.now()}}function Tx(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function hT({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function cD(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hT(i);default:return!1}}async function uD(i,e={}){return Aa(i,"GET","/v1/projects",e)}const hD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dD=/^https?/;async function fD(i){if(i.config.emulator)return;const{authorizedDomains:e}=await uD(i);for(const t of e)try{if(mD(t))return}catch{}Xs(i,"unauthorized-domain")}function mD(i){const e=Kg(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===r}if(!dD.test(t))return!1;if(hD.test(i))return r===i;const l=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}const pD=new Ch(3e4,6e4);function Sx(){const i=Tr().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function gD(i){return new Promise((e,t)=>{function r(){Sx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sx(),t(Er(i,"network-request-failed"))},timeout:pD.get()})}if(Tr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Tr().gapi?.load)r();else{const l=ak("iframefcb");return Tr()[l]=()=>{gapi.load?r():t(Er(i,"network-request-failed"))},YE(`${rk()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw cf=null,e})}let cf=null;function _D(i){return cf=cf||gD(i),cf}const yD=new Ch(5e3,15e3),vD="__/auth/iframe",bD="emulator/auth/iframe",xD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ED(i){const e=i.config;Fe(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?k_(e,bD):`https://${i.config.authDomain}/${vD}`,r={apiKey:e.apiKey,appName:i.name,v:Jc},l=wD.get(i.config.apiHost);l&&(r.eid=l);const u=i._getFrameworks();return u.length&&(r.fw=u.join(",")),`${t}?${Nh(r).slice(1)}`}async function TD(i){const e=await _D(i),t=Tr().gapi;return Fe(t,i,"internal-error"),e.open({where:document.body,url:ED(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xD,dontclear:!0},r=>new Promise(async(l,u)=>{await r.restyle({setHideOnLeave:!1});const d=Er(i,"network-request-failed"),y=Tr().setTimeout(()=>{u(d)},yD.get());function v(){Tr().clearTimeout(y),l(r)}r.ping(v).then(v,()=>{u(d)})}))}const SD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AD=500,ND=600,CD="_blank",RD="http://localhost";class Ax{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ID(i,e,t,r=AD,l=ND){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let y="";const v={...SD,width:r.toString(),height:l.toString(),top:u,left:d},b=ni().toLowerCase();t&&(y=BE(b)?CD:t),zE(b)&&(e=e||RD,v.scrollbars="yes");const S=Object.entries(v).reduce((R,[M,G])=>`${R}${M}=${G},`,"");if(QI(b)&&y!=="_self")return kD(e||"",y),new Ax(null);const A=window.open(e||"",y,S);Fe(A,i,"popup-blocked");try{A.focus()}catch{}return new Ax(A)}function kD(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const DD="__/auth/handler",jD="emulator/auth/handler",PD=encodeURIComponent("fac");async function Nx(i,e,t,r,l,u){Fe(i.config.authDomain,i,"auth-domain-config-required"),Fe(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:Jc,eventId:l};if(e instanceof WE){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",vR(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,A]of Object.entries({}))d[S]=A}if(e instanceof Ih){const S=e.getScopes().filter(A=>A!=="");S.length>0&&(d.scopes=S.join(","))}i.tenantId&&(d.tid=i.tenantId);const y=d;for(const S of Object.keys(y))y[S]===void 0&&delete y[S];const v=await i._getAppCheckToken(),b=v?`#${PD}=${encodeURIComponent(v)}`:"";return`${LD(i)}?${Nh(y).slice(1)}${b}`}function LD({config:i}){return i.emulator?k_(i,jD):`https://${i.authDomain}/${DD}`}const Tg="webStorageSupport";class OD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rT,this._completeRedirectFn=aD,this._overrideRedirectResult=iD}async _openPopup(e,t,r,l){ba(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Nx(e,t,r,Kg(),l);return ID(e,u,O_())}async _openRedirect(e,t,r,l){await this._originValidation(e);const u=await Nx(e,t,r,Kg(),l);return zk(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:u}=this.eventManagers[t];return l?Promise.resolve(l):(ba(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await TD(e),r=new lD(e);return t.register("authEvent",l=>(Fe(l?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tg,{type:Tg},l=>{const u=l?.[0]?.[Tg];u!==void 0&&t(!!u),Xs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ZE()||UE()||j_()}}const MD=OD;var Cx="@firebase/auth",Rx="1.12.0";class VD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function zD(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UD(i){Rr(new Ws("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:y}=r.options;Fe(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const v={apiKey:d,authDomain:y,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KE(i)},b=new nk(r,l,u,v);return dk(b,t),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Rr(new Ws("auth-internal",e=>{const t=Vl(e.getProvider("auth").getImmediate());return(r=>new VD(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),As(Cx,Rx,zD(i)),As(Cx,Rx,"esm2020")}const BD=300,HD=xE("authIdTokenMaxAge")||BD;let Ix=null;const qD=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>HD)return;const l=t?.token;Ix!==l&&(Ix=l,await fetch(i,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function FD(i=R_()){const e=Xc(i,"auth");if(e.isInitialized())return e.getImmediate();const t=hk(i,{popupRedirectResolver:MD,persistence:[Yk,Ok,rT]}),r=xE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const d=qD(u.toString());kk(t,d,()=>d(t.currentUser)),Ik(t,y=>d(y))}}const l=vE("auth");return l&&fk(t,`http://${l}`),t}function GD(){return document.getElementsByTagName("head")?.[0]??document}ik({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=l=>{const u=Er("internal-error");u.customData=l,t(u)},r.type="text/javascript",r.charset="UTF-8",GD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UD("Browser");var ZD="firebase",KD="12.8.0";As(ZD,KD,"app");var kx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var xo,dT;(function(){var i;function e(P,j){function O(){}O.prototype=j.prototype,P.F=j.prototype,P.prototype=new O,P.prototype.constructor=P,P.D=function(q,U,Z){for(var z=Array(arguments.length-2),We=2;We<arguments.length;We++)z[We-2]=arguments[We];return j.prototype[U].apply(q,z)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(P,j,O){O||(O=0);const q=Array(16);if(typeof j=="string")for(var U=0;U<16;++U)q[U]=j.charCodeAt(O++)|j.charCodeAt(O++)<<8|j.charCodeAt(O++)<<16|j.charCodeAt(O++)<<24;else for(U=0;U<16;++U)q[U]=j[O++]|j[O++]<<8|j[O++]<<16|j[O++]<<24;j=P.g[0],O=P.g[1],U=P.g[2];let Z=P.g[3],z;z=j+(Z^O&(U^Z))+q[0]+3614090360&4294967295,j=O+(z<<7&4294967295|z>>>25),z=Z+(U^j&(O^U))+q[1]+3905402710&4294967295,Z=j+(z<<12&4294967295|z>>>20),z=U+(O^Z&(j^O))+q[2]+606105819&4294967295,U=Z+(z<<17&4294967295|z>>>15),z=O+(j^U&(Z^j))+q[3]+3250441966&4294967295,O=U+(z<<22&4294967295|z>>>10),z=j+(Z^O&(U^Z))+q[4]+4118548399&4294967295,j=O+(z<<7&4294967295|z>>>25),z=Z+(U^j&(O^U))+q[5]+1200080426&4294967295,Z=j+(z<<12&4294967295|z>>>20),z=U+(O^Z&(j^O))+q[6]+2821735955&4294967295,U=Z+(z<<17&4294967295|z>>>15),z=O+(j^U&(Z^j))+q[7]+4249261313&4294967295,O=U+(z<<22&4294967295|z>>>10),z=j+(Z^O&(U^Z))+q[8]+1770035416&4294967295,j=O+(z<<7&4294967295|z>>>25),z=Z+(U^j&(O^U))+q[9]+2336552879&4294967295,Z=j+(z<<12&4294967295|z>>>20),z=U+(O^Z&(j^O))+q[10]+4294925233&4294967295,U=Z+(z<<17&4294967295|z>>>15),z=O+(j^U&(Z^j))+q[11]+2304563134&4294967295,O=U+(z<<22&4294967295|z>>>10),z=j+(Z^O&(U^Z))+q[12]+1804603682&4294967295,j=O+(z<<7&4294967295|z>>>25),z=Z+(U^j&(O^U))+q[13]+4254626195&4294967295,Z=j+(z<<12&4294967295|z>>>20),z=U+(O^Z&(j^O))+q[14]+2792965006&4294967295,U=Z+(z<<17&4294967295|z>>>15),z=O+(j^U&(Z^j))+q[15]+1236535329&4294967295,O=U+(z<<22&4294967295|z>>>10),z=j+(U^Z&(O^U))+q[1]+4129170786&4294967295,j=O+(z<<5&4294967295|z>>>27),z=Z+(O^U&(j^O))+q[6]+3225465664&4294967295,Z=j+(z<<9&4294967295|z>>>23),z=U+(j^O&(Z^j))+q[11]+643717713&4294967295,U=Z+(z<<14&4294967295|z>>>18),z=O+(Z^j&(U^Z))+q[0]+3921069994&4294967295,O=U+(z<<20&4294967295|z>>>12),z=j+(U^Z&(O^U))+q[5]+3593408605&4294967295,j=O+(z<<5&4294967295|z>>>27),z=Z+(O^U&(j^O))+q[10]+38016083&4294967295,Z=j+(z<<9&4294967295|z>>>23),z=U+(j^O&(Z^j))+q[15]+3634488961&4294967295,U=Z+(z<<14&4294967295|z>>>18),z=O+(Z^j&(U^Z))+q[4]+3889429448&4294967295,O=U+(z<<20&4294967295|z>>>12),z=j+(U^Z&(O^U))+q[9]+568446438&4294967295,j=O+(z<<5&4294967295|z>>>27),z=Z+(O^U&(j^O))+q[14]+3275163606&4294967295,Z=j+(z<<9&4294967295|z>>>23),z=U+(j^O&(Z^j))+q[3]+4107603335&4294967295,U=Z+(z<<14&4294967295|z>>>18),z=O+(Z^j&(U^Z))+q[8]+1163531501&4294967295,O=U+(z<<20&4294967295|z>>>12),z=j+(U^Z&(O^U))+q[13]+2850285829&4294967295,j=O+(z<<5&4294967295|z>>>27),z=Z+(O^U&(j^O))+q[2]+4243563512&4294967295,Z=j+(z<<9&4294967295|z>>>23),z=U+(j^O&(Z^j))+q[7]+1735328473&4294967295,U=Z+(z<<14&4294967295|z>>>18),z=O+(Z^j&(U^Z))+q[12]+2368359562&4294967295,O=U+(z<<20&4294967295|z>>>12),z=j+(O^U^Z)+q[5]+4294588738&4294967295,j=O+(z<<4&4294967295|z>>>28),z=Z+(j^O^U)+q[8]+2272392833&4294967295,Z=j+(z<<11&4294967295|z>>>21),z=U+(Z^j^O)+q[11]+1839030562&4294967295,U=Z+(z<<16&4294967295|z>>>16),z=O+(U^Z^j)+q[14]+4259657740&4294967295,O=U+(z<<23&4294967295|z>>>9),z=j+(O^U^Z)+q[1]+2763975236&4294967295,j=O+(z<<4&4294967295|z>>>28),z=Z+(j^O^U)+q[4]+1272893353&4294967295,Z=j+(z<<11&4294967295|z>>>21),z=U+(Z^j^O)+q[7]+4139469664&4294967295,U=Z+(z<<16&4294967295|z>>>16),z=O+(U^Z^j)+q[10]+3200236656&4294967295,O=U+(z<<23&4294967295|z>>>9),z=j+(O^U^Z)+q[13]+681279174&4294967295,j=O+(z<<4&4294967295|z>>>28),z=Z+(j^O^U)+q[0]+3936430074&4294967295,Z=j+(z<<11&4294967295|z>>>21),z=U+(Z^j^O)+q[3]+3572445317&4294967295,U=Z+(z<<16&4294967295|z>>>16),z=O+(U^Z^j)+q[6]+76029189&4294967295,O=U+(z<<23&4294967295|z>>>9),z=j+(O^U^Z)+q[9]+3654602809&4294967295,j=O+(z<<4&4294967295|z>>>28),z=Z+(j^O^U)+q[12]+3873151461&4294967295,Z=j+(z<<11&4294967295|z>>>21),z=U+(Z^j^O)+q[15]+530742520&4294967295,U=Z+(z<<16&4294967295|z>>>16),z=O+(U^Z^j)+q[2]+3299628645&4294967295,O=U+(z<<23&4294967295|z>>>9),z=j+(U^(O|~Z))+q[0]+4096336452&4294967295,j=O+(z<<6&4294967295|z>>>26),z=Z+(O^(j|~U))+q[7]+1126891415&4294967295,Z=j+(z<<10&4294967295|z>>>22),z=U+(j^(Z|~O))+q[14]+2878612391&4294967295,U=Z+(z<<15&4294967295|z>>>17),z=O+(Z^(U|~j))+q[5]+4237533241&4294967295,O=U+(z<<21&4294967295|z>>>11),z=j+(U^(O|~Z))+q[12]+1700485571&4294967295,j=O+(z<<6&4294967295|z>>>26),z=Z+(O^(j|~U))+q[3]+2399980690&4294967295,Z=j+(z<<10&4294967295|z>>>22),z=U+(j^(Z|~O))+q[10]+4293915773&4294967295,U=Z+(z<<15&4294967295|z>>>17),z=O+(Z^(U|~j))+q[1]+2240044497&4294967295,O=U+(z<<21&4294967295|z>>>11),z=j+(U^(O|~Z))+q[8]+1873313359&4294967295,j=O+(z<<6&4294967295|z>>>26),z=Z+(O^(j|~U))+q[15]+4264355552&4294967295,Z=j+(z<<10&4294967295|z>>>22),z=U+(j^(Z|~O))+q[6]+2734768916&4294967295,U=Z+(z<<15&4294967295|z>>>17),z=O+(Z^(U|~j))+q[13]+1309151649&4294967295,O=U+(z<<21&4294967295|z>>>11),z=j+(U^(O|~Z))+q[4]+4149444226&4294967295,j=O+(z<<6&4294967295|z>>>26),z=Z+(O^(j|~U))+q[11]+3174756917&4294967295,Z=j+(z<<10&4294967295|z>>>22),z=U+(j^(Z|~O))+q[2]+718787259&4294967295,U=Z+(z<<15&4294967295|z>>>17),z=O+(Z^(U|~j))+q[9]+3951481745&4294967295,P.g[0]=P.g[0]+j&4294967295,P.g[1]=P.g[1]+(U+(z<<21&4294967295|z>>>11))&4294967295,P.g[2]=P.g[2]+U&4294967295,P.g[3]=P.g[3]+Z&4294967295}r.prototype.v=function(P,j){j===void 0&&(j=P.length);const O=j-this.blockSize,q=this.C;let U=this.h,Z=0;for(;Z<j;){if(U==0)for(;Z<=O;)l(this,P,Z),Z+=this.blockSize;if(typeof P=="string"){for(;Z<j;)if(q[U++]=P.charCodeAt(Z++),U==this.blockSize){l(this,q),U=0;break}}else for(;Z<j;)if(q[U++]=P[Z++],U==this.blockSize){l(this,q),U=0;break}}this.h=U,this.o+=j},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var j=1;j<P.length-8;++j)P[j]=0;j=this.o*8;for(var O=P.length-8;O<P.length;++O)P[O]=j&255,j/=256;for(this.v(P),P=Array(16),j=0,O=0;O<4;++O)for(let q=0;q<32;q+=8)P[j++]=this.g[O]>>>q&255;return P};function u(P,j){var O=y;return Object.prototype.hasOwnProperty.call(O,P)?O[P]:O[P]=j(P)}function d(P,j){this.h=j;const O=[];let q=!0;for(let U=P.length-1;U>=0;U--){const Z=P[U]|0;q&&Z==j||(O[U]=Z,q=!1)}this.g=O}var y={};function v(P){return-128<=P&&P<128?u(P,function(j){return new d([j|0],j<0?-1:0)}):new d([P|0],P<0?-1:0)}function b(P){if(isNaN(P)||!isFinite(P))return A;if(P<0)return Y(b(-P));const j=[];let O=1;for(let q=0;P>=O;q++)j[q]=P/O|0,O*=4294967296;return new d(j,0)}function S(P,j){if(P.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(P.charAt(0)=="-")return Y(S(P.substring(1),j));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=b(Math.pow(j,8));let q=A;for(let Z=0;Z<P.length;Z+=8){var U=Math.min(8,P.length-Z);const z=parseInt(P.substring(Z,Z+U),j);U<8?(U=b(Math.pow(j,U)),q=q.j(U).add(b(z))):(q=q.j(O),q=q.add(b(z)))}return q}var A=v(0),R=v(1),M=v(16777216);i=d.prototype,i.m=function(){if(K(this))return-Y(this).m();let P=0,j=1;for(let O=0;O<this.g.length;O++){const q=this.i(O);P+=(q>=0?q:4294967296+q)*j,j*=4294967296}return P},i.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(G(this))return"0";if(K(this))return"-"+Y(this).toString(P);const j=b(Math.pow(P,6));var O=this;let q="";for(;;){const U=ke(O,j).g;O=ce(O,U.j(j));let Z=((O.g.length>0?O.g[0]:O.h)>>>0).toString(P);if(O=U,G(O))return Z+q;for(;Z.length<6;)Z="0"+Z;q=Z+q}},i.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function G(P){if(P.h!=0)return!1;for(let j=0;j<P.g.length;j++)if(P.g[j]!=0)return!1;return!0}function K(P){return P.h==-1}i.l=function(P){return P=ce(this,P),K(P)?-1:G(P)?0:1};function Y(P){const j=P.g.length,O=[];for(let q=0;q<j;q++)O[q]=~P.g[q];return new d(O,~P.h).add(R)}i.abs=function(){return K(this)?Y(this):this},i.add=function(P){const j=Math.max(this.g.length,P.g.length),O=[];let q=0;for(let U=0;U<=j;U++){let Z=q+(this.i(U)&65535)+(P.i(U)&65535),z=(Z>>>16)+(this.i(U)>>>16)+(P.i(U)>>>16);q=z>>>16,Z&=65535,z&=65535,O[U]=z<<16|Z}return new d(O,O[O.length-1]&-2147483648?-1:0)};function ce(P,j){return P.add(Y(j))}i.j=function(P){if(G(this)||G(P))return A;if(K(this))return K(P)?Y(this).j(Y(P)):Y(Y(this).j(P));if(K(P))return Y(this.j(Y(P)));if(this.l(M)<0&&P.l(M)<0)return b(this.m()*P.m());const j=this.g.length+P.g.length,O=[];for(var q=0;q<2*j;q++)O[q]=0;for(q=0;q<this.g.length;q++)for(let U=0;U<P.g.length;U++){const Z=this.i(q)>>>16,z=this.i(q)&65535,We=P.i(U)>>>16,At=P.i(U)&65535;O[2*q+2*U]+=z*At,ae(O,2*q+2*U),O[2*q+2*U+1]+=Z*At,ae(O,2*q+2*U+1),O[2*q+2*U+1]+=z*We,ae(O,2*q+2*U+1),O[2*q+2*U+2]+=Z*We,ae(O,2*q+2*U+2)}for(P=0;P<j;P++)O[P]=O[2*P+1]<<16|O[2*P];for(P=j;P<2*j;P++)O[P]=0;return new d(O,0)};function ae(P,j){for(;(P[j]&65535)!=P[j];)P[j+1]+=P[j]>>>16,P[j]&=65535,j++}function se(P,j){this.g=P,this.h=j}function ke(P,j){if(G(j))throw Error("division by zero");if(G(P))return new se(A,A);if(K(P))return j=ke(Y(P),j),new se(Y(j.g),Y(j.h));if(K(j))return j=ke(P,Y(j)),new se(Y(j.g),j.h);if(P.g.length>30){if(K(P)||K(j))throw Error("slowDivide_ only works with positive integers.");for(var O=R,q=j;q.l(P)<=0;)O=be(O),q=be(q);var U=Ne(O,1),Z=Ne(q,1);for(q=Ne(q,2),O=Ne(O,2);!G(q);){var z=Z.add(q);z.l(P)<=0&&(U=U.add(O),Z=z),q=Ne(q,1),O=Ne(O,1)}return j=ce(P,U.j(j)),new se(U,j)}for(U=A;P.l(j)>=0;){for(O=Math.max(1,Math.floor(P.m()/j.m())),q=Math.ceil(Math.log(O)/Math.LN2),q=q<=48?1:Math.pow(2,q-48),Z=b(O),z=Z.j(j);K(z)||z.l(P)>0;)O-=q,Z=b(O),z=Z.j(j);G(Z)&&(Z=R),U=U.add(Z),P=ce(P,z)}return new se(U,P)}i.B=function(P){return ke(this,P).h},i.and=function(P){const j=Math.max(this.g.length,P.g.length),O=[];for(let q=0;q<j;q++)O[q]=this.i(q)&P.i(q);return new d(O,this.h&P.h)},i.or=function(P){const j=Math.max(this.g.length,P.g.length),O=[];for(let q=0;q<j;q++)O[q]=this.i(q)|P.i(q);return new d(O,this.h|P.h)},i.xor=function(P){const j=Math.max(this.g.length,P.g.length),O=[];for(let q=0;q<j;q++)O[q]=this.i(q)^P.i(q);return new d(O,this.h^P.h)};function be(P){const j=P.g.length+1,O=[];for(let q=0;q<j;q++)O[q]=P.i(q)<<1|P.i(q-1)>>>31;return new d(O,P.h)}function Ne(P,j){const O=j>>5;j%=32;const q=P.g.length-O,U=[];for(let Z=0;Z<q;Z++)U[Z]=j>0?P.i(Z+O)>>>j|P.i(Z+O+1)<<32-j:P.i(Z+O);return new d(U,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,dT=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=b,d.fromString=S,xo=d}).apply(typeof kx<"u"?kx:typeof self<"u"?self:typeof window<"u"?window:{});var $d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var fT,Ju,mT,uf,Wg,pT,gT,_T;(function(){var i,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof $d=="object"&&$d];for(var w=0;w<m.length;++w){var N=m[w];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=t(this);function l(m,w){if(w)e:{var N=r;m=m.split(".");for(var D=0;D<m.length-1;D++){var W=m[D];if(!(W in N))break e;N=N[W]}m=m[m.length-1],D=N[m],w=w(D),w!=D&&w!=null&&e(N,m,{configurable:!0,writable:!0,value:w})}}l("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(m){return m||function(w){var N=[],D;for(D in w)Object.prototype.hasOwnProperty.call(w,D)&&N.push([D,w[D]]);return N}});var u=u||{},d=this||self;function y(m){var w=typeof m;return w=="object"&&m!=null||w=="function"}function v(m,w,N){return m.call.apply(m.bind,arguments)}function b(m,w,N){return b=v,b.apply(null,arguments)}function S(m,w){var N=Array.prototype.slice.call(arguments,1);return function(){var D=N.slice();return D.push.apply(D,arguments),m.apply(this,D)}}function A(m,w){function N(){}N.prototype=w.prototype,m.Z=w.prototype,m.prototype=new N,m.prototype.constructor=m,m.Ob=function(D,W,ne){for(var we=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)we[Ze-2]=arguments[Ze];return w.prototype[W].apply(D,we)}}var R=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function M(m){const w=m.length;if(w>0){const N=Array(w);for(let D=0;D<w;D++)N[D]=m[D];return N}return[]}function G(m,w){for(let D=1;D<arguments.length;D++){const W=arguments[D];var N=typeof W;if(N=N!="object"?N:W?Array.isArray(W)?"array":N:"null",N=="array"||N=="object"&&typeof W.length=="number"){N=m.length||0;const ne=W.length||0;m.length=N+ne;for(let we=0;we<ne;we++)m[N+we]=W[we]}else m.push(W)}}class K{constructor(w,N){this.i=w,this.j=N,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function Y(m){d.setTimeout(()=>{throw m},0)}function ce(){var m=P;let w=null;return m.g&&(w=m.g,m.g=m.g.next,m.g||(m.h=null),w.next=null),w}class ae{constructor(){this.h=this.g=null}add(w,N){const D=se.get();D.set(w,N),this.h?this.h.next=D:this.g=D,this.h=D}}var se=new K(()=>new ke,m=>m.reset());class ke{constructor(){this.next=this.g=this.h=null}set(w,N){this.h=w,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let be,Ne=!1,P=new ae,j=()=>{const m=Promise.resolve(void 0);be=()=>{m.then(O)}};function O(){for(var m;m=ce();){try{m.h.call(m.g)}catch(N){Y(N)}var w=se;w.j(m),w.h<100&&(w.h++,m.next=w.g,w.g=m)}Ne=!1}function q(){this.u=this.u,this.C=this.C}q.prototype.u=!1,q.prototype.dispose=function(){this.u||(this.u=!0,this.N())},q.prototype[Symbol.dispose]=function(){this.dispose()},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(m,w){this.type=m,this.g=this.target=w,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var Z=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var m=!1,w=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const N=()=>{};d.addEventListener("test",N,w),d.removeEventListener("test",N,w)}catch{}return m})();function z(m){return/^[\s\xa0]*$/.test(m)}function We(m,w){U.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,w)}A(We,U),We.prototype.init=function(m,w){const N=this.type=m.type,D=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=w,w=m.relatedTarget,w||(N=="mouseover"?w=m.fromElement:N=="mouseout"&&(w=m.toElement)),this.relatedTarget=w,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&We.Z.h.call(this)},We.prototype.h=function(){We.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var At="closure_listenable_"+(Math.random()*1e6|0),re=0;function ue(m,w,N,D,W){this.listener=m,this.proxy=null,this.src=w,this.type=N,this.capture=!!D,this.ha=W,this.key=++re,this.da=this.fa=!1}function _e(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ye(m,w,N){for(const D in m)w.call(N,m[D],D,m)}function Ee(m,w){for(const N in m)w.call(void 0,m[N],N,m)}function B(m){const w={};for(const N in m)w[N]=m[N];return w}const le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ve(m,w){let N,D;for(let W=1;W<arguments.length;W++){D=arguments[W];for(N in D)m[N]=D[N];for(let ne=0;ne<le.length;ne++)N=le[ne],Object.prototype.hasOwnProperty.call(D,N)&&(m[N]=D[N])}}function ye(m){this.src=m,this.g={},this.h=0}ye.prototype.add=function(m,w,N,D,W){const ne=m.toString();m=this.g[ne],m||(m=this.g[ne]=[],this.h++);const we=Ae(m,w,D,W);return we>-1?(w=m[we],N||(w.fa=!1)):(w=new ue(w,this.src,ne,!!D,W),w.fa=N,m.push(w)),w};function Se(m,w){const N=w.type;if(N in m.g){var D=m.g[N],W=Array.prototype.indexOf.call(D,w,void 0),ne;(ne=W>=0)&&Array.prototype.splice.call(D,W,1),ne&&(_e(w),m.g[N].length==0&&(delete m.g[N],m.h--))}}function Ae(m,w,N,D){for(let W=0;W<m.length;++W){const ne=m[W];if(!ne.da&&ne.listener==w&&ne.capture==!!N&&ne.ha==D)return W}return-1}var ie="closure_lm_"+(Math.random()*1e6|0),Ue={};function qe(m,w,N,D,W){if(Array.isArray(w)){for(let ne=0;ne<w.length;ne++)qe(m,w[ne],N,D,W);return null}return N=ks(N),m&&m[At]?m.J(w,N,y(D)?!!D.capture:!1,W):xe(m,w,N,!1,D,W)}function xe(m,w,N,D,W,ne){if(!w)throw Error("Invalid event type");const we=y(W)?!!W.capture:!!W;let Ze=Li(m);if(Ze||(m[ie]=Ze=new ye(m)),N=Ze.add(w,N,D,we,ne),N.proxy)return N;if(D=De(),N.proxy=D,D.src=m,D.listener=N,m.addEventListener)Z||(W=we),W===void 0&&(W=!1),m.addEventListener(w.toString(),D,W);else if(m.attachEvent)m.attachEvent(ii(w.toString()),D);else if(m.addListener&&m.removeListener)m.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return N}function De(){function m(N){return w.call(m.src,m.listener,N)}const w=Is;return m}function rt(m,w,N,D,W){if(Array.isArray(w))for(var ne=0;ne<w.length;ne++)rt(m,w[ne],N,D,W);else D=y(D)?!!D.capture:!!D,N=ks(N),m&&m[At]?(m=m.i,ne=String(w).toString(),ne in m.g&&(w=m.g[ne],N=Ae(w,N,D,W),N>-1&&(_e(w[N]),Array.prototype.splice.call(w,N,1),w.length==0&&(delete m.g[ne],m.h--)))):m&&(m=Li(m))&&(w=m.g[w.toString()],m=-1,w&&(m=Ae(w,N,D,W)),(N=m>-1?w[m]:null)&&Ln(N))}function Ln(m){if(typeof m!="number"&&m&&!m.da){var w=m.src;if(w&&w[At])Se(w.i,m);else{var N=m.type,D=m.proxy;w.removeEventListener?w.removeEventListener(N,D,m.capture):w.detachEvent?w.detachEvent(ii(N),D):w.addListener&&w.removeListener&&w.removeListener(D),(N=Li(w))?(Se(N,m),N.h==0&&(N.src=null,w[ie]=null)):_e(m)}}}function ii(m){return m in Ue?Ue[m]:Ue[m]="on"+m}function Is(m,w){if(m.da)m=!0;else{w=new We(w,this);const N=m.listener,D=m.ha||m.src;m.fa&&Ln(m),m=N.call(D,w)}return m}function Li(m){return m=m[ie],m instanceof ye?m:null}var ns="__closure_events_fn_"+(Math.random()*1e9>>>0);function ks(m){return typeof m=="function"?m:(m[ns]||(m[ns]=function(w){return m.handleEvent(w)}),m[ns])}function Kt(){q.call(this),this.i=new ye(this),this.M=this,this.G=null}A(Kt,q),Kt.prototype[At]=!0,Kt.prototype.removeEventListener=function(m,w,N,D){rt(this,m,w,N,D)};function en(m,w){var N,D=m.G;if(D)for(N=[];D;D=D.G)N.push(D);if(m=m.M,D=w.type||w,typeof w=="string")w=new U(w,m);else if(w instanceof U)w.target=w.target||m;else{var W=w;w=new U(D,m),ve(w,W)}W=!0;let ne,we;if(N)for(we=N.length-1;we>=0;we--)ne=w.g=N[we],W=is(ne,D,!0,w)&&W;if(ne=w.g=m,W=is(ne,D,!0,w)&&W,W=is(ne,D,!1,w)&&W,N)for(we=0;we<N.length;we++)ne=w.g=N[we],W=is(ne,D,!1,w)&&W}Kt.prototype.N=function(){if(Kt.Z.N.call(this),this.i){var m=this.i;for(const w in m.g){const N=m.g[w];for(let D=0;D<N.length;D++)_e(N[D]);delete m.g[w],m.h--}}this.G=null},Kt.prototype.J=function(m,w,N,D){return this.i.add(String(m),w,!1,N,D)},Kt.prototype.K=function(m,w,N,D){return this.i.add(String(m),w,!0,N,D)};function is(m,w,N,D){if(w=m.i.g[String(w)],!w)return!0;w=w.concat();let W=!0;for(let ne=0;ne<w.length;++ne){const we=w[ne];if(we&&!we.da&&we.capture==N){const Ze=we.listener,gt=we.ha||we.src;we.fa&&Se(m.i,we),W=Ze.call(gt,D)!==!1&&W}}return W&&!D.defaultPrevented}function Hl(m,w){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=b(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:d.setTimeout(m,w||0)}function Oo(m){m.g=Hl(()=>{m.g=null,m.i&&(m.i=!1,Oo(m))},m.l);const w=m.h;m.h=null,m.m.apply(null,w)}class On extends q{constructor(w,N){super(),this.m=w,this.l=N,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Oo(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pr(m){q.call(this),this.h=m,this.g={}}A(Pr,q);var Lr=[];function Na(m){Ye(m.g,function(w,N){this.g.hasOwnProperty(N)&&Ln(w)},m),m.g={}}Pr.prototype.N=function(){Pr.Z.N.call(this),Na(this)},Pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ds=d.JSON.stringify,ou=d.JSON.parse,Mo=class{stringify(m){return d.JSON.stringify(m,void 0)}parse(m){return d.JSON.parse(m,void 0)}};function Vo(){}function ql(){}var fi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ln(){U.call(this,"d")}A(ln,U);function si(){U.call(this,"c")}A(si,U);var Yt={},er=null;function Ca(){return er=er||new Kt}Yt.Ia="serverreachability";function Fl(m){U.call(this,Yt.Ia,m)}A(Fl,U);function Oi(m){const w=Ca();en(w,new Fl(w))}Yt.STAT_EVENT="statevent";function tr(m,w){U.call(this,Yt.STAT_EVENT,m),this.stat=w}A(tr,U);function $t(m){const w=Ca();en(w,new tr(w,m))}Yt.Ja="timingevent";function ss(m,w){U.call(this,Yt.Ja,m),this.size=w}A(ss,U);function rs(m,w){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){m()},w)}function Mi(){this.g=!0}Mi.prototype.ua=function(){this.g=!1};function lu(m,w,N,D,W,ne){m.info(function(){if(m.g)if(ne){var we="",Ze=ne.split("&");for(let _t=0;_t<Ze.length;_t++){var gt=Ze[_t].split("=");if(gt.length>1){const Lt=gt[0];gt=gt[1];const xi=Lt.split("_");we=xi.length>=2&&xi[1]=="type"?we+(Lt+"="+gt+"&"):we+(Lt+"=redacted&")}}}else we=null;else we=ne;return"XMLHTTP REQ ("+D+") [attempt "+W+"]: "+w+`
`+N+`
`+we})}function Gl(m,w,N,D,W,ne,we){m.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+W+"]: "+w+`
`+N+`
`+ne+" "+we})}function as(m,w,N,D){m.info(function(){return"XMLHTTP TEXT ("+w+"): "+cu(m,N)+(D?" "+D:"")})}function js(m,w){m.info(function(){return"TIMEOUT: "+w})}Mi.prototype.info=function(){};function cu(m,w){if(!m.g)return w;if(!w)return null;try{const ne=JSON.parse(w);if(ne){for(m=0;m<ne.length;m++)if(Array.isArray(ne[m])){var N=ne[m];if(!(N.length<2)){var D=N[1];if(Array.isArray(D)&&!(D.length<1)){var W=D[0];if(W!="noop"&&W!="stop"&&W!="close")for(let we=1;we<D.length;we++)D[we]=""}}}}return Ds(ne)}catch{return w}}var Or={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Uo;function An(){}A(An,Vo),An.prototype.g=function(){return new XMLHttpRequest},Uo=new An;function je(m){return encodeURIComponent(String(m))}function Bo(m){var w=1;m=m.split(":");const N=[];for(;w>0&&m.length;)N.push(m.shift()),w--;return m.length&&N.push(m.join(":")),N}function mi(m,w,N,D){this.j=m,this.i=w,this.l=N,this.S=D||1,this.V=new Pr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pi}function pi(){this.i=null,this.g="",this.h=!1}var Qt={},tn={};function Vi(m,w,N){m.M=1,m.A=Nt(zt(w)),m.u=N,m.R=!0,zi(m,null)}function zi(m,w){m.F=Date.now(),os(m),m.B=zt(m.A);var N=m.B,D=m.S;Array.isArray(D)||(D=[String(D)]),ir(N.i,"t",D),m.C=0,N=m.j.L,m.h=new pi,m.g=Yo(m.j,N?w:null,!m.u),m.P>0&&(m.O=new On(b(m.Y,m,m.g),m.P)),w=m.V,N=m.g,D=m.ba;var W="readystatechange";Array.isArray(W)||(W&&(Lr[0]=W.toString()),W=Lr);for(let ne=0;ne<W.length;ne++){const we=qe(N,W[ne],D||w.handleEvent,!1,w.h||w);if(!we)break;w.g[we.key]=we}w=m.J?B(m.J):{},m.u?(m.v||(m.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,w)):(m.v="GET",m.g.ea(m.B,m.v,null,w)),Oi(),lu(m.i,m.v,m.B,m.l,m.S,m.u)}mi.prototype.ba=function(m){m=m.target;const w=this.O;w&&qi(m)==3?w.j():this.Y(m)},mi.prototype.Y=function(m){try{if(m==this.g)e:{const Ze=qi(this.g),gt=this.g.ya(),_t=this.g.ca();if(!(Ze<3)&&(Ze!=3||this.g&&(this.h.h||this.g.la()||pn(this.g)))){this.K||Ze!=4||gt==7||(gt==8||_t<=0?Oi(3):Oi(2)),Ui(this);var w=this.g.ca();this.X=w;var N=Zl(this);if(this.o=w==200,Gl(this.i,this.v,this.B,this.l,this.S,Ze,w),this.o){if(this.U&&!this.L){t:{if(this.g){var D,W=this.g;if((D=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(D)){var ne=D;break t}}ne=null}if(m=ne)as(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ls(this,m);else{this.o=!1,this.m=3,$t(12),Nn(this),gi(this);break e}}if(this.R){m=!0;let Lt;for(;!this.K&&this.C<N.length;)if(Lt=Yl(this,N),Lt==tn){Ze==4&&(this.m=4,$t(14),m=!1),as(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==Qt){this.m=4,$t(15),as(this.i,this.l,N,"[Invalid Chunk]"),m=!1;break}else as(this.i,this.l,Lt,null),ls(this,Lt);if(Kl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||N.length!=0||this.h.h||(this.m=1,$t(16),m=!1),this.o=this.o&&m,!m)as(this.i,this.l,N,"[Invalid Chunked Response]"),Nn(this),gi(this);else if(N.length>0&&!this.W){this.W=!0;var we=this.j;we.g==this&&we.aa&&!we.P&&(we.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),Zo(we),we.P=!0,$t(11))}}else as(this.i,this.l,N,null),ls(this,N);Ze==4&&Nn(this),this.o&&!this.K&&(Ze==4?oi(this.j,this):(this.o=!1,os(this)))}else Fi(this.g),w==400&&N.indexOf("Unknown SID")>0?(this.m=3,$t(12)):(this.m=0,$t(13)),Nn(this),gi(this)}}}catch{}};function Zl(m){if(!Kl(m))return m.g.la();const w=pn(m.g);if(w==="")return"";let N="";const D=w.length,W=qi(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Nn(m),gi(m),"";m.h.i=new d.TextDecoder}for(let ne=0;ne<D;ne++)m.h.h=!0,N+=m.h.i.decode(w[ne],{stream:!(W&&ne==D-1)});return w.length=0,m.h.g+=N,m.C=0,m.h.g}function Kl(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Yl(m,w){var N=m.C,D=w.indexOf(`
`,N);return D==-1?tn:(N=Number(w.substring(N,D)),isNaN(N)?Qt:(D+=1,D+N>w.length?tn:(w=w.slice(D,D+N),m.C=D+N,w)))}mi.prototype.cancel=function(){this.K=!0,Nn(this)};function os(m){m.T=Date.now()+m.H,Ra(m,m.H)}function Ra(m,w){if(m.D!=null)throw Error("WatchDog timer not null");m.D=rs(b(m.aa,m),w)}function Ui(m){m.D&&(d.clearTimeout(m.D),m.D=null)}mi.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(js(this.i,this.B),this.M!=2&&(Oi(),$t(17)),Nn(this),this.m=2,gi(this)):Ra(this,this.T-m)};function gi(m){m.j.I==0||m.K||oi(m.j,m)}function Nn(m){Ui(m);var w=m.O;w&&typeof w.dispose=="function"&&w.dispose(),m.O=null,Na(m.V),m.g&&(w=m.g,m.g=null,w.abort(),w.dispose())}function ls(m,w){try{var N=m.j;if(N.I!=0&&(N.g==m||_i(N.h,m))){if(!m.L&&_i(N.h,m)&&N.I==3){try{var D=N.Ba.g.parse(w)}catch{D=null}if(Array.isArray(D)&&D.length==3){var W=D;if(W[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<m.F)Oa(N),or(N);else break e;Hr(N),$t(18)}}else N.xa=W[1],0<N.xa-N.K&&W[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=rs(b(N.Va,N),6e3));cs(N.h)<=1&&N.ta&&(N.ta=void 0)}else Gi(N,11)}else if((m.L||N.g==m)&&Oa(N),!z(w))for(W=N.Ba.g.parse(w),w=0;w<W.length;w++){let _t=W[w];const Lt=_t[0];if(!(Lt<=N.K))if(N.K=Lt,_t=_t[1],N.I==2)if(_t[0]=="c"){N.M=_t[1],N.ba=_t[2];const xi=_t[3];xi!=null&&(N.ka=xi,N.j.info("VER="+N.ka));const wi=_t[4];wi!=null&&(N.za=wi,N.j.info("SVER="+N.za));const li=_t[5];li!=null&&typeof li=="number"&&li>0&&(D=1.5*li,N.O=D,N.j.info("backChannelRequestTimeoutMs_="+D)),D=N;const Ki=m.g;if(Ki){const qr=Ki.g?Ki.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qr){var ne=D.h;ne.g||qr.indexOf("spdy")==-1&&qr.indexOf("quic")==-1&&qr.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(Ps(ne,ne.h),ne.h=null))}if(D.G){const Fr=Ki.g?Ki.g.getResponseHeader("X-HTTP-Session-Id"):null;Fr&&(D.wa=Fr,Re(D.J,D.G,Fr))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-m.F,N.j.info("Handshake RTT: "+N.T+"ms")),D=N;var we=m;if(D.na=Ko(D,D.L?D.ba:null,D.W),we.L){Ia(D.h,we);var Ze=we,gt=D.O;gt&&(Ze.H=gt),Ze.D&&(Ui(Ze),os(Ze)),D.g=we}else Go(D);N.i.length>0&&$n(N)}else _t[0]!="stop"&&_t[0]!="close"||Gi(N,7);else N.I==3&&(_t[0]=="stop"||_t[0]=="close"?_t[0]=="stop"?Gi(N,7):it(N):_t[0]!="noop"&&N.l&&N.l.qa(_t),N.A=0)}}Oi(4)}catch{}}var nn=class{constructor(m,w){this.g=m,this.map=w}};function Ho(m){this.l=m||10,d.PerformanceNavigationTiming?(m=d.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qo(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function cs(m){return m.h?1:m.g?m.g.size:0}function _i(m,w){return m.h?m.h==w:m.g?m.g.has(w):!1}function Ps(m,w){m.g?m.g.add(w):m.h=w}function Ia(m,w){m.h&&m.h==w?m.h=null:m.g&&m.g.has(w)&&m.g.delete(w)}Ho.prototype.cancel=function(){if(this.i=ka(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function ka(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let w=m.i;for(const N of m.g.values())w=w.concat(N.G);return w}return M(m.i)}var nr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(m,w){if(m){m=m.split("&");for(let N=0;N<m.length;N++){const D=m[N].indexOf("=");let W,ne=null;D>=0?(W=m[N].substring(0,D),ne=m[N].substring(D+1)):W=m[N],w(W,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function at(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;m instanceof at?(this.l=m.l,Ut(this,m.j),this.o=m.o,this.g=m.g,ri(this,m.u),this.h=m.h,Mr(this,Ur(m.i)),this.m=m.m):m&&(w=String(m).match(nr))?(this.l=!1,Ut(this,w[1]||"",!0),this.o=yi(w[2]||""),this.g=yi(w[3]||"",!0),ri(this,w[4]),this.h=yi(w[5]||"",!0),Mr(this,w[6]||"",!0),this.m=yi(w[7]||"")):(this.l=!1,this.i=new vi(null,this.l))}at.prototype.toString=function(){const m=[];var w=this.j;w&&m.push(us(w,Da,!0),":");var N=this.g;return(N||w=="file")&&(m.push("//"),(w=this.o)&&m.push(us(w,Da,!0),"@"),m.push(je(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&m.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&m.push("/"),m.push(us(N,N.charAt(0)=="/"?Bi:Vr,!0))),(N=this.i.toString())&&m.push("?",N),(N=this.m)&&m.push("#",us(N,hs)),m.join("")},at.prototype.resolve=function(m){const w=zt(this);let N=!!m.j;N?Ut(w,m.j):N=!!m.o,N?w.o=m.o:N=!!m.g,N?w.g=m.g:N=m.u!=null;var D=m.h;if(N)ri(w,m.u);else if(N=!!m.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var W=w.h.lastIndexOf("/");W!=-1&&(D=w.h.slice(0,W+1)+D)}if(W=D,W==".."||W==".")D="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){D=W.lastIndexOf("/",0)==0,W=W.split("/");const ne=[];for(let we=0;we<W.length;){const Ze=W[we++];Ze=="."?D&&we==W.length&&ne.push(""):Ze==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),D&&we==W.length&&ne.push("")):(ne.push(Ze),D=!0)}D=ne.join("/")}else D=W}return N?w.h=D:N=m.i.toString()!=="",N?Mr(w,Ur(m.i)):N=!!m.m,N&&(w.m=m.m),w};function zt(m){return new at(m)}function Ut(m,w,N){m.j=N?yi(w,!0):w,m.j&&(m.j=m.j.replace(/:$/,""))}function ri(m,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);m.u=w}else m.u=null}function Mr(m,w,N){w instanceof vi?(m.i=w,sr(m.i,m.l)):(N||(w=us(w,Ct)),m.i=new vi(w,m.l))}function Re(m,w,N){m.i.set(w,N)}function Nt(m){return Re(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function yi(m,w){return m?w?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function us(m,w,N){return typeof m=="string"?(m=encodeURI(m).replace(w,Pt),N&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Pt(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Da=/[#\/\?@]/g,Vr=/[#\?:]/g,Bi=/[#\?]/g,Ct=/[#\?@]/g,hs=/#/g;function vi(m,w){this.h=this.g=null,this.i=m||null,this.j=!!w}function mn(m){m.g||(m.g=new Map,m.h=0,m.i&&st(m.i,function(w,N){m.add(decodeURIComponent(w.replace(/\+/g," ")),N)}))}i=vi.prototype,i.add=function(m,w){mn(this),this.i=null,m=ds(this,m);let N=this.g.get(m);return N||this.g.set(m,N=[]),N.push(w),this.h+=1,this};function ja(m,w){mn(m),w=ds(m,w),m.g.has(w)&&(m.i=null,m.h-=m.g.get(w).length,m.g.delete(w))}function Ls(m,w){return mn(m),w=ds(m,w),m.g.has(w)}i.forEach=function(m,w){mn(this),this.g.forEach(function(N,D){N.forEach(function(W){m.call(w,W,D,this)},this)},this)};function zr(m,w){mn(m);let N=[];if(typeof w=="string")Ls(m,w)&&(N=N.concat(m.g.get(ds(m,w))));else for(m=Array.from(m.g.values()),w=0;w<m.length;w++)N=N.concat(m[w]);return N}i.set=function(m,w){return mn(this),this.i=null,m=ds(this,m),Ls(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[w]),this.h+=1,this},i.get=function(m,w){return m?(m=zr(this,m),m.length>0?String(m[0]):w):w};function ir(m,w,N){ja(m,w),N.length>0&&(m.i=null,m.g.set(ds(m,w),M(N)),m.h+=N.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],w=Array.from(this.g.keys());for(let D=0;D<w.length;D++){var N=w[D];const W=je(N);N=zr(this,N);for(let ne=0;ne<N.length;ne++){let we=W;N[ne]!==""&&(we+="="+je(N[ne])),m.push(we)}}return this.i=m.join("&")};function Ur(m){const w=new vi;return w.i=m.i,m.g&&(w.g=new Map(m.g),w.h=m.h),w}function ds(m,w){return w=String(w),m.j&&(w=w.toLowerCase()),w}function sr(m,w){w&&!m.j&&(mn(m),m.i=null,m.g.forEach(function(N,D){const W=D.toLowerCase();D!=W&&(ja(this,D),ir(this,W,N))},m)),m.j=w}function Zn(m,w){const N=new Mi;if(d.Image){const D=new Image;D.onload=S(Kn,N,"TestLoadImage: loaded",!0,w,D),D.onerror=S(Kn,N,"TestLoadImage: error",!1,w,D),D.onabort=S(Kn,N,"TestLoadImage: abort",!1,w,D),D.ontimeout=S(Kn,N,"TestLoadImage: timeout",!1,w,D),d.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=m}else w(!1)}function Pa(m,w){const N=new Mi,D=new AbortController,W=setTimeout(()=>{D.abort(),Kn(N,"TestPingServer: timeout",!1,w)},1e4);fetch(m,{signal:D.signal}).then(ne=>{clearTimeout(W),ne.ok?Kn(N,"TestPingServer: ok",!0,w):Kn(N,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(W),Kn(N,"TestPingServer: error",!1,w)})}function Kn(m,w,N,D,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),D(N)}catch{}}function rr(){this.g=new Mo}function Be(m){this.i=m.Sb||null,this.h=m.ab||!1}A(Be,Vo),Be.prototype.g=function(){return new Cn(this.i,this.h)};function Cn(m,w){Kt.call(this),this.H=m,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(Cn,Kt),i=Cn.prototype,i.open=function(m,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=w,this.readyState=1,ai(this)},i.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(w.body=m),(this.H||d).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Os(this)),this.readyState=0},i.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ai(this)),this.g&&(this.readyState=3,ai(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vt(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function vt(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}i.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var w=m.value?m.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!m.done}))&&(this.response=this.responseText+=w)}m.done?Os(this):ai(this),this.readyState==3&&vt(this)}},i.Oa=function(m){this.g&&(this.response=this.responseText=m,Os(this))},i.Na=function(m){this.g&&(this.response=m,Os(this))},i.ga=function(){this.g&&Os(this)};function Os(m){m.readyState=4,m.l=null,m.j=null,m.B=null,ai(m)}i.setRequestHeader=function(m,w){this.A.append(m,w)},i.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],w=this.h.entries();for(var N=w.next();!N.done;)N=N.value,m.push(N[0]+": "+N[1]),N=w.next();return m.join(`\r
`)};function ai(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Cn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Yn(m){let w="";return Ye(m,function(N,D){w+=D,w+=":",w+=N,w+=`\r
`}),w}function Ms(m,w,N){e:{for(D in N){var D=!1;break e}D=!0}D||(N=Yn(N),typeof m=="string"?N!=null&&je(N):Re(m,w,N))}function ut(m){Kt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A(ut,Kt);var bi=/^https?$/i,Vs=["POST","PUT"];i=ut.prototype,i.Fa=function(m){this.H=m},i.ea=function(m,w,N,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);w=w?w.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Uo.g(),this.g.onreadystatechange=R(b(this.Ca,this));try{this.B=!0,this.g.open(w,String(m),!0),this.B=!1}catch(ne){Bt(this,ne);return}if(m=N||"",N=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var W in D)N.set(W,D[W]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const ne of D.keys())N.set(ne,D.get(ne));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(N.keys()).find(ne=>ne.toLowerCase()=="content-type"),W=d.FormData&&m instanceof d.FormData,!(Array.prototype.indexOf.call(Vs,w,void 0)>=0)||D||W||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,we]of N)this.g.setRequestHeader(ne,we);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ne){Bt(this,ne)}};function Bt(m,w){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=w,m.o=5,Hi(m),fs(m)}function Hi(m){m.A||(m.A=!0,en(m,"complete"),en(m,"error"))}i.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,en(this,"complete"),en(this,"abort"),fs(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fs(this,!0)),ut.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?ar(this):this.Xa())},i.Xa=function(){ar(this)};function ar(m){if(m.h&&typeof u<"u"){if(m.v&&qi(m)==4)setTimeout(m.Ca.bind(m),0);else if(en(m,"readystatechange"),qi(m)==4){m.h=!1;try{const ne=m.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var N;if(!(N=w)){var D;if(D=ne===0){let we=String(m.D).match(nr)[1]||null;!we&&d.self&&d.self.location&&(we=d.self.location.protocol.slice(0,-1)),D=!bi.test(we?we.toLowerCase():"")}N=D}if(N)en(m,"complete"),en(m,"success");else{m.o=6;try{var W=qi(m)>2?m.g.statusText:""}catch{W=""}m.l=W+" ["+m.ca()+"]",Hi(m)}}finally{fs(m)}}}}function fs(m,w){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const N=m.g;m.g=null,w||en(m,"ready");try{N.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function qi(m){return m.g?m.g.readyState:0}i.ca=function(){try{return qi(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(m){if(this.g){var w=this.g.responseText;return m&&w.indexOf(m)==0&&(w=w.substring(m.length)),ou(w)}};function pn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Fi(m){const w={};m=(m.g&&qi(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<m.length;D++){if(z(m[D]))continue;var N=Bo(m[D]);const W=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const ne=w[W]||[];w[W]=ne,ne.push(N)}Ee(w,function(D){return D.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ms(m,w,N){return N&&N.internalChannelParams&&N.internalChannelParams[m]||w}function zs(m){this.za=0,this.i=[],this.j=new Mi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ms("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ms("baseRetryDelayMs",5e3,m),this.Za=ms("retryDelaySeedMs",1e4,m),this.Ta=ms("forwardChannelMaxRetries",2,m),this.va=ms("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Ho(m&&m.concurrentRequestLimit),this.Ba=new rr,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=zs.prototype,i.ka=8,i.I=1,i.connect=function(m,w,N,D){$t(0),this.W=m,this.H=w||{},N&&D!==void 0&&(this.H.OSID=N,this.H.OAID=D),this.F=this.X,this.J=Ko(this,null,this.W),$n(this)};function it(m){if(Rn(m),m.I==3){var w=m.V++,N=zt(m.J);if(Re(N,"SID",m.M),Re(N,"RID",w),Re(N,"TYPE","terminate"),Us(m,N),w=new mi(m,m.j,w),w.M=2,w.A=Nt(zt(N)),N=!1,d.navigator&&d.navigator.sendBeacon)try{N=d.navigator.sendBeacon(w.A.toString(),"")}catch{}!N&&d.Image&&(new Image().src=w.A,N=!0),N||(w.g=Yo(w.j,null),w.g.ea(w.A)),w.F=Date.now(),os(w)}Zi(m)}function or(m){m.g&&(Zo(m),m.g.cancel(),m.g=null)}function Rn(m){or(m),m.v&&(d.clearTimeout(m.v),m.v=null),Oa(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&d.clearTimeout(m.m),m.m=null)}function $n(m){if(!qo(m.h)&&!m.m){m.m=!0;var w=m.Ea;be||j(),Ne||(be(),Ne=!0),P.add(w,m),m.D=0}}function Br(m,w){return cs(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=w.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=rs(b(m.Ea,m,w),Ql(m,m.D)),m.D++,!0)}i.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const W=new mi(this,this.j,m);let ne=this.o;if(this.U&&(ne?(ne=B(ne),ve(ne,this.U)):ne=this.U),this.u!==null||this.R||(W.J=ne,ne=null),this.S)e:{for(var w=0,N=0;N<this.i.length;N++){t:{var D=this.i[N];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(w+=D,w>4096){w=N;break e}if(w===4096||N===this.i.length-1){w=N+1;break e}}w=1e3}else w=1e3;w=$l(this,W,w),N=zt(this.J),Re(N,"RID",m),Re(N,"CVER",22),this.G&&Re(N,"X-HTTP-Session-Id",this.G),Us(this,N),ne&&(this.R?w="headers="+je(Yn(ne))+"&"+w:this.u&&Ms(N,this.u,ne)),Ps(this.h,W),this.Ra&&Re(N,"TYPE","init"),this.S?(Re(N,"$req",w),Re(N,"SID","null"),W.U=!0,Vi(W,N,null)):Vi(W,N,w),this.I=2}}else this.I==3&&(m?Fo(this,m):this.i.length==0||qo(this.h)||Fo(this))};function Fo(m,w){var N;w?N=w.l:N=m.V++;const D=zt(m.J);Re(D,"SID",m.M),Re(D,"RID",N),Re(D,"AID",m.K),Us(m,D),m.u&&m.o&&Ms(D,m.u,m.o),N=new mi(m,m.j,N,m.D+1),m.u===null&&(N.J=m.o),w&&(m.i=w.G.concat(m.i)),w=$l(m,N,1e3),N.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Ps(m.h,N),Vi(N,D,w)}function Us(m,w){m.H&&Ye(m.H,function(N,D){Re(w,D,N)}),m.l&&Ye({},function(N,D){Re(w,D,N)})}function $l(m,w,N){N=Math.min(m.i.length,N);const D=m.l?b(m.l.Ka,m.l,m):null;e:{var W=m.i;let Ze=-1;for(;;){const gt=["count="+N];Ze==-1?N>0?(Ze=W[0].g,gt.push("ofs="+Ze)):Ze=0:gt.push("ofs="+Ze);let _t=!0;for(let Lt=0;Lt<N;Lt++){var ne=W[Lt].g;const xi=W[Lt].map;if(ne-=Ze,ne<0)Ze=Math.max(0,W[Lt].g-100),_t=!1;else try{ne="req"+ne+"_"||"";try{var we=xi instanceof Map?xi:Object.entries(xi);for(const[wi,li]of we){let Ki=li;y(li)&&(Ki=Ds(li)),gt.push(ne+wi+"="+encodeURIComponent(Ki))}}catch(wi){throw gt.push(ne+"type="+encodeURIComponent("_badmap")),wi}}catch{D&&D(xi)}}if(_t){we=gt.join("&");break e}}we=void 0}return m=m.i.splice(0,N),w.G=m,we}function Go(m){if(!m.g&&!m.v){m.Y=1;var w=m.Da;be||j(),Ne||(be(),Ne=!0),P.add(w,m),m.A=0}}function Hr(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=rs(b(m.Da,m),Ql(m,m.A)),m.A++,!0)}i.Da=function(){if(this.v=null,La(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=rs(b(this.Wa,this),m)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,$t(10),or(this),La(this))};function Zo(m){m.B!=null&&(d.clearTimeout(m.B),m.B=null)}function La(m){m.g=new mi(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var w=zt(m.na);Re(w,"RID","rpc"),Re(w,"SID",m.M),Re(w,"AID",m.K),Re(w,"CI",m.F?"0":"1"),!m.F&&m.ia&&Re(w,"TO",m.ia),Re(w,"TYPE","xmlhttp"),Us(m,w),m.u&&m.o&&Ms(w,m.u,m.o),m.O&&(m.g.H=m.O);var N=m.g;m=m.ba,N.M=1,N.A=Nt(zt(w)),N.u=null,N.R=!0,zi(N,m)}i.Va=function(){this.C!=null&&(this.C=null,or(this),Hr(this),$t(19))};function Oa(m){m.C!=null&&(d.clearTimeout(m.C),m.C=null)}function oi(m,w){var N=null;if(m.g==w){Oa(m),Zo(m),m.g=null;var D=2}else if(_i(m.h,w))N=w.G,Ia(m.h,w),D=1;else return;if(m.I!=0){if(w.o)if(D==1){N=w.u?w.u.length:0,w=Date.now()-w.F;var W=m.D;D=Ca(),en(D,new ss(D,N)),$n(m)}else Go(m);else if(W=w.m,W==3||W==0&&w.X>0||!(D==1&&Br(m,w)||D==2&&Hr(m)))switch(N&&N.length>0&&(w=m.h,w.i=w.i.concat(N)),W){case 1:Gi(m,5);break;case 4:Gi(m,10);break;case 3:Gi(m,6);break;default:Gi(m,2)}}}function Ql(m,w){let N=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(N*=2),N*w}function Gi(m,w){if(m.j.info("Error code "+w),w==2){var N=b(m.bb,m),D=m.Ua;const W=!D;D=new at(D||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ut(D,"https"),Nt(D),W?Zn(D.toString(),N):Pa(D.toString(),N)}else $t(2);m.I=0,m.l&&m.l.pa(w),Zi(m),Rn(m)}i.bb=function(m){m?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function Zi(m){if(m.I=0,m.ja=[],m.l){const w=ka(m.h);(w.length!=0||m.i.length!=0)&&(G(m.ja,w),G(m.ja,m.i),m.h.i.length=0,M(m.i),m.i.length=0),m.l.oa()}}function Ko(m,w,N){var D=N instanceof at?zt(N):new at(N);if(D.g!="")w&&(D.g=w+"."+D.g),ri(D,D.u);else{var W=d.location;D=W.protocol,w=w?w+"."+W.hostname:W.hostname,W=+W.port;const ne=new at(null);D&&Ut(ne,D),w&&(ne.g=w),W&&ri(ne,W),N&&(ne.h=N),D=ne}return N=m.G,w=m.wa,N&&w&&Re(D,N,w),Re(D,"VER",m.ka),Us(m,D),D}function Yo(m,w,N){if(w&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=m.Aa&&!m.ma?new ut(new Be({ab:N})):new ut(m.ma),w.Fa(m.L),w}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ma(){}i=Ma.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function lr(){}lr.prototype.g=function(m,w){return new In(m,w)};function In(m,w){Kt.call(this),this.g=new zs(w),this.l=m,this.h=w&&w.messageUrlParams||null,m=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(m?m["X-WebChannel-Content-Type"]=w.messageContentType:m={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(m?m["X-WebChannel-Client-Profile"]=w.sa:m={"X-WebChannel-Client-Profile":w.sa}),this.g.U=m,(m=w&&w.Qb)&&!z(m)&&(this.g.u=m),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!z(w)&&(this.g.G=w,m=this.h,m!==null&&w in m&&(m=this.h,w in m&&delete m[w])),this.j=new Bs(this)}A(In,Kt),In.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){it(this.g)},In.prototype.o=function(m){var w=this.g;if(typeof m=="string"){var N={};N.__data__=m,m=N}else this.v&&(N={},N.__data__=Ds(m),m=N);w.i.push(new nn(w.Ya++,m)),w.I==3&&$n(w)},In.prototype.N=function(){this.g.l=null,delete this.j,it(this.g),delete this.g,In.Z.N.call(this)};function $o(m){ln.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var w=m.__sm__;if(w){e:{for(const N in w){m=N;break e}m=void 0}(this.i=m)&&(m=this.i,w=w!==null&&m in w?w[m]:void 0),this.data=w}else this.data=m}A($o,ln);function Wl(){si.call(this),this.status=1}A(Wl,si);function Bs(m){this.g=m}A(Bs,Ma),Bs.prototype.ra=function(){en(this.g,"a")},Bs.prototype.qa=function(m){en(this.g,new $o(m))},Bs.prototype.pa=function(m){en(this.g,new Wl)},Bs.prototype.oa=function(){en(this.g,"b")},lr.prototype.createWebChannel=lr.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,_T=function(){return new lr},gT=function(){return Ca()},pT=Yt,Wg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Or.NO_ERROR=0,Or.TIMEOUT=8,Or.HTTP_ERROR=6,uf=Or,zo.COMPLETE="complete",mT=zo,ql.EventType=fi,fi.OPEN="a",fi.CLOSE="b",fi.ERROR="c",fi.MESSAGE="d",Kt.prototype.listen=Kt.prototype.J,Ju=ql,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,fT=ut}).apply(typeof $d<"u"?$d:typeof self<"u"?self:typeof window<"u"?window:{});class ei{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ei.UNAUTHENTICATED=new ei(null),ei.GOOGLE_CREDENTIALS=new ei("google-credentials-uid"),ei.FIRST_PARTY=new ei("first-party-uid"),ei.MOCK_USER=new ei("mock-user");let tu="12.8.0";function YD(i){tu=i}const Il=new N_("@firebase/firestore");function Rc(){return Il.logLevel}function Ie(i,...e){if(Il.logLevel<=ft.DEBUG){const t=e.map(V_);Il.debug(`Firestore (${tu}): ${i}`,...t)}}function xa(i,...e){if(Il.logLevel<=ft.ERROR){const t=e.map(V_);Il.error(`Firestore (${tu}): ${i}`,...t)}}function Bc(i,...e){if(Il.logLevel<=ft.WARN){const t=e.map(V_);Il.warn(`Firestore (${tu}): ${i}`,...t)}}function V_(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}function Ge(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,yT(i,r,t)}function yT(i,e,t){let r=`FIRESTORE (${tu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw xa(r),new Error(r)}function St(i,e,t,r){let l="Unexpected state";typeof t=="string"?l=t:r=t,i||yT(e,l,r)}function Qe(i,e){return i}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends Dr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class vT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $D{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ei.UNAUTHENTICATED)))}shutdown(){}}class QD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class WD{constructor(e){this.t=e,this.currentUser=ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){St(this.o===void 0,42304);let r=this.i;const l=v=>this.i!==r?(r=this.i,t(v)):Promise.resolve();let u=new pa;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new pa,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const v=u;e.enqueueRetryable((async()=>{await v.promise,await l(this.currentUser)}))},y=v=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((v=>y(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?y(v):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new pa)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St(typeof r.accessToken=="string",31837,{l:r}),new vT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return St(e===null||typeof e=="string",2055,{h:e}),new ei(e)}}class XD{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ei.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class JD{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new XD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ei.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Dx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ej{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ts(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){St(this.o===void 0,3512);const r=u=>{u.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Ie("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const l=u=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Dx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(St(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Dx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function tj(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}class z_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=tj(40);for(let u=0;u<l.length;++u)r.length<20&&l[u]<t&&(r+=e.charAt(l[u]%62))}return r}}function mt(i,e){return i<e?-1:i>e?1:0}function Xg(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++){const l=i.charAt(r),u=e.charAt(r);if(l!==u)return Sg(l)===Sg(u)?mt(l,u):Sg(l)?1:-1}return mt(i.length,e.length)}const nj=55296,ij=57343;function Sg(i){const e=i.charCodeAt(0);return e>=nj&&e<=ij}function Hc(i,e,t){return i.length===e.length&&i.every(((r,l)=>t(r,e[l])))}const jx="__name__";class vr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ge(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ge(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return vr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let l=0;l<r;l++){const u=vr.compareSegments(e.get(l),t.get(l));if(u!==0)return u}return mt(e.length,t.length)}static compareSegments(e,t){const r=vr.isNumericId(e),l=vr.isNumericId(t);return r&&!l?-1:!r&&l?1:r&&l?vr.extractNumericId(e).compare(vr.extractNumericId(t)):Xg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xo.fromString(e.substring(4,e.length-2))}}class Vt extends vr{construct(e,t,r){return new Vt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((l=>l.length>0)))}return new Vt(t)}static emptyPath(){return new Vt([])}}const sj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hn extends vr{construct(e,t,r){return new Hn(e,t,r)}static isValidIdentifier(e){return sj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jx}static keyField(){return new Hn([jx])}static fromServerFormat(e){const t=[];let r="",l=0;const u=()=>{if(r.length===0)throw new Ce(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;l<e.length;){const y=e[l];if(y==="\\"){if(l+1===e.length)throw new Ce(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[l+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new Ce(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,l+=2}else y==="`"?(d=!d,l++):y!=="."||d?(r+=y,l++):(u(),l++)}if(u(),d)throw new Ce(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hn(t)}static emptyPath(){return new Hn([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(Vt.fromString(e))}static fromName(e){return new ze(Vt.fromString(e).popFirst(5))}static empty(){return new ze(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new Vt(e.slice()))}}function bT(i,e,t){if(!t)throw new Ce(pe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function rj(i,e,t,r){if(e===!0&&r===!0)throw new Ce(pe.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Px(i){if(!ze.isDocumentKey(i))throw new Ce(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Lx(i){if(ze.isDocumentKey(i))throw new Ce(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function xT(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function tm(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ge(12329,{type:typeof i})}function Ns(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ce(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tm(i);throw new Ce(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function wn(i,e){const t={typeString:i};return e&&(t.value=e),t}function Dh(i,e){if(!xT(i))throw new Ce(pe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const l=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const d=i[r];if(l&&typeof d!==l){t=`JSON field '${r}' must be a ${l}.`;break}if(u!==void 0&&d!==u.value){t=`Expected '${r}' field to equal '${u.value}'`;break}}if(t)throw new Ce(pe.INVALID_ARGUMENT,t);return!0}const Ox=-62135596800,Mx=1e6;class qt{static now(){return qt.fromMillis(Date.now())}static fromDate(e){return qt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Mx);return new qt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ox)throw new Ce(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mx}_compareTo(e){return this.seconds===e.seconds?mt(this.nanoseconds,e.nanoseconds):mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dh(e,qt._jsonSchema))return new qt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ox;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qt._jsonSchemaVersion="firestore/timestamp/1.0",qt._jsonSchema={type:wn("string",qt._jsonSchemaVersion),seconds:wn("number"),nanoseconds:wn("number")};class Ke{static fromTimestamp(e){return new Ke(e)}static min(){return new Ke(new qt(0,0))}static max(){return new Ke(new qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ph=-1;function aj(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,l=Ke.fromTimestamp(r===1e9?new qt(t+1,0):new qt(t,r));return new So(l,ze.empty(),e)}function oj(i){return new So(i.readTime,i.key,ph)}class So{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new So(Ke.min(),ze.empty(),ph)}static max(){return new So(Ke.max(),ze.empty(),ph)}}function lj(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ze.comparator(i.documentKey,e.documentKey),t!==0?t:mt(i.largestBatchId,e.largestBatchId))}const cj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function nu(i){if(i.code!==pe.FAILED_PRECONDITION||i.message!==cj)throw i;Ie("LocalStore","Unexpectedly lost primary lease")}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge(((r,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,l)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ge.reject(t)}static resolve(e){return new ge(((t,r)=>{t(e)}))}static reject(e){return new ge(((t,r)=>{r(e)}))}static waitFor(e){return new ge(((t,r)=>{let l=0,u=0,d=!1;e.forEach((y=>{++l,y.next((()=>{++u,d&&u===l&&t()}),(v=>r(v)))})),d=!0,u===l&&t()}))}static or(e){let t=ge.resolve(!1);for(const r of e)t=t.next((l=>l?ge.resolve(l):r()));return t}static forEach(e,t){const r=[];return e.forEach(((l,u)=>{r.push(t.call(this,l,u))})),this.waitFor(r)}static mapArray(e,t){return new ge(((r,l)=>{const u=e.length,d=new Array(u);let y=0;for(let v=0;v<u;v++){const b=v;t(e[b]).next((S=>{d[b]=S,++y,y===u&&r(d)}),(S=>l(S)))}}))}static doWhile(e,t){return new ge(((r,l)=>{const u=()=>{e()===!0?t().next((()=>{u()}),l):r()};u()}))}}function hj(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function iu(i){return i.name==="IndexedDbTransactionError"}class nm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}nm.ce=-1;const U_=-1;function im(i){return i==null}function Rf(i){return i===0&&1/i==-1/0}function dj(i){return typeof i=="number"&&Number.isInteger(i)&&!Rf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const wT="";function fj(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Vx(e)),e=mj(i.get(t),e);return Vx(e)}function mj(i,e){let t=e;const r=i.length;for(let l=0;l<r;l++){const u=i.charAt(l);switch(u){case"\0":t+="";break;case wT:t+="";break;default:t+=u}}return t}function Vx(i){return i+wT+""}function zx(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Do(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function ET(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Jt{constructor(e,t){this.comparator=e,this.root=t||Un.EMPTY}insert(e,t){return new Jt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Un.BLACK,null,null))}remove(e){return new Jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return t+r.left.size;l<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qd(this.root,e,this.comparator,!0)}}class Qd{constructor(e,t,r,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Un{constructor(e,t,r,l,u){this.key=e,this.value=t,this.color=r??Un.RED,this.left=l??Un.EMPTY,this.right=u??Un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,l,u){return new Un(e??this.key,t??this.value,r??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let l=this;const u=r(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,t,r),null):u===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return Un.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}Un.EMPTY=null,Un.RED=!0,Un.BLACK=!1;Un.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,t,r,l,u){return this}insert(e,t,r){return new Un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Sn{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ux(this.data.getIterator())}getIteratorFrom(e){return new Ux(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,u=r.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Sn(this.comparator);return t.data=e,t}}class Ux{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class es{constructor(e){this.fields=e,e.sort(Hn.comparator)}static empty(){return new es([])}unionWith(e){let t=new Sn(Hn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new es(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hc(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class TT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new TT("Invalid base64 string: "+u):u}})(e);return new Gn(t)}static fromUint8Array(e){const t=(function(l){let u="";for(let d=0;d<l.length;++d)u+=String.fromCharCode(l[d]);return u})(e);return new Gn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let l=0;l<t.length;l++)r[l]=t.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gn.EMPTY_BYTE_STRING=new Gn("");const pj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ao(i){if(St(!!i,39018),typeof i=="string"){let e=0;const t=pj.exec(i);if(St(!!t,46558,{timestamp:i}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:hn(i.seconds),nanos:hn(i.nanos)}}function hn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function No(i){return typeof i=="string"?Gn.fromBase64String(i):Gn.fromUint8Array(i)}const ST="server_timestamp",AT="__type__",NT="__previous_value__",CT="__local_write_time__";function B_(i){return(i?.mapValue?.fields||{})[AT]?.stringValue===ST}function sm(i){const e=i.mapValue.fields[NT];return B_(e)?sm(e):e}function gh(i){const e=Ao(i.mapValue.fields[CT].timestampValue);return new qt(e.seconds,e.nanos)}class gj{constructor(e,t,r,l,u,d,y,v,b,S,A){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=l,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=y,this.longPollingOptions=v,this.useFetchStreams=b,this.isUsingEmulator=S,this.apiKey=A}}const If="(default)";class _h{constructor(e,t){this.projectId=e,this.database=t||If}static empty(){return new _h("","")}get isDefaultDatabase(){return this.database===If}isEqual(e){return e instanceof _h&&e.projectId===this.projectId&&e.database===this.database}}function _j(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ce(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _h(i.options.projectId,e)}const RT="__type__",yj="__max__",Wd={mapValue:{}},IT="__vector__",kf="value";function Co(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?B_(i)?4:bj(i)?9007199254740991:vj(i)?10:11:Ge(28295,{value:i})}function Ir(i,e){if(i===e)return!0;const t=Co(i);if(t!==Co(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return gh(i).isEqual(gh(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const d=Ao(l.timestampValue),y=Ao(u.timestampValue);return d.seconds===y.seconds&&d.nanos===y.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(l,u){return No(l.bytesValue).isEqual(No(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(l,u){return hn(l.geoPointValue.latitude)===hn(u.geoPointValue.latitude)&&hn(l.geoPointValue.longitude)===hn(u.geoPointValue.longitude)})(i,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return hn(l.integerValue)===hn(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const d=hn(l.doubleValue),y=hn(u.doubleValue);return d===y?Rf(d)===Rf(y):isNaN(d)&&isNaN(y)}return!1})(i,e);case 9:return Hc(i.arrayValue.values||[],e.arrayValue.values||[],Ir);case 10:case 11:return(function(l,u){const d=l.mapValue.fields||{},y=u.mapValue.fields||{};if(zx(d)!==zx(y))return!1;for(const v in d)if(d.hasOwnProperty(v)&&(y[v]===void 0||!Ir(d[v],y[v])))return!1;return!0})(i,e);default:return Ge(52216,{left:i})}}function yh(i,e){return(i.values||[]).find((t=>Ir(t,e)))!==void 0}function qc(i,e){if(i===e)return 0;const t=Co(i),r=Co(e);if(t!==r)return mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return mt(i.booleanValue,e.booleanValue);case 2:return(function(u,d){const y=hn(u.integerValue||u.doubleValue),v=hn(d.integerValue||d.doubleValue);return y<v?-1:y>v?1:y===v?0:isNaN(y)?isNaN(v)?0:-1:1})(i,e);case 3:return Bx(i.timestampValue,e.timestampValue);case 4:return Bx(gh(i),gh(e));case 5:return Xg(i.stringValue,e.stringValue);case 6:return(function(u,d){const y=No(u),v=No(d);return y.compareTo(v)})(i.bytesValue,e.bytesValue);case 7:return(function(u,d){const y=u.split("/"),v=d.split("/");for(let b=0;b<y.length&&b<v.length;b++){const S=mt(y[b],v[b]);if(S!==0)return S}return mt(y.length,v.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,d){const y=mt(hn(u.latitude),hn(d.latitude));return y!==0?y:mt(hn(u.longitude),hn(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Hx(i.arrayValue,e.arrayValue);case 10:return(function(u,d){const y=u.fields||{},v=d.fields||{},b=y[kf]?.arrayValue,S=v[kf]?.arrayValue,A=mt(b?.values?.length||0,S?.values?.length||0);return A!==0?A:Hx(b,S)})(i.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Wd.mapValue&&d===Wd.mapValue)return 0;if(u===Wd.mapValue)return 1;if(d===Wd.mapValue)return-1;const y=u.fields||{},v=Object.keys(y),b=d.fields||{},S=Object.keys(b);v.sort(),S.sort();for(let A=0;A<v.length&&A<S.length;++A){const R=Xg(v[A],S[A]);if(R!==0)return R;const M=qc(y[v[A]],b[S[A]]);if(M!==0)return M}return mt(v.length,S.length)})(i.mapValue,e.mapValue);default:throw Ge(23264,{he:t})}}function Bx(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return mt(i,e);const t=Ao(i),r=Ao(e),l=mt(t.seconds,r.seconds);return l!==0?l:mt(t.nanos,r.nanos)}function Hx(i,e){const t=i.values||[],r=e.values||[];for(let l=0;l<t.length&&l<r.length;++l){const u=qc(t[l],r[l]);if(u)return u}return mt(t.length,r.length)}function Fc(i){return Jg(i)}function Jg(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=Ao(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return No(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return ze.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",l=!0;for(const u of t.values||[])l?l=!1:r+=",",r+=Jg(u);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let l="{",u=!0;for(const d of r)u?u=!1:l+=",",l+=`${d}:${Jg(t.fields[d])}`;return l+"}"})(i.mapValue):Ge(61005,{value:i})}function hf(i){switch(Co(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sm(i);return e?16+hf(e):16;case 5:return 2*i.stringValue.length;case 6:return No(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,u)=>l+hf(u)),0)})(i.arrayValue);case 10:case 11:return(function(r){let l=0;return Do(r.fields,((u,d)=>{l+=u.length+hf(d)})),l})(i.mapValue);default:throw Ge(13486,{value:i})}}function qx(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function e_(i){return!!i&&"integerValue"in i}function H_(i){return!!i&&"arrayValue"in i}function Fx(i){return!!i&&"nullValue"in i}function Gx(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function df(i){return!!i&&"mapValue"in i}function vj(i){return(i?.mapValue?.fields||{})[RT]?.stringValue===IT}function oh(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Do(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=oh(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=oh(i.arrayValue.values[t]);return e}return{...i}}function bj(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===yj}class Di{constructor(e){this.value=e}static empty(){return new Di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!df(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oh(t)}setAll(e){let t=Hn.emptyPath(),r={},l=[];e.forEach(((d,y)=>{if(!t.isImmediateParentOf(y)){const v=this.getFieldsMap(t);this.applyChanges(v,r,l),r={},l=[],t=y.popLast()}d?r[y.lastSegment()]=oh(d):l.push(y.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,r,l)}delete(e){const t=this.field(e.popLast());df(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ir(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=t.mapValue.fields[e.get(r)];df(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,r){Do(t,((l,u)=>e[l]=u));for(const l of r)delete e[l]}clone(){return new Di(oh(this.value))}}function kT(i){const e=[];return Do(i.fields,((t,r)=>{const l=new Hn([t]);if(df(r)){const u=kT(r.mapValue).fields;if(u.length===0)e.push(l);else for(const d of u)e.push(l.child(d))}else e.push(l)})),new es(e)}class ti{constructor(e,t,r,l,u,d,y){this.key=e,this.documentType=t,this.version=r,this.readTime=l,this.createTime=u,this.data=d,this.documentState=y}static newInvalidDocument(e){return new ti(e,0,Ke.min(),Ke.min(),Ke.min(),Di.empty(),0)}static newFoundDocument(e,t,r,l){return new ti(e,1,t,Ke.min(),r,l,0)}static newNoDocument(e,t){return new ti(e,2,t,Ke.min(),Ke.min(),Di.empty(),0)}static newUnknownDocument(e,t){return new ti(e,3,t,Ke.min(),Ke.min(),Di.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ti&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ti(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Df{constructor(e,t){this.position=e,this.inclusive=t}}function Zx(i,e,t){let r=0;for(let l=0;l<i.position.length;l++){const u=e[l],d=i.position[l];if(u.field.isKeyField()?r=ze.comparator(ze.fromName(d.referenceValue),t.key):r=qc(d,t.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kx(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Ir(i.position[t],e.position[t]))return!1;return!0}class jf{constructor(e,t="asc"){this.field=e,this.dir=t}}function xj(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class DT{}class xn extends DT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ej(e,t,r):t==="array-contains"?new Aj(e,r):t==="in"?new Nj(e,r):t==="not-in"?new Cj(e,r):t==="array-contains-any"?new Rj(e,r):new xn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Tj(e,r):new Sj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(qc(t,this.value)):t!==null&&Co(this.value)===Co(t)&&this.matchesComparison(qc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Js extends DT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Js(e,t)}matches(e){return jT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function jT(i){return i.op==="and"}function PT(i){return wj(i)&&jT(i)}function wj(i){for(const e of i.filters)if(e instanceof Js)return!1;return!0}function t_(i){if(i instanceof xn)return i.field.canonicalString()+i.op.toString()+Fc(i.value);if(PT(i))return i.filters.map((e=>t_(e))).join(",");{const e=i.filters.map((t=>t_(t))).join(",");return`${i.op}(${e})`}}function LT(i,e){return i instanceof xn?(function(r,l){return l instanceof xn&&r.op===l.op&&r.field.isEqual(l.field)&&Ir(r.value,l.value)})(i,e):i instanceof Js?(function(r,l){return l instanceof Js&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((u,d,y)=>u&&LT(d,l.filters[y])),!0):!1})(i,e):void Ge(19439)}function OT(i){return i instanceof xn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Fc(t.value)}`})(i):i instanceof Js?(function(t){return t.op.toString()+" {"+t.getFilters().map(OT).join(" ,")+"}"})(i):"Filter"}class Ej extends xn{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class Tj extends xn{constructor(e,t){super(e,"in",t),this.keys=MT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Sj extends xn{constructor(e,t){super(e,"not-in",t),this.keys=MT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function MT(i,e){return(e.arrayValue?.values||[]).map((t=>ze.fromName(t.referenceValue)))}class Aj extends xn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return H_(t)&&yh(t.arrayValue,this.value)}}class Nj extends xn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yh(this.value.arrayValue,t)}}class Cj extends xn{constructor(e,t){super(e,"not-in",t)}matches(e){if(yh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!yh(this.value.arrayValue,t)}}class Rj extends xn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!H_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>yh(this.value.arrayValue,r)))}}class Ij{constructor(e,t=null,r=[],l=[],u=null,d=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=l,this.limit=u,this.startAt=d,this.endAt=y,this.Te=null}}function Yx(i,e=null,t=[],r=[],l=null,u=null,d=null){return new Ij(i,e,t,r,l,u,d)}function q_(i){const e=Qe(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>t_(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),im(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Fc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Fc(r))).join(",")),e.Te=t}return e.Te}function F_(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!xj(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!LT(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Kx(i.startAt,e.startAt)&&Kx(i.endAt,e.endAt)}function n_(i){return ze.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class jh{constructor(e,t=null,r=[],l=[],u=null,d="F",y=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=l,this.limit=u,this.limitType=d,this.startAt=y,this.endAt=v,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function kj(i,e,t,r,l,u,d,y){return new jh(i,e,t,r,l,u,d,y)}function rm(i){return new jh(i)}function $x(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Dj(i){return ze.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function VT(i){return i.collectionGroup!==null}function lh(i){const e=Qe(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let y=new Sn(Hn.comparator);return d.filters.forEach((v=>{v.getFlattenedFilters().forEach((b=>{b.isInequality()&&(y=y.add(b.field))}))})),y})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new jf(u,r))})),t.has(Hn.keyField().canonicalString())||e.Ie.push(new jf(Hn.keyField(),r))}return e.Ie}function Sr(i){const e=Qe(i);return e.Ee||(e.Ee=jj(e,lh(i))),e.Ee}function jj(i,e){if(i.limitType==="F")return Yx(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new jf(l.field,u)}));const t=i.endAt?new Df(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Df(i.startAt.position,i.startAt.inclusive):null;return Yx(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function i_(i,e){const t=i.filters.concat([e]);return new jh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function s_(i,e,t){return new jh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function am(i,e){return F_(Sr(i),Sr(e))&&i.limitType===e.limitType}function zT(i){return`${q_(Sr(i))}|lt:${i.limitType}`}function Ic(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((l=>OT(l))).join(", ")}]`),im(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((l=>Fc(l))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((l=>Fc(l))).join(",")),`Target(${r})`})(Sr(i))}; limitType=${i.limitType})`}function om(i,e){return e.isFoundDocument()&&(function(r,l){const u=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):ze.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(i,e)&&(function(r,l){for(const u of lh(r))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(r,l){for(const u of r.filters)if(!u.matches(l))return!1;return!0})(i,e)&&(function(r,l){return!(r.startAt&&!(function(d,y,v){const b=Zx(d,y,v);return d.inclusive?b<=0:b<0})(r.startAt,lh(r),l)||r.endAt&&!(function(d,y,v){const b=Zx(d,y,v);return d.inclusive?b>=0:b>0})(r.endAt,lh(r),l))})(i,e)}function Pj(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function UT(i){return(e,t)=>{let r=!1;for(const l of lh(i)){const u=Lj(l,e,t);if(u!==0)return u;r=r||l.field.isKeyField()}return 0}}function Lj(i,e,t){const r=i.field.isKeyField()?ze.comparator(e.key,t.key):(function(u,d,y){const v=d.data.field(u),b=y.data.field(u);return v!==null&&b!==null?qc(v,b):Ge(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Ge(19790,{direction:i.dir})}}class zl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[l,u]of r)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[t]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Do(this.inner,((t,r)=>{for(const[l,u]of r)e(l,u)}))}isEmpty(){return ET(this.inner)}size(){return this.innerSize}}const Oj=new Jt(ze.comparator);function wa(){return Oj}const BT=new Jt(ze.comparator);function eh(...i){let e=BT;for(const t of i)e=e.insert(t.key,t);return e}function HT(i){let e=BT;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function xl(){return ch()}function qT(){return ch()}function ch(){return new zl((i=>i.toString()),((i,e)=>i.isEqual(e)))}const Mj=new Jt(ze.comparator),Vj=new Sn(ze.comparator);function pt(...i){let e=Vj;for(const t of i)e=e.add(t);return e}const zj=new Sn(mt);function Uj(){return zj}function G_(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rf(e)?"-0":e}}function FT(i){return{integerValue:""+i}}function Bj(i,e){return dj(e)?FT(e):G_(i,e)}class lm{constructor(){this._=void 0}}function Hj(i,e,t){return i instanceof Pf?(function(l,u){const d={fields:{[AT]:{stringValue:ST},[CT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&B_(u)&&(u=sm(u)),u&&(d.fields[NT]=u),{mapValue:d}})(t,e):i instanceof Gc?ZT(i,e):i instanceof vh?KT(i,e):(function(l,u){const d=GT(l,u),y=Qx(d)+Qx(l.Ae);return e_(d)&&e_(l.Ae)?FT(y):G_(l.serializer,y)})(i,e)}function qj(i,e,t){return i instanceof Gc?ZT(i,e):i instanceof vh?KT(i,e):t}function GT(i,e){return i instanceof Lf?(function(r){return e_(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class Pf extends lm{}class Gc extends lm{constructor(e){super(),this.elements=e}}function ZT(i,e){const t=YT(e);for(const r of i.elements)t.some((l=>Ir(l,r)))||t.push(r);return{arrayValue:{values:t}}}class vh extends lm{constructor(e){super(),this.elements=e}}function KT(i,e){let t=YT(e);for(const r of i.elements)t=t.filter((l=>!Ir(l,r)));return{arrayValue:{values:t}}}class Lf extends lm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Qx(i){return hn(i.integerValue||i.doubleValue)}function YT(i){return H_(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Fj{constructor(e,t){this.field=e,this.transform=t}}function Gj(i,e){return i.field.isEqual(e.field)&&(function(r,l){return r instanceof Gc&&l instanceof Gc||r instanceof vh&&l instanceof vh?Hc(r.elements,l.elements,Ir):r instanceof Lf&&l instanceof Lf?Ir(r.Ae,l.Ae):r instanceof Pf&&l instanceof Pf})(i.transform,e.transform)}class Zj{constructor(e,t){this.version=e,this.transformResults=t}}class Ar{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ar}static exists(e){return new Ar(void 0,e)}static updateTime(e){return new Ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ff(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class cm{}function $T(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new WT(i.key,Ar.none()):new Ph(i.key,i.data,Ar.none());{const t=i.data,r=Di.empty();let l=new Sn(Hn.comparator);for(let u of e.fields)if(!l.has(u)){let d=t.field(u);d===null&&u.length>1&&(u=u.popLast(),d=t.field(u)),d===null?r.delete(u):r.set(u,d),l=l.add(u)}return new jo(i.key,r,new es(l.toArray()),Ar.none())}}function Kj(i,e,t){i instanceof Ph?(function(l,u,d){const y=l.value.clone(),v=Xx(l.fieldTransforms,u,d.transformResults);y.setAll(v),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(i,e,t):i instanceof jo?(function(l,u,d){if(!ff(l.precondition,u))return void u.convertToUnknownDocument(d.version);const y=Xx(l.fieldTransforms,u,d.transformResults),v=u.data;v.setAll(QT(l)),v.setAll(y),u.convertToFoundDocument(d.version,v).setHasCommittedMutations()})(i,e,t):(function(l,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function uh(i,e,t,r){return i instanceof Ph?(function(u,d,y,v){if(!ff(u.precondition,d))return y;const b=u.value.clone(),S=Jx(u.fieldTransforms,v,d);return b.setAll(S),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),null})(i,e,t,r):i instanceof jo?(function(u,d,y,v){if(!ff(u.precondition,d))return y;const b=Jx(u.fieldTransforms,v,d),S=d.data;return S.setAll(QT(u)),S.setAll(b),d.convertToFoundDocument(d.version,S).setHasLocalMutations(),y===null?null:y.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(i,e,t,r):(function(u,d,y){return ff(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):y})(i,e,t)}function Yj(i,e){let t=null;for(const r of i.fieldTransforms){const l=e.data.field(r.field),u=GT(r.transform,l||null);u!=null&&(t===null&&(t=Di.empty()),t.set(r.field,u))}return t||null}function Wx(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&Hc(r,l,((u,d)=>Gj(u,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Ph extends cm{constructor(e,t,r,l=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class jo extends cm{constructor(e,t,r,l,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function QT(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function Xx(i,e,t){const r=new Map;St(i.length===t.length,32656,{Ve:t.length,de:i.length});for(let l=0;l<t.length;l++){const u=i[l],d=u.transform,y=e.data.field(u.field);r.set(u.field,qj(d,y,t[l]))}return r}function Jx(i,e,t){const r=new Map;for(const l of i){const u=l.transform,d=t.data.field(l.field);r.set(l.field,Hj(u,d,e))}return r}class WT extends cm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $j extends cm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Qj{constructor(e,t,r,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&Kj(u,e,r[l])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=uh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=uh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=qT();return this.mutations.forEach((l=>{const u=e.get(l.key),d=u.overlayedDocument;let y=this.applyToLocalView(d,u.mutatedFields);y=t.has(l.key)?null:y;const v=$T(d,y);v!==null&&r.set(l.key,v),d.isValidDocument()||d.convertToNoDocument(Ke.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),pt())}isEqual(e){return this.batchId===e.batchId&&Hc(this.mutations,e.mutations,((t,r)=>Wx(t,r)))&&Hc(this.baseMutations,e.baseMutations,((t,r)=>Wx(t,r)))}}class Z_{constructor(e,t,r,l){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=l}static from(e,t,r){St(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return Mj})();const u=e.mutations;for(let d=0;d<u.length;d++)l=l.insert(u[d].key,r[d].version);return new Z_(e,t,r,l)}}class Wj{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Xj{constructor(e,t){this.count=e,this.unchangedNames=t}}var bn,yt;function Jj(i){switch(i){case pe.OK:return Ge(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return Ge(15467,{code:i})}}function XT(i){if(i===void 0)return xa("GRPC error has no .code"),pe.UNKNOWN;switch(i){case bn.OK:return pe.OK;case bn.CANCELLED:return pe.CANCELLED;case bn.UNKNOWN:return pe.UNKNOWN;case bn.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case bn.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case bn.INTERNAL:return pe.INTERNAL;case bn.UNAVAILABLE:return pe.UNAVAILABLE;case bn.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case bn.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case bn.NOT_FOUND:return pe.NOT_FOUND;case bn.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case bn.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case bn.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case bn.ABORTED:return pe.ABORTED;case bn.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case bn.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case bn.DATA_LOSS:return pe.DATA_LOSS;default:return Ge(39323,{code:i})}}(yt=bn||(bn={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";function eP(){return new TextEncoder}const tP=new xo([4294967295,4294967295],0);function ew(i){const e=eP().encode(i),t=new dT;return t.update(e),new Uint8Array(t.digest())}function tw(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new xo([t,r],0),new xo([l,u],0)]}class K_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new th(`Invalid padding: ${t}`);if(r<0)throw new th(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new th(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new th(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xo.fromNumber(this.ge)}ye(e,t,r){let l=e.add(t.multiply(xo.fromNumber(r)));return l.compare(tP)===1&&(l=new xo([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ew(e),[r,l]=tw(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(r,l,u);if(!this.we(d))return!1}return!0}static create(e,t,r){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new K_(u,l,t);return r.forEach((y=>d.insert(y))),d}insert(e){if(this.ge===0)return;const t=ew(e),[r,l]=tw(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(r,l,u);this.be(d)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class th extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class um{constructor(e,t,r,l,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const l=new Map;return l.set(e,Lh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new um(Ke.min(),l,new Jt(mt),wa(),pt())}}class Lh{constructor(e,t,r,l,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Lh(r,t,pt(),pt(),pt())}}class mf{constructor(e,t,r,l){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=l}}class JT{constructor(e,t){this.targetId=e,this.Ce=t}}class e1{constructor(e,t,r=Gn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=l}}class nw{constructor(){this.ve=0,this.Fe=iw(),this.Me=Gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pt(),t=pt(),r=pt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:r=r.add(l);break;default:Ge(38017,{changeType:u})}})),new Lh(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=iw()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,St(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class nP{constructor(e){this.Ge=e,this.ze=new Map,this.je=wa(),this.He=Xd(),this.Je=Xd(),this.Ze=new Jt(mt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,r=e.Ce.count,l=this.ot(t);if(l){const u=l.target;if(n_(u))if(r===0){const d=new ze(u.path);this.et(t,d,ti.newNoDocument(d,Ke.min()))}else St(r===1,20013,{expectedCount:r});else{const d=this._t(t);if(d!==r){const y=this.ut(e),v=y?this.ct(y,e,d):1;if(v!==0){this.it(t);const b=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,b)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:u=0}=t;let d,y;try{d=No(r).toUint8Array()}catch(v){if(v instanceof TT)return Bc("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{y=new K_(d,l,u)}catch(v){return Bc(v instanceof th?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return y.ge===0?null:y}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let l=0;return r.forEach((u=>{const d=this.Ge.ht(),y=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(y)||(this.et(t,u,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((u,d)=>{const y=this.ot(d);if(y){if(u.current&&n_(y.target)){const v=new ze(y.target.path);this.It(v).has(d)||this.Et(d,v)||this.et(d,v,ti.newNoDocument(v,e))}u.Be&&(t.set(d,u.ke()),u.Ke())}}));let r=pt();this.Je.forEach(((u,d)=>{let y=!0;d.forEachWhile((v=>{const b=this.ot(v);return!b||b.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(r=r.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const l=new um(e,t,this.Ze,this.je,r);return this.je=wa(),this.He=Xd(),this.Je=Xd(),this.Ze=new Jt(mt),l}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.qe(t,1):l.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new nw,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Sn(mt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Sn(mt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Xd(){return new Jt(ze.comparator)}function iw(){return new Jt(ze.comparator)}const iP={asc:"ASCENDING",desc:"DESCENDING"},sP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rP={and:"AND",or:"OR"};class aP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function r_(i,e){return i.useProto3Json||im(e)?e:{value:e}}function Of(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function t1(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function oP(i,e){return Of(i,e.toTimestamp())}function Nr(i){return St(!!i,49232),Ke.fromTimestamp((function(t){const r=Ao(t);return new qt(r.seconds,r.nanos)})(i))}function Y_(i,e){return a_(i,e).canonicalString()}function a_(i,e){const t=(function(l){return new Vt(["projects",l.projectId,"databases",l.database])})(i).child("documents");return e===void 0?t:t.child(e)}function n1(i){const e=Vt.fromString(i);return St(o1(e),10190,{key:e.toString()}),e}function o_(i,e){return Y_(i.databaseId,e.path)}function Ag(i,e){const t=n1(e);if(t.get(1)!==i.databaseId.projectId)throw new Ce(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Ce(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ze(s1(t))}function i1(i,e){return Y_(i.databaseId,e)}function lP(i){const e=n1(i);return e.length===4?Vt.emptyPath():s1(e)}function l_(i){return new Vt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function s1(i){return St(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function sw(i,e,t){return{name:o_(i,e),fields:t.value.mapValue.fields}}function cP(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:Ge(39313,{state:b})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(b,S){return b.useProto3Json?(St(S===void 0||typeof S=="string",58123),Gn.fromBase64String(S||"")):(St(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),Gn.fromUint8Array(S||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,y=d&&(function(b){const S=b.code===void 0?pe.UNKNOWN:XT(b.code);return new Ce(S,b.message||"")})(d);t=new e1(r,l,u,y||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=Ag(i,r.document.name),u=Nr(r.document.updateTime),d=r.document.createTime?Nr(r.document.createTime):Ke.min(),y=new Di({mapValue:{fields:r.document.fields}}),v=ti.newFoundDocument(l,u,d,y),b=r.targetIds||[],S=r.removedTargetIds||[];t=new mf(b,S,v.key,v)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=Ag(i,r.document),u=r.readTime?Nr(r.readTime):Ke.min(),d=ti.newNoDocument(l,u),y=r.removedTargetIds||[];t=new mf([],y,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=Ag(i,r.document),u=r.removedTargetIds||[];t=new mf([],u,l,null)}else{if(!("filter"in e))return Ge(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:u}=r,d=new Xj(l,u),y=r.targetId;t=new JT(y,d)}}return t}function uP(i,e){let t;if(e instanceof Ph)t={update:sw(i,e.key,e.value)};else if(e instanceof WT)t={delete:o_(i,e.key)};else if(e instanceof jo)t={update:sw(i,e.key,e.data),updateMask:vP(e.fieldMask)};else{if(!(e instanceof $j))return Ge(16599,{dt:e.type});t={verify:o_(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(u,d){const y=d.transform;if(y instanceof Pf)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof Gc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof vh)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof Lf)return{fieldPath:d.field.canonicalString(),increment:y.Ae};throw Ge(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:oP(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ge(27497)})(i,e.precondition)),t}function hP(i,e){return i&&i.length>0?(St(e!==void 0,14353),i.map((t=>(function(l,u){let d=l.updateTime?Nr(l.updateTime):Nr(u);return d.isEqual(Ke.min())&&(d=Nr(u)),new Zj(d,l.transformResults||[])})(t,e)))):[]}function dP(i,e){return{documents:[i1(i,e.path)]}}function fP(i,e){const t={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=i1(i,l);const u=(function(b){if(b.length!==0)return a1(Js.create(b,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const d=(function(b){if(b.length!==0)return b.map((S=>(function(R){return{field:kc(R.field),direction:gP(R.dir)}})(S)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const y=r_(i,e.limit);return y!==null&&(t.structuredQuery.limit=y),e.startAt&&(t.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(e.endAt)),{ft:t,parent:l}}function mP(i){let e=lP(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let l=null;if(r>0){St(r===1,65062);const S=t.from[0];S.allDescendants?l=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=(function(A){const R=r1(A);return R instanceof Js&&PT(R)?R.getFilters():[R]})(t.where));let d=[];t.orderBy&&(d=(function(A){return A.map((R=>(function(G){return new jf(Dc(G.field),(function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(R)))})(t.orderBy));let y=null;t.limit&&(y=(function(A){let R;return R=typeof A=="object"?A.value:A,im(R)?null:R})(t.limit));let v=null;t.startAt&&(v=(function(A){const R=!!A.before,M=A.values||[];return new Df(M,R)})(t.startAt));let b=null;return t.endAt&&(b=(function(A){const R=!A.before,M=A.values||[];return new Df(M,R)})(t.endAt)),kj(e,l,d,u,y,"F",v,b)}function pP(i,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function r1(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Dc(t.unaryFilter.field);return xn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=Dc(t.unaryFilter.field);return xn.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Dc(t.unaryFilter.field);return xn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Dc(t.unaryFilter.field);return xn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}})(i):i.fieldFilter!==void 0?(function(t){return xn.create(Dc(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return Js.create(t.compositeFilter.filters.map((r=>r1(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}})(t.compositeFilter.op))})(i):Ge(30097,{filter:i})}function gP(i){return iP[i]}function _P(i){return sP[i]}function yP(i){return rP[i]}function kc(i){return{fieldPath:i.canonicalString()}}function Dc(i){return Hn.fromServerFormat(i.fieldPath)}function a1(i){return i instanceof xn?(function(t){if(t.op==="=="){if(Gx(t.value))return{unaryFilter:{field:kc(t.field),op:"IS_NAN"}};if(Fx(t.value))return{unaryFilter:{field:kc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Gx(t.value))return{unaryFilter:{field:kc(t.field),op:"IS_NOT_NAN"}};if(Fx(t.value))return{unaryFilter:{field:kc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kc(t.field),op:_P(t.op),value:t.value}}})(i):i instanceof Js?(function(t){const r=t.getFilters().map((l=>a1(l)));return r.length===1?r[0]:{compositeFilter:{op:yP(t.op),filters:r}}})(i):Ge(54877,{filter:i})}function vP(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function o1(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function l1(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}class vo{constructor(e,t,r,l,u=Ke.min(),d=Ke.min(),y=Gn.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=y,this.expectedCount=v}withSequenceNumber(e){return new vo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class bP{constructor(e){this.yt=e}}function xP(i){const e=mP({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?s_(e,e.limit,"L"):e}class wP{constructor(){this.Sn=new EP}addToCollectionParentIndex(e,t){return this.Sn.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve(So.min())}getMinOffsetFromCollectionGroup(e,t){return ge.resolve(So.min())}updateCollectionGroup(e,t,r){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class EP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),l=this.index[t]||new Sn(Vt.comparator),u=!l.has(r);return this.index[t]=l.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),l=this.index[t];return l&&l.has(r)}getEntries(e){return(this.index[e]||new Sn(Vt.comparator)).toArray()}}const rw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},c1=41943040;class ki{static withCacheSize(e){return new ki(e,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}ki.DEFAULT_COLLECTION_PERCENTILE=10,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ki.DEFAULT=new ki(c1,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ki.DISABLED=new ki(-1,0,0);class Zc{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Zc(0)}static ar(){return new Zc(-1)}}const aw="LruGarbageCollector",TP=1048576;function ow([i,e],[t,r]){const l=mt(i,t);return l===0?mt(e,r):l}class SP{constructor(e){this.Pr=e,this.buffer=new Sn(ow),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ow(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class AP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ie(aw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){iu(t)?Ie(aw,"Ignoring IndexedDB error during garbage collection: ",t):await nu(t)}await this.Ar(3e5)}))}}class NP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ge.resolve(nm.ce);const r=new SP(t);return this.Vr.forEachTarget(e,(l=>r.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>r.Er(l))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(rw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rw):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,l,u,d,y,v,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),l=this.params.maximumSequenceNumbersToCollect):l=A,d=Date.now(),this.nthSequenceNumber(e,l)))).next((A=>(r=A,y=Date.now(),this.removeTargets(e,r,t)))).next((A=>(u=A,v=Date.now(),this.removeOrphanedDocuments(e,r)))).next((A=>(b=Date.now(),Rc()<=ft.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-S}ms
	Determined least recently used ${l} in `+(y-d)+`ms
	Removed ${u} targets in `+(v-y)+`ms
	Removed ${A} documents in `+(b-v)+`ms
Total Duration: ${b-S}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:A}))))}}function CP(i,e){return new NP(i,e)}class RP{constructor(){this.changes=new zl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ti.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class IP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class kP{constructor(e,t,r,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(r!==null&&uh(r.mutation,l,es.empty(),qt.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,pt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=pt()){const l=xl();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,r).next((u=>{let d=eh();return u.forEach(((y,v)=>{d=d.insert(y,v.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const r=xl();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,pt())))}populateOverlays(e,t,r){const l=[];return r.forEach((u=>{t.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((d,y)=>{t.set(d,y)}))}))}computeViews(e,t,r,l){let u=wa();const d=ch(),y=(function(){return ch()})();return t.forEach(((v,b)=>{const S=r.get(b.key);l.has(b.key)&&(S===void 0||S.mutation instanceof jo)?u=u.insert(b.key,b):S!==void 0?(d.set(b.key,S.mutation.getFieldMask()),uh(S.mutation,b,S.mutation.getFieldMask(),qt.now())):d.set(b.key,es.empty())})),this.recalculateAndSaveOverlays(e,u).next((v=>(v.forEach(((b,S)=>d.set(b,S))),t.forEach(((b,S)=>y.set(b,new IP(S,d.get(b)??null)))),y)))}recalculateAndSaveOverlays(e,t){const r=ch();let l=new Jt(((d,y)=>d-y)),u=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const y of d)y.keys().forEach((v=>{const b=t.get(v);if(b===null)return;let S=r.get(v)||es.empty();S=y.applyToLocalView(b,S),r.set(v,S);const A=(l.get(y.batchId)||pt()).add(v);l=l.insert(y.batchId,A)}))})).next((()=>{const d=[],y=l.getReverseIterator();for(;y.hasNext();){const v=y.getNext(),b=v.key,S=v.value,A=qT();S.forEach((R=>{if(!u.has(R)){const M=$T(t.get(R),r.get(R));M!==null&&A.set(R,M),u=u.add(R)}})),d.push(this.documentOverlayCache.saveOverlays(e,b,A))}return ge.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,l){return Dj(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):VT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,l):this.getDocumentsMatchingCollectionQuery(e,t,r,l)}getNextDocuments(e,t,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,l).next((u=>{const d=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,l-u.size):ge.resolve(xl());let y=ph,v=u;return d.next((b=>ge.forEach(b,((S,A)=>(y<A.largestBatchId&&(y=A.largestBatchId),u.get(S)?ge.resolve():this.remoteDocumentCache.getEntry(e,S).next((R=>{v=v.insert(S,R)}))))).next((()=>this.populateOverlays(e,b,u))).next((()=>this.computeViews(e,v,b,pt()))).next((S=>({batchId:y,changes:HT(S)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next((r=>{let l=eh();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,l){const u=t.collectionGroup;let d=eh();return this.indexManager.getCollectionParents(e,u).next((y=>ge.forEach(y,(v=>{const b=(function(A,R){return new jh(R,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(t,v.child(u));return this.getDocumentsMatchingCollectionQuery(e,b,r,l).next((S=>{S.forEach(((A,R)=>{d=d.insert(A,R)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,r,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,l)))).next((d=>{u.forEach(((v,b)=>{const S=b.getKey();d.get(S)===null&&(d=d.insert(S,ti.newInvalidDocument(S)))}));let y=eh();return d.forEach(((v,b)=>{const S=u.get(v);S!==void 0&&uh(S.mutation,b,es.empty(),qt.now()),om(t,b)&&(y=y.insert(v,b))})),y}))}}class DP{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ge.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:Nr(l.createTime)}})(t)),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(l){return{name:l.name,query:xP(l.bundledQuery),readTime:Nr(l.readTime)}})(t)),ge.resolve()}}class jP{constructor(){this.overlays=new Jt(ze.comparator),this.Lr=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}getOverlays(e,t){const r=xl();return ge.forEach(t,(l=>this.getOverlay(e,l).next((u=>{u!==null&&r.set(l,u)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((l,u)=>{this.bt(e,t,u)})),ge.resolve()}removeOverlaysForBatchId(e,t,r){const l=this.Lr.get(r);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(r)),ge.resolve()}getOverlaysForCollection(e,t,r){const l=xl(),u=t.length+1,d=new ze(t.child("")),y=this.overlays.getIteratorFrom(d);for(;y.hasNext();){const v=y.getNext().value,b=v.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&v.largestBatchId>r&&l.set(v.getKey(),v)}return ge.resolve(l)}getOverlaysForCollectionGroup(e,t,r,l){let u=new Jt(((b,S)=>b-S));const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);S===null&&(S=xl(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const y=xl(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((b,S)=>y.set(b,S))),!(y.size()>=l)););return ge.resolve(y)}bt(e,t,r){const l=this.overlays.get(r.key);if(l!==null){const d=this.Lr.get(l.largestBatchId).delete(r.key);this.Lr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Wj(t,r));let u=this.Lr.get(t);u===void 0&&(u=pt(),this.Lr.set(t,u)),this.Lr.set(t,u.add(r.key))}}class PP{constructor(){this.sessionToken=Gn.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ge.resolve()}}class $_{constructor(){this.kr=new Sn(Pn.Kr),this.qr=new Sn(Pn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Pn(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Pn(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new ze(new Vt([])),r=new Pn(t,e),l=new Pn(t,e+1),u=[];return this.qr.forEachInRange([r,l],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ze(new Vt([])),r=new Pn(t,e),l=new Pn(t,e+1);let u=pt();return this.qr.forEachInRange([r,l],(d=>{u=u.add(d.key)})),u}containsKey(e){const t=new Pn(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Pn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ze.comparator(e.key,t.key)||mt(e.Hr,t.Hr)}static Ur(e,t){return mt(e.Hr,t.Hr)||ze.comparator(e.key,t.key)}}class LP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Sn(Pn.Kr)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Qj(u,t,r,l);this.mutationQueue.push(d);for(const y of l)this.Jr=this.Jr.add(new Pn(y.key,u)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return ge.resolve(d)}lookupMutationBatch(e,t){return ge.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,l=this.Xr(r),u=l<0?0:l;return ge.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?U_:this.Yn-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pn(t,0),l=new Pn(t,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([r,l],(d=>{const y=this.Zr(d.Hr);u.push(y)})),ge.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Sn(mt);return t.forEach((l=>{const u=new Pn(l,0),d=new Pn(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(y=>{r=r.add(y.Hr)}))})),ge.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,l=r.length+1;let u=r;ze.isDocumentKey(u)||(u=u.child(""));const d=new Pn(new ze(u),0);let y=new Sn(mt);return this.Jr.forEachWhile((v=>{const b=v.key.path;return!!r.isPrefixOf(b)&&(b.length===l&&(y=y.add(v.Hr)),!0)}),d),ge.resolve(this.Yr(y))}Yr(e){const t=[];return e.forEach((r=>{const l=this.Zr(r);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){St(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return ge.forEach(t.mutations,(l=>{const u=new Pn(l.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Pn(t,0),l=this.Jr.firstAfterOrEqual(r);return ge.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class OP{constructor(e){this.ti=e,this.docs=(function(){return new Jt(ze.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,l=this.docs.get(r),u=l?l.size:0,d=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ge.resolve(r?r.document.mutableCopy():ti.newInvalidDocument(t))}getEntries(e,t){let r=wa();return t.forEach((l=>{const u=this.docs.get(l);r=r.insert(l,u?u.document.mutableCopy():ti.newInvalidDocument(l))})),ge.resolve(r)}getDocumentsMatchingQuery(e,t,r,l){let u=wa();const d=t.path,y=new ze(d.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(y);for(;v.hasNext();){const{key:b,value:{document:S}}=v.getNext();if(!d.isPrefixOf(b.path))break;b.path.length>d.length+1||lj(oj(S),r)<=0||(l.has(S.key)||om(t,S))&&(u=u.insert(S.key,S.mutableCopy()))}return ge.resolve(u)}getAllFromCollectionGroup(e,t,r,l){Ge(9500)}ni(e,t){return ge.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new MP(this)}getSize(e){return ge.resolve(this.size)}}class MP extends RP{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?t.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(r)})),ge.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class VP{constructor(e){this.persistence=e,this.ri=new zl((t=>q_(t)),F_),this.lastRemoteSnapshotVersion=Ke.min(),this.highestTargetId=0,this.ii=0,this.si=new $_,this.targetCount=0,this.oi=Zc._r()}forEachTarget(e,t){return this.ri.forEach(((r,l)=>t(l))),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),ge.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Zc(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.lr(t),ge.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,r){let l=0;const u=[];return this.ri.forEach(((d,y)=>{y.sequenceNumber<=t&&r.get(y.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,y.targetId)),l++)})),ge.waitFor(u).next((()=>l))}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return ge.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),ge.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const l=this.persistence.referenceDelegate,u=[];return l&&t.forEach((d=>{u.push(l.markPotentiallyOrphaned(e,d))})),ge.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return ge.resolve(r)}containsKey(e,t){return ge.resolve(this.si.containsKey(t))}}class u1{constructor(e,t){this._i={},this.overlays={},this.ai=new nm(0),this.ui=!1,this.ui=!0,this.ci=new PP,this.referenceDelegate=e(this),this.li=new VP(this),this.indexManager=new wP,this.remoteDocumentCache=(function(l){return new OP(l)})((r=>this.referenceDelegate.hi(r))),this.serializer=new bP(t),this.Pi=new DP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new LP(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){Ie("MemoryPersistence","Starting transaction:",e);const l=new zP(this.ai.next());return this.referenceDelegate.Ti(),r(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,t){return ge.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class zP extends uj{constructor(e){super(),this.currentSequenceNumber=e}}class Q_{constructor(e){this.persistence=e,this.Ri=new $_,this.Ai=null}static Vi(e){return new Q_(e)}get di(){if(this.Ai)return this.Ai;throw Ge(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),ge.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((l=>this.di.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.di,(r=>{const l=ze.fromPath(r);return this.mi(e,l).next((u=>{u||t.removeEntry(l,Ke.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ge.or([()=>ge.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Mf{constructor(e,t){this.persistence=e,this.fi=new zl((r=>fj(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=CP(this,t)}static Vi(e,t){return new Mf(e,t)}Ti(){}Ii(e){return ge.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((l=>r+l))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return ge.forEach(this.fi,((r,l)=>this.wr(e,r,l).next((u=>u?ge.resolve():t(l)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(d=>this.wr(e,d,t).next((y=>{y||(r++,u.removeEntry(d,Ke.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ge.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ge.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ge.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hf(e.data.value)),t}wr(e,t,r){return ge.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.fi.get(t);return ge.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class W_{constructor(e,t,r,l){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=l}static Es(e,t){let r=pt(),l=pt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new W_(e,t.fromCache,r,l)}}class UP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class BP{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return mR()?8:hj(ni())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,l){const u={result:null};return this.gs(e,t).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,t,l,r).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new UP;return this.ys(e,t,d).next((y=>{if(u.result=y,this.As)return this.ws(e,t,d,y.size)}))})).next((()=>u.result))}ws(e,t,r,l){return r.documentReadCount<this.Vs?(Rc()<=ft.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",Ic(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ge.resolve()):(Rc()<=ft.DEBUG&&Ie("QueryEngine","Query:",Ic(t),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.ds*l?(Rc()<=ft.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",Ic(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sr(t))):ge.resolve())}gs(e,t){if($x(t))return ge.resolve(null);let r=Sr(t);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=s_(t,null,"F"),r=Sr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const d=pt(...u);return this.fs.getDocuments(e,d).next((y=>this.indexManager.getMinOffset(e,r).next((v=>{const b=this.bs(t,y);return this.Ss(t,b,d,v.readTime)?this.gs(e,s_(t,null,"F")):this.Ds(e,b,t,v)}))))})))))}ps(e,t,r,l){return $x(t)||l.isEqual(Ke.min())?ge.resolve(null):this.fs.getDocuments(e,r).next((u=>{const d=this.bs(t,u);return this.Ss(t,d,r,l)?ge.resolve(null):(Rc()<=ft.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ic(t)),this.Ds(e,d,t,aj(l,ph)).next((y=>y)))}))}bs(e,t){let r=new Sn(UT(e));return t.forEach(((l,u)=>{om(e,u)&&(r=r.add(u))})),r}Ss(e,t,r,l){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,t,r){return Rc()<=ft.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",Ic(t)),this.fs.getDocumentsMatchingQuery(e,t,So.min(),r)}Ds(e,t,r,l){return this.fs.getDocumentsMatchingQuery(e,r,l).next((u=>(t.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const X_="LocalStore",HP=3e8;class qP{constructor(e,t,r,l){this.persistence=e,this.Cs=t,this.serializer=l,this.vs=new Jt(mt),this.Fs=new zl((u=>q_(u)),F_),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kP(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function FP(i,e,t,r){return new qP(i,e,t,r)}async function h1(i,e){const t=Qe(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return t.mutationQueue.getAllMutationBatches(r).next((u=>(l=u,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((u=>{const d=[],y=[];let v=pt();for(const b of l){d.push(b.batchId);for(const S of b.mutations)v=v.add(S.key)}for(const b of u){y.push(b.batchId);for(const S of b.mutations)v=v.add(S.key)}return t.localDocuments.getDocuments(r,v).next((b=>({Ns:b,removedBatchIds:d,addedBatchIds:y})))}))}))}function GP(i,e){const t=Qe(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),u=t.xs.newChangeBuffer({trackRemovals:!0});return(function(y,v,b,S){const A=b.batch,R=A.keys();let M=ge.resolve();return R.forEach((G=>{M=M.next((()=>S.getEntry(v,G))).next((K=>{const Y=b.docVersions.get(G);St(Y!==null,48541),K.version.compareTo(Y)<0&&(A.applyToRemoteDocument(K,b),K.isValidDocument()&&(K.setReadTime(b.commitVersion),S.addEntry(K)))}))})),M.next((()=>y.mutationQueue.removeMutationBatch(v,A)))})(t,r,e,u).next((()=>u.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(y){let v=pt();for(let b=0;b<y.mutationResults.length;++b)y.mutationResults[b].transformResults.length>0&&(v=v.add(y.batch.mutations[b].key));return v})(e)))).next((()=>t.localDocuments.getDocuments(r,l)))}))}function d1(i){const e=Qe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function ZP(i,e){const t=Qe(i),r=e.snapshotVersion;let l=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=t.xs.newChangeBuffer({trackRemovals:!0});l=t.vs;const y=[];e.targetChanges.forEach(((S,A)=>{const R=l.get(A);if(!R)return;y.push(t.li.removeMatchingKeys(u,S.removedDocuments,A).next((()=>t.li.addMatchingKeys(u,S.addedDocuments,A))));let M=R.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?M=M.withResumeToken(Gn.EMPTY_BYTE_STRING,Ke.min()).withLastLimboFreeSnapshotVersion(Ke.min()):S.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(S.resumeToken,r)),l=l.insert(A,M),(function(K,Y,ce){return K.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=HP?!0:ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0})(R,M,S)&&y.push(t.li.updateTargetData(u,M))}));let v=wa(),b=pt();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))})),y.push(KP(u,d,e.documentUpdates).next((S=>{v=S.Bs,b=S.Ls}))),!r.isEqual(Ke.min())){const S=t.li.getLastRemoteSnapshotVersion(u).next((A=>t.li.setTargetsMetadata(u,u.currentSequenceNumber,r)));y.push(S)}return ge.waitFor(y).next((()=>d.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,v,b))).next((()=>v))})).then((u=>(t.vs=l,u)))}function KP(i,e,t){let r=pt(),l=pt();return t.forEach((u=>r=r.add(u))),e.getEntries(i,r).next((u=>{let d=wa();return t.forEach(((y,v)=>{const b=u.get(y);v.isFoundDocument()!==b.isFoundDocument()&&(l=l.add(y)),v.isNoDocument()&&v.version.isEqual(Ke.min())?(e.removeEntry(y,v.readTime),d=d.insert(y,v)):!b.isValidDocument()||v.version.compareTo(b.version)>0||v.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(v),d=d.insert(y,v)):Ie(X_,"Ignoring outdated watch update for ",y,". Current version:",b.version," Watch version:",v.version)})),{Bs:d,Ls:l}}))}function YP(i,e){const t=Qe(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=U_),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function $P(i,e){const t=Qe(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return t.li.getTargetData(r,e).next((u=>u?(l=u,ge.resolve(l)):t.li.allocateTargetId(r).next((d=>(l=new vo(e,d,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=t.vs.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function c_(i,e,t){const r=Qe(i),l=r.vs.get(e),u=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",u,(d=>r.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!iu(d))throw d;Ie(X_,`Failed to update sequence numbers for target ${e}: ${d}`)}r.vs=r.vs.remove(e),r.Fs.delete(l.target)}function lw(i,e,t){const r=Qe(i);let l=Ke.min(),u=pt();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(v,b,S){const A=Qe(v),R=A.Fs.get(S);return R!==void 0?ge.resolve(A.vs.get(R)):A.li.getTargetData(b,S)})(r,d,Sr(e)).next((y=>{if(y)return l=y.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(d,y.targetId).next((v=>{u=v}))})).next((()=>r.Cs.getDocumentsMatchingQuery(d,e,t?l:Ke.min(),t?u:pt()))).next((y=>(QP(r,Pj(e),y),{documents:y,ks:u})))))}function QP(i,e,t){let r=i.Ms.get(e)||Ke.min();t.forEach(((l,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),i.Ms.set(e,r)}class cw{constructor(){this.activeTargetIds=Uj()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WP{constructor(){this.vo=new cw,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new cw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class XP{Mo(e){}shutdown(){}}const uw="ConnectivityMonitor";class hw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ie(uw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ie(uw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Jd=null;function u_(){return Jd===null?Jd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jd++,"0x"+Jd.toString(16)}const Ng="RestConnection",JP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class eL{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${l}`,this.$o=this.databaseId.database===If?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Wo(e,t,r,l,u){const d=u_(),y=this.Qo(e,t.toUriEncodedString());Ie(Ng,`Sending RPC '${e}' ${d}:`,y,r);const v={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(v,l,u);const{host:b}=new URL(y),S=Wc(b);return this.zo(e,y,v,r,S).then((A=>(Ie(Ng,`Received RPC '${e}' ${d}: `,A),A)),(A=>{throw Bc(Ng,`RPC '${e}' ${d} failed with error: `,A,"url: ",y,"request:",r),A}))}jo(e,t,r,l,u,d){return this.Wo(e,t,r,l,u)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+tu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,u)=>e[u]=l)),r&&r.headers.forEach(((l,u)=>e[u]=l))}Qo(e,t){const r=JP[e];let l=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class tL{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Jn="WebChannelConnection",$u=(i,e,t)=>{i.listen(e,(r=>{try{t(r)}catch(l){setTimeout((()=>{throw l}),0)}}))};class Mc extends eL{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Mc.c_){const e=gT();$u(e,pT.STAT_EVENT,(t=>{t.stat===Wg.PROXY?Ie(Jn,"STAT_EVENT: detected buffering proxy"):t.stat===Wg.NOPROXY&&Ie(Jn,"STAT_EVENT: detected no buffering proxy")})),Mc.c_=!0}}zo(e,t,r,l,u){const d=u_();return new Promise(((y,v)=>{const b=new fT;b.setWithCredentials(!0),b.listenOnce(mT.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case uf.NO_ERROR:const A=b.getResponseJson();Ie(Jn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(A)),y(A);break;case uf.TIMEOUT:Ie(Jn,`RPC '${e}' ${d} timed out`),v(new Ce(pe.DEADLINE_EXCEEDED,"Request time out"));break;case uf.HTTP_ERROR:const R=b.getStatus();if(Ie(Jn,`RPC '${e}' ${d} failed with status:`,R,"response text:",b.getResponseText()),R>0){let M=b.getResponseJson();Array.isArray(M)&&(M=M[0]);const G=M?.error;if(G&&G.status&&G.message){const K=(function(ce){const ae=ce.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(ae)>=0?ae:pe.UNKNOWN})(G.status);v(new Ce(K,G.message))}else v(new Ce(pe.UNKNOWN,"Server responded with status "+b.getStatus()))}else v(new Ce(pe.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:d,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{Ie(Jn,`RPC '${e}' ${d} completed.`)}}));const S=JSON.stringify(l);Ie(Jn,`RPC '${e}' ${d} sending request:`,l),b.send(t,"POST",S,r,15)}))}T_(e,t,r){const l=u_(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Go(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const b=u.join("");Ie(Jn,`Creating RPC '${e}' stream ${l}: ${b}`,y);const S=d.createWebChannel(b,y);this.I_(S);let A=!1,R=!1;const M=new tL({Ho:G=>{R?Ie(Jn,`Not sending because RPC '${e}' stream ${l} is closed:`,G):(A||(Ie(Jn,`Opening RPC '${e}' stream ${l} transport.`),S.open(),A=!0),Ie(Jn,`RPC '${e}' stream ${l} sending:`,G),S.send(G))},Jo:()=>S.close()});return $u(S,Ju.EventType.OPEN,(()=>{R||(Ie(Jn,`RPC '${e}' stream ${l} transport opened.`),M.i_())})),$u(S,Ju.EventType.CLOSE,(()=>{R||(R=!0,Ie(Jn,`RPC '${e}' stream ${l} transport closed`),M.o_(),this.E_(S))})),$u(S,Ju.EventType.ERROR,(G=>{R||(R=!0,Bc(Jn,`RPC '${e}' stream ${l} transport errored. Name:`,G.name,"Message:",G.message),M.o_(new Ce(pe.UNAVAILABLE,"The operation could not be completed")))})),$u(S,Ju.EventType.MESSAGE,(G=>{if(!R){const K=G.data[0];St(!!K,16349);const Y=K,ce=Y?.error||Y[0]?.error;if(ce){Ie(Jn,`RPC '${e}' stream ${l} received error:`,ce);const ae=ce.status;let se=(function(Ne){const P=bn[Ne];if(P!==void 0)return XT(P)})(ae),ke=ce.message;se===void 0&&(se=pe.INTERNAL,ke="Unknown error status: "+ae+" with message "+ce.message),R=!0,M.o_(new Ce(se,ke)),S.close()}else Ie(Jn,`RPC '${e}' stream ${l} received:`,K),M.__(K)}})),Mc.u_(),setTimeout((()=>{M.s_()}),0),M}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return _T()}}function nL(i){return new Mc(i)}function Cg(){return typeof document<"u"?document:null}function hm(i){return new aP(i,!0)}Mc.c_=!1;class f1{constructor(e,t,r=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-r);l>0&&Ie("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const dw="PersistentStream";class m1{constructor(e,t,r,l,u,d,y,v){this.Ci=e,this.b_=r,this.S_=l,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=y,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new f1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(xa(t.toString()),xa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===t&&this.G_(r,l)}),(r=>{e((()=>{const l=new Ce(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ie(dw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ie(dw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class iL extends m1{constructor(e,t,r,l,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,l,d),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=cP(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Ke.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Ke.min():d.readTime?Nr(d.readTime):Ke.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=l_(this.serializer),t.addTarget=(function(u,d){let y;const v=d.target;if(y=n_(v)?{documents:dP(u,v)}:{query:fP(u,v).ft},y.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){y.resumeToken=t1(u,d.resumeToken);const b=r_(u,d.expectedCount);b!==null&&(y.expectedCount=b)}else if(d.snapshotVersion.compareTo(Ke.min())>0){y.readTime=Of(u,d.snapshotVersion.toTimestamp());const b=r_(u,d.expectedCount);b!==null&&(y.expectedCount=b)}return y})(this.serializer,e);const r=pP(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=l_(this.serializer),t.removeTarget=e,this.K_(t)}}class sL extends m1{constructor(e,t,r,l,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,l,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return St(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,St(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){St(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=hP(e.writeResults,e.commitTime),r=Nr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=l_(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>uP(this.serializer,r)))};this.K_(t)}}class rL{}class aL extends rL{constructor(e,t,r,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ce(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,a_(t,r),l,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ce(pe.UNKNOWN,u.toString())}))}jo(e,t,r,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,y])=>this.connection.jo(e,a_(t,r),l,d,y,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ce(pe.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function oL(i,e,t,r){return new aL(i,e,t,r)}class lL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xa(t),this.aa=!1):Ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const kl="RemoteStore";class cL{constructor(e,t,r,l,u){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{r.enqueueAndForget((async()=>{Ul(this)&&(Ie(kl,"Restarting streams for network reachability change."),await(async function(v){const b=Qe(v);b.Ea.add(4),await Oh(b),b.Va.set("Unknown"),b.Ea.delete(4),await dm(b)})(this))}))})),this.Va=new lL(r,l)}}async function dm(i){if(Ul(i))for(const e of i.Ra)await e(!0)}async function Oh(i){for(const e of i.Ra)await e(!1)}function p1(i,e){const t=Qe(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ny(t)?ty(t):su(t).O_()&&ey(t,e))}function J_(i,e){const t=Qe(i),r=su(t);t.Ia.delete(e),r.O_()&&g1(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ul(t)&&t.Va.set("Unknown"))}function ey(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ke.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}su(i).Z_(e)}function g1(i,e){i.da.$e(e),su(i).X_(e)}function ty(i){i.da=new nP({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),su(i).start(),i.Va.ua()}function ny(i){return Ul(i)&&!su(i).x_()&&i.Ia.size>0}function Ul(i){return Qe(i).Ea.size===0}function _1(i){i.da=void 0}async function uL(i){i.Va.set("Online")}async function hL(i){i.Ia.forEach(((e,t)=>{ey(i,e)}))}async function dL(i,e){_1(i),ny(i)?(i.Va.ha(e),ty(i)):i.Va.set("Unknown")}async function fL(i,e,t){if(i.Va.set("Online"),e instanceof e1&&e.state===2&&e.cause)try{await(async function(l,u){const d=u.cause;for(const y of u.targetIds)l.Ia.has(y)&&(await l.remoteSyncer.rejectListen(y,d),l.Ia.delete(y),l.da.removeTarget(y))})(i,e)}catch(r){Ie(kl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vf(i,r)}else if(e instanceof mf?i.da.Xe(e):e instanceof JT?i.da.st(e):i.da.tt(e),!t.isEqual(Ke.min()))try{const r=await d1(i.localStore);t.compareTo(r)>=0&&await(function(u,d){const y=u.da.Tt(d);return y.targetChanges.forEach(((v,b)=>{if(v.resumeToken.approximateByteSize()>0){const S=u.Ia.get(b);S&&u.Ia.set(b,S.withResumeToken(v.resumeToken,d))}})),y.targetMismatches.forEach(((v,b)=>{const S=u.Ia.get(v);if(!S)return;u.Ia.set(v,S.withResumeToken(Gn.EMPTY_BYTE_STRING,S.snapshotVersion)),g1(u,v);const A=new vo(S.target,v,b,S.sequenceNumber);ey(u,A)})),u.remoteSyncer.applyRemoteEvent(y)})(i,t)}catch(r){Ie(kl,"Failed to raise snapshot:",r),await Vf(i,r)}}async function Vf(i,e,t){if(!iu(e))throw e;i.Ea.add(1),await Oh(i),i.Va.set("Offline"),t||(t=()=>d1(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Ie(kl,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await dm(i)}))}function y1(i,e){return e().catch((t=>Vf(i,t,e)))}async function fm(i){const e=Qe(i),t=Ro(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:U_;for(;mL(e);)try{const l=await YP(e.localStore,r);if(l===null){e.Ta.length===0&&t.L_();break}r=l.batchId,pL(e,l)}catch(l){await Vf(e,l)}v1(e)&&b1(e)}function mL(i){return Ul(i)&&i.Ta.length<10}function pL(i,e){i.Ta.push(e);const t=Ro(i);t.O_()&&t.Y_&&t.ea(e.mutations)}function v1(i){return Ul(i)&&!Ro(i).x_()&&i.Ta.length>0}function b1(i){Ro(i).start()}async function gL(i){Ro(i).ra()}async function _L(i){const e=Ro(i);for(const t of i.Ta)e.ea(t.mutations)}async function yL(i,e,t){const r=i.Ta.shift(),l=Z_.from(r,e,t);await y1(i,(()=>i.remoteSyncer.applySuccessfulWrite(l))),await fm(i)}async function vL(i,e){e&&Ro(i).Y_&&await(async function(r,l){if((function(d){return Jj(d)&&d!==pe.ABORTED})(l.code)){const u=r.Ta.shift();Ro(r).B_(),await y1(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,l))),await fm(r)}})(i,e),v1(i)&&b1(i)}async function fw(i,e){const t=Qe(i);t.asyncQueue.verifyOperationInProgress(),Ie(kl,"RemoteStore received new credentials");const r=Ul(t);t.Ea.add(3),await Oh(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await dm(t)}async function bL(i,e){const t=Qe(i);e?(t.Ea.delete(2),await dm(t)):e||(t.Ea.add(2),await Oh(t),t.Va.set("Unknown"))}function su(i){return i.ma||(i.ma=(function(t,r,l){const u=Qe(t);return u.sa(),new iL(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(i.datastore,i.asyncQueue,{Zo:uL.bind(null,i),Yo:hL.bind(null,i),t_:dL.bind(null,i),J_:fL.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),ny(i)?ty(i):i.Va.set("Unknown")):(await i.ma.stop(),_1(i))}))),i.ma}function Ro(i){return i.fa||(i.fa=(function(t,r,l){const u=Qe(t);return u.sa(),new sL(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:gL.bind(null,i),t_:vL.bind(null,i),ta:_L.bind(null,i),na:yL.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await fm(i)):(await i.fa.stop(),i.Ta.length>0&&(Ie(kl,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class iy{constructor(e,t,r,l,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=l,this.removalCallback=u,this.deferred=new pa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,l,u){const d=Date.now()+r,y=new iy(e,t,d,l,u);return y.start(r),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sy(i,e){if(xa("AsyncQueue",`${e}: ${i}`),iu(i))return new Ce(pe.UNAVAILABLE,`${e}: ${i}`);throw i}class Vc{static emptySet(e){return new Vc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=eh(),this.sortedSet=new Jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,u=r.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Vc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class mw{constructor(){this.ga=new Jt(ze.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ge(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Kc{constructor(e,t,r,l,u,d,y,v,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=y,this.excludesMetadataChanges=v,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,l,u){const d=[];return t.forEach((y=>{d.push({type:0,doc:y})})),new Kc(e,t,Vc.emptySet(t),d,r,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&am(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==r[l].type||!t[l].doc.isEqual(r[l].doc))return!1;return!0}}class xL{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class wL{constructor(){this.queries=pw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const l=Qe(t),u=l.queries;l.queries=pw(),u.forEach(((d,y)=>{for(const v of y.ba)v.onError(r)}))})(this,new Ce(pe.ABORTED,"Firestore shutting down"))}}function pw(){return new zl((i=>zT(i)),am)}async function ry(i,e){const t=Qe(i);let r=3;const l=e.query;let u=t.queries.get(l);u?!u.Sa()&&e.Da()&&(r=2):(u=new xL,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await t.onListen(l,!0);break;case 1:u.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(d){const y=sy(d,`Initialization of query '${Ic(e.query)}' failed`);return void e.onError(y)}t.queries.set(l,u),u.ba.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&oy(t)}async function ay(i,e){const t=Qe(i),r=e.query;let l=3;const u=t.queries.get(r);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function EL(i,e){const t=Qe(i);let r=!1;for(const l of e){const u=l.query,d=t.queries.get(u);if(d){for(const y of d.ba)y.Fa(l)&&(r=!0);d.wa=l}}r&&oy(t)}function TL(i,e,t){const r=Qe(i),l=r.queries.get(e);if(l)for(const u of l.ba)u.onError(t);r.queries.delete(e)}function oy(i){i.Ca.forEach((e=>{e.next()}))}var h_,gw;(gw=h_||(h_={})).Ma="default",gw.Cache="cache";class ly{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new Kc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Kc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==h_.Cache}}class x1{constructor(e){this.key=e}}class w1{constructor(e){this.key=e}}class SL{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=pt(),this.mutatedKeys=pt(),this.eu=UT(e),this.tu=new Vc(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new mw,l=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,d=l,y=!1;const v=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,b=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((S,A)=>{const R=l.get(S),M=om(this.query,A)?A:null,G=!!R&&this.mutatedKeys.has(R.key),K=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let Y=!1;R&&M?R.data.isEqual(M.data)?G!==K&&(r.track({type:3,doc:M}),Y=!0):this.su(R,M)||(r.track({type:2,doc:M}),Y=!0,(v&&this.eu(M,v)>0||b&&this.eu(M,b)<0)&&(y=!0)):!R&&M?(r.track({type:0,doc:M}),Y=!0):R&&!M&&(r.track({type:1,doc:R}),Y=!0,(v||b)&&(y=!0)),Y&&(M?(d=d.add(M),u=K?u.add(S):u.delete(S)):(d=d.delete(S),u=u.delete(S)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const S=this.query.limitType==="F"?d.last():d.first();d=d.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{tu:d,iu:r,Ss:y,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((S,A)=>(function(M,G){const K=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Vt:Y})}};return K(M)-K(G)})(S.type,A.type)||this.eu(S.doc,A.doc))),this.ou(r),l=l??!1;const y=t&&!l?this._u():[],v=this.Ya.size===0&&this.current&&!l?1:0,b=v!==this.Xa;return this.Xa=v,d.length!==0||b?{snapshot:new Kc(this.query,e.tu,u,d,e.mutatedKeys,v===0,b,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=pt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new w1(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new x1(r))})),t}cu(e){this.Za=e.ks,this.Ya=pt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Kc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const cy="SyncEngine";class AL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class NL{constructor(e){this.key=e,this.hu=!1}}class CL{constructor(e,t,r,l,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new zl((y=>zT(y)),am),this.Iu=new Map,this.Eu=new Set,this.Ru=new Jt(ze.comparator),this.Au=new Map,this.Vu=new $_,this.du={},this.mu=new Map,this.fu=Zc.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function RL(i,e,t=!0){const r=C1(i);let l;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await E1(r,e,t,!0),l}async function IL(i,e){const t=C1(i);await E1(t,e,!0,!1)}async function E1(i,e,t,r){const l=await $P(i.localStore,Sr(e)),u=l.targetId,d=i.sharedClientState.addLocalQueryTarget(u,t);let y;return r&&(y=await kL(i,e,u,d==="current",l.resumeToken)),i.isPrimaryClient&&t&&p1(i.remoteStore,l),y}async function kL(i,e,t,r,l){i.pu=(A,R,M)=>(async function(K,Y,ce,ae){let se=Y.view.ru(ce);se.Ss&&(se=await lw(K.localStore,Y.query,!1).then((({documents:P})=>Y.view.ru(P,se))));const ke=ae&&ae.targetChanges.get(Y.targetId),be=ae&&ae.targetMismatches.get(Y.targetId)!=null,Ne=Y.view.applyChanges(se,K.isPrimaryClient,ke,be);return yw(K,Y.targetId,Ne.au),Ne.snapshot})(i,A,R,M);const u=await lw(i.localStore,e,!0),d=new SL(e,u.ks),y=d.ru(u.documents),v=Lh.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",l),b=d.applyChanges(y,i.isPrimaryClient,v);yw(i,t,b.au);const S=new AL(e,t,d);return i.Tu.set(e,S),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),b.snapshot}async function DL(i,e,t){const r=Qe(i),l=r.Tu.get(e),u=r.Iu.get(l.targetId);if(u.length>1)return r.Iu.set(l.targetId,u.filter((d=>!am(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await c_(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),t&&J_(r.remoteStore,l.targetId),d_(r,l.targetId)})).catch(nu)):(d_(r,l.targetId),await c_(r.localStore,l.targetId,!0))}async function jL(i,e){const t=Qe(i),r=t.Tu.get(e),l=t.Iu.get(r.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),J_(t.remoteStore,r.targetId))}async function PL(i,e,t){const r=BL(i);try{const l=await(function(d,y){const v=Qe(d),b=qt.now(),S=y.reduce(((M,G)=>M.add(G.key)),pt());let A,R;return v.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let G=wa(),K=pt();return v.xs.getEntries(M,S).next((Y=>{G=Y,G.forEach(((ce,ae)=>{ae.isValidDocument()||(K=K.add(ce))}))})).next((()=>v.localDocuments.getOverlayedDocuments(M,G))).next((Y=>{A=Y;const ce=[];for(const ae of y){const se=Yj(ae,A.get(ae.key).overlayedDocument);se!=null&&ce.push(new jo(ae.key,se,kT(se.value.mapValue),Ar.exists(!0)))}return v.mutationQueue.addMutationBatch(M,b,ce,y)})).next((Y=>{R=Y;const ce=Y.applyToLocalDocumentSet(A,K);return v.documentOverlayCache.saveOverlays(M,Y.batchId,ce)}))})).then((()=>({batchId:R.batchId,changes:HT(A)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(d,y,v){let b=d.du[d.currentUser.toKey()];b||(b=new Jt(mt)),b=b.insert(y,v),d.du[d.currentUser.toKey()]=b})(r,l.batchId,t),await Mh(r,l.changes),await fm(r.remoteStore)}catch(l){const u=sy(l,"Failed to persist write");t.reject(u)}}async function T1(i,e){const t=Qe(i);try{const r=await ZP(t.localStore,e);e.targetChanges.forEach(((l,u)=>{const d=t.Au.get(u);d&&(St(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?St(d.hu,14607):l.removedDocuments.size>0&&(St(d.hu,42227),d.hu=!1))})),await Mh(t,r,e)}catch(r){await nu(r)}}function _w(i,e,t){const r=Qe(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const l=[];r.Tu.forEach(((u,d)=>{const y=d.view.va(e);y.snapshot&&l.push(y.snapshot)})),(function(d,y){const v=Qe(d);v.onlineState=y;let b=!1;v.queries.forEach(((S,A)=>{for(const R of A.ba)R.va(y)&&(b=!0)})),b&&oy(v)})(r.eventManager,e),l.length&&r.Pu.J_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function LL(i,e,t){const r=Qe(i);r.sharedClientState.updateQueryState(e,"rejected",t);const l=r.Au.get(e),u=l&&l.key;if(u){let d=new Jt(ze.comparator);d=d.insert(u,ti.newNoDocument(u,Ke.min()));const y=pt().add(u),v=new um(Ke.min(),new Map,new Jt(mt),d,y);await T1(r,v),r.Ru=r.Ru.remove(u),r.Au.delete(e),uy(r)}else await c_(r.localStore,e,!1).then((()=>d_(r,e,t))).catch(nu)}async function OL(i,e){const t=Qe(i),r=e.batch.batchId;try{const l=await GP(t.localStore,e);A1(t,r,null),S1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Mh(t,l)}catch(l){await nu(l)}}async function ML(i,e,t){const r=Qe(i);try{const l=await(function(d,y){const v=Qe(d);return v.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let S;return v.mutationQueue.lookupMutationBatch(b,y).next((A=>(St(A!==null,37113),S=A.keys(),v.mutationQueue.removeMutationBatch(b,A)))).next((()=>v.mutationQueue.performConsistencyCheck(b))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(b,S,y))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,S))).next((()=>v.localDocuments.getDocuments(b,S)))}))})(r.localStore,e);A1(r,e,t),S1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Mh(r,l)}catch(l){await nu(l)}}function S1(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function A1(i,e,t){const r=Qe(i);let l=r.du[r.currentUser.toKey()];if(l){const u=l.get(e);u&&(t?u.reject(t):u.resolve(),l=l.remove(e)),r.du[r.currentUser.toKey()]=l}}function d_(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),t&&i.Pu.yu(r,t);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((r=>{i.Vu.containsKey(r)||N1(i,r)}))}function N1(i,e){i.Eu.delete(e.path.canonicalString());const t=i.Ru.get(e);t!==null&&(J_(i.remoteStore,t),i.Ru=i.Ru.remove(e),i.Au.delete(t),uy(i))}function yw(i,e,t){for(const r of t)r instanceof x1?(i.Vu.addReference(r.key,e),VL(i,r)):r instanceof w1?(Ie(cy,"Document no longer in limbo: "+r.key),i.Vu.removeReference(r.key,e),i.Vu.containsKey(r.key)||N1(i,r.key)):Ge(19791,{wu:r})}function VL(i,e){const t=e.key,r=t.path.canonicalString();i.Ru.get(t)||i.Eu.has(r)||(Ie(cy,"New document in limbo: "+t),i.Eu.add(r),uy(i))}function uy(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new ze(Vt.fromString(e)),r=i.fu.next();i.Au.set(r,new NL(t)),i.Ru=i.Ru.insert(t,r),p1(i.remoteStore,new vo(Sr(rm(t.path)),r,"TargetPurposeLimboResolution",nm.ce))}}async function Mh(i,e,t){const r=Qe(i),l=[],u=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((y,v)=>{d.push(r.pu(v,e,t).then((b=>{if((b||t)&&r.isPrimaryClient){const S=b?!b.fromCache:t?.targetChanges.get(v.targetId)?.current;r.sharedClientState.updateQueryState(v.targetId,S?"current":"not-current")}if(b){l.push(b);const S=W_.Es(v.targetId,b);u.push(S)}})))})),await Promise.all(d),r.Pu.J_(l),await(async function(v,b){const S=Qe(v);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>ge.forEach(b,(R=>ge.forEach(R.Ts,(M=>S.persistence.referenceDelegate.addReference(A,R.targetId,M))).next((()=>ge.forEach(R.Is,(M=>S.persistence.referenceDelegate.removeReference(A,R.targetId,M)))))))))}catch(A){if(!iu(A))throw A;Ie(X_,"Failed to update sequence numbers: "+A)}for(const A of b){const R=A.targetId;if(!A.fromCache){const M=S.vs.get(R),G=M.snapshotVersion,K=M.withLastLimboFreeSnapshotVersion(G);S.vs=S.vs.insert(R,K)}}})(r.localStore,u))}async function zL(i,e){const t=Qe(i);if(!t.currentUser.isEqual(e)){Ie(cy,"User change. New user:",e.toKey());const r=await h1(t.localStore,e);t.currentUser=e,(function(u,d){u.mu.forEach((y=>{y.forEach((v=>{v.reject(new Ce(pe.CANCELLED,d))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Mh(t,r.Ns)}}function UL(i,e){const t=Qe(i),r=t.Au.get(e);if(r&&r.hu)return pt().add(r.key);{let l=pt();const u=t.Iu.get(e);if(!u)return l;for(const d of u){const y=t.Tu.get(d);l=l.unionWith(y.view.nu)}return l}}function C1(i){const e=Qe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=T1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LL.bind(null,e),e.Pu.J_=EL.bind(null,e.eventManager),e.Pu.yu=TL.bind(null,e.eventManager),e}function BL(i){const e=Qe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ML.bind(null,e),e}class zf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return FP(this.persistence,new BP,e.initialUser,this.serializer)}Cu(e){return new u1(Q_.Vi,this.serializer)}Du(e){return new WP}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zf.provider={build:()=>new zf};class HL extends zf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){St(this.persistence.referenceDelegate instanceof Mf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new AP(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ki.withCacheSize(this.cacheSizeBytes):ki.DEFAULT;return new u1((r=>Mf.Vi(r,t)),this.serializer)}}class f_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_w(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zL.bind(null,this.syncEngine),await bL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new wL})()}createDatastore(e){const t=hm(e.databaseInfo.databaseId),r=nL(e.databaseInfo);return oL(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,l,u,d,y){return new cL(r,l,u,d,y)})(this.localStore,this.datastore,e.asyncQueue,(t=>_w(this.syncEngine,t,0)),(function(){return hw.v()?new hw:new XP})())}createSyncEngine(e,t){return(function(l,u,d,y,v,b,S){const A=new CL(l,u,d,y,v,b);return S&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Qe(t);Ie(kl,"RemoteStore shutting down."),r.Ea.add(5),await Oh(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}f_.provider={build:()=>new f_};class hy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Io="FirestoreClient";class qL{constructor(e,t,r,l,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=l,this.user=ei.UNAUTHENTICATED,this.clientId=z_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async d=>{Ie(Io,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(Ie(Io,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=sy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Rg(i,e){i.asyncQueue.verifyOperationInProgress(),Ie(Io,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async l=>{r.isEqual(l)||(await h1(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function vw(i,e){i.asyncQueue.verifyOperationInProgress();const t=await FL(i);Ie(Io,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>fw(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,l)=>fw(e.remoteStore,l))),i._onlineComponents=e}async function FL(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ie(Io,"Using user provided OfflineComponentProvider");try{await Rg(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===pe.FAILED_PRECONDITION||l.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;Bc("Error using user provided cache. Falling back to memory cache: "+t),await Rg(i,new zf)}}else Ie(Io,"Using default OfflineComponentProvider"),await Rg(i,new HL(void 0));return i._offlineComponents}async function R1(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ie(Io,"Using user provided OnlineComponentProvider"),await vw(i,i._uninitializedComponentsProvider._online)):(Ie(Io,"Using default OnlineComponentProvider"),await vw(i,new f_))),i._onlineComponents}function GL(i){return R1(i).then((e=>e.syncEngine))}async function Uf(i){const e=await R1(i),t=e.eventManager;return t.onListen=RL.bind(null,e.syncEngine),t.onUnlisten=DL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=IL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jL.bind(null,e.syncEngine),t}function ZL(i,e,t,r){const l=new hy(r),u=new ly(e,l,t);return i.asyncQueue.enqueueAndForget((async()=>ry(await Uf(i),u))),()=>{l.Nu(),i.asyncQueue.enqueueAndForget((async()=>ay(await Uf(i),u)))}}function KL(i,e,t={}){const r=new pa;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,y,v,b){const S=new hy({next:R=>{S.Nu(),d.enqueueAndForget((()=>ay(u,A)));const M=R.docs.has(y);!M&&R.fromCache?b.reject(new Ce(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&R.fromCache&&v&&v.source==="server"?b.reject(new Ce(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(R)},error:R=>b.reject(R)}),A=new ly(rm(y.path),S,{includeMetadataChanges:!0,Ka:!0});return ry(u,A)})(await Uf(i),i.asyncQueue,e,t,r))),r.promise}function YL(i,e,t={}){const r=new pa;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,y,v,b){const S=new hy({next:R=>{S.Nu(),d.enqueueAndForget((()=>ay(u,A))),R.fromCache&&v.source==="server"?b.reject(new Ce(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(R)},error:R=>b.reject(R)}),A=new ly(y,S,{includeMetadataChanges:!0,Ka:!0});return ry(u,A)})(await Uf(i),i.asyncQueue,e,t,r))),r.promise}function $L(i,e){const t=new pa;return i.asyncQueue.enqueueAndForget((async()=>PL(await GL(i),e,t))),t.promise}function I1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const QL="ComponentProvider",bw=new Map;function WL(i,e,t,r,l){return new gj(i,e,t,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,I1(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,r)}const k1="firestore.googleapis.com",xw=!0;class ww{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=k1,this.ssl=xw}else this.host=e.host,this.ssl=e.ssl??xw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=c1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TP)throw new Ce(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=I1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ce(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ce(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ce(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mm{constructor(e,t,r,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ww({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ww(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new $D;switch(r.type){case"firstParty":return new JD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ce(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=bw.get(t);r&&(Ie(QL,"Removing Datastore"),bw.delete(t),r.terminate())})(this),Promise.resolve()}}function XL(i,e,t,r={}){i=Ns(i,mm);const l=Wc(e),u=i._getSettings(),d={...u,emulatorOptions:i._getEmulatorOptions()},y=`${e}:${t}`;l&&(wE(`https://${y}`),EE("Firestore",!0)),u.host!==k1&&u.host!==y&&Bc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...u,host:y,ssl:l,emulatorOptions:r};if(!To(v,d)&&(i._setSettings(v),r.mockUserToken)){let b,S;if(typeof r.mockUserToken=="string")b=r.mockUserToken,S=ei.MOCK_USER;else{b=rR(r.mockUserToken,i._app?.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new Ce(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new ei(A)}i._authCredentials=new QD(new vT(b,S))}}class Bl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bl(this.firestore,e,this._query)}}class on{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new on(this.firestore,e,this._key)}toJSON(){return{type:on._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Dh(t,on._jsonSchema))return new on(e,r||null,new ze(Vt.fromString(t.referencePath)))}}on._jsonSchemaVersion="firestore/documentReference/1.0",on._jsonSchema={type:wn("string",on._jsonSchemaVersion),referencePath:wn("string")};class wo extends Bl{constructor(e,t,r){super(e,t,rm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new ze(e))}withConverter(e){return new wo(this.firestore,e,this._path)}}function fn(i,e,...t){if(i=dn(i),bT("collection","path",e),i instanceof mm){const r=Vt.fromString(e,...t);return Lx(r),new wo(i,null,r)}{if(!(i instanceof on||i instanceof wo))throw new Ce(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Vt.fromString(e,...t));return Lx(r),new wo(i.firestore,null,r)}}function Ft(i,e,...t){if(i=dn(i),arguments.length===1&&(e=z_.newId()),bT("doc","path",e),i instanceof mm){const r=Vt.fromString(e,...t);return Px(r),new on(i,null,new ze(r))}{if(!(i instanceof on||i instanceof wo))throw new Ce(pe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Vt.fromString(e,...t));return Px(r),new on(i.firestore,i instanceof wo?i.converter:null,new ze(r))}}const Ew="AsyncQueue";class Tw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new f1(this,"async_queue_retry"),this._c=()=>{const r=Cg();r&&Ie(Ew,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Cg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Cg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new pa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!iu(e))throw e;Ie(Ew,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,xa("INTERNAL UNHANDLED ERROR: ",Sw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=iy.createAndSchedule(this,e,t,r,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Ge(47125,{Pc:Sw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Sw(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Dl extends mm{constructor(e,t,r,l){super(e,t,r,l),this.type="firestore",this._queue=new Tw,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Tw(e),this._firestoreClient=void 0,await e}}}function JL(i,e){const t=typeof i=="object"?i:R_(),r=typeof i=="string"?i:If,l=Xc(t,"firestore").getImmediate({identifier:r});if(!l._initialized){const u=iR("firestore");u&&XL(l,...u)}return l}function pm(i){if(i._terminated)throw new Ce(pe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||eO(i),i._firestoreClient}function eO(i){const e=i._freezeSettings(),t=WL(i._databaseId,i._app?.options.appId||"",i._persistenceKey,i._app?.options.apiKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new qL(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(i._componentsProvider))}class Ss{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ss(Gn.fromBase64String(e))}catch(t){throw new Ce(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ss(Gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ss._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dh(e,Ss._jsonSchema))return Ss.fromBase64String(e.bytes)}}Ss._jsonSchemaVersion="firestore/bytes/1.0",Ss._jsonSchema={type:wn("string",Ss._jsonSchemaVersion),bytes:wn("string")};class dy{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ce(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gm{constructor(e){this._methodName=e}}class Cr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mt(this._lat,e._lat)||mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cr._jsonSchemaVersion}}static fromJSON(e){if(Dh(e,Cr._jsonSchema))return new Cr(e.latitude,e.longitude)}}Cr._jsonSchemaVersion="firestore/geoPoint/1.0",Cr._jsonSchema={type:wn("string",Cr._jsonSchemaVersion),latitude:wn("number"),longitude:wn("number")};class $s{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:$s._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dh(e,$s._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new $s(e.vectorValues);throw new Ce(pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$s._jsonSchemaVersion="firestore/vectorValue/1.0",$s._jsonSchema={type:wn("string",$s._jsonSchemaVersion),vectorValues:wn("object")};const tO=/^__.*__$/;class nO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new jo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ph(e,this.data,t,this.fieldTransforms)}}class D1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new jo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function j1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{dataSource:i})}}class _m{constructor(e,t,r,l,u,d){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new _m({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Bf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(j1(this.dataSource)&&tO.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class iO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||hm(e)}createContext(e,t,r,l=!1){return new _m({dataSource:e,methodName:t,targetDoc:r,path:Hn.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fy(i){const e=i._freezeSettings(),t=hm(i._databaseId);return new iO(i._databaseId,!!e.ignoreUndefinedProperties,t)}function sO(i,e,t,r,l,u={}){const d=i.createContext(u.merge||u.mergeFields?2:0,e,t,l);py("Data must be an object, but it was:",d,r);const y=P1(r,d);let v,b;if(u.merge)v=new es(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const S=[];for(const A of u.mergeFields){const R=Yc(e,A,t);if(!d.contains(R))throw new Ce(pe.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);M1(S,R)||S.push(R)}v=new es(S),b=d.fieldTransforms.filter((A=>v.covers(A.field)))}else v=null,b=d.fieldTransforms;return new nO(new Di(y),v,b)}class ym extends gm{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ym}}function rO(i,e,t){return new _m({dataSource:3,targetDoc:e.settings.targetDoc,methodName:i._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class my extends gm{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=rO(this,e,!0),r=this.Ac.map((u=>ru(u,t))),l=new Gc(r);return new Fj(e.path,l)}isEqual(e){return e instanceof my&&To(this.Ac,e.Ac)}}function aO(i,e,t,r){const l=i.createContext(1,e,t);py("Data must be an object, but it was:",l,r);const u=[],d=Di.empty();Do(r,((v,b)=>{const S=O1(e,v,t);b=dn(b);const A=l.childContextForFieldPath(S);if(b instanceof ym)u.push(S);else{const R=ru(b,A);R!=null&&(u.push(S),d.set(S,R))}}));const y=new es(u);return new D1(d,y,l.fieldTransforms)}function oO(i,e,t,r,l,u){const d=i.createContext(1,e,t),y=[Yc(e,r,t)],v=[l];if(u.length%2!=0)throw new Ce(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<u.length;R+=2)y.push(Yc(e,u[R])),v.push(u[R+1]);const b=[],S=Di.empty();for(let R=y.length-1;R>=0;--R)if(!M1(b,y[R])){const M=y[R];let G=v[R];G=dn(G);const K=d.childContextForFieldPath(M);if(G instanceof ym)b.push(M);else{const Y=ru(G,K);Y!=null&&(b.push(M),S.set(M,Y))}}const A=new es(b);return new D1(S,A,d.fieldTransforms)}function lO(i,e,t,r=!1){return ru(t,i.createContext(r?4:3,e))}function ru(i,e){if(L1(i=dn(i)))return py("Unsupported field value:",e,i),P1(i,e);if(i instanceof gm)return(function(r,l){if(!j1(l.dataSource))throw l.createError(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,l){const u=[];let d=0;for(const y of r){let v=ru(y,l.childContextForArray(d));v==null&&(v={nullValue:"NULL_VALUE"}),u.push(v),d++}return{arrayValue:{values:u}}})(i,e)}return(function(r,l){if((r=dn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Bj(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=qt.fromDate(r);return{timestampValue:Of(l.serializer,u)}}if(r instanceof qt){const u=new qt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Of(l.serializer,u)}}if(r instanceof Cr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ss)return{bytesValue:t1(l.serializer,r._byteString)};if(r instanceof on){const u=l.databaseId,d=r.firestore._databaseId;if(!d.isEqual(u))throw l.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Y_(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof $s)return(function(d,y){const v=d instanceof $s?d.toArray():d;return{mapValue:{fields:{[RT]:{stringValue:IT},[kf]:{arrayValue:{values:v.map((S=>{if(typeof S!="number")throw y.createError("VectorValues must only contain numeric values.");return G_(y.serializer,S)}))}}}}}})(r,l);if(l1(r))return r._toProto(l.serializer);throw l.createError(`Unsupported field value: ${tm(r)}`)})(i,e)}function P1(i,e){const t={};return ET(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Do(i,((r,l)=>{const u=ru(l,e.childContextForField(r));u!=null&&(t[r]=u)})),{mapValue:{fields:t}}}function L1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof qt||i instanceof Cr||i instanceof Ss||i instanceof on||i instanceof gm||i instanceof $s||l1(i))}function py(i,e,t){if(!L1(t)||!xT(t)){const r=tm(t);throw r==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+r)}}function Yc(i,e,t){if((e=dn(e))instanceof dy)return e._internalPath;if(typeof e=="string")return O1(i,e);throw Bf("Field path arguments must be of type string or ",i,!1,void 0,t)}const cO=new RegExp("[~\\*/\\[\\]]");function O1(i,e,t){if(e.search(cO)>=0)throw Bf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new dy(...e.split("."))._internalPath}catch{throw Bf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Bf(i,e,t,r,l){const u=r&&!r.isEmpty(),d=l!==void 0;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let v="";return(u||d)&&(v+=" (found",u&&(v+=` in field ${r}`),d&&(v+=` in document ${l}`),v+=")"),new Ce(pe.INVALID_ARGUMENT,y+i+v)}function M1(i,e){return i.some((t=>t.isEqual(e)))}class uO{convertValue(e,t="none"){switch(Co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(No(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Do(e,((l,u)=>{r[l]=this.convertValue(u,t)})),r}convertVectorValue(e){const t=e.fields?.[kf].arrayValue?.values?.map((r=>hn(r.doubleValue)));return new $s(t)}convertGeoPoint(e){return new Cr(hn(e.latitude),hn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=sm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gh(e));default:return null}}convertTimestamp(e){const t=Ao(e);return new qt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Vt.fromString(e);St(o1(r),9688,{name:e});const l=new _h(r.get(1),r.get(3)),u=new ze(r.popFirst(5));return l.isEqual(t)||xa(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}class gy extends uO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ss(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,t)}}function hO(...i){return new my("arrayUnion",i)}const Aw="@firebase/firestore",Nw="4.10.0";function Cw(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const l=t;for(const u of r)if(u in l&&typeof l[u]=="function")return!0;return!1})(i,["next","error","complete"])}class V1{constructor(e,t,r,l,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Yc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class dO extends V1{data(){return super.data()}}function z1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Ce(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _y{}class fO extends _y{}function qn(i,e,...t){let r=[];e instanceof _y&&r.push(e),r=r.concat(t),(function(u){const d=u.filter((v=>v instanceof yy)).length,y=u.filter((v=>v instanceof vm)).length;if(d>1||d>0&&y>0)throw new Ce(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)i=l._apply(i);return i}class vm extends fO{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new vm(e,t,r)}_apply(e){const t=this._parse(e);return U1(e._query,t),new Bl(e.firestore,e.converter,i_(e._query,t))}_parse(e){const t=fy(e.firestore);return(function(u,d,y,v,b,S,A){let R;if(b.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new Ce(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){Iw(A,S);const G=[];for(const K of A)G.push(Rw(v,u,K));R={arrayValue:{values:G}}}else R=Rw(v,u,A)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||Iw(A,S),R=lO(y,d,A,S==="in"||S==="not-in");return xn.create(b,S,R)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Zt(i,e,t){const r=e,l=Yc("where",i);return vm._create(l,r,t)}class yy extends _y{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new yy(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Js.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,u){let d=l;const y=u.getFlattenedFilters();for(const v of y)U1(d,v),d=i_(d,v)})(e._query,t),new Bl(e.firestore,e.converter,i_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Rw(i,e,t){if(typeof(t=dn(t))=="string"){if(t==="")throw new Ce(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VT(e)&&t.indexOf("/")!==-1)throw new Ce(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Vt.fromString(t));if(!ze.isDocumentKey(r))throw new Ce(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qx(i,new ze(r))}if(t instanceof on)return qx(i,t._key);throw new Ce(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tm(t)}.`)}function Iw(i,e){if(!Array.isArray(i)||i.length===0)throw new Ce(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function U1(i,e){const t=(function(l,u){for(const d of l)for(const y of d.getFlattenedFilters())if(u.indexOf(y.op)>=0)return y.op;return null})(i.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ce(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ce(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function mO(i,e,t){let r;return r=i?i.toFirestore(e):e,r}class nh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sl extends V1{constructor(e,t,r,l,u,d){super(e,t,r,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Yc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Sl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Sl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Sl._jsonSchema={type:wn("string",Sl._jsonSchemaVersion),bundleSource:wn("string","DocumentSnapshot"),bundleName:wn("string"),bundle:wn("string")};class pf extends Sl{data(e={}){return super.data(e)}}class Al{constructor(e,t,r,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new nh(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new pf(this._firestore,this._userDataWriter,r.key,r,new nh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((y=>{const v=new pf(l._firestore,l._userDataWriter,y.doc.key,y.doc,new nh(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);return y.doc,{type:"added",doc:v,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((y=>u||y.type!==3)).map((y=>{const v=new pf(l._firestore,l._userDataWriter,y.doc.key,y.doc,new nh(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);let b=-1,S=-1;return y.type!==0&&(b=d.indexOf(y.doc.key),d=d.delete(y.doc.key)),y.type!==1&&(d=d.add(y.doc),S=d.indexOf(y.doc.key)),{type:pO(y.type),doc:v,oldIndex:b,newIndex:S}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Al._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=z_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function pO(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:i})}}Al._jsonSchemaVersion="firestore/querySnapshot/1.0",Al._jsonSchema={type:wn("string",Al._jsonSchemaVersion),bundleSource:wn("string","QuerySnapshot"),bundleName:wn("string"),bundle:wn("string")};function Vh(i){i=Ns(i,on);const e=Ns(i.firestore,Dl),t=pm(e);return KL(t,i._key).then((r=>H1(e,i,r)))}function Cs(i){i=Ns(i,Bl);const e=Ns(i.firestore,Dl),t=pm(e),r=new gy(e);return z1(i._query),YL(t,i._query).then((l=>new Al(e,r,i,l)))}function Ea(i,e,t){i=Ns(i,on);const r=Ns(i.firestore,Dl),l=mO(i.converter,e),u=fy(r);return B1(r,[sO(u,"setDoc",i._key,l,i.converter!==null,t).toMutation(i._key,Ar.none())])}function Fn(i,e,t,...r){i=Ns(i,on);const l=Ns(i.firestore,Dl),u=fy(l);let d;return d=typeof(e=dn(e))=="string"||e instanceof dy?oO(u,"updateDoc",i._key,e,t,r):aO(u,"updateDoc",i._key,e),B1(l,[d.toMutation(i._key,Ar.exists(!0))])}function au(i,...e){i=dn(i);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Cw(e[r])||(t=e[r++]);const l={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Cw(e[r])){const b=e[r];e[r]=b.next?.bind(b),e[r+1]=b.error?.bind(b),e[r+2]=b.complete?.bind(b)}let u,d,y;if(i instanceof on)d=Ns(i.firestore,Dl),y=rm(i._key.path),u={next:b=>{e[r]&&e[r](H1(d,i,b))},error:e[r+1],complete:e[r+2]};else{const b=Ns(i,Bl);d=Ns(b.firestore,Dl),y=b._query;const S=new gy(d);u={next:A=>{e[r]&&e[r](new Al(d,S,b,A))},error:e[r+1],complete:e[r+2]},z1(i._query)}const v=pm(d);return ZL(v,y,l,u)}function B1(i,e){const t=pm(i);return $L(t,e)}function H1(i,e,t){const r=t.docs.get(e._key),l=new gy(i);return new Sl(i,l,e._key,r,new nh(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){YD(Jc),Rr(new Ws("firestore",((r,{instanceIdentifier:l,options:u})=>{const d=r.getProvider("app").getImmediate(),y=new Dl(new WD(r.getProvider("auth-internal")),new ej(d,r.getProvider("app-check-internal")),_j(d,l),d);return u={useFetchStreams:t,...u},y._setSettings(u),y}),"PUBLIC").setMultipleInstances(!0)),As(Aw,Nw,e),As(Aw,Nw,"esm2020")})();const q1="@firebase/installations",vy="0.6.19";const F1=1e4,G1=`w:${vy}`,Z1="FIS_v2",gO="https://firebaseinstallations.googleapis.com/v1",_O=3600*1e3,yO="installations",vO="Installations";const bO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},jl=new Ml(yO,vO,bO);function K1(i){return i instanceof Dr&&i.code.includes("request-failed")}function Y1({projectId:i}){return`${gO}/projects/${i}/installations`}function $1(i){return{token:i.token,requestStatus:2,expiresIn:wO(i.expiresIn),creationTime:Date.now()}}async function Q1(i,e){const r=(await e.json()).error;return jl.create("request-failed",{requestName:i,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function W1({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function xO(i,{refreshToken:e}){const t=W1(i);return t.append("Authorization",EO(e)),t}async function X1(i){const e=await i();return e.status>=500&&e.status<600?i():e}function wO(i){return Number(i.replace("s","000"))}function EO(i){return`${Z1} ${i}`}async function TO({appConfig:i,heartbeatServiceProvider:e},{fid:t}){const r=Y1(i),l=W1(i),u=e.getImmediate({optional:!0});if(u){const b=await u.getHeartbeatsHeader();b&&l.append("x-firebase-client",b)}const d={fid:t,authVersion:Z1,appId:i.appId,sdkVersion:G1},y={method:"POST",headers:l,body:JSON.stringify(d)},v=await X1(()=>fetch(r,y));if(v.ok){const b=await v.json();return{fid:b.fid||t,registrationStatus:2,refreshToken:b.refreshToken,authToken:$1(b.authToken)}}else throw await Q1("Create Installation",v)}function J1(i){return new Promise(e=>{setTimeout(e,i)})}function SO(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}const AO=/^[cdef][\w-]{21}$/,m_="";function NO(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const t=CO(i);return AO.test(t)?t:m_}catch{return m_}}function CO(i){return SO(i).substr(0,22)}function bm(i){return`${i.appName}!${i.appId}`}const eS=new Map;function tS(i,e){const t=bm(i);nS(t,e),RO(t,e)}function nS(i,e){const t=eS.get(i);if(t)for(const r of t)r(e)}function RO(i,e){const t=IO();t&&t.postMessage({key:i,fid:e}),kO()}let wl=null;function IO(){return!wl&&"BroadcastChannel"in self&&(wl=new BroadcastChannel("[Firebase] FID Change"),wl.onmessage=i=>{nS(i.data.key,i.data.fid)}),wl}function kO(){eS.size===0&&wl&&(wl.close(),wl=null)}const DO="firebase-installations-database",jO=1,Pl="firebase-installations-store";let Ig=null;function by(){return Ig||(Ig=Wf(DO,jO,{upgrade:(i,e)=>{e===0&&i.createObjectStore(Pl)}})),Ig}async function Hf(i,e){const t=bm(i),l=(await by()).transaction(Pl,"readwrite"),u=l.objectStore(Pl),d=await u.get(t);return await u.put(e,t),await l.done,(!d||d.fid!==e.fid)&&tS(i,e.fid),e}async function iS(i){const e=bm(i),r=(await by()).transaction(Pl,"readwrite");await r.objectStore(Pl).delete(e),await r.done}async function xm(i,e){const t=bm(i),l=(await by()).transaction(Pl,"readwrite"),u=l.objectStore(Pl),d=await u.get(t),y=e(d);return y===void 0?await u.delete(t):await u.put(y,t),await l.done,y&&(!d||d.fid!==y.fid)&&tS(i,y.fid),y}async function xy(i){let e;const t=await xm(i.appConfig,r=>{const l=PO(r),u=LO(i,l);return e=u.registrationPromise,u.installationEntry});return t.fid===m_?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function PO(i){const e=i||{fid:NO(),registrationStatus:0};return sS(e)}function LO(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(jl.create("app-offline"));return{installationEntry:e,registrationPromise:l}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=OO(i,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:MO(i)}:{installationEntry:e}}async function OO(i,e){try{const t=await TO(i,e);return Hf(i.appConfig,t)}catch(t){throw K1(t)&&t.customData.serverCode===409?await iS(i.appConfig):await Hf(i.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function MO(i){let e=await kw(i.appConfig);for(;e.registrationStatus===1;)await J1(100),e=await kw(i.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await xy(i);return r||t}return e}function kw(i){return xm(i,e=>{if(!e)throw jl.create("installation-not-found");return sS(e)})}function sS(i){return VO(i)?{fid:i.fid,registrationStatus:0}:i}function VO(i){return i.registrationStatus===1&&i.registrationTime+F1<Date.now()}async function zO({appConfig:i,heartbeatServiceProvider:e},t){const r=UO(i,t),l=xO(i,t),u=e.getImmediate({optional:!0});if(u){const b=await u.getHeartbeatsHeader();b&&l.append("x-firebase-client",b)}const d={installation:{sdkVersion:G1,appId:i.appId}},y={method:"POST",headers:l,body:JSON.stringify(d)},v=await X1(()=>fetch(r,y));if(v.ok){const b=await v.json();return $1(b)}else throw await Q1("Generate Auth Token",v)}function UO(i,{fid:e}){return`${Y1(i)}/${e}/authTokens:generate`}async function wy(i,e=!1){let t;const r=await xm(i.appConfig,u=>{if(!rS(u))throw jl.create("not-registered");const d=u.authToken;if(!e&&qO(d))return u;if(d.requestStatus===1)return t=BO(i,e),u;{if(!navigator.onLine)throw jl.create("app-offline");const y=GO(u);return t=HO(i,y),y}});return t?await t:r.authToken}async function BO(i,e){let t=await Dw(i.appConfig);for(;t.authToken.requestStatus===1;)await J1(100),t=await Dw(i.appConfig);const r=t.authToken;return r.requestStatus===0?wy(i,e):r}function Dw(i){return xm(i,e=>{if(!rS(e))throw jl.create("not-registered");const t=e.authToken;return ZO(t)?{...e,authToken:{requestStatus:0}}:e})}async function HO(i,e){try{const t=await zO(i,e),r={...e,authToken:t};return await Hf(i.appConfig,r),t}catch(t){if(K1(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await iS(i.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Hf(i.appConfig,r)}throw t}}function rS(i){return i!==void 0&&i.registrationStatus===2}function qO(i){return i.requestStatus===2&&!FO(i)}function FO(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+_O}function GO(i){const e={requestStatus:1,requestTime:Date.now()};return{...i,authToken:e}}function ZO(i){return i.requestStatus===1&&i.requestTime+F1<Date.now()}async function KO(i){const e=i,{installationEntry:t,registrationPromise:r}=await xy(e);return r?r.catch(console.error):wy(e).catch(console.error),t.fid}async function YO(i,e=!1){const t=i;return await $O(t),(await wy(t,e)).token}async function $O(i){const{registrationPromise:e}=await xy(i);e&&await e}function QO(i){if(!i||!i.options)throw kg("App Configuration");if(!i.name)throw kg("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!i.options[t])throw kg(t);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function kg(i){return jl.create("missing-app-config-values",{valueName:i})}const aS="installations",WO="installations-internal",XO=i=>{const e=i.getProvider("app").getImmediate(),t=QO(e),r=Xc(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},JO=i=>{const e=i.getProvider("app").getImmediate(),t=Xc(e,aS).getImmediate();return{getId:()=>KO(t),getToken:l=>YO(t,l)}};function eM(){Rr(new Ws(aS,XO,"PUBLIC")),Rr(new Ws(WO,JO,"PRIVATE"))}eM();As(q1,vy);As(q1,vy,"esm2020");const tM="/firebase-messaging-sw.js",nM="/firebase-cloud-messaging-push-scope",oS="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",iM="https://fcmregistrations.googleapis.com/v1",lS="google.c.a.c_id",sM="google.c.a.c_l",rM="google.c.a.ts",aM="google.c.a.e",jw=1e4;var Pw;(function(i){i[i.DATA_MESSAGE=1]="DATA_MESSAGE",i[i.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Pw||(Pw={}));var bh;(function(i){i.PUSH_RECEIVED="push-received",i.NOTIFICATION_CLICKED="notification-clicked"})(bh||(bh={}));function oa(i){const e=new Uint8Array(i);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function oM(i){const e="=".repeat((4-i.length%4)%4),t=(i+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),l=new Uint8Array(r.length);for(let u=0;u<r.length;++u)l[u]=r.charCodeAt(u);return l}const Dg="fcm_token_details_db",lM=5,Lw="fcm_token_object_Store";async function cM(i){if("databases"in indexedDB&&!(await indexedDB.databases()).map(u=>u.name).includes(Dg))return null;let e=null;return(await Wf(Dg,lM,{upgrade:async(r,l,u,d)=>{if(l<2||!r.objectStoreNames.contains(Lw))return;const y=d.objectStore(Lw),v=await y.index("fcmSenderId").get(i);if(await y.clear(),!!v){if(l===2){const b=v;if(!b.auth||!b.p256dh||!b.endpoint)return;e={token:b.fcmToken,createTime:b.createTime??Date.now(),subscriptionOptions:{auth:b.auth,p256dh:b.p256dh,endpoint:b.endpoint,swScope:b.swScope,vapidKey:typeof b.vapidKey=="string"?b.vapidKey:oa(b.vapidKey)}}}else if(l===3){const b=v;e={token:b.fcmToken,createTime:b.createTime,subscriptionOptions:{auth:oa(b.auth),p256dh:oa(b.p256dh),endpoint:b.endpoint,swScope:b.swScope,vapidKey:oa(b.vapidKey)}}}else if(l===4){const b=v;e={token:b.fcmToken,createTime:b.createTime,subscriptionOptions:{auth:oa(b.auth),p256dh:oa(b.p256dh),endpoint:b.endpoint,swScope:b.swScope,vapidKey:oa(b.vapidKey)}}}}}})).close(),await bg(Dg),await bg("fcm_vapid_details_db"),await bg("undefined"),uM(e)?e:null}function uM(i){if(!i||!i.subscriptionOptions)return!1;const{subscriptionOptions:e}=i;return typeof i.createTime=="number"&&i.createTime>0&&typeof i.token=="string"&&i.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}const hM="firebase-messaging-database",dM=1,xh="firebase-messaging-store";let jg=null;function cS(){return jg||(jg=Wf(hM,dM,{upgrade:(i,e)=>{e===0&&i.createObjectStore(xh)}})),jg}async function fM(i){const e=uS(i),r=await(await cS()).transaction(xh).objectStore(xh).get(e);if(r)return r;{const l=await cM(i.appConfig.senderId);if(l)return await Ey(i,l),l}}async function Ey(i,e){const t=uS(i),l=(await cS()).transaction(xh,"readwrite");return await l.objectStore(xh).put(e,t),await l.done,e}function uS({appConfig:i}){return i.appId}const mM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},di=new Ml("messaging","Messaging",mM);async function pM(i,e){const t=await Sy(i),r=hS(e),l={method:"POST",headers:t,body:JSON.stringify(r)};let u;try{u=await(await fetch(Ty(i.appConfig),l)).json()}catch(d){throw di.create("token-subscribe-failed",{errorInfo:d?.toString()})}if(u.error){const d=u.error.message;throw di.create("token-subscribe-failed",{errorInfo:d})}if(!u.token)throw di.create("token-subscribe-no-token");return u.token}async function gM(i,e){const t=await Sy(i),r=hS(e.subscriptionOptions),l={method:"PATCH",headers:t,body:JSON.stringify(r)};let u;try{u=await(await fetch(`${Ty(i.appConfig)}/${e.token}`,l)).json()}catch(d){throw di.create("token-update-failed",{errorInfo:d?.toString()})}if(u.error){const d=u.error.message;throw di.create("token-update-failed",{errorInfo:d})}if(!u.token)throw di.create("token-update-no-token");return u.token}async function _M(i,e){const r={method:"DELETE",headers:await Sy(i)};try{const u=await(await fetch(`${Ty(i.appConfig)}/${e}`,r)).json();if(u.error){const d=u.error.message;throw di.create("token-unsubscribe-failed",{errorInfo:d})}}catch(l){throw di.create("token-unsubscribe-failed",{errorInfo:l?.toString()})}}function Ty({projectId:i}){return`${iM}/projects/${i}/registrations`}async function Sy({appConfig:i,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function hS({p256dh:i,auth:e,endpoint:t,vapidKey:r}){const l={web:{endpoint:t,auth:e,p256dh:i}};return r!==oS&&(l.web.applicationPubKey=r),l}const yM=10080*60*1e3;async function vM(i){const e=await xM(i.swRegistration,i.vapidKey),t={vapidKey:i.vapidKey,swScope:i.swRegistration.scope,endpoint:e.endpoint,auth:oa(e.getKey("auth")),p256dh:oa(e.getKey("p256dh"))},r=await fM(i.firebaseDependencies);if(r){if(wM(r.subscriptionOptions,t))return Date.now()>=r.createTime+yM?bM(i,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{await _M(i.firebaseDependencies,r.token)}catch(l){console.warn(l)}return Ow(i.firebaseDependencies,t)}else return Ow(i.firebaseDependencies,t)}async function bM(i,e){try{const t=await gM(i.firebaseDependencies,e),r={...e,token:t,createTime:Date.now()};return await Ey(i.firebaseDependencies,r),t}catch(t){throw t}}async function Ow(i,e){const r={token:await pM(i,e),createTime:Date.now(),subscriptionOptions:e};return await Ey(i,r),r.token}async function xM(i,e){const t=await i.pushManager.getSubscription();return t||i.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:oM(e)})}function wM(i,e){const t=e.vapidKey===i.vapidKey,r=e.endpoint===i.endpoint,l=e.auth===i.auth,u=e.p256dh===i.p256dh;return t&&r&&l&&u}function Mw(i){const e={from:i.from,collapseKey:i.collapse_key,messageId:i.fcmMessageId};return EM(e,i),TM(e,i),SM(e,i),e}function EM(i,e){if(!e.notification)return;i.notification={};const t=e.notification.title;t&&(i.notification.title=t);const r=e.notification.body;r&&(i.notification.body=r);const l=e.notification.image;l&&(i.notification.image=l);const u=e.notification.icon;u&&(i.notification.icon=u)}function TM(i,e){e.data&&(i.data=e.data)}function SM(i,e){if(!e.fcmOptions&&!e.notification?.click_action)return;i.fcmOptions={};const t=e.fcmOptions?.link??e.notification?.click_action;t&&(i.fcmOptions.link=t);const r=e.fcmOptions?.analytics_label;r&&(i.fcmOptions.analyticsLabel=r)}function AM(i){return typeof i=="object"&&!!i&&lS in i}function NM(i){if(!i||!i.options)throw Pg("App Configuration Object");if(!i.name)throw Pg("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=i;for(const r of e)if(!t[r])throw Pg(r);return{appName:i.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function Pg(i){return di.create("missing-app-config-values",{valueName:i})}class CM{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const l=NM(e);this.firebaseDependencies={app:e,appConfig:l,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}async function RM(i){try{i.swRegistration=await navigator.serviceWorker.register(tM,{scope:nM}),i.swRegistration.update().catch(()=>{}),await IM(i.swRegistration)}catch(e){throw di.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function IM(i){return new Promise((e,t)=>{const r=setTimeout(()=>t(new Error(`Service worker not registered after ${jw} ms`)),jw),l=i.installing||i.waiting;i.active?(clearTimeout(r),e()):l?l.onstatechange=u=>{u.target?.state==="activated"&&(l.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),t(new Error("No incoming service worker found.")))})}async function kM(i,e){if(!e&&!i.swRegistration&&await RM(i),!(!e&&i.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw di.create("invalid-sw-registration");i.swRegistration=e}}async function DM(i,e){e?i.vapidKey=e:i.vapidKey||(i.vapidKey=oS)}async function jM(i,e){if(!navigator)throw di.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw di.create("permission-blocked");return await DM(i,e?.vapidKey),await kM(i,e?.serviceWorkerRegistration),vM(i)}async function PM(i,e,t){const r=LM(e);(await i.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[lS],message_name:t[sM],message_time:t[rM],message_device_time:Math.floor(Date.now()/1e3)})}function LM(i){switch(i){case bh.NOTIFICATION_CLICKED:return"notification_open";case bh.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function OM(i,e){const t=e.data;if(!t.isFirebaseMessaging)return;i.onMessageHandler&&t.messageType===bh.PUSH_RECEIVED&&(typeof i.onMessageHandler=="function"?i.onMessageHandler(Mw(t)):i.onMessageHandler.next(Mw(t)));const r=t.data;AM(r)&&r[aM]==="1"&&await PM(i,t.messageType,r)}const Vw="@firebase/messaging",zw="0.12.23";const MM=i=>{const e=new CM(i.getProvider("app").getImmediate(),i.getProvider("installations-internal").getImmediate(),i.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>OM(e,t)),e},VM=i=>{const e=i.getProvider("messaging").getImmediate();return{getToken:r=>jM(e,r)}};function zM(){Rr(new Ws("messaging",MM,"PUBLIC")),Rr(new Ws("messaging-internal",VM,"PRIVATE")),As(Vw,zw),As(Vw,zw,"esm2020")}async function UM(){try{await SE()}catch{return!1}return typeof window<"u"&&TE()&&pR()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function BM(i=R_()){return UM().then(e=>{if(!e)throw di.create("unsupported-browser")},e=>{throw di.create("indexed-db-unsupported")}),Xc(dn(i),"messaging").getImmediate()}zM();const HM={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},Ay=CE(HM),ef=FD(Ay),tt=JL(Ay);BM(Ay);const qM=async(i,e)=>{try{await Ea(Ft(tt,"users",i),{...e,createdAt:new Date().toISOString(),isDonor:!1})}catch(t){throw console.error("Error creating user profile:",t),t}},$c=async i=>{try{const e=Ft(tt,"users",i),t=await Vh(e);return t.exists()?t.data():null}catch(e){throw console.error("Error getting user profile:",e),e}},FM=(i,e)=>au(Ft(tt,"users",i),t=>{t.exists()?e(t.data()):e(null)}),GM=async(i,e)=>{try{const t=Ft(tt,"users",i);await Fn(t,{isDonor:!0,donorProfile:{...e,lastDonation:null,totalDonations:0}})}catch(t){throw console.error("Error updating donor status:",t),t}},ZM=async(i,e)=>{try{const t=Ft(tt,"users",i);await Fn(t,{isEligible:e,lastChecked:new Date().toISOString()})}catch(t){throw console.error("Error updating eligibility:",t),t}},KM=async(i,e)=>{try{let t=[];const r=fn(tt,"users");let l=qn(r,Zt("isDonor","==",!0),Zt("isEligible","==",!0));i&&(l=qn(l,Zt("donorProfile.bloodType","==",i))),(await Cs(l)).forEach(b=>{const S=b.data();(!e||S.donorProfile.city&&S.donorProfile.city.toLowerCase().includes(e.toLowerCase()))&&t.push({id:b.id,type:"donor",...S})});const d=fn(tt,"inventory");let y=qn(d,Zt("status","==","available"));return i&&(y=qn(y,Zt("bloodType","==",i))),(await Cs(y)).forEach(b=>{const S=b.data();(!e||S.location&&S.location.toLowerCase().includes(e.toLowerCase()))&&t.push({id:b.id,type:"hospital",donorProfile:{bloodType:S.bloodType,city:S.location,phone:S.phoneNumber||""},email:"Hospital Inventory",hospitalName:S.hospitalName,address:S.address,locationCoordinates:S.location})}),t}catch(t){throw console.error("Error searching:",t),t}},YM=async(i,e,t)=>{try{const r=Ft(fn(tt,"watchlists"));return await Ea(r,{userId:i,bloodType:e,location:t,createdAt:new Date().toISOString(),status:"active"}),r.id}catch(r){throw console.error("Error adding to watchlist:",r),r}},$M=async i=>{try{const e=qn(fn(tt,"watchlists"),Zt("userId","==",i),Zt("status","==","active")),t=await Cs(e);let r=[];return t.forEach(l=>{r.push({id:l.id,...l.data()})}),r}catch(e){throw console.error("Error getting watchlist:",e),e}},QM=async(i,e)=>{try{await Ea(Ft(tt,"users",i),{email:e.email,role:"hospital",hospitalName:e.hospitalName,phoneNumber:e.phoneNumber,createdAt:new Date().toISOString()}),await Ea(Ft(tt,"inventory",i),{hospitalId:i,hospitalName:e.hospitalName,licenseId:e.licenseId,address:e.address,phoneNumber:e.phoneNumber,location:e.location,bloodStock:{"A+":0,"A-":0,"B+":0,"B-":0,"AB+":0,"AB-":0,"O+":0,"O-":0},lastUpdated:new Date().toISOString(),status:"active"})}catch(t){throw console.error("Error creating hospital profile:",t),t}},dS=async(i,e,t)=>{try{const r=Ft(tt,"inventory",i),l=await Vh(r);if(l.exists()){const d=(l.data().bloodStock||{})[e]||0,y=Math.max(0,d+t);await Fn(r,{[`bloodStock.${e}`]:y,lastUpdated:new Date().toISOString()})}}catch(r){throw console.error("Error updating stock:",r),r}},WM=async(i,e,t,r)=>{try{const l=Ft(tt,"inventory",i),u=await Vh(l);if(!u.exists())await Ea(l,{hospitalName:"Test Hospital",address:t,location:{lat:40.7128,lng:-74.006},bloodStock:{[e]:Number(r)},lastUpdated:new Date().toISOString(),status:"active"});else{const y=(u.data().bloodStock||{})[e]||0;await Fn(l,{[`bloodStock.${e}`]:y+Number(r),lastUpdated:new Date().toISOString()})}}catch(l){throw console.error("Error adding inventory:",l),l}},XM=(i,e)=>au(Ft(tt,"inventory",i),t=>{t.exists()&&e({id:t.id,...t.data()})}),JM=i=>{const e=qn(fn(tt,"inventory"),Zt("status","==","active"));return au(e,t=>{const r=[];t.forEach(l=>{r.push({id:l.id,...l.data()})}),i(r)})},e4=(i,e)=>{if(!i||i.length===0)return()=>{};const t=qn(fn(tt,"inventory"),Zt("status","==","active"));return au(t,r=>{r.docChanges().forEach(l=>{if(l.type==="modified"||l.type==="added"){const u=l.doc.data();i.forEach(d=>{u.bloodStock&&u.bloodStock[d]>0&&e({id:l.doc.id,bloodType:d,location:u.location,...u})})}})})},t4=async(i,e,t,r,l)=>{try{const u=Ft(fn(tt,"blood_requests"));return await Ea(u,{seekerId:i,seekerName:e,donorId:t,donorName:l,bloodType:r,status:"pending",createdAt:new Date().toISOString()}),u.id}catch(u){throw console.error("Error creating blood request:",u),u}},n4=(i,e)=>{const t=qn(fn(tt,"blood_requests"),Zt("donorId","==",i),Zt("status","==","pending"));return au(t,r=>{const l=[];r.forEach(u=>{l.push({id:u.id,...u.data()})}),l.sort((u,d)=>new Date(d.createdAt)-new Date(u.createdAt)),e(l)})},i4=(i,e)=>{const t=qn(fn(tt,"blood_requests"),Zt("seekerId","==",i));return au(t,r=>{const l=[];r.forEach(u=>{l.push({id:u.id,...u.data()})}),l.sort((u,d)=>new Date(d.createdAt)-new Date(u.createdAt)),e(l)})},s4=async(i,e,t=null)=>{try{const r=Ft(tt,"blood_requests",i),l={status:e,respondedAt:new Date().toISOString()};t&&(l.donorPhone=t),await Fn(r,l)}catch(r){throw console.error("Error updating request status:",r),r}},r4=async i=>{try{await Fn(Ft(tt,"blood_requests",i),{status:"cancelled",updatedAt:new Date().toISOString()})}catch(e){throw console.error("Error cancelling request:",e),e}},a4=async i=>{try{await Fn(Ft(tt,"blood_requests",i),{status:"archived",updatedAt:new Date().toISOString()})}catch(e){throw console.error("Error archiving request:",e),e}},o4=async i=>{try{const e=qn(fn(tt,"blood_requests"),Zt("seekerId","==",i),Zt("status","==","pending")),r=(await Cs(e)).docs.map(l=>Fn(l.ref,{status:"closed",updatedAt:new Date().toISOString()}));await Promise.all(r)}catch(e){throw console.error("Error marking requests fulfilled:",e),e}},l4=async(i,e)=>{try{const t=Ft(fn(tt,"donationCamps"));return await Ea(t,{organizerId:i,...e,createdAt:new Date().toISOString(),status:"upcoming"}),t.id}catch(t){throw console.error("Error adding donation camp:",t),t}},c4=async()=>{try{const i=qn(fn(tt,"donationCamps")),e=await Cs(i);let t=[];return e.forEach(r=>{t.push({id:r.id,...r.data()})}),t}catch(i){throw console.error("Error getting donation camps:",i),i}},u4=async i=>{try{const e=qn(fn(tt,"donationCamps"),Zt("organizerId","==",i)),t=await Cs(e);let r=[];return t.forEach(l=>{r.push({id:l.id,...l.data()})}),r}catch(e){throw console.error("Error getting organizer camps:",e),e}},h4=async()=>{try{const i=new Date,e=new Date(i);e.setDate(i.getDate()-2);const t=e.toISOString().split("T")[0],r=qn(fn(tt,"donationCamps"),Zt("date","<",t)),u=(await Cs(r)).docs.map(d=>Fn(d.ref,{status:"archived"}));await Promise.all(u)}catch(i){console.error("Error deleting old camps:",i)}},d4=async()=>{try{const i=[];return(await Cs(fn(tt,"inventory"))).forEach(r=>{const l=r.data();l.status==="active"&&i.push({id:r.id,type:"hospital",name:l.hospitalName,address:l.address,location:l.location})}),(await Cs(qn(fn(tt,"donationCamps"),Zt("status","==","upcoming")))).forEach(r=>{const l=r.data();i.push({id:r.id,type:"camp",name:l.name,address:l.location,date:l.date,time:l.time})}),i}catch(i){throw console.error("Error fetching venues:",i),i}},f4=async i=>{try{const e=Ft(fn(tt,"appointments"));return await Ea(e,{...i,status:"scheduled",createdAt:new Date().toISOString()}),e.id}catch(e){throw console.error("Error booking appointment:",e),e}},Lg=async i=>{try{const e=qn(fn(tt,"appointments"),Zt("donorId","==",i)),t=await Cs(e);let r=[];return t.forEach(l=>{r.push({id:l.id,...l.data()})}),r.sort((l,u)=>new Date(l.date)-new Date(u.date)),r}catch(e){throw console.error("Error getting appointments:",e),e}},fS=async i=>{try{const e=qn(fn(tt,"appointments"),Zt("venueId","==",i),Zt("status","==","scheduled")),t=await Cs(e);let r=[];return t.forEach(l=>{r.push({id:l.id,...l.data()})}),r.sort((l,u)=>new Date(l.date)-new Date(u.date)),r}catch(e){throw console.error("Error getting venue appointments:",e),e}},m4=async i=>{try{const e=Ft(tt,"appointments",i);await Fn(e,{status:"cancelled",updatedAt:new Date().toISOString()})}catch(e){throw console.error("Error cancelling appointment:",e),e}},mS=async i=>{try{const e=Ft(tt,"appointments",i);await Fn(e,{status:"no-show",updatedAt:new Date().toISOString()})}catch(e){throw console.error("Error marking appointment no-show:",e),e}},pS=async(i,e,t,r,l,u)=>{try{const d=Ft(tt,"appointments",i);await Fn(d,{status:"completed",collectedBloodType:t,completedAt:new Date().toISOString()}),u==="hospital"&&await dS(e,t,1);const y=Ft(tt,"users",r),v=await Vh(y);if(v.exists()){const S=v.data().donorProfile?.totalDonations||0,A={id:i,venueId:e,venueName:l,bloodType:t,date:new Date().toISOString(),status:"completed"};await Fn(y,{"donorProfile.lastDonation":new Date().toISOString(),"donorProfile.totalDonations":S+1,donationHistory:hO(A)})}await Ea(Ft(fn(tt,"donations")),{donorId:r,venueId:e,venueName:l,bloodType:t,date:new Date().toISOString(),type:"donation"})}catch(d){throw console.error("Error completing appointment:",d),d}},gS=k.createContext();function jr(){return k.useContext(gS)}function p4({children:i}){const[e,t]=k.useState(null),[r,l]=k.useState(!0),[u,d]=k.useState(null);function y(A,R,M){return Nk(ef,A,R).then(async G=>(M&&await tT(G.user,{displayName:M}),G))}function v(A,R){return Ck(ef,A,R)}function b(){return jk(ef)}k.useEffect(()=>Dk(ef,async R=>{if(R){try{const M=await $c(R.uid);d(M?.role)}catch(M){console.error("Error fetching user role:",M),d(null)}t(R)}else t(null),d(null);l(!1)}),[]);const S={currentUser:e,userRole:u,signup:y,login:v,logout:b};return f.jsx(gS.Provider,{value:S,children:!r&&i})}function g4(){const[i,e]=k.useState(!1),{currentUser:t,logout:r}=jr(),l=kr(),[u,d]=k.useState(null);k.useEffect(()=>{async function v(){if(t)try{const b=await $c(t.uid);d(b?.role)}catch(b){console.error("Error fetching role:",b)}else d(null)}v()},[t]);async function y(){try{await r(),l("/login")}catch(v){console.error("Failed to log out",v)}}return f.jsxs("nav",{className:"bg-white shadow-sm border-b border-slate-100 sticky top-0 z-50",children:[f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between h-16",children:[f.jsx("div",{className:"flex items-center",children:f.jsxs(Mt,{to:"/",className:"flex items-center gap-2 group",children:[f.jsxs("div",{className:"relative",children:[f.jsx(Nl,{className:"h-8 w-8 text-brand-500 fill-brand-500 group-hover:scale-110 transition-transform duration-300"}),f.jsx("div",{className:"absolute inset-0 bg-brand-500 blur-lg opacity-20 rounded-full"})]}),f.jsx("span",{className:"text-2xl font-bold text-slate-800 tracking-tight",children:"LifeLine"})]})}),f.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[f.jsx(Mt,{to:"/",className:"text-slate-600 hover:text-brand-600 font-medium transition-colors",children:"Home"}),f.jsx(Mt,{to:"/search",className:"text-slate-600 hover:text-brand-600 font-medium transition-colors",children:"Find Blood"}),f.jsx(Mt,{to:"/camps",className:"text-slate-600 hover:text-brand-600 font-medium transition-colors",children:"Camps"}),t?f.jsxs(f.Fragment,{children:[u==="organizer"?f.jsxs(Mt,{to:"/organizer",className:"text-slate-600 hover:text-brand-600 font-medium transition-colors flex items-center gap-1",children:[f.jsx(bf,{className:"h-4 w-4"}),"Organizer Portal"]}):u==="hospital"?f.jsxs(Mt,{to:"/hospital-dashboard",className:"text-slate-600 hover:text-brand-600 font-medium transition-colors flex items-center gap-1",children:[f.jsx(bf,{className:"h-4 w-4"}),"Hospital Dashboard"]}):f.jsx(Mt,{to:"/dashboard",className:"text-slate-600 hover:text-brand-600 font-medium transition-colors",children:"Dashboard"}),f.jsxs("div",{className:"flex items-center gap-4 pl-4 border-l border-slate-200",children:[f.jsxs(Mt,{to:"/settings",className:"flex items-center gap-2 text-slate-600 hover:text-brand-600 transition-colors group",title:"Profile Settings",children:[f.jsx("div",{className:"bg-brand-100 p-1.5 rounded-full group-hover:bg-brand-200 transition-colors",children:f.jsx(Pi,{className:"h-4 w-4 text-brand-600"})}),f.jsx("span",{className:"text-sm font-medium truncate max-w-[150px]",children:t.displayName||t.email})]}),f.jsxs("button",{onClick:y,className:"flex items-center gap-2 text-slate-500 hover:text-brand-600 font-medium transition-colors text-sm",children:[f.jsx(Jb,{className:"h-4 w-4"}),"Sign Out"]})]})]}):f.jsx(Mt,{to:"/login",className:"bg-brand-500 hover:bg-brand-600 text-white px-5 py-2 rounded-full font-medium transition-all shadow-md shadow-brand-200 hover:shadow-lg hover:shadow-brand-300",children:"Sign In"})]}),f.jsx("div",{className:"md:hidden flex items-center",children:f.jsx("button",{onClick:()=>e(!i),className:"text-slate-500 hover:text-slate-700 p-2",children:i?f.jsx(Ah,{className:"h-6 w-6"}):f.jsx(RC,{className:"h-6 w-6"})})})]})}),i&&f.jsx("div",{className:"md:hidden bg-white border-t border-slate-100 absolute w-full shadow-lg",children:f.jsxs("div",{className:"px-4 pt-2 pb-4 space-y-1",children:[f.jsx(Mt,{to:"/",onClick:()=>e(!1),className:"block px-3 py-3 rounded-md text-base font-medium text-slate-700 hover:text-brand-600 hover:bg-brand-50 transition-colors",children:"Home"}),f.jsx(Mt,{to:"/search",onClick:()=>e(!1),className:"block px-3 py-3 rounded-md text-base font-medium text-slate-700 hover:text-brand-600 hover:bg-brand-50 transition-colors",children:"Find Blood"}),f.jsx(Mt,{to:"/camps",onClick:()=>e(!1),className:"block px-3 py-3 rounded-md text-base font-medium text-slate-700 hover:text-brand-600 hover:bg-brand-50 transition-colors",children:"Donation Camps"}),t?f.jsxs(f.Fragment,{children:[u==="organizer"?f.jsx(Mt,{to:"/organizer",onClick:()=>e(!1),className:"block px-3 py-3 rounded-md text-base font-medium text-slate-700 hover:text-brand-600 hover:bg-brand-50 transition-colors",children:"Organizer Portal"}):u==="hospital"?f.jsx(Mt,{to:"/hospital-dashboard",onClick:()=>e(!1),className:"block px-3 py-3 rounded-md text-base font-medium text-slate-700 hover:text-brand-600 hover:bg-brand-50 transition-colors",children:"Hospital Dashboard"}):f.jsx(Mt,{to:"/dashboard",onClick:()=>e(!1),className:"block px-3 py-3 rounded-md text-base font-medium text-slate-700 hover:text-brand-600 hover:bg-brand-50 transition-colors",children:"Dashboard"}),f.jsxs("div",{className:"px-3 py-3 border-t border-slate-100 mt-2",children:[f.jsxs(Mt,{to:"/settings",onClick:()=>e(!1),className:"flex items-center gap-2 text-slate-600 mb-3 hover:text-brand-600 transition-colors",children:[f.jsx(Pi,{className:"h-5 w-5"}),f.jsx("span",{className:"font-medium",children:t.displayName||t.email})]}),f.jsxs("button",{onClick:()=>{y(),e(!1)},className:"w-full flex items-center justify-center gap-2 bg-slate-100 hover:bg-slate-200 text-slate-700 px-4 py-2 rounded-lg font-medium transition-colors",children:[f.jsx(Jb,{className:"h-4 w-4"}),"Sign Out"]})]})]}):f.jsx("div",{className:"pt-2",children:f.jsx(Mt,{to:"/login",onClick:()=>e(!1),className:"block w-full text-center px-3 py-3 rounded-full text-base font-medium bg-brand-500 text-white hover:bg-brand-600 shadow-md",children:"Sign In"})})]})})]})}function _4(){const{userRole:i}=jr();return f.jsxs("div",{className:"flex flex-col min-h-[calc(100vh-64px)]",children:[f.jsxs("section",{className:"bg-gradient-to-br from-slate-50 to-red-50 py-20 lg:py-32 relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 right-0 -mt-20 -mr-20 w-96 h-96 bg-brand-100 rounded-full blur-3xl opacity-50"}),f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:f.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[f.jsxs("h1",{className:"text-4xl md:text-6xl font-extrabold text-slate-900 tracking-tight mb-6",children:["Donate Blood, ",f.jsx("span",{className:"text-brand-500",children:"Save Lives"})]}),f.jsx("p",{className:"text-xl text-slate-600 mb-10 leading-relaxed",children:"Connect with donors and find blood in emergencies. LifeLine makes the process of blood donation and retrieval seamless, secure, and fast."}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[f.jsx(Mt,{to:"/search",className:"inline-flex items-center justify-center px-8 py-4 text-lg font-bold rounded-full text-white bg-brand-500 hover:bg-brand-600 shadow-lg hover:shadow-brand-300 transition-all transform hover:-translate-y-1",children:"Find Blood Now"}),i==="hospital"||i==="organizer"?f.jsx(Mt,{to:i==="hospital"?"/hospital-dashboard":"/organizer",className:"inline-flex items-center justify-center px-8 py-4 text-lg font-bold rounded-full text-brand-600 bg-white border-2 border-brand-100 hover:border-brand-200 hover:bg-brand-50 shadow-sm transition-all",children:"Go to Dashboard"}):f.jsx(Mt,{to:"/dashboard",className:"inline-flex items-center justify-center px-8 py-4 text-lg font-bold rounded-full text-brand-600 bg-white border-2 border-brand-100 hover:border-brand-200 hover:bg-brand-50 shadow-sm transition-all",children:"Become a Donor"})]})]})})]}),f.jsx("section",{className:"py-24 bg-white",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-20",children:[f.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-slate-900",children:"How Blood Donation Works"}),f.jsx("p",{className:"mt-4 text-xl text-slate-600 max-w-2xl mx-auto",children:"A simple 3-step process to saving a life."})]}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"hidden md:block absolute top-1/2 left-0 w-full h-1 bg-gradient-to-r from-red-100 via-red-200 to-red-100 -translate-y-1/2 z-0 rounded-full"}),f.jsxs("div",{className:"grid md:grid-cols-3 gap-12 relative z-10",children:[f.jsxs("div",{className:"flex flex-col items-center text-center group",children:[f.jsxs("div",{className:"w-24 h-24 bg-white border-4 border-red-100 rounded-full flex items-center justify-center shadow-lg mb-8 relative transition-all duration-300 group-hover:border-brand-400 group-hover:scale-110",children:[f.jsx("span",{className:"text-4xl font-bold text-brand-500 group-hover:text-brand-600",children:"1"}),f.jsx("div",{className:"absolute -bottom-3 bg-brand-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-md",children:"REGISTER"})]}),f.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Registration Process"}),f.jsx("p",{className:"text-slate-600 leading-relaxed px-4",children:"Sign up and schedule your first donation with ease. It takes less than 10 minutes."})]}),f.jsxs("div",{className:"flex flex-col items-center text-center group",children:[f.jsxs("div",{className:"w-24 h-24 bg-white border-4 border-red-100 rounded-full flex items-center justify-center shadow-lg mb-8 relative transition-all duration-300 group-hover:border-brand-400 group-hover:scale-110",children:[f.jsx("span",{className:"text-4xl font-bold text-brand-500 group-hover:text-brand-600",children:"2"}),f.jsx("div",{className:"absolute -bottom-3 bg-brand-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-md",children:"SCREENING"})]}),f.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Health Screening"}),f.jsx("p",{className:"text-slate-600 leading-relaxed px-4",children:"A simple check-up to ensure youre ready to donate. We check your pulse, blood pressure, and hemoglobin."})]}),f.jsxs("div",{className:"flex flex-col items-center text-center group",children:[f.jsxs("div",{className:"w-24 h-24 bg-white border-4 border-red-100 rounded-full flex items-center justify-center shadow-lg mb-8 relative transition-all duration-300 group-hover:border-brand-400 group-hover:scale-110",children:[f.jsx("span",{className:"text-4xl font-bold text-brand-500 group-hover:text-brand-600",children:"3"}),f.jsx("div",{className:"absolute -bottom-3 bg-brand-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-md",children:"DONATE"})]}),f.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Donation Day"}),f.jsx("p",{className:"text-slate-600 leading-relaxed px-4",children:"Relax as our professional staff guide you through. The actual donation takes just 8-10 minutes."})]})]})]}),f.jsx("div",{className:"mt-20 text-center",children:f.jsxs(Mt,{to:"/camps",className:"inline-flex items-center justify-center px-10 py-4 text-lg font-bold rounded-full text-white bg-slate-900 hover:bg-slate-800 shadow-xl hover:shadow-2xl transition-all transform hover:-translate-y-1",children:["Start Your Journey ",f.jsx(J2,{className:"ml-2 h-5 w-5"})]})})]})}),f.jsx("section",{className:"py-20 bg-white",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-16",children:[f.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Why Choose LifeLine?"}),f.jsx("p",{className:"mt-4 text-lg text-slate-600",children:"We bridge the gap between donors and those in need."})]}),f.jsxs("div",{className:"grid md:grid-cols-3 gap-10",children:[f.jsx(Og,{icon:f.jsx(fE,{className:"h-10 w-10 text-brand-500"}),title:"Real-time Availability",description:"Check blood availability in real-time from verified donors and blood banks near you."}),f.jsx(Og,{icon:f.jsx(KC,{className:"h-10 w-10 text-brand-500"}),title:"Community Driven",description:"Join a growing community of life-savers. Every donation makes a difference."}),f.jsx(Og,{icon:f.jsx(FC,{className:"h-10 w-10 text-brand-500"}),title:"Verified & Secure",description:"All donors and requests are verified to ensure safety and trust in the platform."})]})]})}),f.jsx("section",{className:"py-20 bg-slate-50 border-t border-slate-200 overflow-hidden",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-12 relative z-10",children:[f.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Benefits of Blood Donation"}),f.jsx("p",{className:"mt-4 text-lg text-slate-600",children:"Giving blood helps others and is good for you too."})]}),f.jsx("div",{className:"flex flex-wrap justify-center items-center gap-2 max-w-4xl mx-auto py-10 relative",children:[{type:"benefit",text:"Saves 3 Lives"},{type:"group",text:"O+"},{type:"benefit",text:"Free Health Checkup"},{type:"group",text:"A-"},{type:"benefit",text:"Reduces Cancer Risk"},{type:"group",text:"B+"},{type:"benefit",text:"Improves Heart Health"},{type:"group",text:"AB+"},{type:"benefit",text:"Burns Calories"},{type:"group",text:"O-"},{type:"benefit",text:"New Blood Cells"},{type:"group",text:"A+"},{type:"benefit",text:"Mental Well-being"},{type:"group",text:"B-"},{type:"benefit",text:"Community Impact"},{type:"group",text:"AB-"},{type:"benefit",text:"Free Blood Analysis"},{type:"benefit",text:"Lower Cholesterol"}].map((e,t)=>{const r=`${t*.2%2}s`,l=e.type==="benefit";let u="";return t%3===0&&(u="mt-8"),t%3===1&&(u="-mt-4"),f.jsx("div",{className:`
                     animate-float flex items-center justify-center text-center rounded-full shadow-sm hover:shadow-xl transition-all duration-300 cursor-default border border-red-200
                     ${u}
                     ${l?"w-32 h-32 md:w-40 md:h-40 bg-red-50 text-red-900 font-bold text-sm md:text-base p-4 z-10 hover:bg-red-100 hover:scale-105":"w-12 h-12 md:w-16 md:h-16 bg-red-200 text-red-900 font-bold text-xs md:text-sm z-0 hover:bg-red-300 hover:scale-110 opacity-90"}
                   `,style:{animationDelay:r},children:e.text},t)})})]})})]})}function Og({icon:i,title:e,description:t}){return f.jsxs("div",{className:"p-8 rounded-2xl bg-slate-50 hover:bg-white border border-slate-100 hover:border-brand-100 shadow-sm hover:shadow-xl transition-all duration-300 group",children:[f.jsx("div",{className:"mb-6 bg-white w-16 h-16 rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform",children:i}),f.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:e}),f.jsx("p",{className:"text-slate-600 leading-relaxed",children:t})]})}class zh{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const y4=()=>{if(!(typeof localStorage>"u"))return{get:i=>Promise.resolve(localStorage.getItem(i)),set:(i,e)=>Promise.resolve(localStorage.setItem(i,e)),remove:i=>Promise.resolve(localStorage.removeItem(i))}},Bn={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:y4()},Ny=i=>i?typeof i=="string"?{publicKey:i}:i.toString()==="[object Object]"?i:{}:{},v4=(i,e="https://api.emailjs.com")=>{if(!i)return;const t=Ny(i);Bn.publicKey=t.publicKey,Bn.blockHeadless=t.blockHeadless,Bn.storageProvider=t.storageProvider,Bn.blockList=t.blockList,Bn.limitRate=t.limitRate,Bn.origin=t.origin||e},_S=async(i,e,t={})=>{const r=await fetch(Bn.origin+i,{method:"POST",headers:t,body:e}),l=await r.text(),u=new zh(r.status,l);if(r.ok)return u;throw u},yS=(i,e,t)=>{if(!i||typeof i!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},b4=i=>{if(i&&i.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},vS=i=>i.webdriver||!i.languages||i.languages.length===0,bS=()=>new zh(451,"Unavailable For Headless Browser"),x4=(i,e)=>{if(!Array.isArray(i))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},w4=i=>!i.list?.length||!i.watchVariable,E4=(i,e)=>i instanceof FormData?i.get(e):i[e],xS=(i,e)=>{if(w4(i))return!1;x4(i.list,i.watchVariable);const t=E4(e,i.watchVariable);return typeof t!="string"?!1:i.list.includes(t)},wS=()=>new zh(403,"Forbidden"),T4=(i,e)=>{if(typeof i!="number"||i<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},S4=async(i,e,t)=>{const r=Number(await t.get(i)||0);return e-Date.now()+r},ES=async(i,e,t)=>{if(!e.throttle||!t)return!1;T4(e.throttle,e.id);const r=e.id||i;return await S4(r,e.throttle,t)>0?!0:(await t.set(r,Date.now().toString()),!1)},TS=()=>new zh(429,"Too Many Requests"),A4=async(i,e,t,r)=>{const l=Ny(r),u=l.publicKey||Bn.publicKey,d=l.blockHeadless||Bn.blockHeadless,y=l.storageProvider||Bn.storageProvider,v={...Bn.blockList,...l.blockList},b={...Bn.limitRate,...l.limitRate};return d&&vS(navigator)?Promise.reject(bS()):(yS(u,i,e),b4(t),t&&xS(v,t)?Promise.reject(wS()):await ES(location.pathname,b,y)?Promise.reject(TS()):_S("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:u,service_id:i,template_id:e,template_params:t}),{"Content-type":"application/json"}))},N4=i=>{if(!i||i.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},C4=i=>typeof i=="string"?document.querySelector(i):i,R4=async(i,e,t,r)=>{const l=Ny(r),u=l.publicKey||Bn.publicKey,d=l.blockHeadless||Bn.blockHeadless,y=Bn.storageProvider||l.storageProvider,v={...Bn.blockList,...l.blockList},b={...Bn.limitRate,...l.limitRate};if(d&&vS(navigator))return Promise.reject(bS());const S=C4(t);yS(u,i,e),N4(S);const A=new FormData(S);return xS(v,A)?Promise.reject(wS()):await ES(location.pathname,b,y)?Promise.reject(TS()):(A.append("lib_version","4.4.1"),A.append("service_id",i),A.append("template_id",e),A.append("user_id",u),_S("/api/v1.0/email/send-form",A))},I4={init:v4,send:A4,sendForm:R4,EmailJSResponseStatus:zh},k4="service_0nhfmxh",D4="template_il7a1m8",j4="sDIzgaJWEEt8CRJid",P4=async(i,e)=>{try{const t=await $c(i);if(!t||!t.email){console.error("Seeker profile or email not found.");return}const r={to_email:t.email,to_name:t.name||"Seeker",donor_name:e.name,donor_phone:e.phone||"Not shared",blood_type:e.bloodType,location:t.city||t.address||"Your Area",next_steps:"Please contact the donor immediately to coordinate the donation. Time is of the essence!",action_link:`${window.location.origin}/dashboard`},l=await I4.send(k4,D4,r,j4);return console.log("Accepted Notification Sent!",l.status,l.text),l}catch(t){console.error("Error sending acceptance notification:",t)}};function L4({userId:i,onComplete:e,onClose:t}){const[r,l]=k.useState(0),[u,d]=k.useState({}),[y,v]=k.useState(null),[b,S]=k.useState([]),A=[{key:"medication",question:"Are you currently taking any medication (e.g., antibiotics, blood thinners)?",type:"boolean",correctAnswer:!1,failMessage:"Certain medications (antibiotics, blood thinners) may prevent you from donating. Please consult a doctor.",explanation:"Some medications can affect the recipient or your own health during donation."},{key:"age_group",question:"Are you between 18 to 65 years of age?",type:"boolean",correctAnswer:!0,failMessage:"Donors must be between 18 and 65 years old.",explanation:"This age range ensures you are legally able to consent and physically mature enough to donate safely."},{key:"weight_check",question:"Is your body weight at least 45 kg?",type:"boolean",correctAnswer:!0,failMessage:"Donors must weigh at least 45kg.",explanation:"You need a certain body mass to safely lose 450ml of blood without health risks."},{key:"recent_donation",question:"Have you donated blood in the last 3 months?",type:"boolean",correctAnswer:!1,failMessage:"You must wait at least 3 months between blood donations.",explanation:"Your body needs this time to replenish its iron stores and red blood cells."},{key:"health_today",question:"Have you had any infection, fever, cold, cough, weakness, dizziness, or fatigue today?",type:"boolean",correctAnswer:!1,failMessage:"You must be in good health and symptom-free to donate.",explanation:"Donating while sick can worsen your condition and transmit infections to the recipient."},{key:"surgery_dental",question:"Have you undergone any surgery or major dental procedure recently (last 612 months)?",type:"boolean",correctAnswer:!1,failMessage:"Recent surgeries or major dental procedures require a recovery period before donating.",explanation:"Surgery increases the risk of infection and your body needs energy to heal fully first."},{key:"sleep",question:"Did you have at least 6 hours of sleep last night?",type:"boolean",correctAnswer:!0,failMessage:"A minimum of 6 hours of sleep is required to ensure your safety during donation.",explanation:"Lack of sleep increases the risk of dizziness, fainting, and fatigue after donation."},{key:"meal",question:"Did you eat a light (non-oily) meal 23 hours before donating?",type:"boolean",correctAnswer:!0,failMessage:"Eating a light meal beforehand helps prevent dizziness and maintains blood sugar.",explanation:"Donating on an empty stomach can cause a drop in blood sugar and lead to fainting."},{key:"tattoo_piercing",question:"Have you had any tattoos, piercings, or acupuncture in the last 6 months?",type:"boolean",correctAnswer:!1,failMessage:"There is a 6-month waiting period after tattoos, piercings, or acupuncture.",explanation:"Needles can introduce infections like Hepatitis, which may not show up in tests immediately."},{key:"alcohol",question:"Have you consumed alcohol in the last 24 hours?",type:"boolean",correctAnswer:!1,failMessage:"You must avoid alcohol for at least 24 hours before donating.",explanation:"Alcohol causes dehydration, which makes it harder for your body to recover after donating."}],R=ae=>{d(se=>({...se,[A[r].key]:ae}))},M=async()=>{r<A.length-1?l(r+1):G()},G=async()=>{let ae=[];for(const ke of A)u[ke.key]!==ke.correctAnswer&&ae.push(ke.failMessage);const se=ae.length===0;S(ae),v(se?"passed":"failed"),i&&await ZM(i,se),e&&e(se)},K=()=>{l(0),d({}),v(null),S([])};if(y)return f.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:f.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full text-center shadow-xl max-h-[90vh] overflow-y-auto",children:y==="passed"?f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:f.jsx(ha,{className:"h-10 w-10 text-green-600"})}),f.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"You are Eligible!"}),f.jsx("p",{className:"text-slate-600",children:"Great news! You meet all the basic requirements to donate blood."}),f.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl flex items-start gap-3 text-blue-800 text-sm text-left",children:[f.jsx(Wb,{className:"h-5 w-5 shrink-0 mt-0.5"}),f.jsx("p",{children:"Note: A doctor will re-verify donor eligibility before actual blood donation to ensure your safety and the recipient's safety."})]}),f.jsx("button",{onClick:t,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold transition-colors",children:"Continue to Dashboard"})]}):f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:f.jsx(dh,{className:"h-10 w-10 text-red-600"})}),f.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Not Eligible at this time"}),f.jsxs("div",{className:"text-left bg-red-50 p-4 rounded-xl space-y-2",children:[f.jsx("p",{className:"font-bold text-red-800 mb-2",children:"Reasons:"}),f.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-red-700",children:b.map((ae,se)=>f.jsx("li",{children:ae},se))})]}),f.jsx("p",{className:"text-slate-500 text-sm",children:"Don't worry! This is often temporary. Please check back later when you meet the criteria."}),f.jsxs("div",{className:"flex gap-3",children:[f.jsxs("button",{onClick:K,className:"flex-1 py-3 bg-white border-2 border-slate-200 hover:bg-slate-50 text-slate-700 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:[f.jsx(pE,{className:"h-4 w-4"}),"Retake Quiz"]}),f.jsx("button",{onClick:t,className:"flex-1 py-3 bg-slate-900 hover:bg-slate-800 text-white rounded-xl font-bold transition-colors",children:"Close"})]})]})})});const Y=A[r],ce=u[Y.key]!==void 0&&u[Y.key]!==null;return f.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:f.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-xl relative",children:[f.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 bg-slate-100 rounded-t-2xl overflow-hidden",children:f.jsx("div",{className:"h-full bg-brand-500 transition-all duration-300 ease-out",style:{width:`${(r+1)/A.length*100}%`}})}),f.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600",children:""}),f.jsxs("div",{className:"mt-6 mb-6",children:[f.jsxs("span",{className:"text-xs font-bold text-brand-600 tracking-wider uppercase",children:["Question ",r+1," of ",A.length]}),f.jsx("h2",{className:"text-xl font-bold text-slate-900 mt-2",children:Y.question}),f.jsxs("div",{className:"mt-4 bg-blue-50 p-3 rounded-lg flex items-start gap-3 text-blue-800 text-sm",children:[f.jsx(Wb,{className:"h-5 w-5 shrink-0 mt-0.5"}),f.jsx("p",{children:Y.explanation})]})]}),f.jsx("div",{className:"space-y-4 mb-8",children:f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsx("button",{onClick:()=>R(!0),className:`py-4 px-6 rounded-xl border-2 font-bold transition-all ${u[Y.key]===!0?"border-brand-500 bg-brand-50 text-brand-700":"border-slate-200 hover:border-slate-300 text-slate-600"}`,children:"Yes"}),f.jsx("button",{onClick:()=>R(!1),className:`py-4 px-6 rounded-xl border-2 font-bold transition-all ${u[Y.key]===!1?"border-brand-500 bg-brand-50 text-brand-700":"border-slate-200 hover:border-slate-300 text-slate-600"}`,children:"No"})]})}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("button",{onClick:()=>l(r-1),disabled:r===0,className:"p-2 rounded-lg text-slate-400 hover:text-slate-600 disabled:opacity-0",children:f.jsx(lC,{className:"h-6 w-6"})}),f.jsxs("button",{onClick:M,disabled:!ce,className:"bg-brand-500 hover:bg-brand-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-xl font-bold shadow-md transition-all flex items-center gap-2",children:[r===A.length-1?"Finish":"Next",f.jsx(uC,{className:"h-4 w-4"})]})]})]})})}let O4={data:""},M4=i=>{if(typeof window=="object"){let e=(i?i.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(i||document.head).appendChild(e),e.firstChild}return i||O4},V4=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,z4=/\/\*[^]*?\*\/|  +/g,Uw=/\n+/g,yo=(i,e)=>{let t="",r="",l="";for(let u in i){let d=i[u];u[0]=="@"?u[1]=="i"?t=u+" "+d+";":r+=u[1]=="f"?yo(d,u):u+"{"+yo(d,u[1]=="k"?"":e)+"}":typeof d=="object"?r+=yo(d,e?e.replace(/([^,])+/g,y=>u.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,v=>/&/.test(v)?v.replace(/&/g,y):y?y+" "+v:v)):u):d!=null&&(u=/^--/.test(u)?u:u.replace(/[A-Z]/g,"-$&").toLowerCase(),l+=yo.p?yo.p(u,d):u+":"+d+";")}return t+(e&&l?e+"{"+l+"}":l)+r},aa={},SS=i=>{if(typeof i=="object"){let e="";for(let t in i)e+=t+SS(i[t]);return e}return i},U4=(i,e,t,r,l)=>{let u=SS(i),d=aa[u]||(aa[u]=(v=>{let b=0,S=11;for(;b<v.length;)S=101*S+v.charCodeAt(b++)>>>0;return"go"+S})(u));if(!aa[d]){let v=u!==i?i:(b=>{let S,A,R=[{}];for(;S=V4.exec(b.replace(z4,""));)S[4]?R.shift():S[3]?(A=S[3].replace(Uw," ").trim(),R.unshift(R[0][A]=R[0][A]||{})):R[0][S[1]]=S[2].replace(Uw," ").trim();return R[0]})(i);aa[d]=yo(l?{["@keyframes "+d]:v}:v,t?"":"."+d)}let y=t&&aa.g?aa.g:null;return t&&(aa.g=aa[d]),((v,b,S,A)=>{A?b.data=b.data.replace(A,v):b.data.indexOf(v)===-1&&(b.data=S?v+b.data:b.data+v)})(aa[d],e,r,y),d},B4=(i,e,t)=>i.reduce((r,l,u)=>{let d=e[u];if(d&&d.call){let y=d(t),v=y&&y.props&&y.props.className||/^go/.test(y)&&y;d=v?"."+v:y&&typeof y=="object"?y.props?"":yo(y,""):y===!1?"":y}return r+l+(d??"")},"");function wm(i){let e=this||{},t=i.call?i(e.p):i;return U4(t.unshift?t.raw?B4(t,[].slice.call(arguments,1),e.p):t.reduce((r,l)=>Object.assign(r,l&&l.call?l(e.p):l),{}):t,M4(e.target),e.g,e.o,e.k)}let AS,p_,g_;wm.bind({g:1});let Ta=wm.bind({k:1});function H4(i,e,t,r){yo.p=e,AS=i,p_=t,g_=r}function Po(i,e){let t=this||{};return function(){let r=arguments;function l(u,d){let y=Object.assign({},u),v=y.className||l.className;t.p=Object.assign({theme:p_&&p_()},y),t.o=/ *go\d+/.test(v),y.className=wm.apply(t,r)+(v?" "+v:"");let b=i;return i[0]&&(b=y.as||i,delete y.as),g_&&b[0]&&g_(y),AS(b,y)}return l}}var q4=i=>typeof i=="function",qf=(i,e)=>q4(i)?i(e):i,F4=(()=>{let i=0;return()=>(++i).toString()})(),NS=(()=>{let i;return()=>{if(i===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");i=!e||e.matches}return i}})(),G4=20,Cy="default",CS=(i,e)=>{let{toastLimit:t}=i.settings;switch(e.type){case 0:return{...i,toasts:[e.toast,...i.toasts].slice(0,t)};case 1:return{...i,toasts:i.toasts.map(d=>d.id===e.toast.id?{...d,...e.toast}:d)};case 2:let{toast:r}=e;return CS(i,{type:i.toasts.find(d=>d.id===r.id)?1:0,toast:r});case 3:let{toastId:l}=e;return{...i,toasts:i.toasts.map(d=>d.id===l||l===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return e.toastId===void 0?{...i,toasts:[]}:{...i,toasts:i.toasts.filter(d=>d.id!==e.toastId)};case 5:return{...i,pausedAt:e.time};case 6:let u=e.time-(i.pausedAt||0);return{...i,pausedAt:void 0,toasts:i.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+u}))}}},gf=[],RS={toasts:[],pausedAt:void 0,settings:{toastLimit:G4}},wr={},IS=(i,e=Cy)=>{wr[e]=CS(wr[e]||RS,i),gf.forEach(([t,r])=>{t===e&&r(wr[e])})},kS=i=>Object.keys(wr).forEach(e=>IS(i,e)),Z4=i=>Object.keys(wr).find(e=>wr[e].toasts.some(t=>t.id===i)),Em=(i=Cy)=>e=>{IS(e,i)},K4={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Y4=(i={},e=Cy)=>{let[t,r]=k.useState(wr[e]||RS),l=k.useRef(wr[e]);k.useEffect(()=>(l.current!==wr[e]&&r(wr[e]),gf.push([e,r]),()=>{let d=gf.findIndex(([y])=>y===e);d>-1&&gf.splice(d,1)}),[e]);let u=t.toasts.map(d=>{var y,v,b;return{...i,...i[d.type],...d,removeDelay:d.removeDelay||((y=i[d.type])==null?void 0:y.removeDelay)||i?.removeDelay,duration:d.duration||((v=i[d.type])==null?void 0:v.duration)||i?.duration||K4[d.type],style:{...i.style,...(b=i[d.type])==null?void 0:b.style,...d.style}}});return{...t,toasts:u}},$4=(i,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:i,pauseDuration:0,...t,id:t?.id||F4()}),Uh=i=>(e,t)=>{let r=$4(e,i,t);return Em(r.toasterId||Z4(r.id))({type:2,toast:r}),r.id},Ve=(i,e)=>Uh("blank")(i,e);Ve.error=Uh("error");Ve.success=Uh("success");Ve.loading=Uh("loading");Ve.custom=Uh("custom");Ve.dismiss=(i,e)=>{let t={type:3,toastId:i};e?Em(e)(t):kS(t)};Ve.dismissAll=i=>Ve.dismiss(void 0,i);Ve.remove=(i,e)=>{let t={type:4,toastId:i};e?Em(e)(t):kS(t)};Ve.removeAll=i=>Ve.remove(void 0,i);Ve.promise=(i,e,t)=>{let r=Ve.loading(e.loading,{...t,...t?.loading});return typeof i=="function"&&(i=i()),i.then(l=>{let u=e.success?qf(e.success,l):void 0;return u?Ve.success(u,{id:r,...t,...t?.success}):Ve.dismiss(r),l}).catch(l=>{let u=e.error?qf(e.error,l):void 0;u?Ve.error(u,{id:r,...t,...t?.error}):Ve.dismiss(r)}),i};var Q4=1e3,W4=(i,e="default")=>{let{toasts:t,pausedAt:r}=Y4(i,e),l=k.useRef(new Map).current,u=k.useCallback((A,R=Q4)=>{if(l.has(A))return;let M=setTimeout(()=>{l.delete(A),d({type:4,toastId:A})},R);l.set(A,M)},[]);k.useEffect(()=>{if(r)return;let A=Date.now(),R=t.map(M=>{if(M.duration===1/0)return;let G=(M.duration||0)+M.pauseDuration-(A-M.createdAt);if(G<0){M.visible&&Ve.dismiss(M.id);return}return setTimeout(()=>Ve.dismiss(M.id,e),G)});return()=>{R.forEach(M=>M&&clearTimeout(M))}},[t,r,e]);let d=k.useCallback(Em(e),[e]),y=k.useCallback(()=>{d({type:5,time:Date.now()})},[d]),v=k.useCallback((A,R)=>{d({type:1,toast:{id:A,height:R}})},[d]),b=k.useCallback(()=>{r&&d({type:6,time:Date.now()})},[r,d]),S=k.useCallback((A,R)=>{let{reverseOrder:M=!1,gutter:G=8,defaultPosition:K}=R||{},Y=t.filter(se=>(se.position||K)===(A.position||K)&&se.height),ce=Y.findIndex(se=>se.id===A.id),ae=Y.filter((se,ke)=>ke<ce&&se.visible).length;return Y.filter(se=>se.visible).slice(...M?[ae+1]:[0,ae]).reduce((se,ke)=>se+(ke.height||0)+G,0)},[t]);return k.useEffect(()=>{t.forEach(A=>{if(A.dismissed)u(A.id,A.removeDelay);else{let R=l.get(A.id);R&&(clearTimeout(R),l.delete(A.id))}})},[t,u]),{toasts:t,handlers:{updateHeight:v,startPause:y,endPause:b,calculateOffset:S}}},X4=Ta`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,J4=Ta`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,e5=Ta`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,t5=Po("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${X4} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${J4} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${i=>i.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${e5} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,n5=Ta`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,i5=Po("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${i=>i.secondary||"#e0e0e0"};
  border-right-color: ${i=>i.primary||"#616161"};
  animation: ${n5} 1s linear infinite;
`,s5=Ta`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,r5=Ta`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,a5=Po("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${s5} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${r5} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${i=>i.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,o5=Po("div")`
  position: absolute;
`,l5=Po("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,c5=Ta`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,u5=Po("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${c5} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,h5=({toast:i})=>{let{icon:e,type:t,iconTheme:r}=i;return e!==void 0?typeof e=="string"?k.createElement(u5,null,e):e:t==="blank"?null:k.createElement(l5,null,k.createElement(i5,{...r}),t!=="loading"&&k.createElement(o5,null,t==="error"?k.createElement(t5,{...r}):k.createElement(a5,{...r})))},d5=i=>`
0% {transform: translate3d(0,${i*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,f5=i=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${i*-150}%,-1px) scale(.6); opacity:0;}
`,m5="0%{opacity:0;} 100%{opacity:1;}",p5="0%{opacity:1;} 100%{opacity:0;}",g5=Po("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,_5=Po("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,y5=(i,e)=>{let t=i.includes("top")?1:-1,[r,l]=NS()?[m5,p5]:[d5(t),f5(t)];return{animation:e?`${Ta(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ta(l)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},v5=k.memo(({toast:i,position:e,style:t,children:r})=>{let l=i.height?y5(i.position||e||"top-center",i.visible):{opacity:0},u=k.createElement(h5,{toast:i}),d=k.createElement(_5,{...i.ariaProps},qf(i.message,i));return k.createElement(g5,{className:i.className,style:{...l,...t,...i.style}},typeof r=="function"?r({icon:u,message:d}):k.createElement(k.Fragment,null,u,d))});H4(k.createElement);var b5=({id:i,className:e,style:t,onHeightUpdate:r,children:l})=>{let u=k.useCallback(d=>{if(d){let y=()=>{let v=d.getBoundingClientRect().height;r(i,v)};y(),new MutationObserver(y).observe(d,{subtree:!0,childList:!0,characterData:!0})}},[i,r]);return k.createElement("div",{ref:u,className:e,style:t},l)},x5=(i,e)=>{let t=i.includes("top"),r=t?{top:0}:{bottom:0},l=i.includes("center")?{justifyContent:"center"}:i.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:NS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...r,...l}},w5=wm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,tf=16,Bh=({reverseOrder:i,position:e="top-center",toastOptions:t,gutter:r,children:l,toasterId:u,containerStyle:d,containerClassName:y})=>{let{toasts:v,handlers:b}=W4(t,u);return k.createElement("div",{"data-rht-toaster":u||"",style:{position:"fixed",zIndex:9999,top:tf,left:tf,right:tf,bottom:tf,pointerEvents:"none",...d},className:y,onMouseEnter:b.startPause,onMouseLeave:b.endPause},v.map(S=>{let A=S.position||e,R=b.calculateOffset(S,{reverseOrder:i,gutter:r,defaultPosition:e}),M=x5(A,R);return k.createElement(b5,{id:S.id,key:S.id,onHeightUpdate:b.updateHeight,className:S.visible?w5:"",style:M},S.type==="custom"?qf(S.message,S):l?l(S):k.createElement(v5,{toast:S,position:A}))}))};function E5(){const{currentUser:i}=jr(),[e,t]=k.useState(null),[r,l]=k.useState(!0),[u,d]=k.useState(!1),[y,v]=k.useState(!1),[b,S]=k.useState([]),[A,R]=k.useState(!1),[M,G]=k.useState([]),[K,Y]=k.useState([]),[ce,ae]=k.useState("hospital"),[se,ke]=k.useState(""),[be,Ne]=k.useState(null),[P,j]=k.useState([]),[O,q]=k.useState({venueId:"",venueName:"",venueType:"",date:"",timeSlot:""}),[U,Z]=k.useState(!1),[z,We]=k.useState(!1),[At,re]=k.useState(null),[ue,_e]=k.useState(""),[Ye,Ee]=k.useState(""),[B,le]=k.useState("");k.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(xe=>{Ne({lat:xe.coords.latitude,lng:xe.coords.longitude})},xe=>{console.log("Location access denied or error:",xe)})},[]);const ve=(xe,De,rt,Ln)=>{const Is=ye(rt-xe),Li=ye(Ln-De),ns=Math.sin(Is/2)*Math.sin(Is/2)+Math.cos(ye(xe))*Math.cos(ye(rt))*Math.sin(Li/2)*Math.sin(Li/2);return(6371*(2*Math.atan2(Math.sqrt(ns),Math.sqrt(1-ns)))).toFixed(1)},ye=xe=>xe*(Math.PI/180);k.useEffect(()=>{let xe;async function De(){i?xe=FM(i.uid,rt=>{t(rt),l(!1)}):l(!1)}return De(),()=>{xe&&xe()}},[i,y]),k.useEffect(()=>{async function xe(){if(i&&e?.isDonor)try{const De=await Lg(i.uid);j(De);const rt=await d4();G(rt)}catch(De){console.error("Error loading dashboard data:",De)}}xe()},[i,e]),k.useEffect(()=>{let xe=M.filter(De=>De.type===ce);if(se){const De=se.toLowerCase();xe=xe.filter(rt=>typeof rt.address=="string"&&rt.address.toLowerCase().includes(De)||rt.name.toLowerCase().includes(De))}be&&(xe=xe.map(De=>{let rt=null;return De.location&&De.location.lat&&De.location.lng&&(rt=parseFloat(ve(be.lat,be.lng,De.location.lat,De.location.lng))),{...De,distance:rt}}).sort((De,rt)=>De.distance!==null&&rt.distance!==null?De.distance-rt.distance:De.distance!==null?-1:rt.distance!==null?1:0)),Y(xe)},[M,ce,se,be]),k.useEffect(()=>{if(!i)return;const xe=n4(i.uid,De=>{if(De.length>b.length&&De.length>0){const rt=De[0];Ve(Ln=>f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"bg-red-100 p-2 rounded-full",children:f.jsx(Sh,{className:"h-6 w-6 text-red-600"})}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-slate-900",children:"Urgent Request!"}),f.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[rt.seekerName," needs ",rt.bloodType," blood."]})]})]}),{duration:5e3,position:"top-right"})}S(De)});return()=>xe()},[i,b.length]);const Se=async(xe,De)=>{try{const rt=De==="accepted"&&e?.donorProfile?.phone||null;if(await s4(xe,De,rt),De==="accepted"){Ve.success("Request accepted! Seeker will be notified.");const Ln=b.find(ii=>ii.id===xe);Ln&&Ln.seekerId&&P4(Ln.seekerId,{name:e.name||"A Donor",phone:rt,bloodType:e.donorProfile?.bloodType||"Unknown"})}else Ve.success("Request rejected.")}catch(rt){console.error("Error updating request:",rt),Ve.error("Failed to update request.")}},Ae=async xe=>{xe.preventDefault();try{await GM(i.uid,{bloodType:ue,phone:Ye,city:B});const De=await $c(i.uid);t(De),d(!1)}catch(De){console.error("Error registering as donor:",De)}},ie=async xe=>{const De=await $c(i.uid);t(De)},Ue=async xe=>{if(xe.preventDefault(),!O.venueId||!O.date||!O.timeSlot){Ve.error("Please fill in all fields");return}Z(!0);try{await f4({donorId:i.uid,donorName:e.name,...O}),Ve.success("Appointment Scheduled Successfully!"),R(!1);const De=await Lg(i.uid);j(De),q({venueId:"",venueName:"",venueType:"",date:"",timeSlot:""})}catch(De){Ve.error(De.message||"Failed to book appointment")}Z(!1)},qe=async xe=>{if(window.confirm("Are you sure you want to cancel this appointment?"))try{await m4(xe),Ve.success("Appointment cancelled");const De=await Lg(i.uid);j(De)}catch{Ve.error("Failed to cancel")}};return r?f.jsx("div",{className:"p-8 text-center",children:"Loading..."}):i?f.jsxs("div",{className:"min-h-screen bg-slate-50 py-12 px-4 sm:px-6 lg:px-8",children:[A&&f.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6 relative animate-in fade-in zoom-in-95 max-h-[90vh] overflow-y-auto",children:[f.jsx("button",{onClick:()=>R(!1),className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600 z-20",children:f.jsx(Ah,{className:"h-6 w-6"})}),f.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-2 sticky top-0 bg-white z-10 pb-2",children:[f.jsx(ts,{className:"h-6 w-6 text-brand-500"}),"Schedule Donation"]}),f.jsxs("form",{onSubmit:Ue,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Select Venue"}),f.jsxs("div",{className:"flex p-1 bg-slate-100 rounded-xl mb-4",children:[f.jsx("button",{type:"button",onClick:()=>ae("hospital"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${ce==="hospital"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Hospitals"}),f.jsx("button",{type:"button",onClick:()=>ae("camp"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${ce==="camp"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Upcoming Camps"})]}),f.jsxs("div",{className:"relative mb-4",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(ji,{className:"h-4 w-4 text-slate-400"})}),f.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 rounded-xl border border-slate-200 focus:border-brand-500 outline-none text-sm",placeholder:"Filter by City or Area...",value:se,onChange:xe=>ke(xe.target.value)})]}),f.jsx("div",{className:"space-y-2 max-h-[250px] overflow-y-auto pr-1",children:K.length>0?K.map(xe=>f.jsxs("div",{onClick:()=>{q({...O,venueId:xe.id,venueName:xe.name,venueType:xe.type})},className:`p-3 rounded-xl border cursor-pointer transition-all hover:border-brand-300 relative ${O.venueId===xe.id?"border-brand-500 bg-brand-50 ring-1 ring-brand-500":"border-slate-200 bg-white"}`,children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-slate-900 text-sm",children:xe.name}),f.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:typeof xe.address=="string"?xe.address:"View Map for Location"})]}),xe.distance&&f.jsxs("span",{className:"text-xs font-bold text-blue-600 whitespace-nowrap bg-blue-50 px-2 py-0.5 rounded-full",children:[xe.distance," km"]})]}),O.venueId===xe.id&&f.jsx("div",{className:"absolute top-3 right-3 text-brand-500",children:f.jsx(ha,{className:"h-5 w-5 fill-brand-100"})})]},xe.id)):f.jsxs("div",{className:"text-center py-8 bg-slate-50 rounded-xl border border-dashed border-slate-200",children:[f.jsx(ji,{className:"h-8 w-8 text-slate-300 mx-auto mb-2"}),f.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No registered venues found in this area yet."}),f.jsx("p",{className:"text-xs text-slate-400",children:"Try a different search term."})]})})]}),f.jsxs("div",{className:`transition-all duration-300 ${O.venueId?"opacity-100":"opacity-50 pointer-events-none grayscale"}`,children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date"}),f.jsx("input",{type:"date",required:!!O.venueId,min:new Date().toISOString().split("T")[0],className:"w-full p-2.5 rounded-xl border border-slate-200 focus:border-brand-500 outline-none text-sm",value:O.date,onChange:xe=>q({...O,date:xe.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Time Slot"}),f.jsxs("select",{className:"w-full p-2.5 rounded-xl border border-slate-200 focus:border-brand-500 outline-none text-sm",value:O.timeSlot,onChange:xe=>q({...O,timeSlot:xe.target.value}),required:!!O.venueId,children:[f.jsx("option",{value:"",children:"Select Time"}),f.jsx("option",{value:"10:00 AM",children:"10:00 AM"}),f.jsx("option",{value:"01:00 PM",children:"01:00 PM"}),f.jsx("option",{value:"04:00 PM",children:"04:00 PM"})]})]})]}),f.jsx("button",{type:"submit",disabled:U||!O.venueId,className:"w-full py-3 bg-brand-500 hover:bg-brand-600 text-white rounded-xl font-bold shadow-md transition-all disabled:opacity-70 flex items-center justify-center gap-2",children:U?"Checking Availability...":"Confirm Booking"})]})]})]})}),f.jsx(Bh,{}),y&&f.jsx(L4,{userId:i.uid,onComplete:ie,onClose:()=>v(!1)}),z&&At&&f.jsx(A5,{donorName:e.name,venueName:At.venueName,date:At.date,onClose:()=>We(!1)}),f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[f.jsxs("div",{children:[f.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["Welcome back, ",e.name]}),f.jsx("p",{className:"text-slate-600 mt-1",children:"Here's your donation activity and health overview."})]}),e?.isDonor&&f.jsxs("div",{className:"flex gap-3",children:[e?.isEligible?f.jsxs("button",{onClick:()=>R(!0),className:"bg-brand-500 hover:bg-brand-600 text-white px-6 py-2.5 rounded-xl font-medium shadow-sm transition-colors flex items-center gap-2",children:[f.jsx(ts,{className:"h-4 w-4"}),"Schedule Donation"]}):f.jsxs("button",{onClick:()=>v(!0),className:"bg-slate-200 text-slate-500 px-6 py-2.5 rounded-xl font-medium flex items-center gap-2 cursor-not-allowed",title:"You must pass the eligibility quiz first",children:[f.jsx(zc,{className:"h-4 w-4"}),"Donate Now"]}),!e?.isEligible&&f.jsxs("button",{onClick:()=>v(!0),className:"bg-white border-2 border-brand-100 text-brand-600 hover:bg-brand-50 px-6 py-2.5 rounded-xl font-bold transition-colors flex items-center gap-2",children:[f.jsx(ha,{className:"h-4 w-4"}),"Check Eligibility"]}),e?.isEligible&&f.jsxs("button",{onClick:()=>v(!0),className:"bg-white border-2 border-brand-100 text-brand-600 hover:bg-brand-50 px-6 py-2.5 rounded-xl font-bold transition-colors flex items-center gap-2",children:[f.jsx(pE,{className:"h-4 w-4"}),"Re-check Eligibility"]})]})]}),e?.isDonor&&f.jsx(T5,{upcomingAppointments:P,handleCancelAppointment:qe}),e?.isDonor&&b.length>0&&f.jsxs("div",{className:"mb-8",children:[f.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[f.jsx(Bg,{className:"h-5 w-5 text-red-600"}),"Incoming Requests (",b.length,")"]}),f.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:b.map(xe=>f.jsxs("div",{className:"bg-white border-l-4 border-red-500 rounded-xl p-5 shadow-sm flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 animate-in slide-in-from-top-2",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"bg-red-100 text-red-700 text-xs font-bold px-2 py-0.5 rounded-full",children:"URGENT"}),f.jsx("span",{className:"text-slate-400 text-xs",children:new Date(xe.createdAt).toLocaleTimeString()})]}),f.jsxs("h3",{className:"font-bold text-lg text-slate-900",children:[xe.seekerName," needs ",xe.bloodType]}),f.jsx("p",{className:"text-sm text-slate-500",children:"Please help if you are available."})]}),f.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[f.jsx("button",{onClick:()=>Se(xe.id,"rejected"),className:"flex-1 sm:flex-none px-4 py-2 border border-slate-200 text-slate-600 rounded-lg text-sm font-bold hover:bg-slate-50 transition-colors",children:"Decline"}),f.jsx("button",{onClick:()=>Se(xe.id,"accepted"),className:"flex-1 sm:flex-none px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-bold hover:bg-red-700 shadow-md shadow-red-100 transition-colors",children:"Accept & Help"})]})]},xe.id))})]}),e?.isDonor?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[f.jsx(Mg,{icon:f.jsx(ya,{className:"h-6 w-6 text-white"}),iconBg:"bg-brand-500",label:"Blood Type",value:e.donorProfile.bloodType,subtext:"Universal Donor"}),f.jsx(Mg,{icon:f.jsx(Pi,{className:"h-6 w-6 text-white"}),iconBg:"bg-blue-500",label:"Total Donations",value:e.donorProfile.totalDonations,subtext:"Lives Saved: ~0"}),f.jsx(Mg,{icon:f.jsx(da,{className:"h-6 w-6 text-white"}),iconBg:"bg-emerald-500",label:"Next Eligible",value:e.isEligible?"Now":"N/A",subtext:e.isEligible?"You can donate now":"Not eligible to donate",isHighlight:!!e.isEligible})]}),f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:[f.jsx("div",{className:"px-6 py-5 border-b border-slate-100 flex justify-between items-center",children:f.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Donation History"})}),e.donationHistory&&e.donationHistory.length>0?f.jsx("div",{className:"divide-y divide-slate-100",children:[...e.donationHistory].sort((xe,De)=>new Date(De.date)-new Date(xe.date)).map((xe,De)=>f.jsxs("div",{className:"p-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 hover:bg-slate-50 transition-colors",children:[f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"bg-emerald-100 p-3 rounded-full text-emerald-600",children:f.jsx(ha,{className:"h-6 w-6"})}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-slate-900 text-lg",children:xe.venueName}),f.jsxs("p",{className:"text-sm text-slate-500 flex items-center gap-1 mt-1",children:[f.jsx(ts,{className:"h-3.5 w-3.5"}),new Date(xe.date).toLocaleDateString()]})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("span",{className:"px-3 py-1 rounded-full bg-red-100 text-red-700 font-bold text-sm border border-red-200",children:["Blood Type: ",xe.bloodType]}),f.jsx("span",{className:"px-3 py-1 rounded-full bg-emerald-100 text-emerald-700 font-bold text-sm",children:"Success"}),f.jsx("button",{onClick:()=>{re(xe),We(!0)},className:"p-2 rounded-full bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors",title:"View Certificate",children:f.jsx(mE,{className:"h-5 w-5"})})]})]},De))}):f.jsxs("div",{className:"p-8 text-center text-slate-500",children:[f.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-3",children:f.jsx(ya,{className:"h-8 w-8 text-slate-300"})}),f.jsx("p",{className:"font-medium text-slate-600",children:"Your hero journey starts here!"}),f.jsx("p",{className:"text-sm mt-1",children:"Complete a donation to see your history."})]})]})]}):f.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-slate-100 text-center max-w-2xl mx-auto",children:u?f.jsxs("form",{onSubmit:Ae,className:"text-left space-y-4",children:[f.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Donor Registration"}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Blood Type"}),f.jsxs("select",{required:!0,className:"w-full p-3 rounded-xl border border-slate-200 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 outline-none",value:ue,onChange:xe=>_e(xe.target.value),children:[f.jsx("option",{value:"",children:"Select Blood Type"}),f.jsx("option",{value:"A+",children:"A+"}),f.jsx("option",{value:"A-",children:"A-"}),f.jsx("option",{value:"B+",children:"B+"}),f.jsx("option",{value:"B-",children:"B-"}),f.jsx("option",{value:"AB+",children:"AB+"}),f.jsx("option",{value:"AB-",children:"AB-"}),f.jsx("option",{value:"O+",children:"O+"}),f.jsx("option",{value:"O-",children:"O-"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"City"}),f.jsx("input",{type:"text",required:!0,className:"w-full p-3 rounded-xl border border-slate-200 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 outline-none",value:B,onChange:xe=>le(xe.target.value),placeholder:"e.g. New York"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Phone Number"}),f.jsx("input",{type:"tel",required:!0,className:"w-full p-3 rounded-xl border border-slate-200 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 outline-none",value:Ye,onChange:xe=>Ee(xe.target.value),placeholder:"+1 234 567 8900"})]}),f.jsxs("div",{className:"flex gap-3 pt-2",children:[f.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-4 py-3 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition-all",children:"Cancel"}),f.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 rounded-xl font-bold text-white bg-brand-500 hover:bg-brand-600 shadow-md transition-all",children:"Complete Registration"})]})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4",children:f.jsx(S5,{className:"h-8 w-8 text-brand-500"})}),f.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Become a Donor"}),f.jsx("p",{className:"text-slate-600 mb-6",children:"Join our community of life-savers. Registering as a donor takes less than a minute."}),f.jsx("button",{onClick:()=>d(!0),className:"bg-brand-500 hover:bg-brand-600 text-white px-8 py-3 rounded-xl font-bold shadow-lg shadow-brand-200 transition-all",children:"Register Now"})]})})]})]}):f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Please Log In"}),f.jsx("p",{className:"text-slate-600 mt-2",children:"You need to be logged in to access the dashboard."})]})})}function T5({upcomingAppointments:i,handleCancelAppointment:e}){const[t,r]=k.useState("upcoming"),l=i.filter(u=>t==="upcoming"?u.status==="scheduled":u.status==="cancelled"||u.status==="no-show");return i.length===0?null:f.jsxs("div",{className:"mb-8",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4",children:[f.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[f.jsx(ts,{className:"h-5 w-5 text-brand-500"}),"My Appointments"]}),f.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:[f.jsx("button",{onClick:()=>r("upcoming"),className:`px-4 py-1.5 rounded-lg text-sm font-bold transition-all ${t==="upcoming"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Upcoming"}),f.jsx("button",{onClick:()=>r("cancelled"),className:`px-4 py-1.5 rounded-lg text-sm font-bold transition-all ${t==="cancelled"?"bg-white text-red-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Cancelled / Missed"})]})]}),l.length===0?f.jsx("div",{className:"bg-white rounded-xl p-8 border border-dashed border-slate-200 text-center",children:f.jsxs("p",{className:"text-slate-500 font-medium",children:["No ",t," appointments found."]})}):f.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:l.map(u=>f.jsxs("div",{className:`bg-white rounded-xl p-5 shadow-sm border flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 ${u.status==="cancelled"||u.status==="no-show"?"border-red-100 opacity-80":"border-slate-100"}`,children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${u.status==="scheduled"?"bg-green-100 text-green-700":u.status==="cancelled"?"bg-red-100 text-red-600":"bg-slate-200 text-slate-600"}`,children:u.status.toUpperCase()}),f.jsxs("span",{className:"text-slate-500 text-sm flex items-center gap-1",children:[f.jsx(da,{className:"h-3 w-3"}),new Date(u.date).toLocaleDateString()," @ ",u.timeSlot]})]}),f.jsx("h3",{className:"font-bold text-lg text-slate-900",children:u.venueName}),f.jsxs("p",{className:"text-sm text-slate-500 flex items-center gap-1 mt-1",children:[f.jsx(ji,{className:"h-3 w-3"})," ",u.venueType==="hospital"?"Hospital Visit":"Donation Camp"]})]}),u.status==="scheduled"&&f.jsx("button",{onClick:()=>e(u.id),className:"px-4 py-2 border border-red-200 text-red-600 rounded-lg text-sm font-bold hover:bg-red-50 transition-colors",children:"Cancel"})]},u.id))})]})}function Mg({icon:i,iconBg:e,label:t,value:r,subtext:l,isHighlight:u}){return f.jsxs("div",{className:`bg-white rounded-2xl p-6 shadow-sm border ${u?"border-emerald-200 ring-2 ring-emerald-50":"border-slate-100"}`,children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-slate-500",children:t}),f.jsx("p",{className:"mt-2 text-3xl font-bold text-slate-900",children:r})]}),f.jsx("div",{className:`h-12 w-12 rounded-xl flex items-center justify-center shadow-sm ${e}`,children:i})]}),f.jsx("div",{className:"mt-4",children:f.jsx("p",{className:`text-sm ${u?"text-emerald-600 font-medium":"text-slate-400"}`,children:l})})]})}function S5({className:i}){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:f.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})})}function A5({donorName:i,venueName:e,date:t,onClose:r}){const l=()=>{window.print()};return f.jsxs("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4 print:p-0 print:bg-white print:fixed print:inset-0",children:[f.jsx("style",{children:`
                    @media print {
                        body * {
                            visibility: hidden;
                        }
                        #certificate-container, #certificate-container * {
                            visibility: visible;
                        }
                        #certificate-container {
                            position: absolute;
                            left: 0;
                            top: 0;
                            width: 100%;
                            height: 100%;
                            margin: 0;
                            padding: 0;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            background: white;
                            border: none !important;
                        }
                        #certificate-content {
                            border: 4px solid #0f172a !important; 
                            width: 100%;
                            max-width: 800px;
                            margin: 20px;
                        }
                        .no-print {
                            display: none !important;
                        }
                    }
                `}),f.jsxs("div",{id:"certificate-container",className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl relative animate-in zoom-in-95 border-8 border-double border-slate-200 p-2",children:[f.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600 z-10 no-print",children:f.jsx(Ah,{className:"h-8 w-8"})}),f.jsxs("div",{id:"certificate-content",className:"border-4 border-slate-900 p-8 md:p-12 text-center bg-slate-50 relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 border-t-4 border-l-4 border-brand-500 -mt-2 -ml-2"}),f.jsx("div",{className:"absolute bottom-0 right-0 w-32 h-32 border-b-4 border-r-4 border-brand-500 -mb-2 -mr-2"}),f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 border-t-4 border-r-4 border-brand-500 -mt-2 -mr-2"}),f.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 border-b-4 border-l-4 border-brand-500 -mb-2 -ml-2"}),f.jsxs("div",{className:"relative z-10",children:[f.jsxs("div",{className:"flex justify-center mb-4 relative",children:[f.jsx(mE,{className:"h-20 w-20 text-brand-500"}),f.jsx(nC,{className:"h-8 w-8 text-yellow-500 absolute -right-4 top-0 fill-yellow-100"})]}),f.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-bold text-slate-900 mb-2 uppercase tracking-wider",children:"Certificate"}),f.jsx("h2",{className:"text-xl md:text-2xl font-serif text-slate-600 mb-8 uppercase tracking-widest",children:"of Appreciation"}),f.jsx("p",{className:"text-lg text-slate-600 mb-2",children:"This certificate is proudly presented to"}),f.jsx("div",{className:"text-3xl md:text-4xl font-cursive text-brand-600 mb-6 font-bold italic py-2 border-b-2 border-slate-300 inline-block px-8",style:{fontFamily:"'Dancing Script', cursive"},children:i}),f.jsxs("p",{className:"text-lg text-slate-600 mb-12 max-w-lg mx-auto leading-relaxed",children:["For your selfless act of kindness and generosity in donating blood at ",f.jsx("strong",{children:e})," on ",f.jsx("strong",{children:new Date(t).toLocaleDateString()}),". Your contribution has helped save lives."]}),f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-end gap-8 mt-auto w-full px-8",children:[f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"text-xs text-slate-400 uppercase tracking-wider mb-1",children:"Certificate ID"}),f.jsxs("p",{className:"font-mono text-sm text-slate-600",children:["LF-",Math.random().toString(36).substr(2,9).toUpperCase()]}),f.jsx("p",{className:"text-xs text-slate-400 uppercase tracking-wider mt-2 mb-1",children:"Date of Issue"}),f.jsx("p",{className:"font-mono text-sm text-slate-600",children:new Date().toLocaleDateString()})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"mb-2",children:f.jsx("div",{className:"font-cursive text-2xl text-slate-800 transform -rotate-6",style:{fontFamily:"'Dancing Script', cursive"},children:"Dr. Sameer Kumar"})}),f.jsx("div",{className:"w-48 border-b border-slate-400 mb-2"}),f.jsx("p",{className:"text-xs font-bold uppercase text-slate-900 tracking-wider",children:"Chief Medical Officer"}),f.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"RedLife Foundation"})]})]})]})]}),f.jsx("div",{className:"mt-4 text-center no-print",children:f.jsxs("button",{onClick:l,className:"bg-brand-500 hover:bg-brand-600 text-white px-6 py-2.5 rounded-xl font-bold shadow-md transition-colors flex items-center gap-2 mx-auto",children:[f.jsx(yC,{className:"h-4 w-4"}),"Download Certificate"]})})]})]})}function DS(i,e){const t=k.useRef(e);k.useEffect(function(){e!==t.current&&i.attributionControl!=null&&(t.current!=null&&i.attributionControl.removeAttribution(t.current),e!=null&&i.attributionControl.addAttribution(e)),t.current=e},[i,e])}const N5=1;function C5(i){return Object.freeze({__version:N5,map:i})}function R5(i,e){return Object.freeze({...i,...e})}const Ry=k.createContext(null);function Iy(){const i=k.use(Ry);if(i==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return i}function I5(i){function e(t,r){const{instance:l,context:u}=i(t).current;k.useImperativeHandle(r,()=>l);const{children:d}=t;return d==null?null:yf.createElement(Ry,{value:u},d)}return k.forwardRef(e)}function k5(i){function e(t,r){const[l,u]=k.useState(!1),{instance:d}=i(t,u).current;k.useImperativeHandle(r,()=>d),k.useEffect(function(){l&&d.update()},[d,l,t.children]);const y=d._contentNode;return y?q2.createPortal(t.children,y):null}return k.forwardRef(e)}function D5(i){function e(t,r){const{instance:l}=i(t).current;return k.useImperativeHandle(r,()=>l),null}return k.forwardRef(e)}function jS(i,e){const t=k.useRef(void 0);k.useEffect(function(){return e!=null&&i.instance.on(e),t.current=e,function(){t.current!=null&&i.instance.off(t.current),t.current=null}},[i,e])}function ky(i,e){const t=i.pane??e.pane;return t?{...i,pane:t}:i}function j5(i,e){return function(r,l){const u=Iy(),d=i(ky(r,u),u);return DS(u.map,r.attribution),jS(d.current,r.eventHandlers),e(d.current,u,r,l),d}}var ih={exports:{}};var P5=ih.exports,Bw;function L5(){return Bw||(Bw=1,(function(i,e){(function(t,r){r(e)})(P5,(function(t){var r="1.9.4";function l(a){var c,p,x,E;for(p=1,x=arguments.length;p<x;p++){E=arguments[p];for(c in E)a[c]=E[c]}return a}var u=Object.create||(function(){function a(){}return function(c){return a.prototype=c,new a}})();function d(a,c){var p=Array.prototype.slice;if(a.bind)return a.bind.apply(a,p.call(arguments,1));var x=p.call(arguments,2);return function(){return a.apply(c,x.length?x.concat(p.call(arguments)):arguments)}}var y=0;function v(a){return"_leaflet_id"in a||(a._leaflet_id=++y),a._leaflet_id}function b(a,c,p){var x,E,C,V;return V=function(){x=!1,E&&(C.apply(p,E),E=!1)},C=function(){x?E=arguments:(a.apply(p,arguments),setTimeout(V,c),x=!0)},C}function S(a,c,p){var x=c[1],E=c[0],C=x-E;return a===x&&p?a:((a-E)%C+C)%C+E}function A(){return!1}function R(a,c){if(c===!1)return a;var p=Math.pow(10,c===void 0?6:c);return Math.round(a*p)/p}function M(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function G(a){return M(a).split(/\s+/)}function K(a,c){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?u(a.options):{});for(var p in c)a.options[p]=c[p];return a.options}function Y(a,c,p){var x=[];for(var E in a)x.push(encodeURIComponent(p?E.toUpperCase():E)+"="+encodeURIComponent(a[E]));return(!c||c.indexOf("?")===-1?"?":"&")+x.join("&")}var ce=/\{ *([\w_ -]+) *\}/g;function ae(a,c){return a.replace(ce,function(p,x){var E=c[x];if(E===void 0)throw new Error("No value provided for variable "+p);return typeof E=="function"&&(E=E(c)),E})}var se=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function ke(a,c){for(var p=0;p<a.length;p++)if(a[p]===c)return p;return-1}var be="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Ne(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var P=0;function j(a){var c=+new Date,p=Math.max(0,16-(c-P));return P=c+p,window.setTimeout(a,p)}var O=window.requestAnimationFrame||Ne("RequestAnimationFrame")||j,q=window.cancelAnimationFrame||Ne("CancelAnimationFrame")||Ne("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function U(a,c,p){if(p&&O===j)a.call(c);else return O.call(window,d(a,c))}function Z(a){a&&q.call(window,a)}var z={__proto__:null,extend:l,create:u,bind:d,get lastId(){return y},stamp:v,throttle:b,wrapNum:S,falseFn:A,formatNum:R,trim:M,splitWords:G,setOptions:K,getParamString:Y,template:ae,isArray:se,indexOf:ke,emptyImageUrl:be,requestFn:O,cancelFn:q,requestAnimFrame:U,cancelAnimFrame:Z};function We(){}We.extend=function(a){var c=function(){K(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=c.__super__=this.prototype,x=u(p);x.constructor=c,c.prototype=x;for(var E in this)Object.prototype.hasOwnProperty.call(this,E)&&E!=="prototype"&&E!=="__super__"&&(c[E]=this[E]);return a.statics&&l(c,a.statics),a.includes&&(At(a.includes),l.apply(null,[x].concat(a.includes))),l(x,a),delete x.statics,delete x.includes,x.options&&(x.options=p.options?u(p.options):{},l(x.options,a.options)),x._initHooks=[],x.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var C=0,V=x._initHooks.length;C<V;C++)x._initHooks[C].call(this)}},c},We.include=function(a){var c=this.prototype.options;return l(this.prototype,a),a.options&&(this.prototype.options=c,this.mergeOptions(a.options)),this},We.mergeOptions=function(a){return l(this.prototype.options,a),this},We.addInitHook=function(a){var c=Array.prototype.slice.call(arguments,1),p=typeof a=="function"?a:function(){this[a].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function At(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=se(a)?a:[a];for(var c=0;c<a.length;c++)a[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var re={on:function(a,c,p){if(typeof a=="object")for(var x in a)this._on(x,a[x],c);else{a=G(a);for(var E=0,C=a.length;E<C;E++)this._on(a[E],c,p)}return this},off:function(a,c,p){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var x in a)this._off(x,a[x],c);else{a=G(a);for(var E=arguments.length===1,C=0,V=a.length;C<V;C++)E?this._off(a[C]):this._off(a[C],c,p)}return this},_on:function(a,c,p,x){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(a,c,p)===!1){p===this&&(p=void 0);var E={fn:c,ctx:p};x&&(E.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(E)}},_off:function(a,c,p){var x,E,C;if(this._events&&(x=this._events[a],!!x)){if(arguments.length===1){if(this._firingCount)for(E=0,C=x.length;E<C;E++)x[E].fn=A;delete this._events[a];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var V=this._listens(a,c,p);if(V!==!1){var Q=x[V];this._firingCount&&(Q.fn=A,this._events[a]=x=x.slice()),x.splice(V,1)}}},fire:function(a,c,p){if(!this.listens(a,p))return this;var x=l({},c,{type:a,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var E=this._events[a];if(E){this._firingCount=this._firingCount+1||1;for(var C=0,V=E.length;C<V;C++){var Q=E[C],ee=Q.fn;Q.once&&this.off(a,ee,Q.ctx),ee.call(Q.ctx||this,x)}this._firingCount--}}return p&&this._propagateEvent(x),this},listens:function(a,c,p,x){typeof a!="string"&&console.warn('"string" type argument expected');var E=c;typeof c!="function"&&(x=!!c,E=void 0,p=void 0);var C=this._events&&this._events[a];if(C&&C.length&&this._listens(a,E,p)!==!1)return!0;if(x){for(var V in this._eventParents)if(this._eventParents[V].listens(a,c,p,x))return!0}return!1},_listens:function(a,c,p){if(!this._events)return!1;var x=this._events[a]||[];if(!c)return!!x.length;p===this&&(p=void 0);for(var E=0,C=x.length;E<C;E++)if(x[E].fn===c&&x[E].ctx===p)return E;return!1},once:function(a,c,p){if(typeof a=="object")for(var x in a)this._on(x,a[x],c,!0);else{a=G(a);for(var E=0,C=a.length;E<C;E++)this._on(a[E],c,p,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[v(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[v(a)],this},_propagateEvent:function(a){for(var c in this._eventParents)this._eventParents[c].fire(a.type,l({layer:a.target,propagatedFrom:a.target},a),!0)}};re.addEventListener=re.on,re.removeEventListener=re.clearAllEventListeners=re.off,re.addOneTimeEventListener=re.once,re.fireEvent=re.fire,re.hasEventListeners=re.listens;var ue=We.extend(re);function _e(a,c,p){this.x=p?Math.round(a):a,this.y=p?Math.round(c):c}var Ye=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};_e.prototype={clone:function(){return new _e(this.x,this.y)},add:function(a){return this.clone()._add(Ee(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(Ee(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new _e(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new _e(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ye(this.x),this.y=Ye(this.y),this},distanceTo:function(a){a=Ee(a);var c=a.x-this.x,p=a.y-this.y;return Math.sqrt(c*c+p*p)},equals:function(a){return a=Ee(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=Ee(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+R(this.x)+", "+R(this.y)+")"}};function Ee(a,c,p){return a instanceof _e?a:se(a)?new _e(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new _e(a.x,a.y):new _e(a,c,p)}function B(a,c){if(a)for(var p=c?[a,c]:a,x=0,E=p.length;x<E;x++)this.extend(p[x])}B.prototype={extend:function(a){var c,p;if(!a)return this;if(a instanceof _e||typeof a[0]=="number"||"x"in a)c=p=Ee(a);else if(a=le(a),c=a.min,p=a.max,!c||!p)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=p.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(a){return Ee((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return Ee(this.min.x,this.max.y)},getTopRight:function(){return Ee(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var c,p;return typeof a[0]=="number"||a instanceof _e?a=Ee(a):a=le(a),a instanceof B?(c=a.min,p=a.max):c=p=a,c.x>=this.min.x&&p.x<=this.max.x&&c.y>=this.min.y&&p.y<=this.max.y},intersects:function(a){a=le(a);var c=this.min,p=this.max,x=a.min,E=a.max,C=E.x>=c.x&&x.x<=p.x,V=E.y>=c.y&&x.y<=p.y;return C&&V},overlaps:function(a){a=le(a);var c=this.min,p=this.max,x=a.min,E=a.max,C=E.x>c.x&&x.x<p.x,V=E.y>c.y&&x.y<p.y;return C&&V},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var c=this.min,p=this.max,x=Math.abs(c.x-p.x)*a,E=Math.abs(c.y-p.y)*a;return le(Ee(c.x-x,c.y-E),Ee(p.x+x,p.y+E))},equals:function(a){return a?(a=le(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function le(a,c){return!a||a instanceof B?a:new B(a,c)}function ve(a,c){if(a)for(var p=c?[a,c]:a,x=0,E=p.length;x<E;x++)this.extend(p[x])}ve.prototype={extend:function(a){var c=this._southWest,p=this._northEast,x,E;if(a instanceof Se)x=a,E=a;else if(a instanceof ve){if(x=a._southWest,E=a._northEast,!x||!E)return this}else return a?this.extend(Ae(a)||ye(a)):this;return!c&&!p?(this._southWest=new Se(x.lat,x.lng),this._northEast=new Se(E.lat,E.lng)):(c.lat=Math.min(x.lat,c.lat),c.lng=Math.min(x.lng,c.lng),p.lat=Math.max(E.lat,p.lat),p.lng=Math.max(E.lng,p.lng)),this},pad:function(a){var c=this._southWest,p=this._northEast,x=Math.abs(c.lat-p.lat)*a,E=Math.abs(c.lng-p.lng)*a;return new ve(new Se(c.lat-x,c.lng-E),new Se(p.lat+x,p.lng+E))},getCenter:function(){return new Se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Se(this.getNorth(),this.getWest())},getSouthEast:function(){return new Se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof Se||"lat"in a?a=Ae(a):a=ye(a);var c=this._southWest,p=this._northEast,x,E;return a instanceof ve?(x=a.getSouthWest(),E=a.getNorthEast()):x=E=a,x.lat>=c.lat&&E.lat<=p.lat&&x.lng>=c.lng&&E.lng<=p.lng},intersects:function(a){a=ye(a);var c=this._southWest,p=this._northEast,x=a.getSouthWest(),E=a.getNorthEast(),C=E.lat>=c.lat&&x.lat<=p.lat,V=E.lng>=c.lng&&x.lng<=p.lng;return C&&V},overlaps:function(a){a=ye(a);var c=this._southWest,p=this._northEast,x=a.getSouthWest(),E=a.getNorthEast(),C=E.lat>c.lat&&x.lat<p.lat,V=E.lng>c.lng&&x.lng<p.lng;return C&&V},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,c){return a?(a=ye(a),this._southWest.equals(a.getSouthWest(),c)&&this._northEast.equals(a.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ye(a,c){return a instanceof ve?a:new ve(a,c)}function Se(a,c,p){if(isNaN(a)||isNaN(c))throw new Error("Invalid LatLng object: ("+a+", "+c+")");this.lat=+a,this.lng=+c,p!==void 0&&(this.alt=+p)}Se.prototype={equals:function(a,c){if(!a)return!1;a=Ae(a);var p=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return p<=(c===void 0?1e-9:c)},toString:function(a){return"LatLng("+R(this.lat,a)+", "+R(this.lng,a)+")"},distanceTo:function(a){return Ue.distance(this,Ae(a))},wrap:function(){return Ue.wrapLatLng(this)},toBounds:function(a){var c=180*a/40075017,p=c/Math.cos(Math.PI/180*this.lat);return ye([this.lat-c,this.lng-p],[this.lat+c,this.lng+p])},clone:function(){return new Se(this.lat,this.lng,this.alt)}};function Ae(a,c,p){return a instanceof Se?a:se(a)&&typeof a[0]!="object"?a.length===3?new Se(a[0],a[1],a[2]):a.length===2?new Se(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new Se(a.lat,"lng"in a?a.lng:a.lon,a.alt):c===void 0?null:new Se(a,c,p)}var ie={latLngToPoint:function(a,c){var p=this.projection.project(a),x=this.scale(c);return this.transformation._transform(p,x)},pointToLatLng:function(a,c){var p=this.scale(c),x=this.transformation.untransform(a,p);return this.projection.unproject(x)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var c=this.projection.bounds,p=this.scale(a),x=this.transformation.transform(c.min,p),E=this.transformation.transform(c.max,p);return new B(x,E)},infinite:!1,wrapLatLng:function(a){var c=this.wrapLng?S(a.lng,this.wrapLng,!0):a.lng,p=this.wrapLat?S(a.lat,this.wrapLat,!0):a.lat,x=a.alt;return new Se(p,c,x)},wrapLatLngBounds:function(a){var c=a.getCenter(),p=this.wrapLatLng(c),x=c.lat-p.lat,E=c.lng-p.lng;if(x===0&&E===0)return a;var C=a.getSouthWest(),V=a.getNorthEast(),Q=new Se(C.lat-x,C.lng-E),ee=new Se(V.lat-x,V.lng-E);return new ve(Q,ee)}},Ue=l({},ie,{wrapLng:[-180,180],R:6371e3,distance:function(a,c){var p=Math.PI/180,x=a.lat*p,E=c.lat*p,C=Math.sin((c.lat-a.lat)*p/2),V=Math.sin((c.lng-a.lng)*p/2),Q=C*C+Math.cos(x)*Math.cos(E)*V*V,ee=2*Math.atan2(Math.sqrt(Q),Math.sqrt(1-Q));return this.R*ee}}),qe=6378137,xe={R:qe,MAX_LATITUDE:85.0511287798,project:function(a){var c=Math.PI/180,p=this.MAX_LATITUDE,x=Math.max(Math.min(p,a.lat),-p),E=Math.sin(x*c);return new _e(this.R*a.lng*c,this.R*Math.log((1+E)/(1-E))/2)},unproject:function(a){var c=180/Math.PI;return new Se((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*c,a.x*c/this.R)},bounds:(function(){var a=qe*Math.PI;return new B([-a,-a],[a,a])})()};function De(a,c,p,x){if(se(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=c,this._c=p,this._d=x}De.prototype={transform:function(a,c){return this._transform(a.clone(),c)},_transform:function(a,c){return c=c||1,a.x=c*(this._a*a.x+this._b),a.y=c*(this._c*a.y+this._d),a},untransform:function(a,c){return c=c||1,new _e((a.x/c-this._b)/this._a,(a.y/c-this._d)/this._c)}};function rt(a,c,p,x){return new De(a,c,p,x)}var Ln=l({},Ue,{code:"EPSG:3857",projection:xe,transformation:(function(){var a=.5/(Math.PI*xe.R);return rt(a,.5,-a,.5)})()}),ii=l({},Ln,{code:"EPSG:900913"});function Is(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Li(a,c){var p="",x,E,C,V,Q,ee;for(x=0,C=a.length;x<C;x++){for(Q=a[x],E=0,V=Q.length;E<V;E++)ee=Q[E],p+=(E?"L":"M")+ee.x+" "+ee.y;p+=c?je.svg?"z":"x":""}return p||"M0 0"}var ns=document.documentElement.style,ks="ActiveXObject"in window,Kt=ks&&!document.addEventListener,en="msLaunchUri"in navigator&&!("documentMode"in document),is=An("webkit"),Hl=An("android"),Oo=An("android 2")||An("android 3"),On=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Pr=Hl&&An("Google")&&On<537&&!("AudioNode"in window),Lr=!!window.opera,Na=!en&&An("chrome"),Ds=An("gecko")&&!is&&!Lr&&!ks,ou=!Na&&An("safari"),Mo=An("phantom"),Vo="OTransition"in ns,ql=navigator.platform.indexOf("Win")===0,fi=ks&&"transition"in ns,ln="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Oo,si="MozPerspective"in ns,Yt=!window.L_DISABLE_3D&&(fi||ln||si)&&!Vo&&!Mo,er=typeof orientation<"u"||An("mobile"),Ca=er&&is,Fl=er&&ln,Oi=!window.PointerEvent&&window.MSPointerEvent,tr=!!(window.PointerEvent||Oi),$t="ontouchstart"in window||!!window.TouchEvent,ss=!window.L_NO_TOUCH&&($t||tr),rs=er&&Lr,Mi=er&&Ds,lu=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Gl=(function(){var a=!1;try{var c=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",A,c),window.removeEventListener("testPassiveEventSupport",A,c)}catch{}return a})(),as=(function(){return!!document.createElement("canvas").getContext})(),js=!!(document.createElementNS&&Is("svg").createSVGRect),cu=!!js&&(function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Or=!js&&(function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}})(),zo=navigator.platform.indexOf("Mac")===0,Uo=navigator.platform.indexOf("Linux")===0;function An(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var je={ie:ks,ielt9:Kt,edge:en,webkit:is,android:Hl,android23:Oo,androidStock:Pr,opera:Lr,chrome:Na,gecko:Ds,safari:ou,phantom:Mo,opera12:Vo,win:ql,ie3d:fi,webkit3d:ln,gecko3d:si,any3d:Yt,mobile:er,mobileWebkit:Ca,mobileWebkit3d:Fl,msPointer:Oi,pointer:tr,touch:ss,touchNative:$t,mobileOpera:rs,mobileGecko:Mi,retina:lu,passiveEvents:Gl,canvas:as,svg:js,vml:Or,inlineSvg:cu,mac:zo,linux:Uo},Bo=je.msPointer?"MSPointerDown":"pointerdown",mi=je.msPointer?"MSPointerMove":"pointermove",pi=je.msPointer?"MSPointerUp":"pointerup",Qt=je.msPointer?"MSPointerCancel":"pointercancel",tn={touchstart:Bo,touchmove:mi,touchend:pi,touchcancel:Qt},Vi={touchstart:ls,touchmove:Nn,touchend:Nn,touchcancel:Nn},zi={},Zl=!1;function Kl(a,c,p){return c==="touchstart"&&gi(),Vi[c]?(p=Vi[c].bind(this,p),a.addEventListener(tn[c],p,!1),p):(console.warn("wrong event specified:",c),A)}function Yl(a,c,p){if(!tn[c]){console.warn("wrong event specified:",c);return}a.removeEventListener(tn[c],p,!1)}function os(a){zi[a.pointerId]=a}function Ra(a){zi[a.pointerId]&&(zi[a.pointerId]=a)}function Ui(a){delete zi[a.pointerId]}function gi(){Zl||(document.addEventListener(Bo,os,!0),document.addEventListener(mi,Ra,!0),document.addEventListener(pi,Ui,!0),document.addEventListener(Qt,Ui,!0),Zl=!0)}function Nn(a,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var p in zi)c.touches.push(zi[p]);c.changedTouches=[c],a(c)}}function ls(a,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Bt(c),Nn(a,c)}function nn(a){var c={},p,x;for(x in a)p=a[x],c[x]=p&&p.bind?p.bind(a):p;return a=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Ho=200;function qo(a,c){a.addEventListener("dblclick",c);var p=0,x;function E(C){if(C.detail!==1){x=C.detail;return}if(!(C.pointerType==="mouse"||C.sourceCapabilities&&!C.sourceCapabilities.firesTouchEvents)){var V=ar(C);if(!(V.some(function(ee){return ee instanceof HTMLLabelElement&&ee.attributes.for})&&!V.some(function(ee){return ee instanceof HTMLInputElement||ee instanceof HTMLSelectElement}))){var Q=Date.now();Q-p<=Ho?(x++,x===2&&c(nn(C))):x=1,p=Q}}}return a.addEventListener("click",E),{dblclick:c,simDblclick:E}}function cs(a,c){a.removeEventListener("dblclick",c.dblclick),a.removeEventListener("click",c.simDblclick)}var _i=Vr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ps=Vr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ia=Ps==="webkitTransition"||Ps==="OTransition"?Ps+"End":"transitionend";function ka(a){return typeof a=="string"?document.getElementById(a):a}function nr(a,c){var p=a.style[c]||a.currentStyle&&a.currentStyle[c];if((!p||p==="auto")&&document.defaultView){var x=document.defaultView.getComputedStyle(a,null);p=x?x[c]:null}return p==="auto"?null:p}function st(a,c,p){var x=document.createElement(a);return x.className=c||"",p&&p.appendChild(x),x}function at(a){var c=a.parentNode;c&&c.removeChild(a)}function zt(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Ut(a){var c=a.parentNode;c&&c.lastChild!==a&&c.appendChild(a)}function ri(a){var c=a.parentNode;c&&c.firstChild!==a&&c.insertBefore(a,c.firstChild)}function Mr(a,c){if(a.classList!==void 0)return a.classList.contains(c);var p=us(a);return p.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(p)}function Re(a,c){if(a.classList!==void 0)for(var p=G(c),x=0,E=p.length;x<E;x++)a.classList.add(p[x]);else if(!Mr(a,c)){var C=us(a);yi(a,(C?C+" ":"")+c)}}function Nt(a,c){a.classList!==void 0?a.classList.remove(c):yi(a,M((" "+us(a)+" ").replace(" "+c+" "," ")))}function yi(a,c){a.className.baseVal===void 0?a.className=c:a.className.baseVal=c}function us(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Pt(a,c){"opacity"in a.style?a.style.opacity=c:"filter"in a.style&&Da(a,c)}function Da(a,c){var p=!1,x="DXImageTransform.Microsoft.Alpha";try{p=a.filters.item(x)}catch{if(c===1)return}c=Math.round(c*100),p?(p.Enabled=c!==100,p.Opacity=c):a.style.filter+=" progid:"+x+"(opacity="+c+")"}function Vr(a){for(var c=document.documentElement.style,p=0;p<a.length;p++)if(a[p]in c)return a[p];return!1}function Bi(a,c,p){var x=c||new _e(0,0);a.style[_i]=(je.ie3d?"translate("+x.x+"px,"+x.y+"px)":"translate3d("+x.x+"px,"+x.y+"px,0)")+(p?" scale("+p+")":"")}function Ct(a,c){a._leaflet_pos=c,je.any3d?Bi(a,c):(a.style.left=c.x+"px",a.style.top=c.y+"px")}function hs(a){return a._leaflet_pos||new _e(0,0)}var vi,mn,ja;if("onselectstart"in document)vi=function(){Be(window,"selectstart",Bt)},mn=function(){vt(window,"selectstart",Bt)};else{var Ls=Vr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);vi=function(){if(Ls){var a=document.documentElement.style;ja=a[Ls],a[Ls]="none"}},mn=function(){Ls&&(document.documentElement.style[Ls]=ja,ja=void 0)}}function zr(){Be(window,"dragstart",Bt)}function ir(){vt(window,"dragstart",Bt)}var Ur,ds;function sr(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Zn(),Ur=a,ds=a.style.outlineStyle,a.style.outlineStyle="none",Be(window,"keydown",Zn))}function Zn(){Ur&&(Ur.style.outlineStyle=ds,Ur=void 0,ds=void 0,vt(window,"keydown",Zn))}function Pa(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function Kn(a){var c=a.getBoundingClientRect();return{x:c.width/a.offsetWidth||1,y:c.height/a.offsetHeight||1,boundingClientRect:c}}var rr={__proto__:null,TRANSFORM:_i,TRANSITION:Ps,TRANSITION_END:Ia,get:ka,getStyle:nr,create:st,remove:at,empty:zt,toFront:Ut,toBack:ri,hasClass:Mr,addClass:Re,removeClass:Nt,setClass:yi,getClass:us,setOpacity:Pt,testProp:Vr,setTransform:Bi,setPosition:Ct,getPosition:hs,get disableTextSelection(){return vi},get enableTextSelection(){return mn},disableImageDrag:zr,enableImageDrag:ir,preventOutline:sr,restoreOutline:Zn,getSizedParentNode:Pa,getScale:Kn};function Be(a,c,p,x){if(c&&typeof c=="object")for(var E in c)Yn(a,E,c[E],p);else{c=G(c);for(var C=0,V=c.length;C<V;C++)Yn(a,c[C],p,x)}return this}var Cn="_leaflet_events";function vt(a,c,p,x){if(arguments.length===1)Os(a),delete a[Cn];else if(c&&typeof c=="object")for(var E in c)Ms(a,E,c[E],p);else if(c=G(c),arguments.length===2)Os(a,function(Q){return ke(c,Q)!==-1});else for(var C=0,V=c.length;C<V;C++)Ms(a,c[C],p,x);return this}function Os(a,c){for(var p in a[Cn]){var x=p.split(/\d/)[0];(!c||c(x))&&Ms(a,x,null,null,p)}}var ai={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Yn(a,c,p,x){var E=c+v(p)+(x?"_"+v(x):"");if(a[Cn]&&a[Cn][E])return this;var C=function(Q){return p.call(x||a,Q||window.event)},V=C;!je.touchNative&&je.pointer&&c.indexOf("touch")===0?C=Kl(a,c,C):je.touch&&c==="dblclick"?C=qo(a,C):"addEventListener"in a?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?a.addEventListener(ai[c]||c,C,je.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(C=function(Q){Q=Q||window.event,Fi(a,Q)&&V(Q)},a.addEventListener(ai[c],C,!1)):a.addEventListener(c,V,!1):a.attachEvent("on"+c,C),a[Cn]=a[Cn]||{},a[Cn][E]=C}function Ms(a,c,p,x,E){E=E||c+v(p)+(x?"_"+v(x):"");var C=a[Cn]&&a[Cn][E];if(!C)return this;!je.touchNative&&je.pointer&&c.indexOf("touch")===0?Yl(a,c,C):je.touch&&c==="dblclick"?cs(a,C):"removeEventListener"in a?a.removeEventListener(ai[c]||c,C,!1):a.detachEvent("on"+c,C),a[Cn][E]=null}function ut(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function bi(a){return Yn(a,"wheel",ut),this}function Vs(a){return Be(a,"mousedown touchstart dblclick contextmenu",ut),a._leaflet_disable_click=!0,this}function Bt(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Hi(a){return Bt(a),ut(a),this}function ar(a){if(a.composedPath)return a.composedPath();for(var c=[],p=a.target;p;)c.push(p),p=p.parentNode;return c}function fs(a,c){if(!c)return new _e(a.clientX,a.clientY);var p=Kn(c),x=p.boundingClientRect;return new _e((a.clientX-x.left)/p.x-c.clientLeft,(a.clientY-x.top)/p.y-c.clientTop)}var qi=je.linux&&je.chrome?window.devicePixelRatio:je.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function pn(a){return je.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/qi:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Fi(a,c){var p=c.relatedTarget;if(!p)return!0;try{for(;p&&p!==a;)p=p.parentNode}catch{return!1}return p!==a}var ms={__proto__:null,on:Be,off:vt,stopPropagation:ut,disableScrollPropagation:bi,disableClickPropagation:Vs,preventDefault:Bt,stop:Hi,getPropagationPath:ar,getMousePosition:fs,getWheelDelta:pn,isExternalTarget:Fi,addListener:Be,removeListener:vt},zs=ue.extend({run:function(a,c,p,x){this.stop(),this._el=a,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(x||.5,.2),this._startPos=hs(a),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(a){var c=+new Date-this._startTime,p=this._duration*1e3;c<p?this._runFrame(this._easeOut(c/p),a):(this._runFrame(1),this._complete())},_runFrame:function(a,c){var p=this._startPos.add(this._offset.multiplyBy(a));c&&p._round(),Ct(this._el,p),this.fire("step")},_complete:function(){Z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),it=ue.extend({options:{crs:Ln,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,c){c=K(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(Ae(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ps&&je.any3d&&!je.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Be(this._proxy,Ia,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,c,p){if(c=c===void 0?this._zoom:this._limitZoom(c),a=this._limitCenter(Ae(a),c,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=l({animate:p.animate},p.zoom),p.pan=l({animate:p.animate,duration:p.duration},p.pan));var x=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,c,p.zoom):this._tryAnimatedPan(a,p.pan);if(x)return clearTimeout(this._sizeTimer),this}return this._resetView(a,c,p.pan&&p.pan.noMoveStart),this},setZoom:function(a,c){return this._loaded?this.setView(this.getCenter(),a,{zoom:c}):(this._zoom=a,this)},zoomIn:function(a,c){return a=a||(je.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,c)},zoomOut:function(a,c){return a=a||(je.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,c)},setZoomAround:function(a,c,p){var x=this.getZoomScale(c),E=this.getSize().divideBy(2),C=a instanceof _e?a:this.latLngToContainerPoint(a),V=C.subtract(E).multiplyBy(1-1/x),Q=this.containerPointToLatLng(E.add(V));return this.setView(Q,c,{zoom:p})},_getBoundsCenterZoom:function(a,c){c=c||{},a=a.getBounds?a.getBounds():ye(a);var p=Ee(c.paddingTopLeft||c.padding||[0,0]),x=Ee(c.paddingBottomRight||c.padding||[0,0]),E=this.getBoundsZoom(a,!1,p.add(x));if(E=typeof c.maxZoom=="number"?Math.min(c.maxZoom,E):E,E===1/0)return{center:a.getCenter(),zoom:E};var C=x.subtract(p).divideBy(2),V=this.project(a.getSouthWest(),E),Q=this.project(a.getNorthEast(),E),ee=this.unproject(V.add(Q).divideBy(2).add(C),E);return{center:ee,zoom:E}},fitBounds:function(a,c){if(a=ye(a),!a.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(a,c);return this.setView(p.center,p.zoom,c)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,c){return this.setView(a,this._zoom,{pan:c})},panBy:function(a,c){if(a=Ee(a).round(),c=c||{},!a.x&&!a.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new zs,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Re(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,p,c.duration||.25,c.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,c,p){if(p=p||{},p.animate===!1||!je.any3d)return this.setView(a,c,p);this._stop();var x=this.project(this.getCenter()),E=this.project(a),C=this.getSize(),V=this._zoom;a=Ae(a),c=c===void 0?V:c;var Q=Math.max(C.x,C.y),ee=Q*this.getZoomScale(V,c),fe=E.distanceTo(x)||1,Te=1.42,Oe=Te*Te;function Je(Wt){var Fs=Wt?-1:1,Kr=Wt?ee:Q,pu=ee*ee-Q*Q+Fs*Oe*Oe*fe*fe,cl=2*Kr*Oe*fe,ul=pu/cl,gr=Math.sqrt(ul*ul+1)-ul,Gs=gr<1e-9?-18:Math.log(gr);return Gs}function En(Wt){return(Math.exp(Wt)-Math.exp(-Wt))/2}function sn(Wt){return(Math.exp(Wt)+Math.exp(-Wt))/2}function ci(Wt){return En(Wt)/sn(Wt)}var bt=Je(0);function xt(Wt){return Q*(sn(bt)/sn(bt+Te*Wt))}function ot(Wt){return Q*(sn(bt)*ci(bt+Te*Wt)-En(bt))/Oe}function mr(Wt){return 1-Math.pow(1-Wt,1.5)}var Si=Date.now(),oc=(Je(1)-bt)/Te,pr=p.duration?1e3*p.duration:1e3*oc*.8;function mu(){var Wt=(Date.now()-Si)/pr,Fs=mr(Wt)*oc;Wt<=1?(this._flyToFrame=U(mu,this),this._move(this.unproject(x.add(E.subtract(x).multiplyBy(ot(Fs)/fe)),V),this.getScaleZoom(Q/xt(Fs),V),{flyTo:!0})):this._move(a,c)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),mu.call(this),this},flyToBounds:function(a,c){var p=this._getBoundsCenterZoom(a,c);return this.flyTo(p.center,p.zoom,c)},setMaxBounds:function(a){return a=ye(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var c=this.options.minZoom;return this.options.minZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var c=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,c){this._enforcingBounds=!0;var p=this.getCenter(),x=this._limitCenter(p,this._zoom,ye(a));return p.equals(x)||this.panTo(x,c),this._enforcingBounds=!1,this},panInside:function(a,c){c=c||{};var p=Ee(c.paddingTopLeft||c.padding||[0,0]),x=Ee(c.paddingBottomRight||c.padding||[0,0]),E=this.project(this.getCenter()),C=this.project(a),V=this.getPixelBounds(),Q=le([V.min.add(p),V.max.subtract(x)]),ee=Q.getSize();if(!Q.contains(C)){this._enforcingBounds=!0;var fe=C.subtract(Q.getCenter()),Te=Q.extend(C).getSize().subtract(ee);E.x+=fe.x<0?-Te.x:Te.x,E.y+=fe.y<0?-Te.y:Te.y,this.panTo(this.unproject(E),c),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=l({animate:!1,pan:!0},a===!0?{animate:!0}:a);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),x=c.divideBy(2).round(),E=p.divideBy(2).round(),C=x.subtract(E);return!C.x&&!C.y?this:(a.animate&&a.pan?this.panBy(C):(a.pan&&this._rawPanBy(C),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=l({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=d(this._handleGeolocationResponse,this),p=d(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,p,a):navigator.geolocation.getCurrentPosition(c,p,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var c=a.code,p=a.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var c=a.coords.latitude,p=a.coords.longitude,x=new Se(c,p),E=x.toBounds(a.coords.accuracy*2),C=this._locateOptions;if(C.setView){var V=this.getBoundsZoom(E);this.setView(x,C.maxZoom?Math.min(V,C.maxZoom):V)}var Q={latlng:x,bounds:E,timestamp:a.timestamp};for(var ee in a.coords)typeof a.coords[ee]=="number"&&(Q[ee]=a.coords[ee]);this.fire("locationfound",Q)}},addHandler:function(a,c){if(!c)return this;var p=this[a]=new c(this);return this._handlers.push(p),this.options[a]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),at(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)at(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,c){var p="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),x=st("div",p,c||this._mapPane);return a&&(this._panes[a]=x),x},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),c=this.unproject(a.getBottomLeft()),p=this.unproject(a.getTopRight());return new ve(c,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,c,p){a=ye(a),p=Ee(p||[0,0]);var x=this.getZoom()||0,E=this.getMinZoom(),C=this.getMaxZoom(),V=a.getNorthWest(),Q=a.getSouthEast(),ee=this.getSize().subtract(p),fe=le(this.project(Q,x),this.project(V,x)).getSize(),Te=je.any3d?this.options.zoomSnap:1,Oe=ee.x/fe.x,Je=ee.y/fe.y,En=c?Math.max(Oe,Je):Math.min(Oe,Je);return x=this.getScaleZoom(En,x),Te&&(x=Math.round(x/(Te/100))*(Te/100),x=c?Math.ceil(x/Te)*Te:Math.floor(x/Te)*Te),Math.max(E,Math.min(C,x))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new _e(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,c){var p=this._getTopLeftPoint(a,c);return new B(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,c){var p=this.options.crs;return c=c===void 0?this._zoom:c,p.scale(a)/p.scale(c)},getScaleZoom:function(a,c){var p=this.options.crs;c=c===void 0?this._zoom:c;var x=p.zoom(a*p.scale(c));return isNaN(x)?1/0:x},project:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(Ae(a),c)},unproject:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(Ee(a),c)},layerPointToLatLng:function(a){var c=Ee(a).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(a){var c=this.project(Ae(a))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(Ae(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(ye(a))},distance:function(a,c){return this.options.crs.distance(Ae(a),Ae(c))},containerPointToLayerPoint:function(a){return Ee(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return Ee(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var c=this.containerPointToLayerPoint(Ee(a));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ae(a)))},mouseEventToContainerPoint:function(a){return fs(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var c=this._container=ka(a);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Be(c,"scroll",this._onScroll,this),this._containerId=v(c)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&je.any3d,Re(a,"leaflet-container"+(je.touch?" leaflet-touch":"")+(je.retina?" leaflet-retina":"")+(je.ielt9?" leaflet-oldie":"")+(je.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=nr(a,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ct(this._mapPane,new _e(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Re(a.markerPane,"leaflet-zoom-hide"),Re(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,c,p){Ct(this._mapPane,new _e(0,0));var x=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var E=this._zoom!==c;this._moveStart(E,p)._move(a,c)._moveEnd(E),this.fire("viewreset"),x&&this.fire("load")},_moveStart:function(a,c){return a&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(a,c,p,x){c===void 0&&(c=this._zoom);var E=this._zoom!==c;return this._zoom=c,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),x?p&&p.pinch&&this.fire("zoom",p):((E||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Ct(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[v(this._container)]=this;var c=a?vt:Be;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),je.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Z(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,c){for(var p=[],x,E=c==="mouseout"||c==="mouseover",C=a.target||a.srcElement,V=!1;C;){if(x=this._targets[v(C)],x&&(c==="click"||c==="preclick")&&this._draggableMoved(x)){V=!0;break}if(x&&x.listens(c,!0)&&(E&&!Fi(C,a)||(p.push(x),E))||C===this._container)break;C=C.parentNode}return!p.length&&!V&&!E&&this.listens(c,!0)&&(p=[this]),p},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var c=a.target||a.srcElement;if(!(!this._loaded||c._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(c))){var p=a.type;p==="mousedown"&&sr(c),this._fireDOMEvent(a,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,c,p){if(a.type==="click"){var x=l({},a);x.type="preclick",this._fireDOMEvent(x,x.type,p)}var E=this._findEventTargets(a,c);if(p){for(var C=[],V=0;V<p.length;V++)p[V].listens(c,!0)&&C.push(p[V]);E=C.concat(E)}if(E.length){c==="contextmenu"&&Bt(a);var Q=E[0],ee={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var fe=Q.getLatLng&&(!Q._radius||Q._radius<=10);ee.containerPoint=fe?this.latLngToContainerPoint(Q.getLatLng()):this.mouseEventToContainerPoint(a),ee.layerPoint=this.containerPointToLayerPoint(ee.containerPoint),ee.latlng=fe?Q.getLatLng():this.layerPointToLatLng(ee.layerPoint)}for(V=0;V<E.length;V++)if(E[V].fire(c,ee,!0),ee.originalEvent._stopped||E[V].options.bubblingMouseEvents===!1&&ke(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,c=this._handlers.length;a<c;a++)this._handlers[a].disable()},whenReady:function(a,c){return this._loaded?a.call(c||this,{target:this}):this.on("load",a,c),this},_getMapPanePos:function(){return hs(this._mapPane)||new _e(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,c){var p=a&&c!==void 0?this._getNewPixelOrigin(a,c):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,c){var p=this.getSize()._divideBy(2);return this.project(a,c)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,c,p){var x=this._getNewPixelOrigin(p,c);return this.project(a,c)._subtract(x)},_latLngBoundsToNewLayerBounds:function(a,c,p){var x=this._getNewPixelOrigin(p,c);return le([this.project(a.getSouthWest(),c)._subtract(x),this.project(a.getNorthWest(),c)._subtract(x),this.project(a.getSouthEast(),c)._subtract(x),this.project(a.getNorthEast(),c)._subtract(x)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,c,p){if(!p)return a;var x=this.project(a,c),E=this.getSize().divideBy(2),C=new B(x.subtract(E),x.add(E)),V=this._getBoundsOffset(C,p,c);return Math.abs(V.x)<=1&&Math.abs(V.y)<=1?a:this.unproject(x.add(V),c)},_limitOffset:function(a,c){if(!c)return a;var p=this.getPixelBounds(),x=new B(p.min.add(a),p.max.add(a));return a.add(this._getBoundsOffset(x,c))},_getBoundsOffset:function(a,c,p){var x=le(this.project(c.getNorthEast(),p),this.project(c.getSouthWest(),p)),E=x.min.subtract(a.min),C=x.max.subtract(a.max),V=this._rebound(E.x,-C.x),Q=this._rebound(E.y,-C.y);return new _e(V,Q)},_rebound:function(a,c){return a+c>0?Math.round(a-c)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(c))},_limitZoom:function(a){var c=this.getMinZoom(),p=this.getMaxZoom(),x=je.any3d?this.options.zoomSnap:1;return x&&(a=Math.round(a/x)*x),Math.max(c,Math.min(p,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Nt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,c){var p=this._getCenterOffset(a)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,c),!0)},_createAnimProxy:function(){var a=this._proxy=st("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(c){var p=_i,x=this._proxy.style[p];Bi(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),x===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){at(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),c=this.getZoom();Bi(this._proxy,this.project(a,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,c,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var x=this.getZoomScale(c),E=this._getCenterOffset(a)._divideBy(1-1/x);return p.animate!==!0&&!this.getSize().contains(E)?!1:(U(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(a,c,!0)},this),!0)},_animateZoom:function(a,c,p,x){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=c,Re(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:c,noUpdate:x}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Nt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function or(a,c){return new it(a,c)}var Rn=We.extend({options:{position:"topright"},initialize:function(a){K(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var c=this._map;return c&&c.removeControl(this),this.options.position=a,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var c=this._container=this.onAdd(a),p=this.getPosition(),x=a._controlCorners[p];return Re(c,"leaflet-control"),p.indexOf("bottom")!==-1?x.insertBefore(c,x.firstChild):x.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(at(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),$n=function(a){return new Rn(a)};it.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},c="leaflet-",p=this._controlContainer=st("div",c+"control-container",this._container);function x(E,C){var V=c+E+" "+c+C;a[E+C]=st("div",V,p)}x("top","left"),x("top","right"),x("bottom","left"),x("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)at(this._controlCorners[a]);at(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Br=Rn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,c,p,x){return p<x?-1:x<p?1:0}},initialize:function(a,c,p){K(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var x in a)this._addLayer(a[x],x);for(x in c)this._addLayer(c[x],x,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return Rn.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,c){return this._addLayer(a,c),this._map?this._update():this},addOverlay:function(a,c){return this._addLayer(a,c,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var c=this._getLayer(v(a));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Re(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Re(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):Nt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Nt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",c=this._container=st("div",a),p=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Vs(c),bi(c);var x=this._section=st("section",a+"-list");p&&(this._map.on("click",this.collapse,this),Be(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var E=this._layersLink=st("a",a+"-toggle",c);E.href="#",E.title="Layers",E.setAttribute("role","button"),Be(E,{keydown:function(C){C.keyCode===13&&this._expandSafely()},click:function(C){Bt(C),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=st("div",a+"-base",x),this._separator=st("div",a+"-separator",x),this._overlaysList=st("div",a+"-overlays",x),c.appendChild(x)},_getLayer:function(a){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&v(this._layers[c].layer)===a)return this._layers[c]},_addLayer:function(a,c,p){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:c,overlay:p}),this.options.sortLayers&&this._layers.sort(d(function(x,E){return this.options.sortFunction(x.layer,E.layer,x.name,E.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;zt(this._baseLayersList),zt(this._overlaysList),this._layerControlInputs=[];var a,c,p,x,E=0;for(p=0;p<this._layers.length;p++)x=this._layers[p],this._addItem(x),c=c||x.overlay,a=a||!x.overlay,E+=x.overlay?0:1;return this.options.hideSingleBase&&(a=a&&E>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=c&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var c=this._getLayer(v(a.target)),p=c.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;p&&this._map.fire(p,c)},_createRadioElement:function(a,c){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(c?' checked="checked"':"")+"/>",x=document.createElement("div");return x.innerHTML=p,x.firstChild},_addItem:function(a){var c=document.createElement("label"),p=this._map.hasLayer(a.layer),x;a.overlay?(x=document.createElement("input"),x.type="checkbox",x.className="leaflet-control-layers-selector",x.defaultChecked=p):x=this._createRadioElement("leaflet-base-layers_"+v(this),p),this._layerControlInputs.push(x),x.layerId=v(a.layer),Be(x,"click",this._onInputClick,this);var E=document.createElement("span");E.innerHTML=" "+a.name;var C=document.createElement("span");c.appendChild(C),C.appendChild(x),C.appendChild(E);var V=a.overlay?this._overlaysList:this._baseLayersList;return V.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,c,p,x=[],E=[];this._handlingClick=!0;for(var C=a.length-1;C>=0;C--)c=a[C],p=this._getLayer(c.layerId).layer,c.checked?x.push(p):c.checked||E.push(p);for(C=0;C<E.length;C++)this._map.hasLayer(E[C])&&this._map.removeLayer(E[C]);for(C=0;C<x.length;C++)this._map.hasLayer(x[C])||this._map.addLayer(x[C]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,c,p,x=this._map.getZoom(),E=a.length-1;E>=0;E--)c=a[E],p=this._getLayer(c.layerId).layer,c.disabled=p.options.minZoom!==void 0&&x<p.options.minZoom||p.options.maxZoom!==void 0&&x>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Be(a,"click",Bt),this.expand();var c=this;setTimeout(function(){vt(a,"click",Bt),c._preventClick=!1})}}),Fo=function(a,c,p){return new Br(a,c,p)},Us=Rn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var c="leaflet-control-zoom",p=st("div",c+" leaflet-bar"),x=this.options;return this._zoomInButton=this._createButton(x.zoomInText,x.zoomInTitle,c+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(x.zoomOutText,x.zoomOutTitle,c+"-out",p,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,c,p,x,E){var C=st("a",p,x);return C.innerHTML=a,C.href="#",C.title=c,C.setAttribute("role","button"),C.setAttribute("aria-label",c),Vs(C),Be(C,"click",Hi),Be(C,"click",E,this),Be(C,"click",this._refocusOnMap,this),C},_updateDisabled:function(){var a=this._map,c="leaflet-disabled";Nt(this._zoomInButton,c),Nt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Re(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Re(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});it.mergeOptions({zoomControl:!0}),it.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Us,this.addControl(this.zoomControl))});var $l=function(a){return new Us(a)},Go=Rn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var c="leaflet-control-scale",p=st("div",c),x=this.options;return this._addScales(x,c+"-line",p),a.on(x.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),p},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,c,p){a.metric&&(this._mScale=st("div",c,p)),a.imperial&&(this._iScale=st("div",c,p))},_update:function(){var a=this._map,c=a.getSize().y/2,p=a.distance(a.containerPointToLatLng([0,c]),a.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(p)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var c=this._getRoundNum(a),p=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,p,c/a)},_updateImperial:function(a){var c=a*3.2808399,p,x,E;c>5280?(p=c/5280,x=this._getRoundNum(p),this._updateScale(this._iScale,x+" mi",x/p)):(E=this._getRoundNum(c),this._updateScale(this._iScale,E+" ft",E/c))},_updateScale:function(a,c,p){a.style.width=Math.round(this.options.maxWidth*p)+"px",a.innerHTML=c},_getRoundNum:function(a){var c=Math.pow(10,(Math.floor(a)+"").length-1),p=a/c;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,c*p}}),Hr=function(a){return new Go(a)},Zo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',La=Rn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(je.inlineSvg?Zo+" ":"")+"Leaflet</a>"},initialize:function(a){K(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=st("div","leaflet-control-attribution"),Vs(this._container);for(var c in a._layers)a._layers[c].getAttribution&&this.addAttribution(a._layers[c].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var c in this._attributions)this._attributions[c]&&a.push(c);var p=[];this.options.prefix&&p.push(this.options.prefix),a.length&&p.push(a.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});it.mergeOptions({attributionControl:!0}),it.addInitHook(function(){this.options.attributionControl&&new La().addTo(this)});var Oa=function(a){return new La(a)};Rn.Layers=Br,Rn.Zoom=Us,Rn.Scale=Go,Rn.Attribution=La,$n.layers=Fo,$n.zoom=$l,$n.scale=Hr,$n.attribution=Oa;var oi=We.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});oi.addTo=function(a,c){return a.addHandler(c,this),this};var Ql={Events:re},Gi=je.touch?"touchstart mousedown":"mousedown",Zi=ue.extend({options:{clickTolerance:3},initialize:function(a,c,p,x){K(this,x),this._element=a,this._dragStartTarget=c||a,this._preventOutline=p},enable:function(){this._enabled||(Be(this._dragStartTarget,Gi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Zi._dragging===this&&this.finishDrag(!0),vt(this._dragStartTarget,Gi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Mr(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Zi._dragging===this&&this.finishDrag();return}if(!(Zi._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Zi._dragging=this,this._preventOutline&&sr(this._element),zr(),vi(),!this._moving)){this.fire("down");var c=a.touches?a.touches[0]:a,p=Pa(this._element);this._startPoint=new _e(c.clientX,c.clientY),this._startPos=hs(this._element),this._parentScale=Kn(p);var x=a.type==="mousedown";Be(document,x?"mousemove":"touchmove",this._onMove,this),Be(document,x?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var c=a.touches&&a.touches.length===1?a.touches[0]:a,p=new _e(c.clientX,c.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,Bt(a),this._moved||(this.fire("dragstart"),this._moved=!0,Re(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Re(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Ct(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){Nt(document.body,"leaflet-dragging"),this._lastTarget&&(Nt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),vt(document,"mousemove touchmove",this._onMove,this),vt(document,"mouseup touchend touchcancel",this._onUp,this),ir(),mn();var c=this._moved&&this._moving;this._moving=!1,Zi._dragging=!1,c&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Ko(a,c,p){var x,E=[1,4,2,8],C,V,Q,ee,fe,Te,Oe,Je;for(C=0,Te=a.length;C<Te;C++)a[C]._code=ne(a[C],c);for(Q=0;Q<4;Q++){for(Oe=E[Q],x=[],C=0,Te=a.length,V=Te-1;C<Te;V=C++)ee=a[C],fe=a[V],ee._code&Oe?fe._code&Oe||(Je=W(fe,ee,Oe,c,p),Je._code=ne(Je,c),x.push(Je)):(fe._code&Oe&&(Je=W(fe,ee,Oe,c,p),Je._code=ne(Je,c),x.push(Je)),x.push(ee));a=x}return a}function Yo(a,c){var p,x,E,C,V,Q,ee,fe,Te;if(!a||a.length===0)throw new Error("latlngs not passed");gt(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Oe=Ae([0,0]),Je=ye(a),En=Je.getNorthWest().distanceTo(Je.getSouthWest())*Je.getNorthEast().distanceTo(Je.getNorthWest());En<1700&&(Oe=Ma(a));var sn=a.length,ci=[];for(p=0;p<sn;p++){var bt=Ae(a[p]);ci.push(c.project(Ae([bt.lat-Oe.lat,bt.lng-Oe.lng])))}for(Q=ee=fe=0,p=0,x=sn-1;p<sn;x=p++)E=ci[p],C=ci[x],V=E.y*C.x-C.y*E.x,ee+=(E.x+C.x)*V,fe+=(E.y+C.y)*V,Q+=V*3;Q===0?Te=ci[0]:Te=[ee/Q,fe/Q];var xt=c.unproject(Ee(Te));return Ae([xt.lat+Oe.lat,xt.lng+Oe.lng])}function Ma(a){for(var c=0,p=0,x=0,E=0;E<a.length;E++){var C=Ae(a[E]);c+=C.lat,p+=C.lng,x++}return Ae([c/x,p/x])}var lr={__proto__:null,clipPolygon:Ko,polygonCenter:Yo,centroid:Ma};function In(a,c){if(!c||!a.length)return a.slice();var p=c*c;return a=w(a,p),a=Bs(a,p),a}function $o(a,c,p){return Math.sqrt(Ze(a,c,p,!0))}function Wl(a,c,p){return Ze(a,c,p)}function Bs(a,c){var p=a.length,x=typeof Uint8Array<"u"?Uint8Array:Array,E=new x(p);E[0]=E[p-1]=1,m(a,E,c,0,p-1);var C,V=[];for(C=0;C<p;C++)E[C]&&V.push(a[C]);return V}function m(a,c,p,x,E){var C=0,V,Q,ee;for(Q=x+1;Q<=E-1;Q++)ee=Ze(a[Q],a[x],a[E],!0),ee>C&&(V=Q,C=ee);C>p&&(c[V]=1,m(a,c,p,x,V),m(a,c,p,V,E))}function w(a,c){for(var p=[a[0]],x=1,E=0,C=a.length;x<C;x++)we(a[x],a[E])>c&&(p.push(a[x]),E=x);return E<C-1&&p.push(a[C-1]),p}var N;function D(a,c,p,x,E){var C=x?N:ne(a,p),V=ne(c,p),Q,ee,fe;for(N=V;;){if(!(C|V))return[a,c];if(C&V)return!1;Q=C||V,ee=W(a,c,Q,p,E),fe=ne(ee,p),Q===C?(a=ee,C=fe):(c=ee,V=fe)}}function W(a,c,p,x,E){var C=c.x-a.x,V=c.y-a.y,Q=x.min,ee=x.max,fe,Te;return p&8?(fe=a.x+C*(ee.y-a.y)/V,Te=ee.y):p&4?(fe=a.x+C*(Q.y-a.y)/V,Te=Q.y):p&2?(fe=ee.x,Te=a.y+V*(ee.x-a.x)/C):p&1&&(fe=Q.x,Te=a.y+V*(Q.x-a.x)/C),new _e(fe,Te,E)}function ne(a,c){var p=0;return a.x<c.min.x?p|=1:a.x>c.max.x&&(p|=2),a.y<c.min.y?p|=4:a.y>c.max.y&&(p|=8),p}function we(a,c){var p=c.x-a.x,x=c.y-a.y;return p*p+x*x}function Ze(a,c,p,x){var E=c.x,C=c.y,V=p.x-E,Q=p.y-C,ee=V*V+Q*Q,fe;return ee>0&&(fe=((a.x-E)*V+(a.y-C)*Q)/ee,fe>1?(E=p.x,C=p.y):fe>0&&(E+=V*fe,C+=Q*fe)),V=a.x-E,Q=a.y-C,x?V*V+Q*Q:new _e(E,C)}function gt(a){return!se(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function _t(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),gt(a)}function Lt(a,c){var p,x,E,C,V,Q,ee,fe;if(!a||a.length===0)throw new Error("latlngs not passed");gt(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Te=Ae([0,0]),Oe=ye(a),Je=Oe.getNorthWest().distanceTo(Oe.getSouthWest())*Oe.getNorthEast().distanceTo(Oe.getNorthWest());Je<1700&&(Te=Ma(a));var En=a.length,sn=[];for(p=0;p<En;p++){var ci=Ae(a[p]);sn.push(c.project(Ae([ci.lat-Te.lat,ci.lng-Te.lng])))}for(p=0,x=0;p<En-1;p++)x+=sn[p].distanceTo(sn[p+1])/2;if(x===0)fe=sn[0];else for(p=0,C=0;p<En-1;p++)if(V=sn[p],Q=sn[p+1],E=V.distanceTo(Q),C+=E,C>x){ee=(C-x)/E,fe=[Q.x-ee*(Q.x-V.x),Q.y-ee*(Q.y-V.y)];break}var bt=c.unproject(Ee(fe));return Ae([bt.lat+Te.lat,bt.lng+Te.lng])}var xi={__proto__:null,simplify:In,pointToSegmentDistance:$o,closestPointOnSegment:Wl,clipSegment:D,_getEdgeIntersection:W,_getBitCode:ne,_sqClosestPointOnSegment:Ze,isFlat:gt,_flat:_t,polylineCenter:Lt},wi={project:function(a){return new _e(a.lng,a.lat)},unproject:function(a){return new Se(a.y,a.x)},bounds:new B([-180,-90],[180,90])},li={R:6378137,R_MINOR:6356752314245179e-9,bounds:new B([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var c=Math.PI/180,p=this.R,x=a.lat*c,E=this.R_MINOR/p,C=Math.sqrt(1-E*E),V=C*Math.sin(x),Q=Math.tan(Math.PI/4-x/2)/Math.pow((1-V)/(1+V),C/2);return x=-p*Math.log(Math.max(Q,1e-10)),new _e(a.lng*c*p,x)},unproject:function(a){for(var c=180/Math.PI,p=this.R,x=this.R_MINOR/p,E=Math.sqrt(1-x*x),C=Math.exp(-a.y/p),V=Math.PI/2-2*Math.atan(C),Q=0,ee=.1,fe;Q<15&&Math.abs(ee)>1e-7;Q++)fe=E*Math.sin(V),fe=Math.pow((1-fe)/(1+fe),E/2),ee=Math.PI/2-2*Math.atan(C*fe)-V,V+=ee;return new Se(V*c,a.x*c/p)}},Ki={__proto__:null,LonLat:wi,Mercator:li,SphericalMercator:xe},qr=l({},Ue,{code:"EPSG:3395",projection:li,transformation:(function(){var a=.5/(Math.PI*li.R);return rt(a,.5,-a,.5)})()}),Fr=l({},Ue,{code:"EPSG:4326",projection:wi,transformation:rt(1/180,1,-1/180,.5)}),Va=l({},ie,{projection:wi,transformation:rt(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,c){var p=c.lng-a.lng,x=c.lat-a.lat;return Math.sqrt(p*p+x*x)},infinite:!0});ie.Earth=Ue,ie.EPSG3395=qr,ie.EPSG3857=Ln,ie.EPSG900913=ii,ie.EPSG4326=Fr,ie.Simple=Va;var Yi=ue.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[v(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[v(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var c=a.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var p=this.getEvents();c.on(p,this),this.once("remove",function(){c.off(p,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});it.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var c=v(a);return this._layers[c]?this:(this._layers[c]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var c=v(a);return this._layers[c]?(this._loaded&&a.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return v(a)in this._layers},eachLayer:function(a,c){for(var p in this._layers)a.call(c,this._layers[p]);return this},_addLayers:function(a){a=a?se(a)?a:[a]:[];for(var c=0,p=a.length;c<p;c++)this.addLayer(a[c])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[v(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var c=v(a);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,c=-1/0,p=this._getZoomSpan();for(var x in this._zoomBoundLayers){var E=this._zoomBoundLayers[x].options;a=E.minZoom===void 0?a:Math.min(a,E.minZoom),c=E.maxZoom===void 0?c:Math.max(c,E.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=a===1/0?void 0:a,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var za=Yi.extend({initialize:function(a,c){K(this,c),this._layers={};var p,x;if(a)for(p=0,x=a.length;p<x;p++)this.addLayer(a[p])},addLayer:function(a){var c=this.getLayerId(a);return this._layers[c]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var c=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(a){var c=typeof a=="number"?a:this.getLayerId(a);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var c=Array.prototype.slice.call(arguments,1),p,x;for(p in this._layers)x=this._layers[p],x[a]&&x[a].apply(x,c);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,c){for(var p in this._layers)a.call(c,this._layers[p]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return v(a)}}),Am=function(a,c){return new za(a,c)},ps=za.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),za.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),za.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new ve;for(var c in this._layers){var p=this._layers[c];a.extend(p.getBounds?p.getBounds():p.getLatLng())}return a}}),Hh=function(a,c){return new ps(a,c)},gs=We.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){K(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,c){var p=this._getIconUrl(a);if(!p){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var x=this._createImg(p,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(x,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),x},_setIconStyles:function(a,c){var p=this.options,x=p[c+"Size"];typeof x=="number"&&(x=[x,x]);var E=Ee(x),C=Ee(c==="shadow"&&p.shadowAnchor||p.iconAnchor||E&&E.divideBy(2,!0));a.className="leaflet-marker-"+c+" "+(p.className||""),C&&(a.style.marginLeft=-C.x+"px",a.style.marginTop=-C.y+"px"),E&&(a.style.width=E.x+"px",a.style.height=E.y+"px")},_createImg:function(a,c){return c=c||document.createElement("img"),c.src=a,c},_getIconUrl:function(a){return je.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function Qo(a){return new gs(a)}var Wo=gs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Wo.imagePath!="string"&&(Wo.imagePath=this._detectIconPath()),(this.options.imagePath||Wo.imagePath)+gs.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var c=function(p,x,E){var C=x.exec(p);return C&&C[E]};return a=c(a,/^url\((['"])?(.+)\1\)$/,2),a&&c(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=st("div","leaflet-default-icon-path",document.body),c=nr(a,"background-image")||nr(a,"backgroundImage");if(document.body.removeChild(a),c=this._stripUrl(c),c)return c;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),Xo=oi.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Zi(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Re(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Nt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var c=this._marker,p=c._map,x=this._marker.options.autoPanSpeed,E=this._marker.options.autoPanPadding,C=hs(c._icon),V=p.getPixelBounds(),Q=p.getPixelOrigin(),ee=le(V.min._subtract(Q).add(E),V.max._subtract(Q).subtract(E));if(!ee.contains(C)){var fe=Ee((Math.max(ee.max.x,C.x)-ee.max.x)/(V.max.x-ee.max.x)-(Math.min(ee.min.x,C.x)-ee.min.x)/(V.min.x-ee.min.x),(Math.max(ee.max.y,C.y)-ee.max.y)/(V.max.y-ee.max.y)-(Math.min(ee.min.y,C.y)-ee.min.y)/(V.min.y-ee.min.y)).multiplyBy(x);p.panBy(fe,{animate:!1}),this._draggable._newPos._add(fe),this._draggable._startPos._add(fe),Ct(c._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=U(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(Z(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,a)))},_onDrag:function(a){var c=this._marker,p=c._shadow,x=hs(c._icon),E=c._map.layerPointToLatLng(x);p&&Ct(p,x),c._latlng=E,a.latlng=E,a.oldLatLng=this._oldLatLng,c.fire("move",a).fire("drag",a)},_onDragEnd:function(a){Z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),Jo=Yi.extend({options:{icon:new Wo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,c){K(this,c),this._latlng=Ae(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var c=this._latlng;return this._latlng=Ae(a),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=a.icon.createIcon(this._icon),x=!1;p!==this._icon&&(this._icon&&this._removeIcon(),x=!0,a.title&&(p.title=a.title),p.tagName==="IMG"&&(p.alt=a.alt||"")),Re(p,c),a.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Be(p,"focus",this._panOnFocus,this);var E=a.icon.createShadow(this._shadow),C=!1;E!==this._shadow&&(this._removeShadow(),C=!0),E&&(Re(E,c),E.alt=""),this._shadow=E,a.opacity<1&&this._updateOpacity(),x&&this.getPane().appendChild(this._icon),this._initInteraction(),E&&C&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&vt(this._icon,"focus",this._panOnFocus,this),at(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&at(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Ct(this._icon,a),this._shadow&&Ct(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Re(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Xo)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Xo(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Pt(this._icon,a),this._shadow&&Pt(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var c=this.options.icon.options,p=c.iconSize?Ee(c.iconSize):Ee(0,0),x=c.iconAnchor?Ee(c.iconAnchor):Ee(0,0);a.panInside(this._latlng,{paddingTopLeft:x,paddingBottomRight:p.subtract(x)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function qh(a,c){return new Jo(a,c)}var _s=Yi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return K(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ua=_s.extend({options:{fill:!0,radius:10},initialize:function(a,c){K(this,c),this._latlng=Ae(a),this._radius=this.options.radius},setLatLng:function(a){var c=this._latlng;return this._latlng=Ae(a),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var c=a&&a.radius||this._radius;return _s.prototype.setStyle.call(this,a),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,c=this._radiusY||a,p=this._clickTolerance(),x=[a+p,c+p];this._pxBounds=new B(this._point.subtract(x),this._point.add(x))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Fh(a,c){return new Ua(a,c)}var Xl=Ua.extend({initialize:function(a,c,p){if(typeof c=="number"&&(c=l({},p,{radius:c})),K(this,c),this._latlng=Ae(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new ve(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:_s.prototype.setStyle,_project:function(){var a=this._latlng.lng,c=this._latlng.lat,p=this._map,x=p.options.crs;if(x.distance===Ue.distance){var E=Math.PI/180,C=this._mRadius/Ue.R/E,V=p.project([c+C,a]),Q=p.project([c-C,a]),ee=V.add(Q).divideBy(2),fe=p.unproject(ee).lat,Te=Math.acos((Math.cos(C*E)-Math.sin(c*E)*Math.sin(fe*E))/(Math.cos(c*E)*Math.cos(fe*E)))/E;(isNaN(Te)||Te===0)&&(Te=C/Math.cos(Math.PI/180*c)),this._point=ee.subtract(p.getPixelOrigin()),this._radius=isNaN(Te)?0:ee.x-p.project([fe,a-Te]).x,this._radiusY=ee.y-V.y}else{var Oe=x.unproject(x.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(Oe).x}this._updateBounds()}});function Gh(a,c,p){return new Xl(a,c,p)}var Hs=_s.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,c){K(this,c),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var c=1/0,p=null,x=Ze,E,C,V=0,Q=this._parts.length;V<Q;V++)for(var ee=this._parts[V],fe=1,Te=ee.length;fe<Te;fe++){E=ee[fe-1],C=ee[fe];var Oe=x(a,E,C,!0);Oe<c&&(c=Oe,p=x(a,E,C))}return p&&(p.distance=Math.sqrt(c)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Lt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,c){return c=c||this._defaultShape(),a=Ae(a),c.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new ve,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return gt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var c=[],p=gt(a),x=0,E=a.length;x<E;x++)p?(c[x]=Ae(a[x]),this._bounds.extend(c[x])):c[x]=this._convertLatLngs(a[x]);return c},_project:function(){var a=new B;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),c=new _e(a,a);this._rawPxBounds&&(this._pxBounds=new B([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(a,c,p){var x=a[0]instanceof Se,E=a.length,C,V;if(x){for(V=[],C=0;C<E;C++)V[C]=this._map.latLngToLayerPoint(a[C]),p.extend(V[C]);c.push(V)}else for(C=0;C<E;C++)this._projectLatlngs(a[C],c,p)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,p,x,E,C,V,Q,ee;for(p=0,E=0,C=this._rings.length;p<C;p++)for(ee=this._rings[p],x=0,V=ee.length;x<V-1;x++)Q=D(ee[x],ee[x+1],a,x,!0),Q&&(c[E]=c[E]||[],c[E].push(Q[0]),(Q[1]!==ee[x+1]||x===V-2)&&(c[E].push(Q[1]),E++))}},_simplifyPoints:function(){for(var a=this._parts,c=this.options.smoothFactor,p=0,x=a.length;p<x;p++)a[p]=In(a[p],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,c){var p,x,E,C,V,Q,ee=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(p=0,C=this._parts.length;p<C;p++)for(Q=this._parts[p],x=0,V=Q.length,E=V-1;x<V;E=x++)if(!(!c&&x===0)&&$o(a,Q[E],Q[x])<=ee)return!0;return!1}});function Nm(a,c){return new Hs(a,c)}Hs._flat=_t;var Ba=Hs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Yo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var c=Hs.prototype._convertLatLngs.call(this,a),p=c.length;return p>=2&&c[0]instanceof Se&&c[0].equals(c[p-1])&&c.pop(),c},_setLatLngs:function(a){Hs.prototype._setLatLngs.call(this,a),gt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return gt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,c=this.options.weight,p=new _e(c,c);if(a=new B(a.min.subtract(p),a.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var x=0,E=this._rings.length,C;x<E;x++)C=Ko(this._rings[x],a,!0),C.length&&this._parts.push(C)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var c=!1,p,x,E,C,V,Q,ee,fe;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(C=0,ee=this._parts.length;C<ee;C++)for(p=this._parts[C],V=0,fe=p.length,Q=fe-1;V<fe;Q=V++)x=p[V],E=p[Q],x.y>a.y!=E.y>a.y&&a.x<(E.x-x.x)*(a.y-x.y)/(E.y-x.y)+x.x&&(c=!c);return c||Hs.prototype._containsPoint.call(this,a,!0)}});function Cm(a,c){return new Ba(a,c)}var qs=ps.extend({initialize:function(a,c){K(this,c),this._layers={},a&&this.addData(a)},addData:function(a){var c=se(a)?a:a.features,p,x,E;if(c){for(p=0,x=c.length;p<x;p++)E=c[p],(E.geometries||E.geometry||E.features||E.coordinates)&&this.addData(E);return this}var C=this.options;if(C.filter&&!C.filter(a))return this;var V=kn(a,C);return V?(V.feature=tc(a),V.defaultOptions=V.options,this.resetStyle(V),C.onEachFeature&&C.onEachFeature(a,V),this.addLayer(V)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=l({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(c){this._setLayerStyle(c,a)},this)},_setLayerStyle:function(a,c){a.setStyle&&(typeof c=="function"&&(c=c(a.feature)),a.setStyle(c))}});function kn(a,c){var p=a.type==="Feature"?a.geometry:a,x=p?p.coordinates:null,E=[],C=c&&c.pointToLayer,V=c&&c.coordsToLatLng||Jl,Q,ee,fe,Te;if(!x&&!p)return null;switch(p.type){case"Point":return Q=V(x),Ha(C,a,Q,c);case"MultiPoint":for(fe=0,Te=x.length;fe<Te;fe++)Q=V(x[fe]),E.push(Ha(C,a,Q,c));return new ps(E);case"LineString":case"MultiLineString":return ee=el(x,p.type==="LineString"?0:1,V),new Hs(ee,c);case"Polygon":case"MultiPolygon":return ee=el(x,p.type==="Polygon"?1:2,V),new Ba(ee,c);case"GeometryCollection":for(fe=0,Te=p.geometries.length;fe<Te;fe++){var Oe=kn({geometry:p.geometries[fe],type:"Feature",properties:a.properties},c);Oe&&E.push(Oe)}return new ps(E);case"FeatureCollection":for(fe=0,Te=p.features.length;fe<Te;fe++){var Je=kn(p.features[fe],c);Je&&E.push(Je)}return new ps(E);default:throw new Error("Invalid GeoJSON object.")}}function Ha(a,c,p,x){return a?a(c,p):new Jo(p,x&&x.markersInheritOptions&&x)}function Jl(a){return new Se(a[1],a[0],a[2])}function el(a,c,p){for(var x=[],E=0,C=a.length,V;E<C;E++)V=c?el(a[E],c-1,p):(p||Jl)(a[E]),x.push(V);return x}function ec(a,c){return a=Ae(a),a.alt!==void 0?[R(a.lng,c),R(a.lat,c),R(a.alt,c)]:[R(a.lng,c),R(a.lat,c)]}function tl(a,c,p,x){for(var E=[],C=0,V=a.length;C<V;C++)E.push(c?tl(a[C],gt(a[C])?0:c-1,p,x):ec(a[C],x));return!c&&p&&E.length>0&&E.push(E[0].slice()),E}function cr(a,c){return a.feature?l({},a.feature,{geometry:c}):tc(c)}function tc(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var ur={toGeoJSON:function(a){return cr(this,{type:"Point",coordinates:ec(this.getLatLng(),a)})}};Jo.include(ur),Xl.include(ur),Ua.include(ur),Hs.include({toGeoJSON:function(a){var c=!gt(this._latlngs),p=tl(this._latlngs,c?1:0,!1,a);return cr(this,{type:(c?"Multi":"")+"LineString",coordinates:p})}}),Ba.include({toGeoJSON:function(a){var c=!gt(this._latlngs),p=c&&!gt(this._latlngs[0]),x=tl(this._latlngs,p?2:c?1:0,!0,a);return c||(x=[x]),cr(this,{type:(p?"Multi":"")+"Polygon",coordinates:x})}}),za.include({toMultiPoint:function(a){var c=[];return this.eachLayer(function(p){c.push(p.toGeoJSON(a).geometry.coordinates)}),cr(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(a){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(a);var p=c==="GeometryCollection",x=[];return this.eachLayer(function(E){if(E.toGeoJSON){var C=E.toGeoJSON(a);if(p)x.push(C.geometry);else{var V=tc(C);V.type==="FeatureCollection"?x.push.apply(x,V.features):x.push(V)}}}),p?cr(this,{geometries:x,type:"GeometryCollection"}):{type:"FeatureCollection",features:x}}});function nc(a,c){return new qs(a,c)}var nl=nc,qa=Yi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,c,p){this._url=a,this._bounds=ye(c),K(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Re(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){at(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Ut(this._image),this},bringToBack:function(){return this._map&&ri(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=ye(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",c=this._image=a?this._url:st("img");if(Re(c,"leaflet-image-layer"),this._zoomAnimated&&Re(c,"leaflet-zoom-animated"),this.options.className&&Re(c,this.options.className),c.onselectstart=A,c.onmousemove=A,c.onload=d(this.fire,this,"load"),c.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(a){var c=this._map.getZoomScale(a.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Bi(this._image,p,c)},_reset:function(){var a=this._image,c=new B(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=c.getSize();Ct(a,c.min),a.style.width=p.x+"px",a.style.height=p.y+"px"},_updateOpacity:function(){Pt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Zh=function(a,c,p){return new qa(a,c,p)},hr=qa.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",c=this._image=a?this._url:st("video");if(Re(c,"leaflet-image-layer"),this._zoomAnimated&&Re(c,"leaflet-zoom-animated"),this.options.className&&Re(c,this.options.className),c.onselectstart=A,c.onmousemove=A,c.onloadeddata=d(this.fire,this,"load"),a){for(var p=c.getElementsByTagName("source"),x=[],E=0;E<p.length;E++)x.push(p[E].src);this._url=p.length>0?x:[c.src];return}se(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var C=0;C<this._url.length;C++){var V=st("source");V.src=this._url[C],c.appendChild(V)}}});function Fa(a,c,p){return new hr(a,c,p)}var ic=qa.extend({_initImage:function(){var a=this._image=this._url;Re(a,"leaflet-image-layer"),this._zoomAnimated&&Re(a,"leaflet-zoom-animated"),this.options.className&&Re(a,this.options.className),a.onselectstart=A,a.onmousemove=A}});function Kh(a,c,p){return new ic(a,c,p)}var Dn=Yi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,c){a&&(a instanceof Se||se(a))?(this._latlng=Ae(a),K(this,c)):(K(this,a),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Pt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Pt(this._container,1),this.bringToFront(),this.options.interactive&&(Re(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Pt(this._container,0),this._removeTimeout=setTimeout(d(at,void 0,this._container),200)):at(this._container),this.options.interactive&&(Nt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=Ae(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ut(this._container),this},bringToBack:function(){return this._map&&ri(this._container),this},_prepareOpen:function(a){var c=this._source;if(!c._map)return!1;if(c instanceof ps){c=null;var p=this._source._layers;for(var x in p)if(p[x]._map){c=p[x];break}if(!c)return!1;this._source=c}if(!a)if(c.getCenter)a=c.getCenter();else if(c.getLatLng)a=c.getLatLng();else if(c.getBounds)a=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")a.innerHTML=c;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),c=Ee(this.options.offset),p=this._getAnchor();this._zoomAnimated?Ct(this._container,a.add(p)):c=c.add(a).add(p);var x=this._containerBottom=-c.y,E=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=x+"px",this._container.style.left=E+"px"}},_getAnchor:function(){return[0,0]}});it.include({_initOverlay:function(a,c,p,x){var E=c;return E instanceof a||(E=new a(x).setContent(c)),p&&E.setLatLng(p),E}}),Yi.include({_initOverlay:function(a,c,p,x){var E=p;return E instanceof a?(K(E,x),E._source=this):(E=c&&!x?c:new a(x,this),E.setContent(p)),E}});var il=Dn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Dn.prototype.openOn.call(this,a)},onAdd:function(a){Dn.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof _s||this._source.on("preclick",ut))},onRemove:function(a){Dn.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof _s||this._source.off("preclick",ut))},getEvents:function(){var a=Dn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",c=this._container=st("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=st("div",a+"-content-wrapper",c);if(this._contentNode=st("div",a+"-content",p),Vs(c),bi(this._contentNode),Be(c,"contextmenu",ut),this._tipContainer=st("div",a+"-tip-container",c),this._tip=st("div",a+"-tip",this._tipContainer),this.options.closeButton){var x=this._closeButton=st("a",a+"-close-button",c);x.setAttribute("role","button"),x.setAttribute("aria-label","Close popup"),x.href="#close",x.innerHTML='<span aria-hidden="true">&#215;</span>',Be(x,"click",function(E){Bt(E),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,c=a.style;c.width="",c.whiteSpace="nowrap";var p=a.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),c.width=p+1+"px",c.whiteSpace="",c.height="";var x=a.offsetHeight,E=this.options.maxHeight,C="leaflet-popup-scrolled";E&&x>E?(c.height=E+"px",Re(a,C)):Nt(a,C),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),p=this._getAnchor();Ct(this._container,c.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,c=parseInt(nr(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+c,x=this._containerWidth,E=new _e(this._containerLeft,-p-this._containerBottom);E._add(hs(this._container));var C=a.layerPointToContainerPoint(E),V=Ee(this.options.autoPanPadding),Q=Ee(this.options.autoPanPaddingTopLeft||V),ee=Ee(this.options.autoPanPaddingBottomRight||V),fe=a.getSize(),Te=0,Oe=0;C.x+x+ee.x>fe.x&&(Te=C.x+x-fe.x+ee.x),C.x-Te-Q.x<0&&(Te=C.x-Q.x),C.y+p+ee.y>fe.y&&(Oe=C.y+p-fe.y+ee.y),C.y-Oe-Q.y<0&&(Oe=C.y-Q.y),(Te||Oe)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([Te,Oe]))}},_getAnchor:function(){return Ee(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Yh=function(a,c){return new il(a,c)};it.mergeOptions({closePopupOnClick:!0}),it.include({openPopup:function(a,c,p){return this._initOverlay(il,a,c,p).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Yi.include({bindPopup:function(a,c){return this._popup=this._initOverlay(il,this._popup,a,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof ps||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Hi(a);var c=a.layer||a.target;if(this._popup._source===c&&!(c instanceof _s)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=c,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var sl=Dn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Dn.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Dn.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Dn.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",c=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=st("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var c,p,x=this._map,E=this._container,C=x.latLngToContainerPoint(x.getCenter()),V=x.layerPointToContainerPoint(a),Q=this.options.direction,ee=E.offsetWidth,fe=E.offsetHeight,Te=Ee(this.options.offset),Oe=this._getAnchor();Q==="top"?(c=ee/2,p=fe):Q==="bottom"?(c=ee/2,p=0):Q==="center"?(c=ee/2,p=fe/2):Q==="right"?(c=0,p=fe/2):Q==="left"?(c=ee,p=fe/2):V.x<C.x?(Q="right",c=0,p=fe/2):(Q="left",c=ee+(Te.x+Oe.x)*2,p=fe/2),a=a.subtract(Ee(c,p,!0)).add(Te).add(Oe),Nt(E,"leaflet-tooltip-right"),Nt(E,"leaflet-tooltip-left"),Nt(E,"leaflet-tooltip-top"),Nt(E,"leaflet-tooltip-bottom"),Re(E,"leaflet-tooltip-"+Q),Ct(E,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Pt(this._container,a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(c)},_getAnchor:function(){return Ee(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Rm=function(a,c){return new sl(a,c)};it.include({openTooltip:function(a,c,p){return this._initOverlay(sl,a,c,p).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Yi.include({bindTooltip:function(a,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(sl,this._tooltip,a,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var c=a?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[c](p),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof ps||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&(Be(c,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Be(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var c=a.latlng,p,x;this._tooltip.options.sticky&&a.originalEvent&&(p=this._map.mouseEventToContainerPoint(a.originalEvent),x=this._map.containerPointToLayerPoint(p),c=this._map.layerPointToLatLng(x)),this._tooltip.setLatLng(c)}});var $h=gs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var c=a&&a.tagName==="DIV"?a:document.createElement("div"),p=this.options;if(p.html instanceof Element?(zt(c),c.appendChild(p.html)):c.innerHTML=p.html!==!1?p.html:"",p.bgPos){var x=Ee(p.bgPos);c.style.backgroundPosition=-x.x+"px "+-x.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function Im(a){return new $h(a)}gs.Default=Wo;var Ga=Yi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:je.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){K(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),at(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ut(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ri(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=b(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof _e?a:new _e(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var c=this.getPane().children,p=-a(-1/0,1/0),x=0,E=c.length,C;x<E;x++)C=c[x].style.zIndex,c[x]!==this._container&&C&&(p=a(p,+C));isFinite(p)&&(this.options.zIndex=p+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!je.ielt9){Pt(this._container,this.options.opacity);var a=+new Date,c=!1,p=!1;for(var x in this._tiles){var E=this._tiles[x];if(!(!E.current||!E.loaded)){var C=Math.min(1,(a-E.loaded)/200);Pt(E.el,C),C<1?c=!0:(E.active?p=!0:this._onOpaqueTile(E),E.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),c&&(Z(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:A,_initContainer:function(){this._container||(this._container=st("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,c=this.options.maxZoom;if(a!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===a?(this._levels[p].el.style.zIndex=c-Math.abs(a-p),this._onUpdateLevel(p)):(at(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var x=this._levels[a],E=this._map;return x||(x=this._levels[a]={},x.el=st("div","leaflet-tile-container leaflet-zoom-animated",this._container),x.el.style.zIndex=c,x.origin=E.project(E.unproject(E.getPixelOrigin()),a).round(),x.zoom=a,this._setZoomTransform(x,E.getCenter(),E.getZoom()),A(x.el.offsetWidth),this._onCreateLevel(x)),this._level=x,x}},_onUpdateLevel:A,_onRemoveLevel:A,_onCreateLevel:A,_pruneTiles:function(){if(this._map){var a,c,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)c=this._tiles[a],c.retain=c.current;for(a in this._tiles)if(c=this._tiles[a],c.current&&!c.active){var x=c.coords;this._retainParent(x.x,x.y,x.z,x.z-5)||this._retainChildren(x.x,x.y,x.z,x.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var c in this._tiles)this._tiles[c].coords.z===a&&this._removeTile(c)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)at(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,c,p,x){var E=Math.floor(a/2),C=Math.floor(c/2),V=p-1,Q=new _e(+E,+C);Q.z=+V;var ee=this._tileCoordsToKey(Q),fe=this._tiles[ee];return fe&&fe.active?(fe.retain=!0,!0):(fe&&fe.loaded&&(fe.retain=!0),V>x?this._retainParent(E,C,V,x):!1)},_retainChildren:function(a,c,p,x){for(var E=2*a;E<2*a+2;E++)for(var C=2*c;C<2*c+2;C++){var V=new _e(E,C);V.z=p+1;var Q=this._tileCoordsToKey(V),ee=this._tiles[Q];if(ee&&ee.active){ee.retain=!0;continue}else ee&&ee.loaded&&(ee.retain=!0);p+1<x&&this._retainChildren(E,C,p+1,x)}},_resetView:function(a){var c=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var c=this.options;return c.minNativeZoom!==void 0&&a<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<a?c.maxNativeZoom:a},_setView:function(a,c,p,x){var E=Math.round(c);this.options.maxZoom!==void 0&&E>this.options.maxZoom||this.options.minZoom!==void 0&&E<this.options.minZoom?E=void 0:E=this._clampZoom(E);var C=this.options.updateWhenZooming&&E!==this._tileZoom;(!x||C)&&(this._tileZoom=E,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),E!==void 0&&this._update(a),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(a,c)},_setZoomTransforms:function(a,c){for(var p in this._levels)this._setZoomTransform(this._levels[p],a,c)},_setZoomTransform:function(a,c,p){var x=this._map.getZoomScale(p,a.zoom),E=a.origin.multiplyBy(x).subtract(this._map._getNewPixelOrigin(c,p)).round();je.any3d?Bi(a.el,E,x):Ct(a.el,E)},_resetGrid:function(){var a=this._map,c=a.options.crs,p=this._tileSize=this.getTileSize(),x=this._tileZoom,E=this._map.getPixelWorldBounds(this._tileZoom);E&&(this._globalTileRange=this._pxBoundsToTileRange(E)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,c.wrapLng[0]],x).x/p.x),Math.ceil(a.project([0,c.wrapLng[1]],x).x/p.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([c.wrapLat[0],0],x).y/p.x),Math.ceil(a.project([c.wrapLat[1],0],x).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var c=this._map,p=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),x=c.getZoomScale(p,this._tileZoom),E=c.project(a,this._tileZoom).floor(),C=c.getSize().divideBy(x*2);return new B(E.subtract(C),E.add(C))},_update:function(a){var c=this._map;if(c){var p=this._clampZoom(c.getZoom());if(a===void 0&&(a=c.getCenter()),this._tileZoom!==void 0){var x=this._getTiledPixelBounds(a),E=this._pxBoundsToTileRange(x),C=E.getCenter(),V=[],Q=this.options.keepBuffer,ee=new B(E.getBottomLeft().subtract([Q,-Q]),E.getTopRight().add([Q,-Q]));if(!(isFinite(E.min.x)&&isFinite(E.min.y)&&isFinite(E.max.x)&&isFinite(E.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var fe in this._tiles){var Te=this._tiles[fe].coords;(Te.z!==this._tileZoom||!ee.contains(new _e(Te.x,Te.y)))&&(this._tiles[fe].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(a,p);return}for(var Oe=E.min.y;Oe<=E.max.y;Oe++)for(var Je=E.min.x;Je<=E.max.x;Je++){var En=new _e(Je,Oe);if(En.z=this._tileZoom,!!this._isValidTile(En)){var sn=this._tiles[this._tileCoordsToKey(En)];sn?sn.current=!0:V.push(En)}}if(V.sort(function(bt,xt){return bt.distanceTo(C)-xt.distanceTo(C)}),V.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ci=document.createDocumentFragment();for(Je=0;Je<V.length;Je++)this._addTile(V[Je],ci);this._level.el.appendChild(ci)}}}},_isValidTile:function(a){var c=this._map.options.crs;if(!c.infinite){var p=this._globalTileRange;if(!c.wrapLng&&(a.x<p.min.x||a.x>p.max.x)||!c.wrapLat&&(a.y<p.min.y||a.y>p.max.y))return!1}if(!this.options.bounds)return!0;var x=this._tileCoordsToBounds(a);return ye(this.options.bounds).overlaps(x)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var c=this._map,p=this.getTileSize(),x=a.scaleBy(p),E=x.add(p),C=c.unproject(x,a.z),V=c.unproject(E,a.z);return[C,V]},_tileCoordsToBounds:function(a){var c=this._tileCoordsToNwSe(a),p=new ve(c[0],c[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var c=a.split(":"),p=new _e(+c[0],+c[1]);return p.z=+c[2],p},_removeTile:function(a){var c=this._tiles[a];c&&(at(c.el),delete this._tiles[a],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Re(a,"leaflet-tile");var c=this.getTileSize();a.style.width=c.x+"px",a.style.height=c.y+"px",a.onselectstart=A,a.onmousemove=A,je.ielt9&&this.options.opacity<1&&Pt(a,this.options.opacity)},_addTile:function(a,c){var p=this._getTilePos(a),x=this._tileCoordsToKey(a),E=this.createTile(this._wrapCoords(a),d(this._tileReady,this,a));this._initTile(E),this.createTile.length<2&&U(d(this._tileReady,this,a,null,E)),Ct(E,p),this._tiles[x]={el:E,coords:a,current:!0},c.appendChild(E),this.fire("tileloadstart",{tile:E,coords:a})},_tileReady:function(a,c,p){c&&this.fire("tileerror",{error:c,tile:p,coords:a});var x=this._tileCoordsToKey(a);p=this._tiles[x],p&&(p.loaded=+new Date,this._map._fadeAnimated?(Pt(p.el,0),Z(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),c||(Re(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),je.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var c=new _e(this._wrapX?S(a.x,this._wrapX):a.x,this._wrapY?S(a.y,this._wrapY):a.y);return c.z=a.z,c},_pxBoundsToTileRange:function(a){var c=this.getTileSize();return new B(a.min.unscaleBy(c).floor(),a.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function Qh(a){return new Ga(a)}var dr=Ga.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,c){this._url=a,c=K(this,c),c.detectRetina&&je.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,c){return this._url===a&&c===void 0&&(c=!0),this._url=a,c||this.redraw(),this},createTile:function(a,c){var p=document.createElement("img");return Be(p,"load",d(this._tileOnLoad,this,c,p)),Be(p,"error",d(this._tileOnError,this,c,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(a),p},getTileUrl:function(a){var c={r:je.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-a.y;this.options.tms&&(c.y=p),c["-y"]=p}return ae(this._url,l(c,this.options))},_tileOnLoad:function(a,c){je.ielt9?setTimeout(d(a,this,null,c),0):a(null,c)},_tileOnError:function(a,c,p){var x=this.options.errorTileUrl;x&&c.getAttribute("src")!==x&&(c.src=x),a(p,c)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,c=this.options.maxZoom,p=this.options.zoomReverse,x=this.options.zoomOffset;return p&&(a=c-a),a+x},_getSubdomain:function(a){var c=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var a,c;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(c=this._tiles[a].el,c.onload=A,c.onerror=A,!c.complete)){c.src=be;var p=this._tiles[a].coords;at(c),delete this._tiles[a],this.fire("tileabort",{tile:c,coords:p})}},_removeTile:function(a){var c=this._tiles[a];if(c)return c.el.setAttribute("src",be),Ga.prototype._removeTile.call(this,a)},_tileReady:function(a,c,p){if(!(!this._map||p&&p.getAttribute("src")===be))return Ga.prototype._tileReady.call(this,a,c,p)}});function Ei(a,c){return new dr(a,c)}var rl=dr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,c){this._url=a;var p=l({},this.defaultWmsParams);for(var x in c)x in this.options||(p[x]=c[x]);c=K(this,c);var E=c.detectRetina&&je.retina?2:1,C=this.getTileSize();p.width=C.x*E,p.height=C.y*E,this.wmsParams=p},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,dr.prototype.onAdd.call(this,a)},getTileUrl:function(a){var c=this._tileCoordsToNwSe(a),p=this._crs,x=le(p.project(c[0]),p.project(c[1])),E=x.min,C=x.max,V=(this._wmsVersion>=1.3&&this._crs===Fr?[E.y,E.x,C.y,C.x]:[E.x,E.y,C.x,C.y]).join(","),Q=dr.prototype.getTileUrl.call(this,a);return Q+Y(this.wmsParams,Q,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+V},setParams:function(a,c){return l(this.wmsParams,a),c||this.redraw(),this}});function Ti(a,c){return new rl(a,c)}dr.WMS=rl,Ei.wms=Ti;var Qn=Yi.extend({options:{padding:.1},initialize:function(a){K(this,a),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Re(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,c){var p=this._map.getZoomScale(c,this._zoom),x=this._map.getSize().multiplyBy(.5+this.options.padding),E=this._map.project(this._center,c),C=x.multiplyBy(-p).add(E).subtract(this._map._getNewPixelOrigin(a,c));je.any3d?Bi(this._container,C,p):Ct(this._container,C)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,c=this._map.getSize(),p=this._map.containerPointToLayerPoint(c.multiplyBy(-a)).round();this._bounds=new B(p,p.add(c.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),sc=Qn.extend({options:{tolerance:0},getEvents:function(){var a=Qn.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Qn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Be(a,"mousemove",this._onMouseMove,this),Be(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Be(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){Z(this._redrawRequest),delete this._ctx,at(this._container),vt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var c in this._layers)a=this._layers[c],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qn.prototype._update.call(this);var a=this._bounds,c=this._container,p=a.getSize(),x=je.retina?2:1;Ct(c,a.min),c.width=x*p.x,c.height=x*p.y,c.style.width=p.x+"px",c.style.height=p.y+"px",je.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Qn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[v(a)]=a;var c=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var c=a._order,p=c.next,x=c.prev;p?p.prev=x:this._drawLast=x,x?x.next=p:this._drawFirst=p,delete a._order,delete this._layers[v(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var c=a.options.dashArray.split(/[, ]+/),p=[],x,E;for(E=0;E<c.length;E++){if(x=Number(c[E]),isNaN(x))return;p.push(x)}a.options._dashArray=p}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var c=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new B,this._redrawBounds.extend(a._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(a._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var c=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,c=this._redrawBounds;if(this._ctx.save(),c){var p=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var x=this._drawFirst;x;x=x.next)a=x.layer,(!c||a._pxBounds&&a._pxBounds.intersects(c))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,c){if(this._drawing){var p,x,E,C,V=a._parts,Q=V.length,ee=this._ctx;if(Q){for(ee.beginPath(),p=0;p<Q;p++){for(x=0,E=V[p].length;x<E;x++)C=V[p][x],ee[x?"lineTo":"moveTo"](C.x,C.y);c&&ee.closePath()}this._fillStroke(ee,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var c=a._point,p=this._ctx,x=Math.max(Math.round(a._radius),1),E=(Math.max(Math.round(a._radiusY),1)||x)/x;E!==1&&(p.save(),p.scale(1,E)),p.beginPath(),p.arc(c.x,c.y/E,x,0,Math.PI*2,!1),E!==1&&p.restore(),this._fillStroke(p,a)}},_fillStroke:function(a,c){var p=c.options;p.fill&&(a.globalAlpha=p.fillOpacity,a.fillStyle=p.fillColor||p.color,a.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(a.setLineDash&&a.setLineDash(c.options&&c.options._dashArray||[]),a.globalAlpha=p.opacity,a.lineWidth=p.weight,a.strokeStyle=p.color,a.lineCap=p.lineCap,a.lineJoin=p.lineJoin,a.stroke())},_onClick:function(a){for(var c=this._map.mouseEventToLayerPoint(a),p,x,E=this._drawFirst;E;E=E.next)p=E.layer,p.options.interactive&&p._containsPoint(c)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(p))&&(x=p);this._fireEvent(x?[x]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,c)}},_handleMouseOut:function(a){var c=this._hoveredLayer;c&&(Nt(this._container,"leaflet-interactive"),this._fireEvent([c],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,c){if(!this._mouseHoverThrottled){for(var p,x,E=this._drawFirst;E;E=E.next)p=E.layer,p.options.interactive&&p._containsPoint(c)&&(x=p);x!==this._hoveredLayer&&(this._handleMouseOut(a),x&&(Re(this._container,"leaflet-interactive"),this._fireEvent([x],a,"mouseover"),this._hoveredLayer=x)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,c,p){this._map._fireDOMEvent(c,p||c.type,a)},_bringToFront:function(a){var c=a._order;if(c){var p=c.next,x=c.prev;if(p)p.prev=x;else return;x?x.next=p:p&&(this._drawFirst=p),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(a)}},_bringToBack:function(a){var c=a._order;if(c){var p=c.next,x=c.prev;if(x)x.next=p;else return;p?p.prev=x:x&&(this._drawLast=x),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(a)}}});function al(a){return je.canvas?new sc(a):null}var fr=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),uu={_initContainer:function(){this._container=st("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Qn.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var c=a._container=fr("shape");Re(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",a._path=fr("path"),c.appendChild(a._path),this._updateStyle(a),this._layers[v(a)]=a},_addPath:function(a){var c=a._container;this._container.appendChild(c),a.options.interactive&&a.addInteractiveTarget(c)},_removePath:function(a){var c=a._container;at(c),a.removeInteractiveTarget(c),delete this._layers[v(a)]},_updateStyle:function(a){var c=a._stroke,p=a._fill,x=a.options,E=a._container;E.stroked=!!x.stroke,E.filled=!!x.fill,x.stroke?(c||(c=a._stroke=fr("stroke")),E.appendChild(c),c.weight=x.weight+"px",c.color=x.color,c.opacity=x.opacity,x.dashArray?c.dashStyle=se(x.dashArray)?x.dashArray.join(" "):x.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=x.lineCap.replace("butt","flat"),c.joinstyle=x.lineJoin):c&&(E.removeChild(c),a._stroke=null),x.fill?(p||(p=a._fill=fr("fill")),E.appendChild(p),p.color=x.fillColor||x.color,p.opacity=x.fillOpacity):p&&(E.removeChild(p),a._fill=null)},_updateCircle:function(a){var c=a._point.round(),p=Math.round(a._radius),x=Math.round(a._radiusY||p);this._setPath(a,a._empty()?"M0 0":"AL "+c.x+","+c.y+" "+p+","+x+" 0,"+65535*360)},_setPath:function(a,c){a._path.v=c},_bringToFront:function(a){Ut(a._container)},_bringToBack:function(a){ri(a._container)}},ys=je.vml?fr:Is,Za=Qn.extend({_initContainer:function(){this._container=ys("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ys("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){at(this._container),vt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qn.prototype._update.call(this);var a=this._bounds,c=a.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,p.setAttribute("width",c.x),p.setAttribute("height",c.y)),Ct(p,a.min),p.setAttribute("viewBox",[a.min.x,a.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(a){var c=a._path=ys("path");a.options.className&&Re(c,a.options.className),a.options.interactive&&Re(c,"leaflet-interactive"),this._updateStyle(a),this._layers[v(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){at(a._path),a.removeInteractiveTarget(a._path),delete this._layers[v(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var c=a._path,p=a.options;c&&(p.stroke?(c.setAttribute("stroke",p.color),c.setAttribute("stroke-opacity",p.opacity),c.setAttribute("stroke-width",p.weight),c.setAttribute("stroke-linecap",p.lineCap),c.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?c.setAttribute("stroke-dasharray",p.dashArray):c.removeAttribute("stroke-dasharray"),p.dashOffset?c.setAttribute("stroke-dashoffset",p.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),p.fill?(c.setAttribute("fill",p.fillColor||p.color),c.setAttribute("fill-opacity",p.fillOpacity),c.setAttribute("fill-rule",p.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(a,c){this._setPath(a,Li(a._parts,c))},_updateCircle:function(a){var c=a._point,p=Math.max(Math.round(a._radius),1),x=Math.max(Math.round(a._radiusY),1)||p,E="a"+p+","+x+" 0 1,0 ",C=a._empty()?"M0 0":"M"+(c.x-p)+","+c.y+E+p*2+",0 "+E+-p*2+",0 ";this._setPath(a,C)},_setPath:function(a,c){a._path.setAttribute("d",c)},_bringToFront:function(a){Ut(a._path)},_bringToBack:function(a){ri(a._path)}});je.vml&&Za.include(uu);function ol(a){return je.svg||je.vml?new Za(a):null}it.include({getRenderer:function(a){var c=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var c=this._paneRenderers[a];return c===void 0&&(c=this._createRenderer({pane:a}),this._paneRenderers[a]=c),c},_createRenderer:function(a){return this.options.preferCanvas&&al(a)||ol(a)}});var Gr=Ba.extend({initialize:function(a,c){Ba.prototype.initialize.call(this,this._boundsToLatLngs(a),c)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=ye(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function km(a,c){return new Gr(a,c)}Za.create=ys,Za.pointsToPath=Li,qs.geometryToLayer=kn,qs.coordsToLatLng=Jl,qs.coordsToLatLngs=el,qs.latLngToCoords=ec,qs.latLngsToCoords=tl,qs.getFeature=cr,qs.asFeature=tc,it.mergeOptions({boxZoom:!0});var Wn=oi.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Be(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){vt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){at(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),vi(),zr(),this._startPoint=this._map.mouseEventToContainerPoint(a),Be(document,{contextmenu:Hi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=st("div","leaflet-zoom-box",this._container),Re(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var c=new B(this._point,this._startPoint),p=c.getSize();Ct(this._box,c.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(at(this._box),Nt(this._container,"leaflet-crosshair")),mn(),ir(),vt(document,{contextmenu:Hi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var c=new ve(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});it.addInitHook("addHandler","boxZoom",Wn),it.mergeOptions({doubleClickZoom:!0});var rc=oi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var c=this._map,p=c.getZoom(),x=c.options.zoomDelta,E=a.originalEvent.shiftKey?p-x:p+x;c.options.doubleClickZoom==="center"?c.setZoom(E):c.setZoomAround(a.containerPoint,E)}});it.addInitHook("addHandler","doubleClickZoom",rc),it.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var vs=oi.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Zi(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Re(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Nt(this._map._container,"leaflet-grab"),Nt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=ye(this._map.options.maxBounds);this._offsetLimit=le(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var c=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(c),this._prunePositions(c)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,c){return a-(a-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;a.x<c.min.x&&(a.x=this._viscousLimit(a.x,c.min.x)),a.y<c.min.y&&(a.y=this._viscousLimit(a.y,c.min.y)),a.x>c.max.x&&(a.x=this._viscousLimit(a.x,c.max.x)),a.y>c.max.y&&(a.y=this._viscousLimit(a.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,c=Math.round(a/2),p=this._initialWorldOffset,x=this._draggable._newPos.x,E=(x-c+p)%a+c-p,C=(x+c+p)%a-c-p,V=Math.abs(E+p)<Math.abs(C+p)?E:C;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=V},_onDragEnd:function(a){var c=this._map,p=c.options,x=!p.inertia||a.noInertia||this._times.length<2;if(c.fire("dragend",a),x)c.fire("moveend");else{this._prunePositions(+new Date);var E=this._lastPos.subtract(this._positions[0]),C=(this._lastTime-this._times[0])/1e3,V=p.easeLinearity,Q=E.multiplyBy(V/C),ee=Q.distanceTo([0,0]),fe=Math.min(p.inertiaMaxSpeed,ee),Te=Q.multiplyBy(fe/ee),Oe=fe/(p.inertiaDeceleration*V),Je=Te.multiplyBy(-Oe/2).round();!Je.x&&!Je.y?c.fire("moveend"):(Je=c._limitOffset(Je,c.options.maxBounds),U(function(){c.panBy(Je,{duration:Oe,easeLinearity:V,noMoveStart:!0,animate:!0})}))}}});it.addInitHook("addHandler","dragging",vs),it.mergeOptions({keyboard:!0,keyboardPanDelta:80});var hu=oi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Be(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),vt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,c=document.documentElement,p=a.scrollTop||c.scrollTop,x=a.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(x,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var c=this._panKeys={},p=this.keyCodes,x,E;for(x=0,E=p.left.length;x<E;x++)c[p.left[x]]=[-1*a,0];for(x=0,E=p.right.length;x<E;x++)c[p.right[x]]=[a,0];for(x=0,E=p.down.length;x<E;x++)c[p.down[x]]=[0,a];for(x=0,E=p.up.length;x<E;x++)c[p.up[x]]=[0,-1*a]},_setZoomDelta:function(a){var c=this._zoomKeys={},p=this.keyCodes,x,E;for(x=0,E=p.zoomIn.length;x<E;x++)c[p.zoomIn[x]]=a;for(x=0,E=p.zoomOut.length;x<E;x++)c[p.zoomOut[x]]=-a},_addHooks:function(){Be(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){vt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var c=a.keyCode,p=this._map,x;if(c in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(x=this._panKeys[c],a.shiftKey&&(x=Ee(x).multiplyBy(3)),p.options.maxBounds&&(x=p._limitOffset(Ee(x),p.options.maxBounds)),p.options.worldCopyJump){var E=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(x)));p.panTo(E)}else p.panBy(x)}else if(c in this._zoomKeys)p.setZoom(p.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;Hi(a)}}});it.addInitHook("addHandler","keyboard",hu),it.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ll=oi.extend({addHooks:function(){Be(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){vt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var c=pn(a),p=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var x=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),x),Hi(a)},_performZoom:function(){var a=this._map,c=a.getZoom(),p=this._map.options.zoomSnap||0;a._stop();var x=this._delta/(this._map.options.wheelPxPerZoomLevel*4),E=4*Math.log(2/(1+Math.exp(-Math.abs(x))))/Math.LN2,C=p?Math.ceil(E/p)*p:E,V=a._limitZoom(c+(this._delta>0?C:-C))-c;this._delta=0,this._startTime=null,V&&(a.options.scrollWheelZoom==="center"?a.setZoom(c+V):a.setZoomAround(this._lastMousePos,c+V))}});it.addInitHook("addHandler","scrollWheelZoom",ll);var Zr=600;it.mergeOptions({tapHold:je.touchNative&&je.safari&&je.mobile,tapTolerance:15});var ac=oi.extend({addHooks:function(){Be(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){vt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var c=a.touches[0];this._startPos=this._newPos=new _e(c.clientX,c.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(Be(document,"touchend",Bt),Be(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),Zr),Be(document,"touchend touchcancel contextmenu",this._cancel,this),Be(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){vt(document,"touchend",Bt),vt(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),vt(document,"touchend touchcancel contextmenu",this._cancel,this),vt(document,"touchmove",this._onMove,this)},_onMove:function(a){var c=a.touches[0];this._newPos=new _e(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,c){var p=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});p._simulated=!0,c.target.dispatchEvent(p)}});it.addInitHook("addHandler","tapHold",ac),it.mergeOptions({touchZoom:je.touch,bounceAtZoomLimits:!0});var du=oi.extend({addHooks:function(){Re(this._map._container,"leaflet-touch-zoom"),Be(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Nt(this._map._container,"leaflet-touch-zoom"),vt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(!(!a.touches||a.touches.length!==2||c._animatingZoom||this._zooming)){var p=c.mouseEventToContainerPoint(a.touches[0]),x=c.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(p.add(x)._divideBy(2))),this._startDist=p.distanceTo(x),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Be(document,"touchmove",this._onTouchMove,this),Be(document,"touchend touchcancel",this._onTouchEnd,this),Bt(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var c=this._map,p=c.mouseEventToContainerPoint(a.touches[0]),x=c.mouseEventToContainerPoint(a.touches[1]),E=p.distanceTo(x)/this._startDist;if(this._zoom=c.getScaleZoom(E,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&E<1||this._zoom>c.getMaxZoom()&&E>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,E===1)return}else{var C=p._add(x)._divideBy(2)._subtract(this._centerPoint);if(E===1&&C.x===0&&C.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(C),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),Z(this._animRequest);var V=d(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(V,this,!0),Bt(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Z(this._animRequest),vt(document,"touchmove",this._onTouchMove,this),vt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});it.addInitHook("addHandler","touchZoom",du),it.BoxZoom=Wn,it.DoubleClickZoom=rc,it.Drag=vs,it.Keyboard=hu,it.ScrollWheelZoom=ll,it.TapHold=ac,it.TouchZoom=du,t.Bounds=B,t.Browser=je,t.CRS=ie,t.Canvas=sc,t.Circle=Xl,t.CircleMarker=Ua,t.Class=We,t.Control=Rn,t.DivIcon=$h,t.DivOverlay=Dn,t.DomEvent=ms,t.DomUtil=rr,t.Draggable=Zi,t.Evented=ue,t.FeatureGroup=ps,t.GeoJSON=qs,t.GridLayer=Ga,t.Handler=oi,t.Icon=gs,t.ImageOverlay=qa,t.LatLng=Se,t.LatLngBounds=ve,t.Layer=Yi,t.LayerGroup=za,t.LineUtil=xi,t.Map=it,t.Marker=Jo,t.Mixin=Ql,t.Path=_s,t.Point=_e,t.PolyUtil=lr,t.Polygon=Ba,t.Polyline=Hs,t.Popup=il,t.PosAnimation=zs,t.Projection=Ki,t.Rectangle=Gr,t.Renderer=Qn,t.SVG=Za,t.SVGOverlay=ic,t.TileLayer=dr,t.Tooltip=sl,t.Transformation=De,t.Util=z,t.VideoOverlay=hr,t.bind=d,t.bounds=le,t.canvas=al,t.circle=Gh,t.circleMarker=Fh,t.control=$n,t.divIcon=Im,t.extend=l,t.featureGroup=Hh,t.geoJSON=nc,t.geoJson=nl,t.gridLayer=Qh,t.icon=Qo,t.imageOverlay=Zh,t.latLng=Ae,t.latLngBounds=ye,t.layerGroup=Am,t.map=or,t.marker=qh,t.point=Ee,t.polygon=Cm,t.polyline=Nm,t.popup=Yh,t.rectangle=km,t.setOptions=K,t.stamp=v,t.svg=ol,t.svgOverlay=Kh,t.tileLayer=Ei,t.tooltip=Rm,t.transformation=rt,t.version=r,t.videoOverlay=Fa;var fu=window.L;t.noConflict=function(){return window.L=fu,this},window.L=t}))})(ih,ih.exports)),ih.exports}var hi=L5();const Lo=Gw(hi),Dy=Object.freeze(Object.defineProperty({__proto__:null,default:Lo},Symbol.toStringTag,{value:"Module"}));function jy(i,e,t){return Object.freeze({instance:i,context:e,container:t})}function Py(i,e){return e==null?function(r,l){const u=k.useRef(void 0);return u.current||(u.current=i(r,l)),u}:function(r,l){const u=k.useRef(void 0);u.current||(u.current=i(r,l));const d=k.useRef(r),{instance:y}=u.current;return k.useEffect(function(){d.current!==r&&(e(y,r,d.current),d.current=r)},[y,r,e]),u}}function O5(i,e){k.useEffect(function(){return(e.layerContainer??e.map).addLayer(i.instance),function(){e.layerContainer?.removeLayer(i.instance),e.map.removeLayer(i.instance)}},[e,i])}function PS(i){return function(t){const r=Iy(),l=i(ky(t,r),r);return DS(r.map,t.attribution),jS(l.current,t.eventHandlers),O5(l.current,r),l}}function M5(i,e){const t=Py(i,e),r=PS(t);return I5(r)}function V5(i,e){const t=Py(i),r=j5(t,e);return k5(r)}function z5(i,e){const t=Py(i,e),r=PS(t);return D5(r)}function U5(i,e,t){const{opacity:r,zIndex:l}=e;r!=null&&r!==t.opacity&&i.setOpacity(r),l!=null&&l!==t.zIndex&&i.setZIndex(l)}function Tm(){return Iy().map}function LS(i){const e=Tm();return k.useEffect(function(){return e.on(i),function(){e.off(i)}},[e,i]),e}function B5({bounds:i,boundsOptions:e,center:t,children:r,className:l,id:u,placeholder:d,style:y,whenReady:v,zoom:b,...S},A){const[R]=k.useState({className:l,id:u,style:y}),[M,G]=k.useState(null),K=k.useRef(void 0);k.useImperativeHandle(A,()=>M?.map??null,[M]);const Y=k.useCallback(ae=>{if(ae!==null&&!K.current){const se=new hi.Map(ae,S);K.current=se,t!=null&&b!=null?se.setView(t,b):i!=null&&se.fitBounds(i,e),v!=null&&se.whenReady(v),G(C5(se))}},[]);k.useEffect(()=>()=>{M?.map.remove()},[M]);const ce=M?yf.createElement(Ry,{value:M},r):d??null;return yf.createElement("div",{...R,ref:Y},ce)}const Ly=k.forwardRef(B5),Sm=M5(function({position:e,...t},r){const l=new hi.Marker(e,t);return jy(l,R5(r,{overlayContainer:l}))},function(e,t,r){t.position!==r.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==r.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==r.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==r.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),Oy=V5(function(e,t){const r=new hi.Popup(e,t.overlayContainer);return jy(r,t)},function(e,t,{position:r},l){k.useEffect(function(){const{instance:d}=e;function y(b){b.popup===d&&(d.update(),l(!0))}function v(b){b.popup===d&&l(!1)}return t.map.on({popupopen:y,popupclose:v}),t.overlayContainer==null?(r!=null&&d.setLatLng(r),d.openOn(t.map)):t.overlayContainer.bindPopup(d),function(){t.map.off({popupopen:y,popupclose:v}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(d)}},[e,t,l,r])}),My=z5(function({url:e,...t},r){const l=new hi.TileLayer(e,ky(t,r));return jy(l,r)},function(e,t,r){U5(e,t,r);const{url:l}=t;l!=null&&l!==r.url&&e.setUrl(l)}),OS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",MS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",H5=new Lo.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),Hw=new Lo.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),q5=Lo.divIcon({className:"user-pulse-icon",html:'<div class="pulse-ring"></div><div class="user-dot"></div>',iconSize:[20,20],iconAnchor:[10,10]}),F5=[40.7128,-74.006];function G5({position:i}){const e=Tm();return k.useEffect(()=>{i&&e.flyTo(i,13)},[i,e]),i===null?null:f.jsx(Sm,{position:i,icon:q5,children:f.jsx(Oy,{children:f.jsx("div",{className:"text-center p-1",children:f.jsx("span",{className:"font-bold text-blue-600",children:"You are here"})})})})}function Z5({hospitals:i=[],userLocation:e=null}){const t=r=>r&&Object.values(r).reduce((u,d)=>u+d,0)>=10?H5:Hw;return f.jsx("div",{className:"h-[500px] w-full rounded-2xl overflow-hidden shadow-sm border border-slate-100 relative z-0",children:f.jsxs(Ly,{center:F5,zoom:11,scrollWheelZoom:!1,style:{height:"100%",width:"100%"},children:[f.jsx(My,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),f.jsx(G5,{position:e}),i.map(r=>r.location&&f.jsx(Sm,{position:[r.location.lat,r.location.lng],icon:t(r.bloodStock),children:f.jsx(Oy,{children:f.jsxs("div",{className:"min-w-[200px]",children:[f.jsxs("h3",{className:"font-bold text-lg mb-1 flex items-center gap-1 text-slate-900",children:[f.jsx(Eo,{className:"h-4 w-4 text-blue-600"}),r.hospitalName]}),f.jsxs("p",{className:"text-xs text-slate-500 mb-3 flex items-center gap-1",children:[f.jsx(ji,{className:"h-3 w-3"})," ",r.address]}),f.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${r.location.lat},${r.location.lng}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-brand-600 hover:text-brand-700 font-medium mb-3 flex items-center gap-1",children:[f.jsx(sh,{className:"h-3 w-3"})," Get Directions"]}),f.jsx("div",{className:"grid grid-cols-4 gap-2 text-center",children:Object.entries(r.bloodStock||{}).map(([l,u])=>f.jsxs("div",{className:`p-1 rounded ${u>0?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[f.jsx("div",{className:"text-xs font-bold",children:l}),f.jsx("div",{className:"text-xs",children:u})]},l))}),f.jsxs("div",{className:"mt-3 text-xs text-slate-400 text-center",children:["Last updated: ",new Date(r.lastUpdated).toLocaleTimeString()]})]})})},r.id))]})})}function K5(i,e,t,r){if(!i||!e||!t||!r)return null;var l=6371,u=nf(t-i),d=nf(r-e),y=Math.sin(u/2)*Math.sin(u/2)+Math.cos(nf(i))*Math.cos(nf(t))*Math.sin(d/2)*Math.sin(d/2),v=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)),b=l*v;return b.toFixed(1)}function nf(i){return i*(Math.PI/180)}function Y5(){const{currentUser:i}=jr(),e=kr(),[t,r]=k.useState("hospitals"),[l,u]=k.useState(""),[d,y]=k.useState(""),[v,b]=k.useState([]),[S,A]=k.useState([]),[R,M]=k.useState(null),[G,K]=k.useState(null),[Y,ce]=k.useState(!1),[ae,se]=k.useState(!1),[ke,be]=k.useState(Notification.permission),[Ne,P]=k.useState([]),[j,O]=k.useState(!1),[q,U]=k.useState([]),[Z,z]=k.useState("active");k.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(ie=>{M({lat:ie.coords.latitude,lng:ie.coords.longitude})},ie=>console.error("Error getting location:",ie))},[]),k.useEffect(()=>{const ie=JM(Ue=>{A(Ue)});return()=>ie()},[]);const We=k.useCallback(async()=>{if(i)try{const ie=await $M(i.uid);P(ie)}catch(ie){console.error("Error loading watchlist:",ie)}},[i]);k.useEffect(()=>{i&&We()},[i,We]),k.useEffect(()=>{if(!i)return;const ie=i4(i.uid,Ue=>{Ue.find(qe=>qe.status==="accepted"&&!qe.notified),U(Ue)});return()=>ie()},[i]),k.useEffect(()=>{if(!i||Ne.length===0)return;const ie=[...new Set(Ne.map(qe=>qe.bloodType))],Ue=e4(ie,qe=>{Ne.find(De=>De.bloodType===qe.bloodType&&(!De.location||qe.location&&qe.location.toLowerCase().includes(De.location.toLowerCase())))&&(Notification.permission==="granted"?new Notification("Blood Type Match Found!",{body:`${qe.bloodType} blood is now available in ${qe.location}.`,icon:"/vite.svg"}):alert(`New Match: ${qe.bloodType} available in ${qe.location}!`))});return()=>Ue()},[i,Ne]);const At=async ie=>{if(window.confirm("Are you sure you want to cancel this request?"))try{await r4(ie),Ve.success("Request cancelled.")}catch(Ue){console.error("Error cancelling request:",Ue),Ve.error("Failed to cancel request.")}},re=async ie=>{try{await a4(ie),Ve.success("Request archived.")}catch(Ue){console.error("Error archiving request:",Ue),Ve.error("Failed to archive request.")}},ue=async()=>{if(window.confirm("This will close all your pending requests. Are you sure you found a donor?"))try{await o4(i.uid),Ve.success("All pending requests closed! Glad you found help.")}catch(ie){console.error("Error marking fulfilled:",ie),Ve.error("Failed to update requests.")}},_e=async()=>{ce(!0),se(!0);try{const Ue=(await KM(l,d)).filter(qe=>qe.type==="donor");b(Ue)}catch(ie){console.error("Error searching:",ie)}ce(!1)},Ye=async()=>{try{const ie=await Notification.requestPermission();be(ie)}catch(ie){console.error("Error requesting permission:",ie)}},Ee=async()=>{if(!i){e("/login");return}if(!l){alert("Please select a blood type first.");return}ke!=="granted"&&await Ye(),O(!0);try{await YM(i.uid,l,d),await We(),alert(`You will be notified when ${l} becomes available${d?` in ${d}`:""}.`)}catch(ie){console.error("Error adding to watchlist:",ie),alert("Failed to add to watchlist. Please try again.")}O(!1)},B=async ie=>{if(!i){e("/login");return}const Ue=Ve.loading("Sending request...");try{await t4(i.uid,i.displayName||i.email.split("@")[0],ie.id,l||ie.donorProfile.bloodType,ie.name||ie.email.split("@")[0]),Ve.success(`Request sent to ${ie.name||ie.email.split("@")[0]}!`,{id:Ue})}catch(qe){console.error("Error requesting blood:",qe),Ve.error("Failed to send request. Please try again.",{id:Ue})}},le=q.filter(ie=>Z==="active"?ie.status==="pending"||ie.status==="accepted":ie.status==="cancelled"||ie.status==="rejected"||ie.status==="archived"||ie.status==="closed"),ve=q.filter(ie=>ie.status==="pending"||ie.status==="accepted").length,ye=S.filter(ie=>{const Ue=!l||ie.bloodStock&&ie.bloodStock[l]>0,qe=!d||ie.address&&ie.address.toLowerCase().includes(d.toLowerCase())||ie.hospitalName&&ie.hospitalName.toLowerCase().includes(d.toLowerCase());return Ue&&qe}),Se=ie=>{K(ie)},Ae=ie=>{navigator.clipboard.writeText(ie).then(()=>{Ve.success("Details copied to clipboard!"),K(null)}).catch(Ue=>{console.error("Failed to copy: ",Ue),Ve.error("Failed to copy details.")})};return f.jsxs("div",{className:"min-h-screen bg-slate-50 py-12 px-4 sm:px-6 lg:px-8",children:[f.jsx(Bh,{position:"top-center"}),G&&f.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:f.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-float",children:f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Hospital Details"}),f.jsx("button",{onClick:()=>K(null),className:"text-slate-400 hover:text-slate-600 transition-colors",children:f.jsx(Ah,{className:"h-6 w-6"})})]}),f.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100 mb-6",children:[f.jsx("p",{className:"font-bold text-lg text-slate-900 mb-2",children:G.hospitalName}),f.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[f.jsxs("p",{className:"flex items-start gap-2",children:[f.jsx(ji,{className:"h-4 w-4 mt-0.5 text-slate-400 shrink-0"}),G.address]}),G.phoneNumber&&f.jsxs("p",{className:"flex items-center gap-2",children:[f.jsx(xr,{className:"h-4 w-4 text-slate-400 shrink-0"}),G.phoneNumber]}),G.email&&f.jsxs("p",{className:"flex items-center gap-2",children:[f.jsx(Pi,{className:"h-4 w-4 text-slate-400 shrink-0"}),G.email]})]})]}),f.jsxs("button",{onClick:()=>{const ie=`Hospital Name: ${G.hospitalName}
Address: ${G.address}
Phone: ${G.phoneNumber||"N/A"}
Email: ${G.email||"N/A"}`;Ae(ie)},className:"w-full py-3 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 transition-all flex items-center justify-center gap-2 shadow-lg shadow-brand-200",children:[f.jsx(gC,{className:"h-5 w-5"}),"Copy Details"]})]})})}),f.jsxs("div",{className:"max-w-5xl mx-auto",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Find Blood & Donors"}),f.jsx("p",{className:"mt-2 text-slate-600",children:"Locate nearby hospitals or connect with individual donors."})]}),q.length>0&&f.jsxs("div",{className:"mb-8 bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:[f.jsxs("div",{className:"p-6 border-b border-slate-100 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[f.jsxs("div",{children:[f.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[f.jsx(Nl,{className:"h-5 w-5 text-red-600"}),"My Sent Requests"]}),f.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Manage your SOS requests to donors."})]}),ve>0&&f.jsxs("button",{onClick:ue,className:"px-4 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-bold hover:bg-green-200 transition-colors flex items-center gap-2",children:[f.jsx(ha,{className:"h-4 w-4"}),"I Found a Donor (Close All)"]})]}),f.jsxs("div",{className:"flex border-b border-slate-100",children:[f.jsxs("button",{onClick:()=>z("active"),className:`flex-1 py-3 text-sm font-bold text-center transition-colors ${Z==="active"?"bg-slate-50 text-blue-600 border-b-2 border-blue-600":"text-slate-500 hover:bg-slate-50"}`,children:["Active (",ve,")"]}),f.jsx("button",{onClick:()=>z("past"),className:`flex-1 py-3 text-sm font-bold text-center transition-colors ${Z==="past"?"bg-slate-50 text-slate-900 border-b-2 border-slate-900":"text-slate-500 hover:bg-slate-50"}`,children:"Past / Archived"})]}),f.jsx("div",{className:"p-6",children:le.length===0?f.jsxs("div",{className:"text-center py-8 text-slate-400",children:["No ",Z," requests found."]}):f.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:le.map(ie=>f.jsxs("div",{className:`p-5 rounded-xl border shadow-sm flex flex-col justify-between gap-4 ${ie.status==="accepted"?"border-green-200 bg-green-50":ie.status==="pending"?"border-slate-100 bg-white":"border-slate-100 bg-slate-50 opacity-75"}`,children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${ie.status==="accepted"?"bg-green-100 text-green-700":ie.status==="rejected"?"bg-red-100 text-red-700":ie.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-slate-200 text-slate-600"}`,children:ie.status.toUpperCase()}),f.jsxs("span",{className:"text-slate-400 text-xs flex items-center gap-1",children:[f.jsx(da,{className:"h-3 w-3"}),new Date(ie.createdAt).toLocaleDateString()]})]}),f.jsx("p",{className:"font-bold text-slate-900",children:ie.donorName?`Request to ${ie.donorName}`:`Request for ${ie.bloodType}`}),f.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["Blood Type: ",ie.bloodType]})]}),f.jsx("div",{className:"flex items-center gap-2 pt-2 border-t border-black/5",children:ie.status==="accepted"?f.jsxs(f.Fragment,{children:[f.jsxs("a",{href:`tel:${ie.donorPhone}`,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-bold hover:bg-green-700 shadow-sm flex items-center justify-center gap-2",children:[f.jsx(xr,{className:"h-4 w-4"}),"Call Donor"]}),f.jsx("button",{onClick:()=>re(ie.id),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg",title:"Archive",children:f.jsx(W2,{className:"h-4 w-4"})})]}):ie.status==="pending"?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-sm text-slate-500 italic flex-1",children:"Waiting..."}),f.jsx("button",{onClick:()=>At(ie.id),className:"px-3 py-1.5 border border-red-200 text-red-600 rounded-lg text-xs font-bold hover:bg-red-50",children:"Cancel"})]}):f.jsx("span",{className:"text-sm text-slate-400 w-full text-center",children:ie.status==="rejected"?"Donor declined":"Request closed"})})]},ie.id))})})]}),f.jsx("div",{className:"flex justify-center mb-8",children:f.jsxs("div",{className:"bg-white p-1 rounded-xl shadow-sm border border-slate-200 inline-flex",children:[f.jsxs("button",{onClick:()=>r("hospitals"),className:`px-6 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${t==="hospitals"?"bg-blue-600 text-white shadow-md":"text-slate-600 hover:bg-slate-50"}`,children:[f.jsx(Eo,{className:"h-4 w-4"}),"Hospitals & Banks"]}),f.jsxs("button",{onClick:()=>r("donors"),className:`px-6 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${t==="donors"?"bg-red-600 text-white shadow-md":"text-slate-600 hover:bg-slate-50"}`,children:[f.jsx(Pi,{className:"h-4 w-4"}),"Individual Donors"]})]})}),f.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6 mb-8",children:f.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[f.jsxs("div",{className:"relative",children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Blood Type"}),f.jsxs("div",{className:"relative",children:[f.jsxs("select",{className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 outline-none appearance-none bg-slate-50",value:l,onChange:ie=>u(ie.target.value),children:[f.jsx("option",{value:"",children:"All Blood Types"}),f.jsx("option",{value:"A+",children:"A+"}),f.jsx("option",{value:"A-",children:"A-"}),f.jsx("option",{value:"B+",children:"B+"}),f.jsx("option",{value:"B-",children:"B-"}),f.jsx("option",{value:"AB+",children:"AB+"}),f.jsx("option",{value:"AB-",children:"AB-"}),f.jsx("option",{value:"O+",children:"O+"}),f.jsx("option",{value:"O-",children:"O-"})]}),f.jsx(ya,{className:"absolute left-3 top-3.5 h-5 w-5 text-brand-500"})]})]}),f.jsxs("div",{className:"relative",children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Location (City)"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",placeholder:"e.g. New York",className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 outline-none bg-slate-50",value:d,onChange:ie=>y(ie.target.value)}),f.jsx(ji,{className:"absolute left-3 top-3.5 h-5 w-5 text-slate-400"})]})]}),f.jsxs("div",{className:"flex items-end gap-2",children:[f.jsx("button",{onClick:_e,disabled:Y,className:`flex-1 text-white font-bold py-3 rounded-xl shadow-md transition-colors flex items-center justify-center gap-2 disabled:opacity-70 ${t==="hospitals"?"bg-blue-600 hover:bg-blue-700 shadow-blue-200":"bg-red-600 hover:bg-red-700 shadow-red-200"}`,children:Y?"...":f.jsxs(f.Fragment,{children:[f.jsx(ex,{className:"h-5 w-5"}),"Search"]})}),f.jsxs("button",{onClick:Ee,disabled:j,className:"flex-1 bg-slate-800 hover:bg-slate-900 text-white font-bold py-3 rounded-xl shadow-md transition-colors flex items-center justify-center gap-2 disabled:opacity-70",title:"Notify me when this blood type becomes available",children:[f.jsx($b,{className:"h-5 w-5"}),"Notify Me"]})]})]})}),t==="hospitals"&&f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"mb-8",children:f.jsx(Z5,{hospitals:ye,userLocation:R?[R.lat,R.lng]:null})}),f.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[f.jsx(Eo,{className:"h-5 w-5 text-blue-600"}),"Nearby Hospitals (",ye.length,")"]}),f.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:ye.map(ie=>{const Ue=R&&ie.location?K5(R.lat,R.lng,ie.location.lat,ie.location.lng):null,qe=ie.bloodStock?Object.values(ie.bloodStock).reduce((xe,De)=>xe+De,0):0;return f.jsxs("div",{className:"bg-white p-4 sm:p-5 rounded-xl border border-slate-100 shadow-sm hover:border-blue-200 transition-all flex flex-col lg:flex-row justify-between lg:items-center gap-4 w-full overflow-hidden",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[" ",f.jsx("h3",{className:"font-bold text-lg text-slate-900 truncate",children:ie.hospitalName}),f.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-slate-500 mt-1",children:[Ue&&f.jsxs("span",{className:"flex items-center gap-1 text-blue-600 font-medium shrink-0",children:[f.jsx(sh,{className:"h-3.5 w-3.5"})," ",Ue," km away"]}),f.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[f.jsx(ya,{className:"h-3.5 w-3.5 text-red-500"})," ",qe," units"]})]}),f.jsx("p",{className:"text-xs text-slate-400 mt-2 line-clamp-3",children:ie.address})]}),f.jsxs("div",{className:"grid grid-cols-2 lg:flex lg:flex-col gap-2 w-full lg:w-auto lg:min-w-[140px]",children:[f.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${ie.location?.lat},${ie.location?.lng}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-3 py-2.5  rounded-lg text-xs sm:text-sm font-bold bg-blue-50 text-blue-700 hover:bg-blue-100 transition-colors flex items-center justify-center gap-2 ",children:[f.jsx(sh,{className:"h-4 w-4"}),"Directions"]}),ie.phoneNumber?f.jsxs("a",{href:`tel:${ie.phoneNumber}`,className:"flex-1 px-3 py-2.5 bg-white border border-green-500 text-green-600 rounded-lg text-xs sm:text-sm font-bold hover:bg-green-50 transition-all flex items-center justify-center gap-2",children:[f.jsx(xr,{className:"h-4 w-4"}),f.jsx("span",{children:"Call"})]}):f.jsxs("button",{disabled:!0,className:"flex-1 px-3 py-2.5 bg-slate-50 border border-slate-200 text-slate-400 rounded-lg text-xs sm:text-sm font-bold cursor-not-allowed flex items-center justify-center gap-2",children:[f.jsx(xr,{className:"h-4 w-4"}),f.jsx("span",{children:"No Phone"})]}),f.jsxs("button",{onClick:()=>Se(ie),className:"col-span-2 lg:col-span-1 flex-1 px-3 py-2.5 bg-white border border-slate-200 text-slate-600 rounded-lg text-xs sm:text-sm font-bold hover:bg-slate-50 hover:border-slate-300 transition-all flex items-center justify-center gap-2",children:[f.jsx(HC,{className:"h-4 w-4"}),f.jsx("span",{children:"Share Details"})]})]})]},ie.id)})})]}),t==="donors"&&f.jsxs("div",{className:"space-y-4",children:[f.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2 mb-4",children:[f.jsx(Pi,{className:"h-5 w-5 text-red-600"}),"Available Donors ",ae&&`(${v.length})`]}),v.length>0&&f.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-100 rounded-xl flex flex-col sm:flex-row items-center justify-between gap-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-red-800",children:"Emergency Broadcast"}),f.jsxs("p",{className:"text-sm text-red-600",children:["Send an urgent email notification to all ",v.length," donors in this list."]})]}),f.jsxs("button",{onClick:handleBroadcastNotification,className:"px-6 py-2 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 transition-colors shadow-lg shadow-red-200 flex items-center gap-2 whitespace-nowrap",children:[f.jsx($b,{className:"h-4 w-4"}),"Notify All"]})]}),!ae&&v.length===0&&f.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-100",children:[f.jsx(ex,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),f.jsx("p",{className:"text-slate-500 font-medium",children:"Search to find individual donors."})]}),v.map(ie=>f.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-100 hover:border-red-100 transition-all flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"text-red-600 font-bold text-xl h-14 w-14 rounded-full flex items-center justify-center border-2 bg-red-50 border-red-100",children:ie.donorProfile.bloodType}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-bold text-slate-900",children:ie.name||ie.email.split("@")[0]}),f.jsxs("div",{className:"flex items-center text-slate-500 text-sm mt-1 gap-4",children:[f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(ji,{className:"h-3 w-3"})," ",ie.donorProfile.city]}),f.jsxs("span",{className:"flex items-center gap-1 text-slate-400",children:[f.jsx(sh,{className:"h-3 w-3"})," ~5km away"]})]})]})]}),f.jsxs("button",{onClick:()=>B(ie),className:"w-full md:w-auto px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2 font-medium shadow-sm shadow-red-200",children:[f.jsx(Nl,{className:"h-4 w-4"}),"Request Blood"]})]},ie.id))]})]})]})}function $5(){const[i,e]=k.useState(""),[t,r]=k.useState(""),[l,u]=k.useState(""),[d,y]=k.useState(!1),{login:v}=jr(),b=kr();async function S(A){A.preventDefault();try{u(""),y(!0);const R=await v(i,t),M=await $c(R.user.uid);M?.role==="organizer"?b("/organizer"):M?.role==="hospital"?b("/hospital-dashboard"):b("/dashboard")}catch(R){u("Failed to sign in: "+R.message)}y(!1)}return f.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[f.jsx("div",{className:"flex justify-center",children:f.jsxs("div",{className:"relative",children:[f.jsx(Nl,{className:"h-12 w-12 text-brand-500 fill-brand-500"}),f.jsx("div",{className:"absolute inset-0 bg-brand-500 blur-lg opacity-20 rounded-full"})]})}),f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-slate-900",children:"Sign in to your account"}),f.jsxs("p",{className:"mt-2 text-center text-sm text-slate-600",children:["Or"," ",f.jsx(Mt,{to:"/register",className:"font-medium text-brand-600 hover:text-brand-500",children:"create a new account"})]})]}),f.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:f.jsxs("div",{className:"bg-white py-8 px-4 shadow-xl shadow-slate-200 sm:rounded-2xl sm:px-10 border border-slate-100",children:[l&&f.jsxs("div",{className:"mb-4 bg-red-50 border-l-4 border-red-500 p-4 rounded-md flex items-start gap-3",children:[f.jsx(Sh,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),f.jsx("p",{className:"text-sm text-red-700",children:l})]}),f.jsxs("form",{className:"space-y-6",onSubmit:S,children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700",children:"Email address"}),f.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx($f,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"focus:ring-brand-500 focus:border-brand-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-xl py-3",placeholder:"you@example.com",value:i,onChange:A=>e(A.target.value)})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700",children:"Password"}),f.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(zc,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"focus:ring-brand-500 focus:border-brand-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-xl py-3",placeholder:"",value:t,onChange:A=>r(A.target.value)})]})]}),f.jsx("div",{children:f.jsx("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-brand-600 hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:d?"Signing in...":"Sign in"})})]})]})})]})}function Q5(){const[i,e]=k.useState(""),[t,r]=k.useState(""),[l,u]=k.useState(""),[d,y]=k.useState(""),[v,b]=k.useState("user"),[S,A]=k.useState(""),[R,M]=k.useState(""),[G,K]=k.useState(!1),[Y,ce]=k.useState(!1),{signup:ae}=jr(),se=kr();async function ke(be){if(be.preventDefault(),v==="hospital"){se("/hospital-signup");return}if(l!==d)return M("Passwords do not match");if(v==="organizer"&&!S.trim())return M("Organization Name is required for organizers");try{M(""),K(!0),ce(!0);const Ne=await ae(t,l,i),P={name:i,email:t,role:v};v==="organizer"&&(P.organizationName=S),await qM(Ne.user.uid,P),window.location.href=v==="organizer"?"/organizer":"/dashboard"}catch(Ne){console.error(Ne),M("Failed to create an account: "+Ne.message),ce(!1),K(!1)}}return f.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[f.jsx("div",{className:"flex justify-center",children:f.jsxs("div",{className:"relative",children:[f.jsx(Nl,{className:"h-12 w-12 text-brand-500 fill-brand-500"}),f.jsx("div",{className:"absolute inset-0 bg-brand-500 blur-lg opacity-20 rounded-full"})]})}),f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-slate-900",children:"Create your account"}),f.jsxs("p",{className:"mt-2 text-center text-sm text-slate-600",children:["Already have an account?"," ",f.jsx(Mt,{to:"/login",className:"font-medium text-brand-600 hover:text-brand-500",children:"Sign in"})]})]}),f.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:f.jsxs("div",{className:"bg-white py-8 px-4 shadow-xl shadow-slate-200 sm:rounded-2xl sm:px-10 border border-slate-100",children:[R&&f.jsxs("div",{className:"mb-4 bg-red-50 border-l-4 border-red-500 p-4 rounded-md flex items-start gap-3",children:[f.jsx(Sh,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),f.jsx("p",{className:"text-sm text-red-700",children:R})]}),f.jsxs("form",{className:"space-y-6",onSubmit:ke,children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"I am a..."}),f.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[f.jsxs("button",{type:"button",onClick:()=>b("user"),className:`flex flex-col items-center justify-center p-2 rounded-xl border-2 transition-all ${v==="user"?"border-brand-500 bg-brand-50 text-brand-700":"border-slate-200 hover:border-slate-300 text-slate-600"}`,children:[f.jsx(Pi,{className:`h-5 w-5 mb-1 ${v==="user"?"text-brand-600":"text-slate-400"}`}),f.jsx("span",{className:"font-bold text-xs",children:"Donor/Seeker"})]}),f.jsxs("button",{type:"button",onClick:()=>b("organizer"),className:`flex flex-col items-center justify-center p-2 rounded-xl border-2 transition-all ${v==="organizer"?"border-brand-500 bg-brand-50 text-brand-700":"border-slate-200 hover:border-slate-300 text-slate-600"}`,children:[f.jsx(bf,{className:`h-5 w-5 mb-1 ${v==="organizer"?"text-brand-600":"text-slate-400"}`}),f.jsx("span",{className:"font-bold text-xs",children:"Organizer"})]}),f.jsxs("button",{type:"button",onClick:()=>b("hospital"),className:`flex flex-col items-center justify-center p-2 rounded-xl border-2 transition-all ${v==="hospital"?"border-brand-500 bg-brand-50 text-brand-700":"border-slate-200 hover:border-slate-300 text-slate-600"}`,children:[f.jsx(Eo,{className:`h-5 w-5 mb-1 ${v==="hospital"?"text-brand-600":"text-slate-400"}`}),f.jsx("span",{className:"font-bold text-xs",children:"Hospital"})]})]})]}),v==="organizer"&&f.jsxs("div",{children:[f.jsx("label",{htmlFor:"orgName",className:"block text-sm font-medium text-slate-700",children:"Organization Name"}),f.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(bf,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{id:"orgName",type:"text",required:!0,className:"focus:ring-brand-500 focus:border-brand-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-xl py-3",placeholder:"e.g. Red Cross NY",value:S,onChange:be=>A(be.target.value)})]})]}),v==="hospital"?f.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-4 text-center",children:[f.jsx(Eo,{className:"h-10 w-10 text-blue-500 mx-auto mb-2"}),f.jsx("h3",{className:"font-bold text-blue-900 mb-1",children:"Hospital Registration"}),f.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"Hospitals require additional verification details like License ID and Location."}),f.jsx("button",{type:"button",onClick:()=>se("/hospital-signup"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 rounded-lg transition-colors",children:"Go to Hospital Registration"})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-slate-700",children:"Full Name"}),f.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Pi,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{id:"fullName",name:"fullName",type:"text",autoComplete:"name",required:!0,className:"focus:ring-brand-500 focus:border-brand-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-xl py-3",placeholder:"John Doe",value:i,onChange:be=>e(be.target.value)})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700",children:"Email address"}),f.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx($f,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"focus:ring-brand-500 focus:border-brand-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-xl py-3",placeholder:"you@example.com",value:t,onChange:be=>r(be.target.value)})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700",children:"Password"}),f.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(zc,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"focus:ring-brand-500 focus:border-brand-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-xl py-3",placeholder:"",value:l,onChange:be=>u(be.target.value)})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password-confirm",className:"block text-sm font-medium text-slate-700",children:"Confirm Password"}),f.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(zc,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{id:"password-confirm",name:"password-confirm",type:"password",autoComplete:"new-password",required:!0,className:"focus:ring-brand-500 focus:border-brand-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-xl py-3",placeholder:"",value:d,onChange:be=>y(be.target.value)})]})]}),f.jsx("div",{children:f.jsx("button",{type:"submit",disabled:G,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-brand-600 hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:G?"Creating account...":"Create Account"})})]})]})]})})]})}function W5(){const[i,e]=k.useState("A+"),[t,r]=k.useState(""),[l,u]=k.useState(1),[d,y]=k.useState(""),v=async b=>{b.preventDefault();try{await WM("test-hospital-id",i,t,l),y(`Success! Added ${l} unit(s) of ${i} in ${t}`),r(""),u(1),setTimeout(()=>y(""),3e3)}catch(S){console.error(S),y(`Error: ${S.message}`)}};return f.jsx("div",{className:"min-h-screen bg-slate-50 py-12 px-4",children:f.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-2xl shadow-sm border border-slate-100 p-8",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Hospital Admin (Test)"}),f.jsx("p",{className:"text-slate-500 mt-2",children:"Add blood inventory to trigger notifications."})]}),d&&f.jsx("div",{className:`p-4 rounded-xl mb-6 text-center text-sm font-medium ${d.includes("Error")?"bg-red-50 text-red-600":"bg-green-50 text-green-600"}`,children:d}),f.jsxs("form",{onSubmit:v,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Blood Type"}),f.jsxs("div",{className:"relative",children:[f.jsxs("select",{className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 outline-none appearance-none bg-slate-50",value:i,onChange:b=>e(b.target.value),children:[f.jsx("option",{value:"A+",children:"A+"}),f.jsx("option",{value:"A-",children:"A-"}),f.jsx("option",{value:"B+",children:"B+"}),f.jsx("option",{value:"B-",children:"B-"}),f.jsx("option",{value:"AB+",children:"AB+"}),f.jsx("option",{value:"AB-",children:"AB-"}),f.jsx("option",{value:"O+",children:"O+"}),f.jsx("option",{value:"O-",children:"O-"})]}),f.jsx(ya,{className:"absolute left-3 top-3.5 h-5 w-5 text-brand-500"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Location"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",required:!0,placeholder:"e.g. New York",className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 outline-none",value:t,onChange:b=>r(b.target.value)}),f.jsx(ji,{className:"absolute left-3 top-3.5 h-5 w-5 text-slate-400"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Quantity (Units)"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"number",min:"1",required:!0,className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 outline-none",value:l,onChange:b=>u(b.target.value)}),f.jsx(S_,{className:"absolute left-3 top-3.5 h-5 w-5 text-slate-400"})]})]}),f.jsxs("button",{type:"submit",className:"w-full bg-slate-900 hover:bg-slate-800 text-white font-bold py-3 rounded-xl shadow-md transition-colors flex items-center justify-center gap-2 mt-4",children:[f.jsx(A_,{className:"h-5 w-5"}),"Add to Inventory"]})]})]})})}function El(){return El=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},El.apply(this,arguments)}function X5(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,Ff(i,e)}function Ff(i,e){return Ff=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Ff(i,e)}function J5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function __(i,e,t){return __=J5()?Reflect.construct.bind():function(r,l,u){var d=[null];d.push.apply(d,l);var y=new(Function.bind.apply(r,d));return u&&Ff(y,u.prototype),y},__.apply(null,arguments)}function ga(i,e,t,r){e===void 0&&(e=""),r===void 0&&(r={});var l=document.createElement(i);return e&&(l.className=e),Object.keys(r).forEach(function(u){if(typeof r[u]=="function"){var d=u.indexOf("on")===0?u.substr(2).toLowerCase():u;l.addEventListener(d,r[u])}else u==="html"?l.innerHTML=r[u]:u==="text"?l.innerText=r[u]:l.setAttribute(u,r[u])}),t&&t.appendChild(l),l}function Qu(i){i.preventDefault(),i.stopPropagation()}var _f=function(){return[].slice.call(arguments).filter(Boolean).join(" ").trim()};function Tl(i,e){i&&i.classList&&(Array.isArray(e)?e:[e]).forEach(function(t){i.classList.contains(t)||i.classList.add(t)})}function br(i,e){i&&i.classList&&(Array.isArray(e)?e:[e]).forEach(function(t){i.classList.contains(t)&&i.classList.remove(t)})}var Gf,Zf=13,y_=40,VS=38,e3=[Zf,27,y_,VS,37,39],t3=(function(){function i(t){var r=this,l=t.handleSubmit,u=t.searchLabel,d=t.classNames,y=d===void 0?{}:d;this.container=void 0,this.form=void 0,this.input=void 0,this.handleSubmit=void 0,this.hasError=!1,this.container=ga("div",_f("geosearch",y.container)),this.form=ga("form",["",y.form].join(" "),this.container,{autocomplete:"none",onClick:Qu,onDblClick:Qu,touchStart:Qu,touchEnd:Qu}),this.input=ga("input",["glass",y.input].join(" "),this.form,{type:"text",placeholder:u||"search",onInput:this.onInput,onKeyUp:function(v){return r.onKeyUp(v)},onKeyPress:function(v){return r.onKeyPress(v)},onFocus:this.onFocus,onBlur:this.onBlur,onClick:function(){r.input.focus(),r.input.dispatchEvent(new Event("focus"))}}),this.handleSubmit=l}var e=i.prototype;return e.onFocus=function(){Tl(this.form,"active")},e.onBlur=function(){br(this.form,"active")},e.onSubmit=function(t){try{var r=this;return Qu(t),br(l=r.container,"error"),Tl(l,"pending"),Promise.resolve(r.handleSubmit({query:r.input.value})).then(function(){br(r.container,"pending")})}catch(u){return Promise.reject(u)}var l},e.onInput=function(){this.hasError&&(br(this.container,"error"),this.hasError=!1)},e.onKeyUp=function(t){t.keyCode===27&&(br(this.container,["pending","active"]),this.input.value="",document.body.focus(),document.body.blur())},e.onKeyPress=function(t){t.keyCode===Zf&&this.onSubmit(t)},e.setQuery=function(t){this.input.value=t},i})(),n3=(function(){function i(t){var r=this,l=t.handleClick,u=t.classNames,d=u===void 0?{}:u,y=t.notFoundMessage;this.handleClick=void 0,this.selected=-1,this.results=[],this.container=void 0,this.resultItem=void 0,this.notFoundMessage=void 0,this.onClick=function(v){if(typeof r.handleClick=="function"){var b=v.target;if(b&&r.container.contains(b)&&b.hasAttribute("data-key")){var S=Number(b.getAttribute("data-key"));r.handleClick({result:r.results[S]})}}},this.handleClick=l,this.notFoundMessage=y?ga("div",_f(d.notfound),void 0,{html:y}):void 0,this.container=ga("div",_f("results",d.resultlist)),this.container.addEventListener("click",this.onClick,!0),this.resultItem=ga("div",_f(d.item))}var e=i.prototype;return e.render=function(t,r){var l=this;t===void 0&&(t=[]),this.clear(),t.forEach(function(u,d){var y=l.resultItem.cloneNode(!0);y.setAttribute("data-key",""+d),y.innerHTML=r({result:u}),l.container.appendChild(y)}),t.length>0?(Tl(this.container.parentElement,"open"),Tl(this.container,"active")):this.notFoundMessage&&(this.container.appendChild(this.notFoundMessage),Tl(this.container.parentElement,"open")),this.results=t},e.select=function(t){return Array.from(this.container.children).forEach(function(r,l){return l===t?Tl(r,"active"):br(r,"active")}),this.selected=t,this.results[t]},e.count=function(){return this.results?this.results.length:0},e.clear=function(){for(this.selected=-1;this.container.lastChild;)this.container.removeChild(this.container.lastChild);br(this.container.parentElement,"open"),br(this.container,"active")},i})(),Vg={position:"topleft",style:"button",showMarker:!0,showPopup:!1,popupFormat:function(i){return""+i.result.label},resultFormat:function(i){return""+i.result.label},marker:{icon:Dy&&hi.Icon?new hi.Icon.Default:void 0,draggable:!1},maxMarkers:1,maxSuggestions:5,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",clearSearchLabel:"Clear search",notFoundMessage:"",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",resetButton:"reset",msgbox:"leaflet-bar message",form:"",input:"",resultlist:"",item:"",notfound:"leaflet-bar-notfound"},autoComplete:!0,autoCompleteDelay:250,autoClose:!1,keepResult:!1,updateMap:!0,resetButton:""},zS="Leaflet must be loaded before instantiating the GeoSearch control",i3={options:El({},Vg),classNames:El({},Vg.classNames),initialize:function(i){var e,t,r,l,u=this;if(!Dy)throw new Error(zS);if(!i.provider)throw new Error("Provider is missing from options");this.options=El({},Vg,i),this.classNames=El({},this.classNames,i.classNames),this.markers=new hi.FeatureGroup,this.classNames.container+=" leaflet-geosearch-"+this.options.style,this.searchElement=new t3({searchLabel:this.options.searchLabel,classNames:{container:this.classNames.container,form:this.classNames.form,input:this.classNames.input},handleSubmit:function(d){return u.onSubmit(d)}}),this.button=ga("a",this.classNames.button,this.searchElement.container,{title:this.options.searchLabel,href:"#",onClick:function(d){return u.onClick(d)}}),hi.DomEvent.disableClickPropagation(this.button),this.resetButton=ga("button",this.classNames.resetButton,this.searchElement.form,{text:this.options.resetButton,"aria-label":this.options.clearSearchLabel,onClick:function(){u.searchElement.input.value===""?u.close():u.clearResults(null,!0)}}),hi.DomEvent.disableClickPropagation(this.resetButton),this.options.autoComplete&&(this.resultList=new n3({handleClick:function(d){var y=d.result;u.searchElement.input.value=y.label,u.onSubmit({query:y.label,data:y})},classNames:{resultlist:this.classNames.resultlist,item:this.classNames.item,notfound:this.classNames.notfound},notFoundMessage:this.options.notFoundMessage}),this.searchElement.form.appendChild(this.resultList.container),this.searchElement.input.addEventListener("keyup",(e=function(d){return u.autoSearch(d)},(t=this.options.autoCompleteDelay)===void 0&&(t=250),r===void 0&&(r=!1),function(){var d=[].slice.call(arguments);l&&clearTimeout(l),l=setTimeout(function(){l=null,r||e.apply(void 0,d)},t),r&&!l&&e.apply(void 0,d)}),!0),this.searchElement.input.addEventListener("keydown",function(d){return u.selectResult(d)},!0),this.searchElement.input.addEventListener("keydown",function(d){return u.clearResults(d,!0)},!0)),this.searchElement.form.addEventListener("click",function(d){d.preventDefault()},!1)},onAdd:function(i){var e=this.options,t=e.showMarker,r=e.style;if(this.map=i,t&&this.markers.addTo(i),r==="bar"){var l=i.getContainer().querySelector(".leaflet-control-container");this.container=ga("div","leaflet-control-geosearch leaflet-geosearch-bar"),this.container.appendChild(this.searchElement.form),l.appendChild(this.container)}return hi.DomEvent.disableClickPropagation(this.searchElement.form),this.searchElement.container},onRemove:function(){var i;return(i=this.container)==null||i.remove(),this},open:function(){var i=this.searchElement,e=i.input;Tl(i.container,"active"),e.focus()},close:function(){br(this.searchElement.container,"active"),this.clearResults()},onClick:function(i){i.preventDefault(),i.stopPropagation(),this.searchElement.container.classList.contains("active")?this.close():this.open()},selectResult:function(i){if([Zf,y_,VS].indexOf(i.keyCode)!==-1)if(i.preventDefault(),i.keyCode!==Zf){var e=this.resultList.count()-1;if(!(e<0)){var t=this.resultList.selected,r=i.keyCode===y_?t+1:t-1,l=this.resultList.select(r<0?e:r>e?0:r);this.searchElement.input.value=l.label}}else{var u=this.resultList.select(this.resultList.selected);this.onSubmit({query:this.searchElement.input.value,data:u})}},clearResults:function(i,e){if(e===void 0&&(e=!1),!i||i.keyCode===27){var t=this.options,r=t.autoComplete;!e&&t.keepResult||(this.searchElement.input.value="",this.markers.clearLayers()),r&&this.resultList.clear()}},autoSearch:function(i){try{var e=this;if(e3.indexOf(i.keyCode)>-1)return Promise.resolve();var t=i.target.value,r=e.options.provider,l=(function(){if(t.length)return Promise.resolve(r.search({query:t})).then(function(u){u=u.slice(0,e.options.maxSuggestions),e.resultList.render(u,e.options.resultFormat)});e.resultList.clear()})();return Promise.resolve(l&&l.then?l.then(function(){}):void 0)}catch(u){return Promise.reject(u)}},onSubmit:function(i){try{var e=this;return e.resultList.clear(),Promise.resolve(e.options.provider.search(i)).then(function(t){t&&t.length>0&&e.showResult(t[0],i)})}catch(t){return Promise.reject(t)}},showResult:function(i,e){var t=this.options,r=t.autoClose,l=t.updateMap,u=this.markers.getLayers();u.length>=this.options.maxMarkers&&this.markers.removeLayer(u[0]);var d=this.addMarker(i,e);l&&this.centerMap(i),this.map.fireEvent("geosearch/showlocation",{location:i,marker:d}),r&&this.closeResults()},closeResults:function(){var i=this.searchElement.container;i.classList.contains("active")&&br(i,"active"),this.clearResults()},addMarker:function(i,e){var t=this,r=this.options,l=r.marker,u=r.showPopup,d=r.popupFormat,y=new hi.Marker([i.y,i.x],l),v=i.label;return typeof d=="function"&&(v=d({query:e,result:i})),y.bindPopup(v),this.markers.addLayer(y),u&&y.openPopup(),l.draggable&&y.on("dragend",function(b){t.map.fireEvent("geosearch/marker/dragend",{location:y.getLatLng(),event:b})}),y},centerMap:function(i){var e=this.options,t=e.retainZoomLevel,r=e.animateZoom,l=i.bounds?new hi.LatLngBounds(i.bounds):new hi.LatLng(i.y,i.x).toBounds(10),u=l.isValid()?l:this.markers.getBounds();!t&&l.isValid()&&!i.bounds||t||!l.isValid()?this.map.setView(u.getCenter(),this.getZoom(),{animate:r}):this.map.fitBounds(u,{animate:r})},getZoom:function(){var i=this.options,e=i.zoomLevel;return i.retainZoomLevel?this.map.getZoom():e}};function US(){if(!Dy)throw new Error(zS);var i=hi.Control.extend(i3);return __(i,[].slice.call(arguments))}(function(i){i[i.SEARCH=0]="SEARCH",i[i.REVERSE=1]="REVERSE"})(Gf||(Gf={}));var s3=(function(){function i(t){t===void 0&&(t={}),this.options=void 0,this.options=t}var e=i.prototype;return e.getParamString=function(t){t===void 0&&(t={});var r=El({},this.options.params,t);return Object.keys(r).map(function(l){return encodeURIComponent(l)+"="+encodeURIComponent(r[l])}).join("&")},e.getUrl=function(t,r){return t+"?"+this.getParamString(r)},e.search=function(t){try{var r=this,l=r.endpoint({query:t.query,type:Gf.SEARCH});return Promise.resolve(fetch(l)).then(function(u){return Promise.resolve(u.json()).then(function(d){return r.parse({data:d})})})}catch(u){return Promise.reject(u)}},i})();var qw;(function(i){i[i.INITIALIZED=0]="INITIALIZED",i[i.LOADING=1]="LOADING",i[i.SUCCESS=2]="SUCCESS",i[i.FAILURE=3]="FAILURE"})(qw||(qw={}));var BS=(function(i){function e(r){var l;r===void 0&&(r={}),(l=i.call(this,r)||this).searchUrl=void 0,l.reverseUrl=void 0;var u="https://nominatim.openstreetmap.org";return l.searchUrl=r.searchUrl||u+"/search",l.reverseUrl=r.reverseUrl||u+"/reverse",l}X5(e,i);var t=e.prototype;return t.endpoint=function(r){var l=r.query,u=r.type,d=typeof l=="string"?{q:l}:l;return d.format="json",this.getUrl(u===Gf.REVERSE?this.reverseUrl:this.searchUrl,d)},t.parse=function(r){return(Array.isArray(r.data)?r.data:[r.data]).map(function(l){return{x:Number(l.lon),y:Number(l.lat),label:l.display_name,bounds:[[parseFloat(l.boundingbox[0]),parseFloat(l.boundingbox[2])],[parseFloat(l.boundingbox[1]),parseFloat(l.boundingbox[3])]],raw:l}})},e})(s3);let r3=Lo.icon({iconUrl:OS,shadowUrl:MS,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]});Lo.Marker.prototype.options.icon=r3;function a3({provider:i,onResult:e}){const t=Tm();return k.useEffect(()=>{const r=new US({provider:i,style:"bar",showMarker:!1,keepResult:!0,autoClose:!0});return t.addControl(r),t.on("geosearch/showlocation",l=>{e&&e(l.location)}),()=>t.removeControl(r)},[t,i,e]),null}function o3({position:i,setPosition:e,onDragEnd:t}){const r=k.useRef(null),l=yf.useMemo(()=>({dragend(){const u=r.current;if(u!=null){const d=u.getLatLng();e(d),t(d)}}}),[t,e]);return f.jsx(Sm,{draggable:!0,eventHandlers:l,position:i,ref:r,children:f.jsx(Oy,{minWidth:90,children:f.jsx("span",{children:"Drag me to adjust location!"})})})}function l3({setPosition:i,onLocationUpdate:e}){return LS({click(t){i(t.latlng),e(t.latlng)}}),null}function c3({onLocationSelect:i}){const[e,t]=k.useState({lat:40.7128,lng:-74.006}),[r,l]=k.useState(""),u=new BS,d=async(S,A)=>{try{const M=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${S}&lon=${A}`)).json();M&&M.display_name?(l(M.display_name),i({lat:S,lng:A,address:M.display_name})):i({lat:S,lng:A,address:`${S}, ${A}`})}catch(R){console.error("Error fetching address:",R),i({lat:S,lng:A,address:`${S}, ${A}`})}},y=S=>{const A={lat:S.y,lng:S.x};t(A),l(S.label),i({lat:A.lat,lng:A.lng,address:S.label})},v=S=>{d(S.lat,S.lng)},b=S=>{d(S.lat,S.lng)};return f.jsxs("div",{className:"h-[400px] w-full rounded-xl overflow-hidden relative z-0",children:[f.jsxs(Ly,{center:e,zoom:13,style:{height:"100%",width:"100%"},children:[f.jsx(My,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),f.jsx(a3,{provider:u,onResult:y}),f.jsx(o3,{position:e,setPosition:t,onDragEnd:v}),f.jsx(l3,{setPosition:t,onLocationUpdate:b})]}),f.jsxs("div",{className:"absolute bottom-4 left-4 right-4 bg-white/90 backdrop-blur p-3 rounded-lg shadow-lg z-[1000] text-sm border border-slate-200",children:[f.jsx("p",{className:"font-bold text-slate-700",children:"Selected Location:"}),f.jsx("p",{className:"text-slate-600 truncate",children:r||"Search or click on map to select"}),f.jsxs("p",{className:"text-xs text-slate-400 mt-1 font-mono",children:[e.lat.toFixed(5),", ",e.lng.toFixed(5)]})]})]})}function u3(){const{currentUser:i}=jr(),e=kr(),[t,r]=k.useState([]),[l,u]=k.useState([]),[d,y]=k.useState(!1),[v,b]=k.useState("camps"),[S,A]=k.useState(""),[R,M]=k.useState(""),[G,K]=k.useState(""),[Y,ce]=k.useState(""),[ae,se]=k.useState(""),[ke,be]=k.useState(""),[Ne,P]=k.useState(""),[j,O]=k.useState({lat:40.7128,lng:-74.006}),[q,U]=k.useState("");k.useEffect(()=>{i&&Z()},[i]);const Z=async()=>{if(i)try{const ue=await u4(i.uid);r(ue);const _e=ue.map(B=>fS(B.id)),Ee=(await Promise.all(_e)).flat();Ee.sort((B,le)=>new Date(B.date)-new Date(le.date)),u(Ee)}catch(ue){console.error("Error loading data:",ue)}},z=ue=>{O({lat:ue.lat,lng:ue.lng}),ue.address&&ce(ue.address)},We=async ue=>{ue.preventDefault(),y(!0);try{await l4(i.uid,{campName:S,organizerName:R,contact:G,address:Y,date:ae,startTime:ke,endTime:Ne,location:j}),U("Donation camp added successfully!"),Ve.success("Donation camp added!"),A(""),M(""),K(""),ce(""),se(""),be(""),P(""),Z(),setTimeout(()=>U(""),3e3)}catch(_e){console.error("Error adding camp:",_e),U("Error adding camp. Please try again."),Ve.error("Error adding camp")}y(!1)},At=async(ue,_e)=>{if(!_e){Ve.error("Please select the collected blood type.");return}if(window.confirm(`Confirm donation from ${ue.donorName} (${_e})?`))try{await pS(ue.id,ue.venueId,_e,ue.donorId,ue.venueName,"camp"),Ve.success("Donation recorded successfully!"),Z()}catch(Ye){console.error("Error completing appointment:",Ye),Ve.error("Failed to complete appointment.")}},re=async ue=>{if(window.confirm("Mark this appointment as No-Show?"))try{await mS(ue),Ve.success("Marked as No-Show"),Z()}catch{Ve.error("Failed to update status")}};return i?f.jsxs("div",{className:"min-h-screen bg-slate-50 py-12 px-4 sm:px-6 lg:px-8",children:[f.jsx(Bh,{}),f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-10 gap-4",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Organizer Portal"}),f.jsx("p",{className:"mt-2 text-slate-600",children:"Manage blood donation camps and events."})]}),f.jsxs("div",{className:"flex bg-slate-200 p-1 rounded-xl",children:[f.jsx("button",{onClick:()=>b("camps"),className:`px-6 py-2 rounded-lg font-bold text-sm transition-all ${v==="camps"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Manage Camps"}),f.jsx("button",{onClick:()=>b("schedule"),className:`px-6 py-2 rounded-lg font-bold text-sm transition-all ${v==="schedule"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Donation Schedule"})]})]}),v==="camps"?f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[f.jsx("div",{className:"lg:col-span-1",children:f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-2",children:[f.jsx(S_,{className:"h-5 w-5 text-brand-500"}),"Add New Camp"]}),q&&f.jsx("div",{className:`p-4 rounded-xl mb-6 text-sm font-medium ${q.includes("Error")?"bg-red-50 text-red-600":"bg-green-50 text-green-600"}`,children:q}),f.jsxs("form",{onSubmit:We,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Camp Name"}),f.jsx("input",{type:"text",required:!0,className:"w-full p-3 rounded-xl border border-slate-200 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 outline-none",value:S,onChange:ue=>A(ue.target.value),placeholder:"e.g. City Center Blood Drive"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Organizer Name"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",required:!0,className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 outline-none",value:R,onChange:ue=>M(ue.target.value),placeholder:"e.g. Red Cross NY"}),f.jsx(Pi,{className:"absolute left-3 top-3.5 h-5 w-5 text-slate-400"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"date",required:!0,className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 outline-none",value:ae,onChange:ue=>se(ue.target.value)}),f.jsx(ts,{className:"absolute left-3 top-3.5 h-5 w-5 text-slate-400"})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Start Time"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"time",required:!0,className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 outline-none",value:ke,onChange:ue=>be(ue.target.value)}),f.jsx(da,{className:"absolute left-3 top-3.5 h-5 w-5 text-slate-400"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"End Time"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"time",required:!0,className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 outline-none",value:Ne,onChange:ue=>P(ue.target.value)}),f.jsx(da,{className:"absolute left-3 top-3.5 h-5 w-5 text-slate-400"})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Location / Address"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",required:!0,className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 outline-none",value:Y,onChange:ue=>ce(ue.target.value),placeholder:"e.g. 123 Main St, New York"}),f.jsx(ji,{className:"absolute left-3 top-3.5 h-5 w-5 text-slate-400"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Number"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"tel",required:!0,className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 outline-none",value:G,onChange:ue=>K(ue.target.value),placeholder:"+1 234 567 8900"}),f.jsx(xr,{className:"absolute left-3 top-3.5 h-5 w-5 text-slate-400"})]})]}),f.jsx("button",{type:"submit",disabled:d,className:"w-full bg-slate-900 hover:bg-slate-800 text-white font-bold py-3 rounded-xl shadow-md transition-colors flex items-center justify-center gap-2 mt-4 disabled:opacity-70",children:d?"Adding...":f.jsxs(f.Fragment,{children:[f.jsx(A_,{className:"h-5 w-5"}),"Publish Camp"]})})]})]})}),f.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6 min-h-[400px] flex flex-col",children:[f.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Camp Location Selector"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Search for a venue or drag the marker to pinpoint the exact location."}),f.jsx(c3,{onLocationSelect:z})]}),f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[f.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Your Upcoming Camps"}),t.length===0?f.jsx("p",{className:"text-slate-500 text-center py-8",children:"No camps found."}):f.jsx("div",{className:"grid gap-4",children:t.map(ue=>f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-4 rounded-xl bg-slate-50 border border-slate-100 hover:border-brand-200 transition-colors",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-slate-900 text-lg",children:ue.campName}),f.jsxs("p",{className:"text-sm text-slate-500 flex items-center gap-1 mt-1",children:[f.jsx(Pi,{className:"h-3 w-3"})," Organized by ",ue.organizerName]}),f.jsxs("p",{className:"text-sm text-slate-500 flex items-center gap-1 mt-0.5",children:[f.jsx(ji,{className:"h-3 w-3"})," ",ue.address]})]}),f.jsxs("div",{className:"mt-3 sm:mt-0 text-right",children:[f.jsxs("div",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-brand-100 text-brand-700 rounded-full text-sm font-medium",children:[f.jsx(ts,{className:"h-3.5 w-3.5"}),ue.date]}),ue.startTime&&ue.endTime&&f.jsxs("div",{className:"mt-1 flex items-center justify-end gap-1 text-xs text-slate-500 font-medium",children:[f.jsx(da,{className:"h-3 w-3"}),ue.startTime," - ",ue.endTime]}),f.jsx("p",{className:"text-sm text-slate-400 mt-1",children:ue.contact})]})]},ue.id))})]})]})]}):f.jsx(h3,{appointments:l,onComplete:At,onNoShow:re})]})]}):f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Access Restricted"}),f.jsx("p",{className:"text-slate-600 mt-2",children:"Please log in to access the Organizer Portal."}),f.jsx("button",{onClick:()=>e("/login"),className:"mt-4 text-brand-600 font-bold underline",children:"Go to Login"})]})})}function h3({appointments:i,onComplete:e,onNoShow:t}){const[r,l]=k.useState("active"),[u,d]=k.useState(""),b=i.filter(A=>{const R=A.status==="scheduled";return r==="active"?R:!R}).filter(A=>A.donorName.toLowerCase().includes(u.toLowerCase())).reduce((A,R)=>{const M=R.date;return A[M]||(A[M]=[]),A[M].push(R),A},{}),S=Object.keys(b).sort();return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[f.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl w-full md:w-auto",children:[f.jsx("button",{onClick:()=>l("active"),className:`flex-1 md:flex-none px-6 py-2 rounded-lg font-bold text-sm transition-all ${r==="active"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Active / Upcoming"}),f.jsx("button",{onClick:()=>l("past"),className:`flex-1 md:flex-none px-6 py-2 rounded-lg font-bold text-sm transition-all ${r==="past"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Past History"})]}),f.jsxs("div",{className:"relative w-full md:w-64",children:[f.jsx("input",{type:"text",placeholder:"Search donor name...",value:u,onChange:A=>d(A.target.value),className:"w-full pl-10 pr-4 py-2 rounded-xl border border-slate-200 outline-none focus:border-brand-500 text-sm"}),f.jsx(Pi,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-400"})]})]}),S.length===0?f.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl border border-dashed border-slate-200",children:[f.jsx(ts,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),f.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:["No ",r," appointments"]}),f.jsx("p",{className:"text-slate-500",children:r==="active"?"No upcoming appointments scheduled for this date.":"No past appointment history found."})]}):f.jsx("div",{className:"space-y-8",children:S.map(A=>f.jsxs("div",{children:[f.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[f.jsx(ts,{className:"h-5 w-5 text-brand-500"}),new Date(A).toDateString()]}),f.jsx("div",{className:"grid gap-4",children:b[A].map(R=>f.jsx(d3,{appt:R,onComplete:e,onNoShow:t},R.id))})]},A))})]})}function d3({appt:i,onComplete:e,onNoShow:t}){const[r,l]=k.useState("A+"),u=i.status==="completed",d=i.status==="no-show";return f.jsxs("div",{className:`bg-white p-5 rounded-xl border shadow-sm flex flex-col md:flex-row justify-between items-start md:items-center gap-4 transition-all ${u?"border-green-200 bg-green-50/30":d?"border-red-200 bg-red-50/30":"border-slate-100 hover:border-brand-200"}`,children:[f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"h-14 w-14 rounded-full bg-red-50 border-2 border-red-100 flex items-center justify-center font-bold text-xl text-brand-600 shadow-sm",children:f.jsx("div",{className:"flex flex-col items-center justify-center",children:f.jsx(ya,{className:"h-6 w-6"})})}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-slate-900 text-lg",children:i.donorName}),f.jsxs("p",{className:"text-xs text-slate-500 mb-1",children:["Venue: ",i.venueName]}),f.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-slate-500",children:[f.jsxs("span",{className:"flex items-center gap-1 font-medium text-slate-700 bg-slate-100 px-2 py-0.5 rounded-md",children:[f.jsx(da,{className:"h-3.5 w-3.5"})," ",i.timeSlot]}),u&&f.jsxs("span",{className:"flex items-center gap-1 text-green-600 font-bold bg-green-100 px-2 py-0.5 rounded-full text-xs",children:[f.jsx(ha,{className:"h-3 w-3"})," Completed"]}),d&&f.jsxs("span",{className:"flex items-center gap-1 text-red-600 font-bold bg-red-100 px-2 py-0.5 rounded-full text-xs",children:[f.jsx(dh,{className:"h-3 w-3"})," No-Show"]}),!u&&!d&&f.jsx("span",{className:"flex items-center gap-1 text-blue-600 font-bold bg-blue-100 px-2 py-0.5 rounded-full text-xs",children:"Scheduled"})]})]})]}),!u&&!d&&f.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full md:w-auto bg-slate-50 p-2 rounded-xl border border-slate-100",children:[f.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider ml-1",children:"Action:"}),f.jsx("select",{className:"p-2 rounded-lg border border-slate-200 text-sm outline-none focus:border-brand-500 bg-white",value:r,onChange:y=>l(y.target.value),title:"Confirm Collected Blood Type",children:["A+","A-","B+","B-","AB+","AB-","O+","O-"].map(y=>f.jsx("option",{value:y,children:y},y))}),f.jsx("button",{onClick:()=>e(i,r),className:"p-2 bg-green-100 hover:bg-green-200 text-green-700 rounded-lg transition-colors",title:"Mark Completed",children:f.jsx(ha,{className:"h-5 w-5"})}),f.jsx("button",{onClick:()=>t(i.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors",title:"Mark No-Show",children:f.jsx(dh,{className:"h-5 w-5"})})]})]})}function f3(){const[i,e]=k.useState([]),[t,r]=k.useState([]),[l,u]=k.useState(!0),[d,y]=k.useState("upcoming");k.useEffect(()=>{h4(),v()},[]);const v=async()=>{try{const b=await c4(),S=new Date().toISOString().split("T")[0],A=b.filter(M=>M.date>=S&&M.status!=="archived").sort((M,G)=>new Date(M.date)-new Date(G.date)),R=b.filter(M=>M.date<S&&M.status!=="archived").sort((M,G)=>new Date(G.date)-new Date(M.date));e(A),r(R)}catch(b){console.error("Error loading camps:",b)}u(!1)};return f.jsx("div",{className:"min-h-screen bg-slate-50 py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Blood Donation Camps"}),f.jsx("p",{className:"mt-2 text-slate-600",children:"Find upcoming events or view past successful camps."})]}),f.jsx("div",{className:"flex justify-center mb-10",children:f.jsxs("div",{className:"bg-white p-1 rounded-xl shadow-sm border border-slate-200 inline-flex",children:[f.jsxs("button",{onClick:()=>y("upcoming"),className:`px-6 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${d==="upcoming"?"bg-brand-500 text-white shadow-md":"text-slate-600 hover:bg-slate-50"}`,children:[f.jsx(ts,{className:"h-4 w-4"}),"Upcoming Events"]}),f.jsxs("button",{onClick:()=>y("past"),className:`px-6 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${d==="past"?"bg-slate-700 text-white shadow-md":"text-slate-600 hover:bg-slate-50"}`,children:[f.jsx(Qb,{className:"h-4 w-4"}),"Past Events"]})]})}),l?f.jsx("div",{className:"text-center py-12",children:f.jsx("p",{className:"text-slate-500",children:"Loading camps..."})}):f.jsxs(f.Fragment,{children:[d==="upcoming"&&(i.length===0?f.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-100",children:[f.jsx(ts,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),f.jsx("p",{className:"text-slate-500 font-medium",children:"No upcoming donation camps found."}),f.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Please check back later."})]}):f.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in fade-in",children:i.map(b=>f.jsx(Fw,{camp:b,isPast:!1},b.id))})),d==="past"&&(t.length===0?f.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-100",children:[f.jsx(Qb,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),f.jsx("p",{className:"text-slate-500 font-medium",children:"No past camps history available."})]}):f.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in fade-in",children:t.map(b=>f.jsx(Fw,{camp:b,isPast:!0},b.id))}))]})]})})}function Fw({camp:i,isPast:e}){const t=()=>{i.location&&i.location.lat&&i.location.lng?window.open(`https://www.google.com/maps/dir/?api=1&destination=${i.location.lat},${i.location.lng}`,"_blank"):window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(i.address)}`,"_blank")};return f.jsxs("div",{className:`bg-white rounded-2xl shadow-sm border overflow-hidden transition-all ${e?"border-slate-100 opacity-75 hover:opacity-100":"border-slate-100 hover:shadow-md hover:border-brand-100"}`,children:[f.jsxs("div",{className:`p-6 border-b ${e?"bg-slate-50 border-slate-100":"bg-brand-50 border-brand-100"}`,children:[f.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-1",children:i.campName}),f.jsxs("p",{className:`text-sm font-medium flex items-center gap-1 ${e?"text-slate-500":"text-brand-700"}`,children:[f.jsx(Pi,{className:"h-3.5 w-3.5"})," Organized by ",i.organizerName]})]}),f.jsxs("div",{className:"p-6 space-y-4",children:[f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"bg-slate-100 p-2 rounded-lg",children:f.jsx(ts,{className:"h-5 w-5 text-slate-600"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Date"}),f.jsx("p",{className:"text-slate-900 font-medium",children:i.date})]})]}),f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"bg-slate-100 p-2 rounded-lg",children:f.jsx(da,{className:"h-5 w-5 text-slate-600"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Timings"}),f.jsx("p",{className:"text-slate-900 font-medium",children:i.startTime&&i.endTime?`${i.startTime} - ${i.endTime}`:"All Day"})]})]}),f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"bg-slate-100 p-2 rounded-lg",children:f.jsx(ji,{className:"h-5 w-5 text-slate-600"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Location"}),f.jsx("p",{className:"text-slate-900 font-medium",children:i.address})]})]}),f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"bg-slate-100 p-2 rounded-lg",children:f.jsx(xr,{className:"h-5 w-5 text-slate-600"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Contact"}),f.jsx("p",{className:"text-slate-900 font-medium",children:i.contact})]})]})]}),f.jsx("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-100",children:f.jsx("button",{disabled:e,onClick:e?void 0:t,className:`w-full font-bold py-2.5 rounded-xl transition-colors flex items-center justify-center gap-2 ${e?"bg-slate-200 text-slate-500 cursor-not-allowed":"bg-slate-900 hover:bg-slate-800 text-white"}`,children:e?"Event Completed":f.jsxs(f.Fragment,{children:[f.jsx(sh,{className:"h-4 w-4"}),"Get Directions"]})})})]})}let m3=Lo.icon({iconUrl:OS,shadowUrl:MS,iconSize:[25,41],iconAnchor:[12,41]});Lo.Marker.prototype.options.icon=m3;function p3({setLocation:i,setAddress:e}){const t=Tm();return k.useEffect(()=>{const r=new BS,l=new US({provider:r,style:"bar",showMarker:!1,showPopup:!1,autoClose:!0,retainZoomLevel:!1,animateZoom:!0,keepResult:!0,searchLabel:"Search for address..."});return t.addControl(l),t.on("geosearch/showlocation",u=>{u.location&&(i({lat:u.location.y,lng:u.location.x}),e(u.location.label))}),()=>t.removeControl(l)},[t,i,e]),null}function g3({position:i,setPosition:e}){LS({click(r){e(r.latlng)}});const t={dragend(r){const l=r.target;l!=null&&e(l.getLatLng())}};return i===null?null:f.jsx(Sm,{position:i,draggable:!0,eventHandlers:t})}function _3(){const[i,e]=k.useState(""),[t,r]=k.useState(""),[l,u]=k.useState(""),[d,y]=k.useState(""),[v,b]=k.useState(""),[S,A]=k.useState(""),[R,M]=k.useState(""),[G,K]=k.useState(null),[Y,ce]=k.useState(""),[ae,se]=k.useState(!1),{signup:ke}=jr(),be=kr();async function Ne(P){if(P.preventDefault(),t!==l)return ce("Passwords do not match");if(!G)return ce("Please search or click on the map to set the hospital location.");if(!/^[0-9+]+$/.test(R))return ce("Phone number must contain only digits and optional + prefix");try{ce(""),se(!0);const j=await ke(i,t);await QM(j.user.uid,{email:i,hospitalName:d,licenseId:v,address:S,phoneNumber:R,location:{lat:G.lat,lng:G.lng}}),be("/hospital-dashboard")}catch(j){ce("Failed to create account: "+j.message)}se(!1)}return f.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[f.jsx("div",{className:"flex justify-center",children:f.jsxs("div",{className:"relative",children:[f.jsx(Eo,{className:"h-12 w-12 text-blue-600"}),f.jsx("div",{className:"absolute inset-0 bg-blue-500 blur-lg opacity-20 rounded-full"})]})}),f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-slate-900",children:"Hospital Registration"}),f.jsx("p",{className:"mt-2 text-center text-sm text-slate-600",children:"Join our network to save lives."})]}),f.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full max-w-6xl",children:f.jsxs("div",{className:"bg-white py-8 px-4 shadow-xl shadow-slate-200 sm:rounded-2xl sm:px-10 border border-slate-100",children:[Y&&f.jsxs("div",{className:"mb-4 bg-red-50 border-l-4 border-red-500 p-4 rounded-md flex items-start gap-3",children:[f.jsx(Sh,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),f.jsx("p",{className:"text-sm text-red-700",children:Y})]}),f.jsxs("form",{className:"space-y-6 lg:space-y-0 lg:grid lg:grid-cols-2 lg:gap-x-12",onSubmit:Ne,children:[f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Hospital Name"}),f.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Eo,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{type:"text",required:!0,className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-xl py-3",placeholder:"e.g. General City Hospital",value:d,onChange:P=>y(P.target.value)})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"License ID"}),f.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(fE,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{type:"text",required:!0,className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-xl py-3",placeholder:"License Number",value:v,onChange:P=>b(P.target.value)})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Phone Number"}),f.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(xr,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{type:"tel",required:!0,className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-xl py-3",placeholder:"+1 234 567 8900",value:R,onChange:P=>M(P.target.value)})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Email address"}),f.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx($f,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{type:"email",required:!0,className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-xl py-3",placeholder:"admin@hospital.com",value:i,onChange:P=>e(P.target.value)})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Password"}),f.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(zc,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{type:"password",required:!0,className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-xl py-3",value:t,onChange:P=>r(P.target.value)})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Confirm Password"}),f.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(zc,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{type:"password",required:!0,className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-xl py-3",value:l,onChange:P=>u(P.target.value)})]})]})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Hospital Location"}),f.jsxs("div",{className:"h-[500px] w-full rounded-xl overflow-hidden border border-slate-300 relative z-0",children:[f.jsxs(Ly,{center:[40.7128,-74.006],zoom:11,style:{height:"100%",width:"100%"},children:[f.jsx(My,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),f.jsx(p3,{setLocation:K,setAddress:A}),f.jsx(g3,{position:G,setPosition:K})]}),!G&&f.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white/90 px-3 py-1 rounded-full text-xs font-medium text-slate-600 shadow-sm pointer-events-none z-[1000]",children:"Use search or click to pin location"})]}),f.jsx("p",{className:"text-xs text-slate-500 mt-1",children:G?`Pinned: ${G.lat.toFixed(4)}, ${G.lng.toFixed(4)}`:"Search for address or click on map to set location."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Full Address"}),f.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(ji,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{type:"text",required:!0,className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-xl py-3",placeholder:"Address will auto-fill from map...",value:S,onChange:P=>A(P.target.value)})]}),f.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"You can edit this address if needed."})]}),f.jsx("div",{className:"pt-4",children:f.jsx("button",{type:"submit",disabled:ae,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 transition-all",children:ae?"Registering...":"Register Hospital"})})]})]}),f.jsx("div",{className:"mt-6 text-center",children:f.jsx(Mt,{to:"/login",className:"text-sm font-medium text-blue-600 hover:text-blue-500",children:"Already have an account? Sign in"})})]})})]})}function y3(){const{currentUser:i}=jr(),e=kr(),[t,r]=k.useState(null),[l,u]=k.useState([]),[d,y]=k.useState(!0),[v,b]=k.useState("stock");k.useEffect(()=>{if(!i){e("/login");return}const G=XM(i.uid,K=>{r(K),y(!1)});return S(),()=>G()},[i,e]);const S=async()=>{if(i)try{const G=await fS(i.uid);u(G)}catch(G){console.error("Failed to load appointments",G)}},A=async(G,K)=>{try{await dS(i.uid,G,K),Ve.success(`Stock updated: ${K>0?"+":""}${K} ${G}`)}catch(Y){console.error("Failed to update stock",Y),Ve.error("Failed to update stock")}},R=async(G,K)=>{if(!K){Ve.error("Please select the collected blood type.");return}if(window.confirm(`Confirm donation from ${G.donorName} (${K})?`))try{await pS(G.id,i.uid,K,G.donorId,t.hospitalName,"hospital"),Ve.success("Donation recorded successfully!"),S()}catch(Y){console.error("Error completing appointment:",Y),Ve.error("Failed to complete appointment.")}},M=async G=>{if(window.confirm("Mark this appointment as No-Show?"))try{await mS(G),Ve.success("Marked as No-Show"),S()}catch{Ve.error("Failed to update status")}};return d?f.jsx("div",{className:"p-8 text-center",children:"Loading Inventory..."}):t?f.jsxs("div",{className:"min-h-screen bg-slate-50 py-12 px-4 sm:px-6 lg:px-8",children:[f.jsx(Bh,{}),f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-8 mb-8",children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-4",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:f.jsx(Eo,{className:"h-8 w-8 text-blue-600"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:t.hospitalName}),f.jsxs("p",{className:"text-slate-500 flex items-center gap-1",children:[f.jsx(ji,{className:"h-4 w-4"})," ",t.address]})]})]}),f.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:[f.jsx("button",{onClick:()=>b("stock"),className:`px-6 py-2 rounded-lg font-bold text-sm transition-all ${v==="stock"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Blood Stock"}),f.jsx("button",{onClick:()=>b("schedule"),className:`px-6 py-2 rounded-lg font-bold text-sm transition-all ${v==="schedule"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Donation Schedule"})]})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[f.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"Live Inventory System  Last Updated: ",new Date(t.lastUpdated).toLocaleString()]})]}),v==="stock"?f.jsxs(f.Fragment,{children:[f.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-6",children:"Manage Blood Stock"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:["A+","A-","B+","B-","AB+","AB-","O+","O-"].map(G=>f.jsx(x3,{type:G,count:t.bloodStock[G]||0,onUpdate:A},G))})]}):f.jsx(v3,{appointments:l,onComplete:R,onNoShow:M})]})]}):f.jsxs("div",{className:"p-8 text-center text-red-500",children:[f.jsx(Sh,{className:"h-12 w-12 mx-auto mb-2"}),"Error: Hospital inventory not found."]})}function v3({appointments:i,onComplete:e,onNoShow:t}){const[r,l]=k.useState("active"),[u,d]=k.useState(""),b=i.filter(A=>{const R=A.status==="scheduled";return r==="active"?R:!R}).filter(A=>A.donorName.toLowerCase().includes(u.toLowerCase())).reduce((A,R)=>{const M=R.date;return A[M]||(A[M]=[]),A[M].push(R),A},{}),S=Object.keys(b).sort();return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[f.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl w-full md:w-auto",children:[f.jsx("button",{onClick:()=>l("active"),className:`flex-1 md:flex-none px-6 py-2 rounded-lg font-bold text-sm transition-all ${r==="active"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Active / Upcoming"}),f.jsx("button",{onClick:()=>l("past"),className:`flex-1 md:flex-none px-6 py-2 rounded-lg font-bold text-sm transition-all ${r==="past"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Past History"})]}),f.jsxs("div",{className:"relative w-full md:w-64",children:[f.jsx("input",{type:"text",placeholder:"Search donor name...",value:u,onChange:A=>d(A.target.value),className:"w-full pl-10 pr-4 py-2 rounded-xl border border-slate-200 outline-none focus:border-brand-500 text-sm"}),f.jsx(Pi,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-400"})]})]}),S.length===0?f.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl border border-dashed border-slate-200",children:[f.jsx(ts,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),f.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:["No ",r," appointments"]}),f.jsx("p",{className:"text-slate-500",children:r==="active"?"No upcoming appointments scheduled for this date.":"No past appointment history found."})]}):f.jsx("div",{className:"space-y-8",children:S.map(A=>f.jsxs("div",{children:[f.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[f.jsx(ts,{className:"h-5 w-5 text-brand-500"}),new Date(A).toDateString()]}),f.jsx("div",{className:"grid gap-4",children:b[A].map(R=>f.jsx(b3,{appt:R,onComplete:e,onNoShow:t},R.id))})]},A))})]})}function b3({appt:i,onComplete:e,onNoShow:t}){const[r,l]=k.useState("A+"),u=i.status==="completed",d=i.status==="no-show";return f.jsxs("div",{className:`bg-white p-5 rounded-xl border shadow-sm flex flex-col md:flex-row justify-between items-start md:items-center gap-4 transition-all ${u?"border-green-200 bg-green-50/30":d?"border-red-200 bg-red-50/30":"border-slate-100 hover:border-brand-200"}`,children:[f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"h-14 w-14 rounded-full bg-red-50 border-2 border-red-100 flex items-center justify-center font-bold text-xl text-brand-600 shadow-sm",children:f.jsx(ya,{className:"h-6 w-6"})}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-slate-900 text-lg",children:i.donorName}),f.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-slate-500 mt-1",children:[f.jsxs("span",{className:"flex items-center gap-1 font-medium text-slate-700 bg-slate-100 px-2 py-0.5 rounded-md",children:[f.jsx(da,{className:"h-3.5 w-3.5"})," ",i.timeSlot]}),u&&f.jsxs("span",{className:"flex items-center gap-1 text-green-600 font-bold bg-green-100 px-2 py-0.5 rounded-full text-xs",children:[f.jsx(ha,{className:"h-3 w-3"})," Completed"]}),d&&f.jsxs("span",{className:"flex items-center gap-1 text-red-600 font-bold bg-red-100 px-2 py-0.5 rounded-full text-xs",children:[f.jsx(dh,{className:"h-3 w-3"})," No-Show"]}),!u&&!d&&f.jsx("span",{className:"flex items-center gap-1 text-blue-600 font-bold bg-blue-100 px-2 py-0.5 rounded-full text-xs",children:"Scheduled"})]})]})]}),!u&&!d&&f.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full md:w-auto bg-slate-50 p-2 rounded-xl border border-slate-100",children:[f.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider ml-1",children:"Action:"}),f.jsx("select",{className:"p-2 rounded-lg border border-slate-200 text-sm outline-none focus:border-brand-500 bg-white",value:r,onChange:y=>l(y.target.value),title:"Confirm Collected Blood Type",children:["A+","A-","B+","B-","AB+","AB-","O+","O-"].map(y=>f.jsx("option",{value:y,children:y},y))}),f.jsx("button",{onClick:()=>e(i,r),className:"p-2 bg-green-100 hover:bg-green-200 text-green-700 rounded-lg transition-colors",title:"Mark Completed",children:f.jsx(ha,{className:"h-5 w-5"})}),f.jsx("button",{onClick:()=>t(i.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors",title:"Mark No-Show",children:f.jsx(dh,{className:"h-5 w-5"})})]})]})}function x3({type:i,count:e,onUpdate:t}){const r=e<5,l=e===0;return f.jsxs("div",{className:`bg-white rounded-xl shadow-sm border p-6 flex flex-col items-center transition-all ${l?"border-red-200 ring-2 ring-red-50":"border-slate-100"}`,children:[f.jsxs("div",{className:"w-16 h-16 rounded-full bg-red-50 flex items-center justify-center mb-4 relative",children:[f.jsx("span",{className:"text-xl font-bold text-red-600",children:i}),f.jsx(ya,{className:"absolute -top-1 -right-1 h-6 w-6 text-red-500 fill-red-500"})]}),f.jsxs("div",{className:"text-center mb-6",children:[f.jsx("span",{className:"text-4xl font-bold text-slate-900",children:e}),f.jsx("p",{className:`text-xs font-medium mt-1 ${r?"text-red-500":"text-slate-400"}`,children:l?"OUT OF STOCK":r?"LOW STOCK":"Units Available"})]}),f.jsxs("div",{className:"flex items-center gap-4 w-full",children:[f.jsx("button",{onClick:()=>t(i,-1),disabled:e<=0,className:"flex-1 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg flex items-center justify-center disabled:opacity-50",children:f.jsx(DC,{className:"h-4 w-4"})}),f.jsx("button",{onClick:()=>t(i,1),className:"flex-1 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center justify-center shadow-md shadow-blue-200",children:f.jsx(S_,{className:"h-4 w-4"})})]})]})}function w3(){const{currentUser:i}=jr(),e=kr(),[t,r]=k.useState(!0),[l,u]=k.useState(!1),[d,y]=k.useState(""),[v,b]=k.useState(""),[S,A]=k.useState(!1),[R,M]=k.useState("user"),[G,K]=k.useState(""),[Y,ce]=k.useState(""),[ae,se]=k.useState("");k.useEffect(()=>{async function be(){if(i)try{const Ne=Ft(tt,"users",i.uid),P=await Vh(Ne);if(P.exists()){const j=P.data();y(j.name||i.displayName||""),b(j.email||i.email||""),A(j.isDonor||!1),M(j.role||"user"),j.role==="hospital"?K(j.phoneNumber||""):j.donorProfile&&(K(j.donorProfile.phone||""),ce(j.donorProfile.city||""),se(j.donorProfile.bloodType||""))}}catch(Ne){console.error("Error fetching user data:",Ne),Ve.error("Failed to load profile data")}r(!1)}be()},[i]);const ke=async be=>{if(be.preventDefault(),!!i){u(!0);try{const Ne=Ft(tt,"users",i.uid),P={name:d,...S&&{donorProfile:{phone:G,city:Y,bloodType:ae}}};if(S)await Fn(Ne,{name:d,"donorProfile.phone":G,"donorProfile.city":Y,"donorProfile.bloodType":ae});else if(R==="hospital"){await Fn(Ne,{name:d,phoneNumber:G});try{const j=Ft(tt,"inventory",i.uid);await Fn(j,{phoneNumber:G})}catch(j){console.error("Error updating inventory phone:",j)}}else await Fn(Ne,{name:d});d!==i.displayName&&await tT(i,{displayName:d}),Ve.success("Profile updated successfully!")}catch(Ne){console.error("Error updating profile:",Ne),Ve.error("Failed to update profile.")}u(!1)}};return t?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:f.jsx(Xb,{className:"h-8 w-8 text-brand-500 animate-spin"})}):f.jsxs("div",{className:"min-h-screen bg-slate-50 py-12 px-4 sm:px-6 lg:px-8",children:[f.jsx(Bh,{position:"top-center"}),f.jsxs("div",{className:"max-w-2xl mx-auto",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Profile Settings"}),f.jsx("p",{className:"mt-2 text-slate-600",children:"Manage your personal information and contact details."})]}),f.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:f.jsx("div",{className:"p-8",children:f.jsxs("form",{onSubmit:ke,className:"space-y-6",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsx("h2",{className:"text-lg font-bold text-slate-900 border-b border-slate-100 pb-2 mb-4",children:"Personal Information"}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Full Name"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Pi,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{type:"text",required:!0,value:d,onChange:be=>y(be.target.value),className:"block w-full pl-10 pr-3 py-3 border border-slate-200 rounded-xl focus:ring-brand-500 focus:border-brand-500 outline-none",placeholder:"John Doe"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email Address"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx($f,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{type:"email",disabled:!0,value:v,className:"block w-full pl-10 pr-3 py-3 border border-slate-200 rounded-xl bg-slate-50 text-slate-500 cursor-not-allowed"})]}),f.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Email cannot be changed."})]})]}),R==="hospital"&&f.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-100",children:[f.jsxs("h2",{className:"text-lg font-bold text-slate-900 pb-2 mb-4 flex items-center gap-2",children:[f.jsx(xr,{className:"h-5 w-5 text-blue-500"}),"Contact Information"]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Hospital Phone Number"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(xr,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{type:"tel",value:G,onChange:be=>K(be.target.value),className:"block w-full pl-10 pr-3 py-3 border border-slate-200 rounded-xl focus:ring-brand-500 focus:border-brand-500 outline-none",placeholder:"+1 234 567 8900"})]})]})]}),S?f.jsxs("div",{className:"space-y-4 pt-4",children:[f.jsxs("h2",{className:"text-lg font-bold text-slate-900 border-b border-slate-100 pb-2 mb-4 flex items-center gap-2",children:[f.jsx(Nl,{className:"h-5 w-5 text-red-500"}),"Donor Details"]}),f.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Blood Type"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(ya,{className:"h-5 w-5 text-red-500"})}),f.jsxs("select",{value:ae,onChange:be=>se(be.target.value),className:"block w-full pl-10 pr-3 py-3 border border-slate-200 rounded-xl focus:ring-brand-500 focus:border-brand-500 outline-none",children:[f.jsx("option",{value:"",children:"Select Type"}),f.jsx("option",{value:"A+",children:"A+"}),f.jsx("option",{value:"A-",children:"A-"}),f.jsx("option",{value:"B+",children:"B+"}),f.jsx("option",{value:"B-",children:"B-"}),f.jsx("option",{value:"AB+",children:"AB+"}),f.jsx("option",{value:"AB-",children:"AB-"}),f.jsx("option",{value:"O+",children:"O+"}),f.jsx("option",{value:"O-",children:"O-"})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"City / Location"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(ji,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{type:"text",value:Y,onChange:be=>ce(be.target.value),className:"block w-full pl-10 pr-3 py-3 border border-slate-200 rounded-xl focus:ring-brand-500 focus:border-brand-500 outline-none",placeholder:"e.g. New York"})]})]}),f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Phone Number"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(xr,{className:"h-5 w-5 text-slate-400"})}),f.jsx("input",{type:"tel",value:G,onChange:be=>K(be.target.value),className:"block w-full pl-10 pr-3 py-3 border border-slate-200 rounded-xl focus:ring-brand-500 focus:border-brand-500 outline-none",placeholder:"+1 234 567 8900"})]})]})]})]}):R==="user"&&f.jsxs("div",{className:"bg-red-50 rounded-xl p-6 text-center border border-red-100 mt-6",children:[f.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center mx-auto mb-3 shadow-sm",children:f.jsx(Nl,{className:"h-6 w-6 text-red-500"})}),f.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Become a Donor"}),f.jsx("p",{className:"text-slate-600 mb-4 text-sm",children:"You haven't registered as a donor yet. Join our community and save lives."}),f.jsx("button",{type:"button",onClick:()=>e("/dashboard"),className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-bold text-sm transition-colors shadow-sm",children:"Register as Donor"})]}),f.jsx("div",{className:"pt-6 flex justify-end",children:f.jsx("button",{type:"submit",disabled:l,className:"bg-slate-900 hover:bg-slate-800 text-white px-8 py-3 rounded-xl font-bold shadow-md transition-all flex items-center gap-2 disabled:opacity-70",children:l?f.jsxs(f.Fragment,{children:[f.jsx(Xb,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):f.jsxs(f.Fragment,{children:[f.jsx(A_,{className:"h-4 w-4"}),"Save Changes"]})})})]})})})]})]})}const E3=()=>{const i=kr(),[e,t]=k.useState(!1),[r,l]=k.useState([{id:1,text:"Hello! How can I help you today?",sender:"bot"}]),[u,d]=k.useState(""),[y,v]=k.useState("normal"),[b,S]=k.useState({bloodGroup:"",city:""}),A=k.useRef(null),R=()=>{A.current?.scrollIntoView({behavior:"smooth"})};k.useEffect(()=>{R()},[r,e]);const M=Y=>{const ce=Y.toLowerCase();return ce.includes("hello")||ce.includes("hi")?"Hello! I'm here to help you with blood donation queries. Ask me about eligibility, how to donate, or emergency requests.":ce.includes("eligible")||ce.includes("eligibility")?"To be eligible to donate blood, you must be 18-65 years old, weigh at least 50kg, and be in good health. Redirecting to the dashboard now, please take the eligibility quiz to see if you are eligible to donate first.":ce.includes("donate")||ce.includes("donation")?"You can donate by finding a nearby camp or hospital on our platform. Redirecting to the Camps page now, please register as a donor if you haven't already.":ce.includes("emergency")?"For emergencies, please visit the 'Search' page to find compatible donors immediately or contact local hospitals.":ce.includes("where")&&ce.includes("donate")?"You can find donation camps near you. Redirecting to the camps page now, please check for upcoming donation events.":"I'm not sure I understand. Try asking about 'eligibility', 'donation process', or 'emergency' help."},G=()=>{if(!u.trim())return;const Y=u,ce={id:Date.now(),text:Y,sender:"user"};l(ae=>[...ae,ce]),d(""),setTimeout(async()=>{let ae="";({...b});const se=Y.toLowerCase();if(y==="normal"&&(se.includes("urgent")||se.includes("emergency")||se.includes("need blood")||se.includes("map")||se.includes("help")))v("emergency"),ae=" Im here to help. Please tell me the required blood group.";else if(y==="emergency"&&!b.bloodGroup){const be=Y.toUpperCase();S(Ne=>({...Ne,bloodGroup:be})),ae="Got it. Please tell me your city or location."}else if(y==="emergency"&&b.bloodGroup&&!b.city){const be=Y.trim(),Ne=be.charAt(0).toUpperCase()+be.slice(1).toLowerCase();S(P=>({...P,city:Ne}));try{const P=qn(fn(tt,"users"),Zt("isDonor","==",!0),Zt("isEligible","==",!0),Zt("donorProfile.bloodType","==",b.bloodGroup),Zt("donorProfile.city","==",Ne)),j=await Cs(P),O=[];if(j.forEach(q=>{const U=q.data();U.donorProfile&&O.push({name:U.name||"Anonymous",phone:U.donorProfile.phone||"N/A"})}),O.length>0){const q=O.slice(0,3).map(U=>` ${U.name} (${U.phone})`).join(`
`);ae=`Found ${O.length} match(es) in ${Ne}:
${q}

Redirecting to the map now, please use the search filters to find and contact more donors.`}else ae=`I couldn't find any registered donors for ${b.bloodGroup} in ${Ne}. Redirecting to the map now, please try expanding your search area or contacting nearby hospitals directly.`}catch(P){console.error("Error searching donors:",P),ae="Sorry, I encountered an error while searching. Please try again later."}v("normal"),S({bloodGroup:"",city:""}),setTimeout(()=>{i("/search")},3e3)}else ae=M(Y),se.includes("where")&&se.includes("donate")?setTimeout(()=>{i("/camps")},3e3):(se.includes("eligible")||se.includes("eligibility")||se.includes("donate")||se.includes("donation"))&&setTimeout(()=>{i("/dashboard")},3e3);const ke={id:Date.now()+1,text:ae,sender:"bot"};l(be=>[...be,ke])},1e3)},K=Y=>{Y.key==="Enter"&&G()};return f.jsxs("div",{className:"fixed bottom-6 right-6 z-50",children:[e&&f.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-80 sm:w-96 h-[500px] flex flex-col mb-4 border border-gray-200 overflow-hidden transition-all duration-300 ease-in-out",children:[f.jsxs("div",{className:"bg-red-600 p-4 flex justify-between items-center text-white shrink-0",children:[f.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[f.jsx(Bg,{size:20}),"Support Chat"]}),f.jsx("button",{onClick:()=>t(!1),className:"hover:bg-red-700 p-1 rounded transition-colors",children:f.jsx(Ah,{size:20})})]}),f.jsx("div",{className:"flex-1 p-4 overflow-y-auto bg-gray-50",children:f.jsxs("div",{className:"flex flex-col gap-3",children:[r.map(Y=>f.jsx("div",{className:`max-w-[80%] p-3 rounded-lg text-sm whitespace-pre-wrap ${Y.sender==="user"?"bg-red-600 text-white self-end rounded-br-none":"bg-white border border-gray-200 text-gray-800 self-start rounded-bl-none shadow-sm"}`,children:Y.text},Y.id)),f.jsx("div",{ref:A})]})}),f.jsx("div",{className:"p-3 bg-white border-t border-gray-200",children:f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",value:u,onChange:Y=>d(Y.target.value),onKeyPress:K,placeholder:"Type a message...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm"}),f.jsx("button",{onClick:G,disabled:!u.trim(),className:"bg-red-600 text-white p-2 rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f.jsx(UC,{size:18})})]})})]}),!e&&f.jsx("button",{onClick:()=>t(!0),className:"bg-red-600 hover:bg-red-700 text-white p-4 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 flex items-center justify-center",children:f.jsx(Bg,{size:24})})]})};function T3(){return f.jsx(p4,{children:f.jsx(j2,{children:f.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans text-slate-900",children:[f.jsx(g4,{}),f.jsx("main",{children:f.jsxs(c2,{children:[f.jsx(Es,{path:"/",element:f.jsx(_4,{})}),f.jsx(Es,{path:"/dashboard",element:f.jsx(E5,{})}),f.jsx(Es,{path:"/search",element:f.jsx(Y5,{})}),f.jsx(Es,{path:"/camps",element:f.jsx(f3,{})}),f.jsx(Es,{path:"/login",element:f.jsx($5,{})}),f.jsx(Es,{path:"/register",element:f.jsx(Q5,{})}),f.jsx(Es,{path:"/settings",element:f.jsx(w3,{})}),f.jsx(Es,{path:"/test-admin",element:f.jsx(W5,{})}),f.jsx(Es,{path:"/organizer",element:f.jsx(u3,{})}),f.jsx(Es,{path:"/hospital-signup",element:f.jsx(_3,{})}),f.jsx(Es,{path:"/hospital-dashboard",element:f.jsx(y3,{})})]})}),f.jsx(E3,{})]})})})}dN.createRoot(document.getElementById("root")).render(f.jsx(k.StrictMode,{children:f.jsx(T3,{})}));
